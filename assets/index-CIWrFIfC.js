(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const p of c)if(p.type==="childList")for(const m of p.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function o(c){const p={};return c.integrity&&(p.integrity=c.integrity),c.referrerPolicy&&(p.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?p.credentials="include":c.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function r(c){if(c.ep)return;c.ep=!0;const p=o(c);fetch(c.href,p)}})();var ko=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function py(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var jf={exports:{}},oa={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eg;function R0(){if(Eg)return oa;Eg=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function o(r,c,p){var m=null;if(p!==void 0&&(m=""+p),c.key!==void 0&&(m=""+c.key),"key"in c){p={};for(var T in c)T!=="key"&&(p[T]=c[T])}else p=c;return c=p.ref,{$$typeof:i,type:r,key:m,ref:c!==void 0?c:null,props:p}}return oa.Fragment=n,oa.jsx=o,oa.jsxs=o,oa}var Cg;function b0(){return Cg||(Cg=1,jf.exports=R0()),jf.exports}var U=b0(),ed={exports:{}},we={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function M0(){if(Ag)return we;Ag=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),p=Symbol.for("react.consumer"),m=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),S=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),w=Symbol.iterator;function D(G){return G===null||typeof G!="object"?null:(G=w&&G[w]||G["@@iterator"],typeof G=="function"?G:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,Y={};function $(G,te,de){this.props=G,this.context=te,this.refs=Y,this.updater=de||B}$.prototype.isReactComponent={},$.prototype.setState=function(G,te){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,te,"setState")},$.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function ae(){}ae.prototype=$.prototype;function oe(G,te,de){this.props=G,this.context=te,this.refs=Y,this.updater=de||B}var ue=oe.prototype=new ae;ue.constructor=oe,Q(ue,$.prototype),ue.isPureReactComponent=!0;var ie=Array.isArray;function V(){}var ce={H:null,A:null,T:null,S:null},xe=Object.prototype.hasOwnProperty;function ye(G,te,de){var he=de.ref;return{$$typeof:i,type:G,key:te,ref:he!==void 0?he:null,props:de}}function Ie(G,te){return ye(G.type,te,G.props)}function Ne(G){return typeof G=="object"&&G!==null&&G.$$typeof===i}function Xe(G){var te={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(de){return te[de]})}var R=/\/+/g;function Ve(G,te){return typeof G=="object"&&G!==null&&G.key!=null?Xe(""+G.key):te.toString(36)}function gt(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(V,V):(G.status="pending",G.then(function(te){G.status==="pending"&&(G.status="fulfilled",G.value=te)},function(te){G.status==="pending"&&(G.status="rejected",G.reason=te)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function O(G,te,de,he,Me){var Le=typeof G;(Le==="undefined"||Le==="boolean")&&(G=null);var ze=!1;if(G===null)ze=!0;else switch(Le){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(G.$$typeof){case i:case n:ze=!0;break;case C:return ze=G._init,O(ze(G._payload),te,de,he,Me)}}if(ze)return Me=Me(G),ze=he===""?"."+Ve(G,0):he,ie(Me)?(de="",ze!=null&&(de=ze.replace(R,"$&/")+"/"),O(Me,te,de,"",function(Qi){return Qi})):Me!=null&&(Ne(Me)&&(Me=Ie(Me,de+(Me.key==null||G&&G.key===Me.key?"":(""+Me.key).replace(R,"$&/")+"/")+ze)),te.push(Me)),1;ze=0;var Ut=he===""?".":he+":";if(ie(G))for(var lt=0;lt<G.length;lt++)he=G[lt],Le=Ut+Ve(he,lt),ze+=O(he,te,de,Le,Me);else if(lt=D(G),typeof lt=="function")for(G=lt.call(G),lt=0;!(he=G.next()).done;)he=he.value,Le=Ut+Ve(he,lt++),ze+=O(he,te,de,Le,Me);else if(Le==="object"){if(typeof G.then=="function")return O(gt(G),te,de,he,Me);throw te=String(G),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return ze}function re(G,te,de){if(G==null)return G;var he=[],Me=0;return O(G,he,"","",function(Le){return te.call(de,Le,Me++)}),he}function Te(G){if(G._status===-1){var te=G._result;te=te(),te.then(function(de){(G._status===0||G._status===-1)&&(G._status=1,G._result=de)},function(de){(G._status===0||G._status===-1)&&(G._status=2,G._result=de)}),G._status===-1&&(G._status=0,G._result=te)}if(G._status===1)return G._result.default;throw G._result}var fe=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},Be={map:re,forEach:function(G,te,de){re(G,function(){te.apply(this,arguments)},de)},count:function(G){var te=0;return re(G,function(){te++}),te},toArray:function(G){return re(G,function(te){return te})||[]},only:function(G){if(!Ne(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return we.Activity=M,we.Children=Be,we.Component=$,we.Fragment=o,we.Profiler=c,we.PureComponent=oe,we.StrictMode=r,we.Suspense=E,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ce,we.__COMPILER_RUNTIME={__proto__:null,c:function(G){return ce.H.useMemoCache(G)}},we.cache=function(G){return function(){return G.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(G,te,de){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var he=Q({},G.props),Me=G.key;if(te!=null)for(Le in te.key!==void 0&&(Me=""+te.key),te)!xe.call(te,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&te.ref===void 0||(he[Le]=te[Le]);var Le=arguments.length-2;if(Le===1)he.children=de;else if(1<Le){for(var ze=Array(Le),Ut=0;Ut<Le;Ut++)ze[Ut]=arguments[Ut+2];he.children=ze}return ye(G.type,Me,he)},we.createContext=function(G){return G={$$typeof:m,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:p,_context:G},G},we.createElement=function(G,te,de){var he,Me={},Le=null;if(te!=null)for(he in te.key!==void 0&&(Le=""+te.key),te)xe.call(te,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Me[he]=te[he]);var ze=arguments.length-2;if(ze===1)Me.children=de;else if(1<ze){for(var Ut=Array(ze),lt=0;lt<ze;lt++)Ut[lt]=arguments[lt+2];Me.children=Ut}if(G&&G.defaultProps)for(he in ze=G.defaultProps,ze)Me[he]===void 0&&(Me[he]=ze[he]);return ye(G,Le,Me)},we.createRef=function(){return{current:null}},we.forwardRef=function(G){return{$$typeof:T,render:G}},we.isValidElement=Ne,we.lazy=function(G){return{$$typeof:C,_payload:{_status:-1,_result:G},_init:Te}},we.memo=function(G,te){return{$$typeof:S,type:G,compare:te===void 0?null:te}},we.startTransition=function(G){var te=ce.T,de={};ce.T=de;try{var he=G(),Me=ce.S;Me!==null&&Me(de,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(V,fe)}catch(Le){fe(Le)}finally{te!==null&&de.types!==null&&(te.types=de.types),ce.T=te}},we.unstable_useCacheRefresh=function(){return ce.H.useCacheRefresh()},we.use=function(G){return ce.H.use(G)},we.useActionState=function(G,te,de){return ce.H.useActionState(G,te,de)},we.useCallback=function(G,te){return ce.H.useCallback(G,te)},we.useContext=function(G){return ce.H.useContext(G)},we.useDebugValue=function(){},we.useDeferredValue=function(G,te){return ce.H.useDeferredValue(G,te)},we.useEffect=function(G,te){return ce.H.useEffect(G,te)},we.useEffectEvent=function(G){return ce.H.useEffectEvent(G)},we.useId=function(){return ce.H.useId()},we.useImperativeHandle=function(G,te,de){return ce.H.useImperativeHandle(G,te,de)},we.useInsertionEffect=function(G,te){return ce.H.useInsertionEffect(G,te)},we.useLayoutEffect=function(G,te){return ce.H.useLayoutEffect(G,te)},we.useMemo=function(G,te){return ce.H.useMemo(G,te)},we.useOptimistic=function(G,te){return ce.H.useOptimistic(G,te)},we.useReducer=function(G,te,de){return ce.H.useReducer(G,te,de)},we.useRef=function(G){return ce.H.useRef(G)},we.useState=function(G){return ce.H.useState(G)},we.useSyncExternalStore=function(G,te,de){return ce.H.useSyncExternalStore(G,te,de)},we.useTransition=function(){return ce.H.useTransition()},we.version="19.2.4",we}var Rg;function Dd(){return Rg||(Rg=1,ed.exports=M0()),ed.exports}var st=Dd();const gy=py(st);var td={exports:{}},sa={},nd={exports:{}},id={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg;function w0(){return bg||(bg=1,(function(i){function n(O,re){var Te=O.length;O.push(re);e:for(;0<Te;){var fe=Te-1>>>1,Be=O[fe];if(0<c(Be,re))O[fe]=re,O[Te]=Be,Te=fe;else break e}}function o(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var re=O[0],Te=O.pop();if(Te!==re){O[0]=Te;e:for(var fe=0,Be=O.length,G=Be>>>1;fe<G;){var te=2*(fe+1)-1,de=O[te],he=te+1,Me=O[he];if(0>c(de,Te))he<Be&&0>c(Me,de)?(O[fe]=Me,O[he]=Te,fe=he):(O[fe]=de,O[te]=Te,fe=te);else if(he<Be&&0>c(Me,Te))O[fe]=Me,O[he]=Te,fe=he;else break e}}return re}function c(O,re){var Te=O.sortIndex-re.sortIndex;return Te!==0?Te:O.id-re.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var p=performance;i.unstable_now=function(){return p.now()}}else{var m=Date,T=m.now();i.unstable_now=function(){return m.now()-T}}var E=[],S=[],C=1,M=null,w=3,D=!1,B=!1,Q=!1,Y=!1,$=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;function ue(O){for(var re=o(S);re!==null;){if(re.callback===null)r(S);else if(re.startTime<=O)r(S),re.sortIndex=re.expirationTime,n(E,re);else break;re=o(S)}}function ie(O){if(Q=!1,ue(O),!B)if(o(E)!==null)B=!0,V||(V=!0,Xe());else{var re=o(S);re!==null&&gt(ie,re.startTime-O)}}var V=!1,ce=-1,xe=5,ye=-1;function Ie(){return Y?!0:!(i.unstable_now()-ye<xe)}function Ne(){if(Y=!1,V){var O=i.unstable_now();ye=O;var re=!0;try{e:{B=!1,Q&&(Q=!1,ae(ce),ce=-1),D=!0;var Te=w;try{t:{for(ue(O),M=o(E);M!==null&&!(M.expirationTime>O&&Ie());){var fe=M.callback;if(typeof fe=="function"){M.callback=null,w=M.priorityLevel;var Be=fe(M.expirationTime<=O);if(O=i.unstable_now(),typeof Be=="function"){M.callback=Be,ue(O),re=!0;break t}M===o(E)&&r(E),ue(O)}else r(E);M=o(E)}if(M!==null)re=!0;else{var G=o(S);G!==null&&gt(ie,G.startTime-O),re=!1}}break e}finally{M=null,w=Te,D=!1}re=void 0}}finally{re?Xe():V=!1}}}var Xe;if(typeof oe=="function")Xe=function(){oe(Ne)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Ve=R.port2;R.port1.onmessage=Ne,Xe=function(){Ve.postMessage(null)}}else Xe=function(){$(Ne,0)};function gt(O,re){ce=$(function(){O(i.unstable_now())},re)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(O){O.callback=null},i.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xe=0<O?Math.floor(1e3/O):5},i.unstable_getCurrentPriorityLevel=function(){return w},i.unstable_next=function(O){switch(w){case 1:case 2:case 3:var re=3;break;default:re=w}var Te=w;w=re;try{return O()}finally{w=Te}},i.unstable_requestPaint=function(){Y=!0},i.unstable_runWithPriority=function(O,re){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Te=w;w=O;try{return re()}finally{w=Te}},i.unstable_scheduleCallback=function(O,re,Te){var fe=i.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?fe+Te:fe):Te=fe,O){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=Te+Be,O={id:C++,callback:re,priorityLevel:O,startTime:Te,expirationTime:Be,sortIndex:-1},Te>fe?(O.sortIndex=Te,n(S,O),o(E)===null&&O===o(S)&&(Q?(ae(ce),ce=-1):Q=!0,gt(ie,Te-fe))):(O.sortIndex=Be,n(E,O),B||D||(B=!0,V||(V=!0,Xe()))),O},i.unstable_shouldYield=Ie,i.unstable_wrapCallback=function(O){var re=w;return function(){var Te=w;w=re;try{return O.apply(this,arguments)}finally{w=Te}}}})(id)),id}var Mg;function x0(){return Mg||(Mg=1,nd.exports=w0()),nd.exports}var od={exports:{}},Yt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wg;function I0(){if(wg)return Yt;wg=1;var i=Dd();function n(E){var S="https://react.dev/errors/"+E;if(1<arguments.length){S+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)S+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+E+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var r={d:{f:o,r:function(){throw Error(n(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},c=Symbol.for("react.portal");function p(E,S,C){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:M==null?null:""+M,children:E,containerInfo:S,implementation:C}}var m=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function T(E,S){if(E==="font")return"";if(typeof S=="string")return S==="use-credentials"?S:""}return Yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Yt.createPortal=function(E,S){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S||S.nodeType!==1&&S.nodeType!==9&&S.nodeType!==11)throw Error(n(299));return p(E,S,null,C)},Yt.flushSync=function(E){var S=m.T,C=r.p;try{if(m.T=null,r.p=2,E)return E()}finally{m.T=S,r.p=C,r.d.f()}},Yt.preconnect=function(E,S){typeof E=="string"&&(S?(S=S.crossOrigin,S=typeof S=="string"?S==="use-credentials"?S:"":void 0):S=null,r.d.C(E,S))},Yt.prefetchDNS=function(E){typeof E=="string"&&r.d.D(E)},Yt.preinit=function(E,S){if(typeof E=="string"&&S&&typeof S.as=="string"){var C=S.as,M=T(C,S.crossOrigin),w=typeof S.integrity=="string"?S.integrity:void 0,D=typeof S.fetchPriority=="string"?S.fetchPriority:void 0;C==="style"?r.d.S(E,typeof S.precedence=="string"?S.precedence:void 0,{crossOrigin:M,integrity:w,fetchPriority:D}):C==="script"&&r.d.X(E,{crossOrigin:M,integrity:w,fetchPriority:D,nonce:typeof S.nonce=="string"?S.nonce:void 0})}},Yt.preinitModule=function(E,S){if(typeof E=="string")if(typeof S=="object"&&S!==null){if(S.as==null||S.as==="script"){var C=T(S.as,S.crossOrigin);r.d.M(E,{crossOrigin:C,integrity:typeof S.integrity=="string"?S.integrity:void 0,nonce:typeof S.nonce=="string"?S.nonce:void 0})}}else S==null&&r.d.M(E)},Yt.preload=function(E,S){if(typeof E=="string"&&typeof S=="object"&&S!==null&&typeof S.as=="string"){var C=S.as,M=T(C,S.crossOrigin);r.d.L(E,C,{crossOrigin:M,integrity:typeof S.integrity=="string"?S.integrity:void 0,nonce:typeof S.nonce=="string"?S.nonce:void 0,type:typeof S.type=="string"?S.type:void 0,fetchPriority:typeof S.fetchPriority=="string"?S.fetchPriority:void 0,referrerPolicy:typeof S.referrerPolicy=="string"?S.referrerPolicy:void 0,imageSrcSet:typeof S.imageSrcSet=="string"?S.imageSrcSet:void 0,imageSizes:typeof S.imageSizes=="string"?S.imageSizes:void 0,media:typeof S.media=="string"?S.media:void 0})}},Yt.preloadModule=function(E,S){if(typeof E=="string")if(S){var C=T(S.as,S.crossOrigin);r.d.m(E,{as:typeof S.as=="string"&&S.as!=="script"?S.as:void 0,crossOrigin:C,integrity:typeof S.integrity=="string"?S.integrity:void 0})}else r.d.m(E)},Yt.requestFormReset=function(E){r.d.r(E)},Yt.unstable_batchedUpdates=function(E,S){return E(S)},Yt.useFormState=function(E,S,C){return m.H.useFormState(E,S,C)},Yt.useFormStatus=function(){return m.H.useHostTransitionStatus()},Yt.version="19.2.4",Yt}var xg;function my(){if(xg)return od.exports;xg=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),od.exports=I0(),od.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig;function N0(){if(Ig)return sa;Ig=1;var i=x0(),n=Dd(),o=my();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function p(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function T(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function E(e){if(p(e)!==e)throw Error(r(188))}function S(e){var t=e.alternate;if(!t){if(t=p(e),t===null)throw Error(r(188));return t!==e?null:e}for(var s=e,u=t;;){var g=s.return;if(g===null)break;var y=g.alternate;if(y===null){if(u=g.return,u!==null){s=u;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===s)return E(g),e;if(y===u)return E(g),t;y=y.sibling}throw Error(r(188))}if(s.return!==u.return)s=g,u=y;else{for(var b=!1,x=g.child;x;){if(x===s){b=!0,s=g,u=y;break}if(x===u){b=!0,u=g,s=y;break}x=x.sibling}if(!b){for(x=y.child;x;){if(x===s){b=!0,s=y,u=g;break}if(x===u){b=!0,u=y,s=g;break}x=x.sibling}if(!b)throw Error(r(189))}}if(s.alternate!==u)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?e:t}function C(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=C(e),t!==null)return t;e=e.sibling}return null}var M=Object.assign,w=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),xe=Symbol.for("react.lazy"),ye=Symbol.for("react.activity"),Ie=Symbol.for("react.memo_cache_sentinel"),Ne=Symbol.iterator;function Xe(e){return e===null||typeof e!="object"?null:(e=Ne&&e[Ne]||e["@@iterator"],typeof e=="function"?e:null)}var R=Symbol.for("react.client.reference");function Ve(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===R?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Q:return"Fragment";case $:return"Profiler";case Y:return"StrictMode";case ie:return"Suspense";case V:return"SuspenseList";case ye:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case B:return"Portal";case oe:return e.displayName||"Context";case ae:return(e._context.displayName||"Context")+".Consumer";case ue:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ce:return t=e.displayName||null,t!==null?t:Ve(e.type)||"Memo";case xe:t=e._payload,e=e._init;try{return Ve(e(t))}catch{}}return null}var gt=Array.isArray,O=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},fe=[],Be=-1;function G(e){return{current:e}}function te(e){0>Be||(e.current=fe[Be],fe[Be]=null,Be--)}function de(e,t){Be++,fe[Be]=e.current,e.current=t}var he=G(null),Me=G(null),Le=G(null),ze=G(null);function Ut(e,t){switch(de(Le,t),de(Me,e),de(he,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Jp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Jp(t),e=Yp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}te(he),de(he,e)}function lt(){te(he),te(Me),te(Le)}function Qi(e){e.memoizedState!==null&&de(ze,e);var t=he.current,s=Yp(t,e.type);t!==s&&(de(Me,e),de(he,s))}function qo(e){Me.current===e&&(te(he),te(Me)),ze.current===e&&(te(ze),ea._currentValue=Te)}var Ms,ha;function pn(e){if(Ms===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Ms=t&&t[1]||"",ha=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ms+e+ha}var ws=!1;function xs(e,t){if(!e||ws)return"";ws=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(t){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(K){var J=K}Reflect.construct(e,[],ne)}else{try{ne.call()}catch(K){J=K}e.call(ne.prototype)}}else{try{throw Error()}catch(K){J=K}(ne=e())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(K){if(K&&J&&typeof K.stack=="string")return[K.stack,J.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),b=y[0],x=y[1];if(b&&x){var L=b.split(`
`),F=x.split(`
`);for(g=u=0;u<L.length&&!L[u].includes("DetermineComponentFrameRoot");)u++;for(;g<F.length&&!F[g].includes("DetermineComponentFrameRoot");)g++;if(u===L.length||g===F.length)for(u=L.length-1,g=F.length-1;1<=u&&0<=g&&L[u]!==F[g];)g--;for(;1<=u&&0<=g;u--,g--)if(L[u]!==F[g]){if(u!==1||g!==1)do if(u--,g--,0>g||L[u]!==F[g]){var j=`
`+L[u].replace(" at new "," at ");return e.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",e.displayName)),j}while(1<=u&&0<=g);break}}}finally{ws=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?pn(s):""}function hc(e,t){switch(e.tag){case 26:case 27:case 5:return pn(e.type);case 16:return pn("Lazy");case 13:return e.child!==t&&t!==null?pn("Suspense Fallback"):pn("Suspense");case 19:return pn("SuspenseList");case 0:case 15:return xs(e.type,!1);case 11:return xs(e.type.render,!1);case 1:return xs(e.type,!0);case 31:return pn("Activity");default:return""}}function Dr(e){try{var t="",s=null;do t+=hc(e,s),s=e,e=e.return;while(e);return t}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Bo=Object.prototype.hasOwnProperty,mi=i.unstable_scheduleCallback,Vo=i.unstable_cancelCallback,Is=i.unstable_shouldYield,Ur=i.unstable_requestPaint,Oe=i.unstable_now,pa=i.unstable_getCurrentPriorityLevel,Lr=i.unstable_ImmediatePriority,zo=i.unstable_UserBlockingPriority,Fo=i.unstable_NormalPriority,ga=i.unstable_LowPriority,Ht=i.unstable_IdlePriority,Et=i.log,gn=i.unstable_setDisableYieldValue,yi=null,qt=null;function Gn(e){if(typeof Et=="function"&&gn(e),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(yi,e)}catch{}}var Bt=Math.clz32?Math.clz32:ma,kr=Math.log,Pr=Math.LN2;function ma(e){return e>>>=0,e===0?32:31-(kr(e)/Pr|0)|0}var Jo=256,vi=262144,Yo=4194304;function An(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function mt(e,t,s){var u=e.pendingLanes;if(u===0)return 0;var g=0,y=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var x=u&134217727;return x!==0?(u=x&~y,u!==0?g=An(u):(b&=x,b!==0?g=An(b):s||(s=x&~e,s!==0&&(g=An(s))))):(x=u&~y,x!==0?g=An(x):b!==0?g=An(b):s||(s=u&~e,s!==0&&(g=An(s)))),g===0?0:t!==0&&t!==g&&(t&y)===0&&(y=g&-g,s=t&-t,y>=s||y===32&&(s&4194048)!==0)?t:g}function Xi(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function pc(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gr(){var e=Yo;return Yo<<=1,(Yo&62914560)===0&&(Yo=4194304),e}function Hr(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Lt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function gc(e,t,s,u,g,y){var b=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var x=e.entanglements,L=e.expirationTimes,F=e.hiddenUpdates;for(s=b&~s;0<s;){var j=31-Bt(s),ne=1<<j;x[j]=0,L[j]=-1;var J=F[j];if(J!==null)for(F[j]=null,j=0;j<J.length;j++){var K=J[j];K!==null&&(K.lane&=-536870913)}s&=~ne}u!==0&&ya(e,u,0),y!==0&&g===0&&e.tag!==0&&(e.suspendedLanes|=y&~(b&~t))}function ya(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var u=31-Bt(t);e.entangledLanes|=t,e.entanglements[u]=e.entanglements[u]|1073741824|s&261930}function qr(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var u=31-Bt(s),g=1<<u;g&t|e[u]&t&&(e[u]|=t),s&=~g}}function Br(e,t){var s=t&-t;return s=(s&42)!==0?1:Ns(s),(s&(e.suspendedLanes|t))!==0?0:s}function Ns(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Os(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Vr(){var e=re.p;return e!==0?e:(e=window.event,e===void 0?32:gg(e.type))}function va(e,t){var s=re.p;try{return re.p=e,t()}finally{re.p=s}}var Hn=Math.random().toString(36).slice(2),bt="__reactFiber$"+Hn,It="__reactProps$"+Hn,Wi="__reactContainer$"+Hn,zr="__reactEvents$"+Hn,mc="__reactListeners$"+Hn,Ds="__reactHandles$"+Hn,Fr="__reactResources$"+Hn,Zi="__reactMarker$"+Hn;function Jr(e){delete e[bt],delete e[It],delete e[zr],delete e[mc],delete e[Ds]}function $i(e){var t=e[bt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Wi]||s[bt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=jp(e);e!==null;){if(s=e[bt])return s;e=jp(e)}return t}e=s,s=e.parentNode}return null}function Se(e){if(e=e[bt]||e[Wi]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ko(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(r(33))}function ji(e){var t=e[Fr];return t||(t=e[Fr]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function yt(e){e[Zi]=!0}var Yr=new Set,at={};function $n(e,t){eo(e,t),eo(e+"Capture",t)}function eo(e,t){for(at[e]=t,e=0;e<t.length;e++)Yr.add(t[e])}var Us=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ls={},Ta={};function yc(e){return Bo.call(Ta,e)?!0:Bo.call(Ls,e)?!1:Us.test(e)?Ta[e]=!0:(Ls[e]=!0,!1)}function Qo(e,t,s){if(yc(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var u=t.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function ks(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function Rn(e,t,s,u){if(u===null)e.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+u)}}function Qt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Sa(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _a(e,t,s){var u=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return g.call(this)},set:function(b){s=""+b,y.call(this,b)}}),Object.defineProperty(e,t,{enumerable:u.enumerable}),{getValue:function(){return s},setValue:function(b){s=""+b},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Kr(e){if(!e._valueTracker){var t=Sa(e)?"checked":"value";e._valueTracker=_a(e,t,""+e[t])}}function Ea(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),u="";return e&&(u=Sa(e)?e.checked?"true":"false":e.value),e=u,e!==s?(t.setValue(e),!0):!1}function Ps(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var vc=/[\n"\\]/g;function ht(e){return e.replace(vc,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Xo(e,t,s,u,g,y,b,x){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),t!=null?b==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Qt(t)):e.value!==""+Qt(t)&&(e.value=""+Qt(t)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),t!=null?Qr(e,b,Qt(t)):s!=null?Qr(e,b,Qt(s)):u!=null&&e.removeAttribute("value"),g==null&&y!=null&&(e.defaultChecked=!!y),g!=null&&(e.checked=g&&typeof g!="function"&&typeof g!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.name=""+Qt(x):e.removeAttribute("name")}function Ti(e,t,s,u,g,y,b,x){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.type=y),t!=null||s!=null){if(!(y!=="submit"&&y!=="reset"||t!=null)){Kr(e);return}s=s!=null?""+Qt(s):"",t=t!=null?""+Qt(t):s,x||t===e.value||(e.value=t),e.defaultValue=t}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,e.checked=x?e.checked:!!u,e.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),Kr(e)}function Qr(e,t,s){t==="number"&&Ps(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function to(e,t,s,u){if(e=e.options,t){t={};for(var g=0;g<s.length;g++)t["$"+s[g]]=!0;for(s=0;s<e.length;s++)g=t.hasOwnProperty("$"+e[s].value),e[s].selected!==g&&(e[s].selected=g),g&&u&&(e[s].defaultSelected=!0)}else{for(s=""+Qt(s),t=null,g=0;g<e.length;g++){if(e[g].value===s){e[g].selected=!0,u&&(e[g].defaultSelected=!0);return}t!==null||e[g].disabled||(t=e[g])}t!==null&&(t.selected=!0)}}function Gs(e,t,s){if(t!=null&&(t=""+Qt(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+Qt(s):""}function Ca(e,t,s,u){if(t==null){if(u!=null){if(s!=null)throw Error(r(92));if(gt(u)){if(1<u.length)throw Error(r(93));u=u[0]}s=u}s==null&&(s=""),t=s}s=Qt(t),e.defaultValue=s,u=e.textContent,u===s&&u!==""&&u!==null&&(e.value=u),Kr(e)}function jn(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Tc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vt(e,t,s){var u=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?u?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":u?e.setProperty(t,s):typeof s!="number"||s===0||Tc.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function Ee(e,t,s){if(t!=null&&typeof t!="object")throw Error(r(62));if(e=e.style,s!=null){for(var u in s)!s.hasOwnProperty(u)||t!=null&&t.hasOwnProperty(u)||(u.indexOf("--")===0?e.setProperty(u,""):u==="float"?e.cssFloat="":e[u]="");for(var g in t)u=t[g],t.hasOwnProperty(g)&&s[g]!==u&&vt(e,g,u)}else for(var y in t)t.hasOwnProperty(y)&&vt(e,y,t[y])}function Hs(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wo(e){return Sc.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function qn(){}var qs=null;function Xr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Si=null,ei=null;function Wr(e){var t=Se(e);if(t&&(e=t.stateNode)){var s=e[It]||null;e:switch(e=t.stateNode,t.type){case"input":if(Xo(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ht(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var u=s[t];if(u!==e&&u.form===e.form){var g=u[It]||null;if(!g)throw Error(r(90));Xo(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(t=0;t<s.length;t++)u=s[t],u.form===e.form&&Ea(u)}break e;case"textarea":Gs(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&to(e,!!s.multiple,t,!1)}}}var Zo=!1;function Zr(e,t,s){if(Zo)return e(t,s);Zo=!0;try{var u=e(t);return u}finally{if(Zo=!1,(Si!==null||ei!==null)&&(Cu(),Si&&(t=Si,e=ei,ei=Si=null,Wr(t),e)))for(t=0;t<e.length;t++)Wr(e[t])}}function _i(e,t){var s=e.stateNode;if(s===null)return null;var u=s[It]||null;if(u===null)return null;s=u[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(r(231,t,typeof s));return s}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),no=!1;if(bn)try{var ti={};Object.defineProperty(ti,"passive",{get:function(){no=!0}}),window.addEventListener("test",ti,ti),window.removeEventListener("test",ti,ti)}catch{no=!1}var Xt=null,ni=null,$o=null;function $r(){if($o)return $o;var e,t=ni,s=t.length,u,g="value"in Xt?Xt.value:Xt.textContent,y=g.length;for(e=0;e<s&&t[e]===g[e];e++);var b=s-e;for(u=1;u<=b&&t[s-u]===g[y-u];u++);return $o=g.slice(e,1<u?1-u:void 0)}function Bs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bn(){return!0}function jr(){return!1}function zt(e){function t(s,u,g,y,b){this._reactName=s,this._targetInst=g,this.type=u,this.nativeEvent=y,this.target=b,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(s=e[x],this[x]=s?s(y):y[x]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Bn:jr,this.isPropagationStopped=jr,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Bn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Bn)},persist:function(){},isPersistent:Bn}),t}var Ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vs=zt(Ei),je=M({},Ei,{view:0,detail:0}),_c=zt(je),el,tl,jo,es=M({},je,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jo&&(jo&&e.type==="mousemove"?(el=e.screenX-jo.screenX,tl=e.screenY-jo.screenY):tl=el=0,jo=e),el)},movementY:function(e){return"movementY"in e?e.movementY:tl}}),Aa=zt(es),mn=M({},es,{dataTransfer:0}),Ra=zt(mn),Ec=M({},je,{relatedTarget:0}),io=zt(Ec),Cc=M({},Ei,{animationName:0,elapsedTime:0,pseudoElement:0}),Ac=zt(Cc),Rc=M({},Ei,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bc=zt(Rc),Mc=M({},Ei,{data:0}),nl=zt(Mc),ba={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ma(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xc[e])?!!t[e]:!1}function zs(){return Ma}var ts=M({},je,{key:function(e){if(e.key){var t=ba[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zs,charCode:function(e){return e.type==="keypress"?Bs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ii=zt(ts),Ic=M({},es,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wa=zt(Ic),xa=M({},je,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zs}),Nc=zt(xa),Oc=M({},Ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ia=zt(Oc),Dc=M({},es,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Na=zt(Dc),Oa=M({},Ei,{newState:0,oldState:0}),Da=zt(Oa),Ua=[9,13,27,32],Fs=bn&&"CompositionEvent"in window,oo=null;bn&&"documentMode"in document&&(oo=document.documentMode);var ns=bn&&"TextEvent"in window&&!oo,yn=bn&&(!Fs||oo&&8<oo&&11>=oo),La=" ",ka=!1;function Pa(e,t){switch(e){case"keyup":return Ua.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ga(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var so=!1;function Uc(e,t){switch(e){case"compositionend":return Ga(t);case"keypress":return t.which!==32?null:(ka=!0,La);case"textInput":return e=t.data,e===La&&ka?null:e;default:return null}}function Ha(e,t){if(so)return e==="compositionend"||!Fs&&Pa(e,t)?(e=$r(),$o=ni=Xt=null,so=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yn&&t.locale!=="ko"?null:t.data;default:return null}}var Lc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function il(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Lc[e.type]:t==="textarea"}function qa(e,t,s,u){Si?ei?ei.push(u):ei=[u]:Si=u,t=Iu(t,"onChange"),0<t.length&&(s=new Vs("onChange","change",null,s,u),e.push({event:s,listeners:t}))}var is=null,ro=null;function Ba(e){Hp(e,0)}function os(e){var t=Ko(e);if(Ea(t))return e}function ol(e,t){if(e==="change")return t}var sl=!1;if(bn){var rl;if(bn){var ll="oninput"in document;if(!ll){var Va=document.createElement("div");Va.setAttribute("oninput","return;"),ll=typeof Va.oninput=="function"}rl=ll}else rl=!1;sl=rl&&(!document.documentMode||9<document.documentMode)}function al(){is&&(is.detachEvent("onpropertychange",Ci),ro=is=null)}function Ci(e){if(e.propertyName==="value"&&os(ro)){var t=[];qa(t,ro,e,Xr(e)),Zr(Ba,t)}}function ss(e,t,s){e==="focusin"?(al(),is=t,ro=s,is.attachEvent("onpropertychange",Ci)):e==="focusout"&&al()}function za(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return os(ro)}function Fa(e,t){if(e==="click")return os(t)}function Ja(e,t){if(e==="input"||e==="change")return os(t)}function Ya(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wt=typeof Object.is=="function"?Object.is:Ya;function Ai(e,t){if(Wt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),u=Object.keys(t);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var g=s[u];if(!Bo.call(t,g)||!Wt(e[g],t[g]))return!1}return!0}function Ka(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rs(e,t){var s=Ka(e);e=0;for(var u;s;){if(s.nodeType===3){if(u=e+s.textContent.length,e<=t&&u>=t)return{node:s,offset:t-e};e=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Ka(s)}}function Qa(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qa(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Js(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ps(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Ps(e.document)}return t}function Ys(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Ft=bn&&"documentMode"in document&&11>=document.documentMode,oi=null,ls=null,as=null,ul=!1;function Ks(e,t,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ul||oi==null||oi!==Ps(u)||(u=oi,"selectionStart"in u&&Ys(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),as&&Ai(as,u)||(as=u,u=Iu(ls,"onSelect"),0<u.length&&(t=new Vs("onSelect","select",null,t,s),e.push({event:t,listeners:u}),t.target=oi)))}function si(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var lo={animationend:si("Animation","AnimationEnd"),animationiteration:si("Animation","AnimationIteration"),animationstart:si("Animation","AnimationStart"),transitionrun:si("Transition","TransitionRun"),transitionstart:si("Transition","TransitionStart"),transitioncancel:si("Transition","TransitionCancel"),transitionend:si("Transition","TransitionEnd")},cl={},fl={};bn&&(fl=document.createElement("div").style,"AnimationEvent"in window||(delete lo.animationend.animation,delete lo.animationiteration.animation,delete lo.animationstart.animation),"TransitionEvent"in window||delete lo.transitionend.transition);function vn(e){if(cl[e])return cl[e];if(!lo[e])return e;var t=lo[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in fl)return cl[e]=t[s];return e}var Xa=vn("animationend"),dl=vn("animationiteration"),ri=vn("animationstart"),hl=vn("transitionrun"),kc=vn("transitionstart"),Wa=vn("transitioncancel"),pl=vn("transitionend"),Za=new Map,gl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gl.push("scrollEnd");function Tn(e,t){Za.set(e,t),$n(t,[e])}var Ri=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Tt=[],ao=0,ml=0;function Mn(){for(var e=ao,t=ml=ao=0;t<e;){var s=Tt[t];Tt[t++]=null;var u=Tt[t];Tt[t++]=null;var g=Tt[t];Tt[t++]=null;var y=Tt[t];if(Tt[t++]=null,u!==null&&g!==null){var b=u.pending;b===null?g.next=g:(g.next=b.next,b.next=g),u.pending=g}y!==0&&Mi(s,g,y)}}function Qs(e,t,s,u){Tt[ao++]=e,Tt[ao++]=t,Tt[ao++]=s,Tt[ao++]=u,ml|=u,e.lanes|=u,e=e.alternate,e!==null&&(e.lanes|=u)}function yl(e,t,s,u){return Qs(e,t,s,u),Mt(e)}function bi(e,t){return Qs(e,null,null,t),Mt(e)}function Mi(e,t,s){e.lanes|=s;var u=e.alternate;u!==null&&(u.lanes|=s);for(var g=!1,y=e.return;y!==null;)y.childLanes|=s,u=y.alternate,u!==null&&(u.childLanes|=s),y.tag===22&&(e=y.stateNode,e===null||e._visibility&1||(g=!0)),e=y,y=y.return;return e.tag===3?(y=e.stateNode,g&&t!==null&&(g=31-Bt(s),e=y.hiddenUpdates,u=e[g],u===null?e[g]=[t]:u.push(t),t.lane=s|536870912),y):null}function Mt(e){if(50<Kl)throw Kl=0,Cf=null,Error(r(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var uo={};function vl(e,t,s,u){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wt(e,t,s,u){return new vl(e,t,s,u)}function Xs(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Sn(e,t){var s=e.alternate;return s===null?(s=wt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Ws(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Zs(e,t,s,u,g,y){var b=0;if(u=e,typeof e=="function")Xs(e)&&(b=1);else if(typeof e=="string")b=h0(e,s,he.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ye:return e=wt(31,s,t,g),e.elementType=ye,e.lanes=y,e;case Q:return wi(s.children,g,y,t);case Y:b=8,g|=24;break;case $:return e=wt(12,s,t,g|2),e.elementType=$,e.lanes=y,e;case ie:return e=wt(13,s,t,g),e.elementType=ie,e.lanes=y,e;case V:return e=wt(19,s,t,g),e.elementType=V,e.lanes=y,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case oe:b=10;break e;case ae:b=9;break e;case ue:b=11;break e;case ce:b=14;break e;case xe:b=16,u=null;break e}b=29,s=Error(r(130,e===null?"null":typeof e,"")),u=null}return t=wt(b,s,t,g),t.elementType=e,t.type=u,t.lanes=y,t}function wi(e,t,s,u){return e=wt(7,e,u,t),e.lanes=s,e}function $s(e,t,s){return e=wt(6,e,null,t),e.lanes=s,e}function $a(e){var t=wt(18,null,null,0);return t.stateNode=e,t}function Tl(e,t,s){return t=wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Sl=new WeakMap;function nn(e,t){if(typeof e=="object"&&e!==null){var s=Sl.get(e);return s!==void 0?s:(t={value:e,source:t,stack:Dr(t)},Sl.set(e,t),t)}return{value:e,source:t,stack:Dr(t)}}var co=[],fo=0,js=null,xi=0,on=[],Jt=0,li=null,wn=1,xn="";function Vn(e,t){co[fo++]=xi,co[fo++]=js,js=e,xi=t}function ja(e,t,s){on[Jt++]=wn,on[Jt++]=xn,on[Jt++]=li,li=e;var u=wn;e=xn;var g=32-Bt(u)-1;u&=~(1<<g),s+=1;var y=32-Bt(t)+g;if(30<y){var b=g-g%5;y=(u&(1<<b)-1).toString(32),u>>=b,g-=b,wn=1<<32-Bt(t)+g|s<<g|u,xn=y+e}else wn=1<<y|s<<g|u,xn=e}function er(e){e.return!==null&&(Vn(e,1),ja(e,1,0))}function _l(e){for(;e===js;)js=co[--fo],co[fo]=null,xi=co[--fo],co[fo]=null;for(;e===li;)li=on[--Jt],on[Jt]=null,xn=on[--Jt],on[Jt]=null,wn=on[--Jt],on[Jt]=null}function Zt(e,t){on[Jt++]=wn,on[Jt++]=xn,on[Jt++]=li,wn=t.id,xn=t.overflow,li=e}var St=null,We=null,De=!1,In=null,$t=!1,tr=Error(r(519));function sn(e){var t=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw us(nn(t,e)),tr}function El(e){var t=e.stateNode,s=e.type,u=e.memoizedProps;switch(t[bt]=e,t[It]=u,s){case"dialog":Pe("cancel",t),Pe("close",t);break;case"iframe":case"object":case"embed":Pe("load",t);break;case"video":case"audio":for(s=0;s<Xl.length;s++)Pe(Xl[s],t);break;case"source":Pe("error",t);break;case"img":case"image":case"link":Pe("error",t),Pe("load",t);break;case"details":Pe("toggle",t);break;case"input":Pe("invalid",t),Ti(t,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Pe("invalid",t);break;case"textarea":Pe("invalid",t),Ca(t,u.value,u.defaultValue,u.children)}s=u.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||u.suppressHydrationWarning===!0||zp(t.textContent,s)?(u.popover!=null&&(Pe("beforetoggle",t),Pe("toggle",t)),u.onScroll!=null&&Pe("scroll",t),u.onScrollEnd!=null&&Pe("scrollend",t),u.onClick!=null&&(t.onclick=qn),t=!0):t=!1,t||sn(e,!0)}function ho(e){for(St=e.return;St;)switch(St.tag){case 5:case 31:case 13:$t=!1;return;case 27:case 3:$t=!0;return;default:St=St.return}}function Nn(e){if(e!==St)return!1;if(!De)return ho(e),De=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Gf(e.type,e.memoizedProps)),s=!s),s&&We&&sn(e),ho(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));We=$p(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));We=$p(e)}else t===27?(t=We,Io(e.type)?(e=zf,zf=null,We=e):We=t):We=St?Un(e.stateNode.nextSibling):null;return!0}function zn(){We=St=null,De=!1}function po(){var e=In;return e!==null&&(dn===null?dn=e:dn.push.apply(dn,e),In=null),e}function us(e){In===null?In=[e]:In.push(e)}var cs=G(null),Nt=null,rn=null;function ai(e,t,s){de(cs,t._currentValue),t._currentValue=s}function Fn(e){e._currentValue=cs.current,te(cs)}function nr(e,t,s){for(;e!==null;){var u=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,u!==null&&(u.childLanes|=t)):u!==null&&(u.childLanes&t)!==t&&(u.childLanes|=t),e===s)break;e=e.return}}function Cl(e,t,s,u){var g=e.child;for(g!==null&&(g.return=e);g!==null;){var y=g.dependencies;if(y!==null){var b=g.child;y=y.firstContext;e:for(;y!==null;){var x=y;y=g;for(var L=0;L<t.length;L++)if(x.context===t[L]){y.lanes|=s,x=y.alternate,x!==null&&(x.lanes|=s),nr(y.return,s,e),u||(b=null);break e}y=x.next}}else if(g.tag===18){if(b=g.return,b===null)throw Error(r(341));b.lanes|=s,y=b.alternate,y!==null&&(y.lanes|=s),nr(b,s,e),b=null}else b=g.child;if(b!==null)b.return=g;else for(b=g;b!==null;){if(b===e){b=null;break}if(g=b.sibling,g!==null){g.return=b.return,b=g;break}b=b.return}g=b}}function Ii(e,t,s,u){e=null;for(var g=t,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var b=g.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var x=g.type;Wt(g.pendingProps.value,b.value)||(e!==null?e.push(x):e=[x])}}else if(g===ze.current){if(b=g.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(e!==null?e.push(ea):e=[ea])}g=g.return}e!==null&&Cl(t,e,s,u),t.flags|=262144}function ln(e){for(e=e.firstContext;e!==null;){if(!Wt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ui(e){Nt=e,rn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ft(e){return Al(Nt,e)}function fs(e,t){return Nt===null&&ui(e),Al(e,t)}function Al(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},rn===null){if(e===null)throw Error(r(308));rn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else rn=rn.next=t;return s}var go=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,u){e.push(u)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},mo=i.unstable_scheduleCallback,Pc=i.unstable_NormalPriority,dt={$$typeof:oe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ut(){return{controller:new go,data:new Map,refCount:0}}function ds(e){e.refCount--,e.refCount===0&&mo(Pc,function(){e.controller.abort()})}var hs=null,Rl=0,yo=0,vo=null;function Gc(e,t){if(hs===null){var s=hs=[];Rl=0,yo=xf(),vo={status:"pending",value:void 0,then:function(u){s.push(u)}}}return Rl++,t.then(bl,bl),t}function bl(){if(--Rl===0&&hs!==null){vo!==null&&(vo.status="fulfilled");var e=hs;hs=null,yo=0,vo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Hc(e,t){var s=[],u={status:"pending",value:null,reason:null,then:function(g){s.push(g)}};return e.then(function(){u.status="fulfilled",u.value=t;for(var g=0;g<s.length;g++)(0,s[g])(t)},function(g){for(u.status="rejected",u.reason=g,g=0;g<s.length;g++)(0,s[g])(void 0)}),u}var ir=O.S;O.S=function(e,t){hp=Oe(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Gc(e,t),ir!==null&&ir(e,t)};var Ni=G(null);function Ml(){var e=Ni.current;return e!==null?e:ot.pooledCache}function or(e,t){t===null?de(Ni,Ni.current):de(Ni,t.pool)}function eu(){var e=Ml();return e===null?null:{parent:dt._currentValue,pool:e}}var To=Error(r(460)),wl=Error(r(474)),ps=Error(r(542)),sr={then:function(){}};function tu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function nu(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(qn,qn),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,iu(e),e;default:if(typeof t.status=="string")t.then(qn,qn);else{if(e=ot,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=t,e.status="pending",e.then(function(u){if(t.status==="pending"){var g=t;g.status="fulfilled",g.value=u}},function(u){if(t.status==="pending"){var g=t;g.status="rejected",g.reason=u}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,iu(e),e}throw ci=t,To}}function Oi(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(ci=s,To):s}}var ci=null;function xl(){if(ci===null)throw Error(r(459));var e=ci;return ci=null,e}function iu(e){if(e===To||e===ps)throw Error(r(483))}var So=null,gs=0;function rr(e){var t=gs;return gs+=1,So===null&&(So=[]),nu(So,e,t)}function ms(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function lr(e,t){throw t.$$typeof===w?Error(r(525)):(e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function ou(e){function t(q,k){if(e){var z=q.deletions;z===null?(q.deletions=[k],q.flags|=16):z.push(k)}}function s(q,k){if(!e)return null;for(;k!==null;)t(q,k),k=k.sibling;return null}function u(q){for(var k=new Map;q!==null;)q.key!==null?k.set(q.key,q):k.set(q.index,q),q=q.sibling;return k}function g(q,k){return q=Sn(q,k),q.index=0,q.sibling=null,q}function y(q,k,z){return q.index=z,e?(z=q.alternate,z!==null?(z=z.index,z<k?(q.flags|=67108866,k):z):(q.flags|=67108866,k)):(q.flags|=1048576,k)}function b(q){return e&&q.alternate===null&&(q.flags|=67108866),q}function x(q,k,z,ee){return k===null||k.tag!==6?(k=$s(z,q.mode,ee),k.return=q,k):(k=g(k,z),k.return=q,k)}function L(q,k,z,ee){var _e=z.type;return _e===Q?j(q,k,z.props.children,ee,z.key):k!==null&&(k.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===xe&&Oi(_e)===k.type)?(k=g(k,z.props),ms(k,z),k.return=q,k):(k=Zs(z.type,z.key,z.props,null,q.mode,ee),ms(k,z),k.return=q,k)}function F(q,k,z,ee){return k===null||k.tag!==4||k.stateNode.containerInfo!==z.containerInfo||k.stateNode.implementation!==z.implementation?(k=Tl(z,q.mode,ee),k.return=q,k):(k=g(k,z.children||[]),k.return=q,k)}function j(q,k,z,ee,_e){return k===null||k.tag!==7?(k=wi(z,q.mode,ee,_e),k.return=q,k):(k=g(k,z),k.return=q,k)}function ne(q,k,z){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=$s(""+k,q.mode,z),k.return=q,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case D:return z=Zs(k.type,k.key,k.props,null,q.mode,z),ms(z,k),z.return=q,z;case B:return k=Tl(k,q.mode,z),k.return=q,k;case xe:return k=Oi(k),ne(q,k,z)}if(gt(k)||Xe(k))return k=wi(k,q.mode,z,null),k.return=q,k;if(typeof k.then=="function")return ne(q,rr(k),z);if(k.$$typeof===oe)return ne(q,fs(q,k),z);lr(q,k)}return null}function J(q,k,z,ee){var _e=k!==null?k.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return _e!==null?null:x(q,k,""+z,ee);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case D:return z.key===_e?L(q,k,z,ee):null;case B:return z.key===_e?F(q,k,z,ee):null;case xe:return z=Oi(z),J(q,k,z,ee)}if(gt(z)||Xe(z))return _e!==null?null:j(q,k,z,ee,null);if(typeof z.then=="function")return J(q,k,rr(z),ee);if(z.$$typeof===oe)return J(q,k,fs(q,z),ee);lr(q,z)}return null}function K(q,k,z,ee,_e){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return q=q.get(z)||null,x(k,q,""+ee,_e);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case D:return q=q.get(ee.key===null?z:ee.key)||null,L(k,q,ee,_e);case B:return q=q.get(ee.key===null?z:ee.key)||null,F(k,q,ee,_e);case xe:return ee=Oi(ee),K(q,k,z,ee,_e)}if(gt(ee)||Xe(ee))return q=q.get(z)||null,j(k,q,ee,_e,null);if(typeof ee.then=="function")return K(q,k,z,rr(ee),_e);if(ee.$$typeof===oe)return K(q,k,z,fs(k,ee),_e);lr(k,ee)}return null}function me(q,k,z,ee){for(var _e=null,Fe=null,ve=k,Ue=k=0,He=null;ve!==null&&Ue<z.length;Ue++){ve.index>Ue?(He=ve,ve=null):He=ve.sibling;var Je=J(q,ve,z[Ue],ee);if(Je===null){ve===null&&(ve=He);break}e&&ve&&Je.alternate===null&&t(q,ve),k=y(Je,k,Ue),Fe===null?_e=Je:Fe.sibling=Je,Fe=Je,ve=He}if(Ue===z.length)return s(q,ve),De&&Vn(q,Ue),_e;if(ve===null){for(;Ue<z.length;Ue++)ve=ne(q,z[Ue],ee),ve!==null&&(k=y(ve,k,Ue),Fe===null?_e=ve:Fe.sibling=ve,Fe=ve);return De&&Vn(q,Ue),_e}for(ve=u(ve);Ue<z.length;Ue++)He=K(ve,q,Ue,z[Ue],ee),He!==null&&(e&&He.alternate!==null&&ve.delete(He.key===null?Ue:He.key),k=y(He,k,Ue),Fe===null?_e=He:Fe.sibling=He,Fe=He);return e&&ve.forEach(function(Lo){return t(q,Lo)}),De&&Vn(q,Ue),_e}function Ae(q,k,z,ee){if(z==null)throw Error(r(151));for(var _e=null,Fe=null,ve=k,Ue=k=0,He=null,Je=z.next();ve!==null&&!Je.done;Ue++,Je=z.next()){ve.index>Ue?(He=ve,ve=null):He=ve.sibling;var Lo=J(q,ve,Je.value,ee);if(Lo===null){ve===null&&(ve=He);break}e&&ve&&Lo.alternate===null&&t(q,ve),k=y(Lo,k,Ue),Fe===null?_e=Lo:Fe.sibling=Lo,Fe=Lo,ve=He}if(Je.done)return s(q,ve),De&&Vn(q,Ue),_e;if(ve===null){for(;!Je.done;Ue++,Je=z.next())Je=ne(q,Je.value,ee),Je!==null&&(k=y(Je,k,Ue),Fe===null?_e=Je:Fe.sibling=Je,Fe=Je);return De&&Vn(q,Ue),_e}for(ve=u(ve);!Je.done;Ue++,Je=z.next())Je=K(ve,q,Ue,Je.value,ee),Je!==null&&(e&&Je.alternate!==null&&ve.delete(Je.key===null?Ue:Je.key),k=y(Je,k,Ue),Fe===null?_e=Je:Fe.sibling=Je,Fe=Je);return e&&ve.forEach(function(A0){return t(q,A0)}),De&&Vn(q,Ue),_e}function it(q,k,z,ee){if(typeof z=="object"&&z!==null&&z.type===Q&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case D:e:{for(var _e=z.key;k!==null;){if(k.key===_e){if(_e=z.type,_e===Q){if(k.tag===7){s(q,k.sibling),ee=g(k,z.props.children),ee.return=q,q=ee;break e}}else if(k.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===xe&&Oi(_e)===k.type){s(q,k.sibling),ee=g(k,z.props),ms(ee,z),ee.return=q,q=ee;break e}s(q,k);break}else t(q,k);k=k.sibling}z.type===Q?(ee=wi(z.props.children,q.mode,ee,z.key),ee.return=q,q=ee):(ee=Zs(z.type,z.key,z.props,null,q.mode,ee),ms(ee,z),ee.return=q,q=ee)}return b(q);case B:e:{for(_e=z.key;k!==null;){if(k.key===_e)if(k.tag===4&&k.stateNode.containerInfo===z.containerInfo&&k.stateNode.implementation===z.implementation){s(q,k.sibling),ee=g(k,z.children||[]),ee.return=q,q=ee;break e}else{s(q,k);break}else t(q,k);k=k.sibling}ee=Tl(z,q.mode,ee),ee.return=q,q=ee}return b(q);case xe:return z=Oi(z),it(q,k,z,ee)}if(gt(z))return me(q,k,z,ee);if(Xe(z)){if(_e=Xe(z),typeof _e!="function")throw Error(r(150));return z=_e.call(z),Ae(q,k,z,ee)}if(typeof z.then=="function")return it(q,k,rr(z),ee);if(z.$$typeof===oe)return it(q,k,fs(q,z),ee);lr(q,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,k!==null&&k.tag===6?(s(q,k.sibling),ee=g(k,z),ee.return=q,q=ee):(s(q,k),ee=$s(z,q.mode,ee),ee.return=q,q=ee),b(q)):s(q,k)}return function(q,k,z,ee){try{gs=0;var _e=it(q,k,z,ee);return So=null,_e}catch(ve){if(ve===To||ve===ps)throw ve;var Fe=wt(29,ve,null,q.mode);return Fe.lanes=ee,Fe.return=q,Fe}finally{}}}var Di=ou(!0),_o=ou(!1),Jn=!1;function ys(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Il(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function On(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Yn(e,t,s){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,(Qe&2)!==0){var g=u.pending;return g===null?t.next=t:(t.next=g.next,g.next=t),u.pending=t,t=Mt(e),Mi(e,null,s),t}return Qs(e,u,t,s),Mt(e)}function vs(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var u=t.lanes;u&=e.pendingLanes,s|=u,t.lanes=s,qr(e,s)}}function Nl(e,t){var s=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var g=null,y=null;if(s=s.firstBaseUpdate,s!==null){do{var b={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};y===null?g=y=b:y=y.next=b,s=s.next}while(s!==null);y===null?g=y=t:y=y.next=t}else g=y=t;s={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var Ol=!1;function Ts(){if(Ol){var e=vo;if(e!==null)throw e}}function Ss(e,t,s,u){Ol=!1;var g=e.updateQueue;Jn=!1;var y=g.firstBaseUpdate,b=g.lastBaseUpdate,x=g.shared.pending;if(x!==null){g.shared.pending=null;var L=x,F=L.next;L.next=null,b===null?y=F:b.next=F,b=L;var j=e.alternate;j!==null&&(j=j.updateQueue,x=j.lastBaseUpdate,x!==b&&(x===null?j.firstBaseUpdate=F:x.next=F,j.lastBaseUpdate=L))}if(y!==null){var ne=g.baseState;b=0,j=F=L=null,x=y;do{var J=x.lane&-536870913,K=J!==x.lane;if(K?(Ge&J)===J:(u&J)===J){J!==0&&J===yo&&(Ol=!0),j!==null&&(j=j.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var me=e,Ae=x;J=t;var it=s;switch(Ae.tag){case 1:if(me=Ae.payload,typeof me=="function"){ne=me.call(it,ne,J);break e}ne=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Ae.payload,J=typeof me=="function"?me.call(it,ne,J):me,J==null)break e;ne=M({},ne,J);break e;case 2:Jn=!0}}J=x.callback,J!==null&&(e.flags|=64,K&&(e.flags|=8192),K=g.callbacks,K===null?g.callbacks=[J]:K.push(J))}else K={lane:J,tag:x.tag,payload:x.payload,callback:x.callback,next:null},j===null?(F=j=K,L=ne):j=j.next=K,b|=J;if(x=x.next,x===null){if(x=g.shared.pending,x===null)break;K=x,x=K.next,K.next=null,g.lastBaseUpdate=K,g.shared.pending=null}}while(!0);j===null&&(L=ne),g.baseState=L,g.firstBaseUpdate=F,g.lastBaseUpdate=j,y===null&&(g.shared.lanes=0),Ro|=b,e.lanes=b,e.memoizedState=ne}}function su(e,t){if(typeof e!="function")throw Error(r(191,e));e.call(t)}function Dl(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)su(s[e],t)}var Dn=G(null),fi=G(0);function ar(e,t){e=Bi,de(fi,e),de(Dn,t),Bi=e|t.baseLanes}function Ul(){de(fi,Bi),de(Dn,Dn.current)}function Ll(){Bi=fi.current,te(Dn),te(fi)}var jt=G(null),an=null;function di(e){var t=e.alternate;de(a,a.current&1),de(jt,e),an===null&&(t===null||Dn.current!==null||t.memoizedState!==null)&&(an=e)}function ur(e){de(a,a.current),de(jt,e),an===null&&(an=e)}function ru(e){e.tag===22?(de(a,a.current),de(jt,e),an===null&&(an=e)):hi()}function hi(){de(a,a.current),de(jt,jt.current)}function l(e){te(jt),an===e&&(an=null),te(a)}var a=G(0);function d(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Bf(s)||Vf(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var v=0,_=null,A=null,I=null,N=!1,H=!1,P=!1,X=0,Z=0,se=null,W=0;function le(){throw Error(r(321))}function ge(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Wt(e[s],t[s]))return!1;return!0}function Ce(e,t,s,u,g,y){return v=y,_=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=e===null||e.memoizedState===null?Ah:Zc,P=!1,y=s(u,g),P=!1,H&&(y=Ke(t,s,u,g)),qe(e),y}function qe(e){O.H=Gl;var t=A!==null&&A.next!==null;if(v=0,I=A=_=null,N=!1,Z=0,se=null,t)throw Error(r(300));e===null||At||(e=e.dependencies,e!==null&&ln(e)&&(At=!0))}function Ke(e,t,s,u){_=e;var g=0;do{if(H&&(se=null),Z=0,H=!1,25<=g)throw Error(r(301));if(g+=1,I=A=null,e.updateQueue!=null){var y=e.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}O.H=Rh,y=t(s,u)}while(H);return y}function et(){var e=O.H,t=e.useState()[0];return t=typeof t.then=="function"?kl(t):t,e=e.useState()[0],(A!==null?A.memoizedState:null)!==e&&(_.flags|=1024),t}function Re(){var e=X!==0;return X=0,e}function kt(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function Ct(e){if(N){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}N=!1}v=0,I=A=_=null,H=!1,Z=X=0,se=null}function _t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return I===null?_.memoizedState=I=e:I=I.next=e,I}function tt(){if(A===null){var e=_.alternate;e=e!==null?e.memoizedState:null}else e=A.next;var t=I===null?_.memoizedState:I.next;if(t!==null)I=t,A=e;else{if(e===null)throw _.alternate===null?Error(r(467)):Error(r(310));A=e,e={memoizedState:A.memoizedState,baseState:A.baseState,baseQueue:A.baseQueue,queue:A.queue,next:null},I===null?_.memoizedState=I=e:I=I.next=e}return I}function Eo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kl(e){var t=Z;return Z+=1,se===null&&(se=[]),e=nu(se,e,t),t=_,(I===null?t.memoizedState:I.next)===null&&(t=t.alternate,O.H=t===null||t.memoizedState===null?Ah:Zc),e}function lu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return kl(e);if(e.$$typeof===oe)return ft(e)}throw Error(r(438,String(e)))}function qc(e){var t=null,s=_.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var u=_.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(t={data:u.data.map(function(g){return g.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=Eo(),_.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),u=0;u<e;u++)s[u]=Ie;return t.index++,s}function Ui(e,t){return typeof t=="function"?t(e):t}function au(e){var t=tt();return Bc(t,A,e)}function Bc(e,t,s){var u=e.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=s;var g=e.baseQueue,y=u.pending;if(y!==null){if(g!==null){var b=g.next;g.next=y.next,y.next=b}t.baseQueue=g=y,u.pending=null}if(y=e.baseState,g===null)e.memoizedState=y;else{t=g.next;var x=b=null,L=null,F=t,j=!1;do{var ne=F.lane&-536870913;if(ne!==F.lane?(Ge&ne)===ne:(v&ne)===ne){var J=F.revertLane;if(J===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ne===yo&&(j=!0);else if((v&J)===J){F=F.next,J===yo&&(j=!0);continue}else ne={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},L===null?(x=L=ne,b=y):L=L.next=ne,_.lanes|=J,Ro|=J;ne=F.action,P&&s(y,ne),y=F.hasEagerState?F.eagerState:s(y,ne)}else J={lane:ne,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},L===null?(x=L=J,b=y):L=L.next=J,_.lanes|=ne,Ro|=ne;F=F.next}while(F!==null&&F!==t);if(L===null?b=y:L.next=x,!Wt(y,e.memoizedState)&&(At=!0,j&&(s=vo,s!==null)))throw s;e.memoizedState=y,e.baseState=b,e.baseQueue=L,u.lastRenderedState=y}return g===null&&(u.lanes=0),[e.memoizedState,u.dispatch]}function Vc(e){var t=tt(),s=t.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=e;var u=s.dispatch,g=s.pending,y=t.memoizedState;if(g!==null){s.pending=null;var b=g=g.next;do y=e(y,b.action),b=b.next;while(b!==g);Wt(y,t.memoizedState)||(At=!0),t.memoizedState=y,t.baseQueue===null&&(t.baseState=y),s.lastRenderedState=y}return[y,u]}function Fd(e,t,s){var u=_,g=tt(),y=De;if(y){if(s===void 0)throw Error(r(407));s=s()}else s=t();var b=!Wt((A||g).memoizedState,s);if(b&&(g.memoizedState=s,At=!0),g=g.queue,Jc(Kd.bind(null,u,g,e),[e]),g.getSnapshot!==t||b||I!==null&&I.memoizedState.tag&1){if(u.flags|=2048,cr(9,{destroy:void 0},Yd.bind(null,u,g,s,t),null),ot===null)throw Error(r(349));y||(v&127)!==0||Jd(u,t,s)}return s}function Jd(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=_.updateQueue,t===null?(t=Eo(),_.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Yd(e,t,s,u){t.value=s,t.getSnapshot=u,Qd(t)&&Xd(e)}function Kd(e,t,s){return s(function(){Qd(t)&&Xd(e)})}function Qd(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Wt(e,s)}catch{return!0}}function Xd(e){var t=bi(e,2);t!==null&&hn(t,e,2)}function zc(e){var t=_t();if(typeof e=="function"){var s=e;if(e=s(),P){Gn(!0);try{s()}finally{Gn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:e},t}function Wd(e,t,s,u){return e.baseState=s,Bc(e,A,typeof u=="function"?u:Ui)}function mv(e,t,s,u,g){if(fu(e))throw Error(r(485));if(e=t.action,e!==null){var y={payload:g,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){y.listeners.push(b)}};O.T!==null?s(!0):y.isTransition=!1,u(y),s=t.pending,s===null?(y.next=t.pending=y,Zd(t,y)):(y.next=s.next,t.pending=s.next=y)}}function Zd(e,t){var s=t.action,u=t.payload,g=e.state;if(t.isTransition){var y=O.T,b={};O.T=b;try{var x=s(g,u),L=O.S;L!==null&&L(b,x),$d(e,t,x)}catch(F){Fc(e,t,F)}finally{y!==null&&b.types!==null&&(y.types=b.types),O.T=y}}else try{y=s(g,u),$d(e,t,y)}catch(F){Fc(e,t,F)}}function $d(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(u){jd(e,t,u)},function(u){return Fc(e,t,u)}):jd(e,t,s)}function jd(e,t,s){t.status="fulfilled",t.value=s,eh(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,Zd(e,s)))}function Fc(e,t,s){var u=e.pending;if(e.pending=null,u!==null){u=u.next;do t.status="rejected",t.reason=s,eh(t),t=t.next;while(t!==u)}e.action=null}function eh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function th(e,t){return t}function nh(e,t){if(De){var s=ot.formState;if(s!==null){e:{var u=_;if(De){if(We){t:{for(var g=We,y=$t;g.nodeType!==8;){if(!y){g=null;break t}if(g=Un(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){We=Un(g.nextSibling),u=g.data==="F!";break e}}sn(u)}u=!1}u&&(t=s[0])}}return s=_t(),s.memoizedState=s.baseState=t,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:th,lastRenderedState:t},s.queue=u,s=_h.bind(null,_,u),u.dispatch=s,u=zc(!1),y=Wc.bind(null,_,!1,u.queue),u=_t(),g={state:t,dispatch:null,action:e,pending:null},u.queue=g,s=mv.bind(null,_,g,y,s),g.dispatch=s,u.memoizedState=e,[t,s,!1]}function ih(e){var t=tt();return oh(t,A,e)}function oh(e,t,s){if(t=Bc(e,t,th)[0],e=au(Ui)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var u=kl(t)}catch(b){throw b===To?ps:b}else u=t;t=tt();var g=t.queue,y=g.dispatch;return s!==t.memoizedState&&(_.flags|=2048,cr(9,{destroy:void 0},yv.bind(null,g,s),null)),[u,y,e]}function yv(e,t){e.action=t}function sh(e){var t=tt(),s=A;if(s!==null)return oh(t,s,e);tt(),t=t.memoizedState,s=tt();var u=s.queue.dispatch;return s.memoizedState=e,[t,u,!1]}function cr(e,t,s,u){return e={tag:e,create:s,deps:u,inst:t,next:null},t=_.updateQueue,t===null&&(t=Eo(),_.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(u=s.next,s.next=e,e.next=u,t.lastEffect=e),e}function rh(){return tt().memoizedState}function uu(e,t,s,u){var g=_t();_.flags|=e,g.memoizedState=cr(1|t,{destroy:void 0},s,u===void 0?null:u)}function cu(e,t,s,u){var g=tt();u=u===void 0?null:u;var y=g.memoizedState.inst;A!==null&&u!==null&&ge(u,A.memoizedState.deps)?g.memoizedState=cr(t,y,s,u):(_.flags|=e,g.memoizedState=cr(1|t,y,s,u))}function lh(e,t){uu(8390656,8,e,t)}function Jc(e,t){cu(2048,8,e,t)}function vv(e){_.flags|=4;var t=_.updateQueue;if(t===null)t=Eo(),_.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function ah(e){var t=tt().memoizedState;return vv({ref:t,nextImpl:e}),function(){if((Qe&2)!==0)throw Error(r(440));return t.impl.apply(void 0,arguments)}}function uh(e,t){return cu(4,2,e,t)}function ch(e,t){return cu(4,4,e,t)}function fh(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function dh(e,t,s){s=s!=null?s.concat([e]):null,cu(4,4,fh.bind(null,t,e),s)}function Yc(){}function hh(e,t){var s=tt();t=t===void 0?null:t;var u=s.memoizedState;return t!==null&&ge(t,u[1])?u[0]:(s.memoizedState=[e,t],e)}function ph(e,t){var s=tt();t=t===void 0?null:t;var u=s.memoizedState;if(t!==null&&ge(t,u[1]))return u[0];if(u=e(),P){Gn(!0);try{e()}finally{Gn(!1)}}return s.memoizedState=[u,t],u}function Kc(e,t,s){return s===void 0||(v&1073741824)!==0&&(Ge&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=gp(),_.lanes|=e,Ro|=e,s)}function gh(e,t,s,u){return Wt(s,t)?s:Dn.current!==null?(e=Kc(e,s,u),Wt(e,t)||(At=!0),e):(v&42)===0||(v&1073741824)!==0&&(Ge&261930)===0?(At=!0,e.memoizedState=s):(e=gp(),_.lanes|=e,Ro|=e,t)}function mh(e,t,s,u,g){var y=re.p;re.p=y!==0&&8>y?y:8;var b=O.T,x={};O.T=x,Wc(e,!1,t,s);try{var L=g(),F=O.S;if(F!==null&&F(x,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var j=Hc(L,u);Pl(e,t,j,Cn(e))}else Pl(e,t,u,Cn(e))}catch(ne){Pl(e,t,{then:function(){},status:"rejected",reason:ne},Cn())}finally{re.p=y,b!==null&&x.types!==null&&(b.types=x.types),O.T=b}}function Tv(){}function Qc(e,t,s,u){if(e.tag!==5)throw Error(r(476));var g=yh(e).queue;mh(e,g,t,Te,s===null?Tv:function(){return vh(e),s(u)})}function yh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:Te},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function vh(e){var t=yh(e);t.next===null&&(t=e.alternate.memoizedState),Pl(e,t.next.queue,{},Cn())}function Xc(){return ft(ea)}function Th(){return tt().memoizedState}function Sh(){return tt().memoizedState}function Sv(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=Cn();e=On(s);var u=Yn(t,e,s);u!==null&&(hn(u,t,s),vs(u,t,s)),t={cache:ut()},e.payload=t;return}t=t.return}}function _v(e,t,s){var u=Cn();s={lane:u,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},fu(e)?Eh(t,s):(s=yl(e,t,s,u),s!==null&&(hn(s,e,u),Ch(s,t,u)))}function _h(e,t,s){var u=Cn();Pl(e,t,s,u)}function Pl(e,t,s,u){var g={lane:u,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(fu(e))Eh(t,g);else{var y=e.alternate;if(e.lanes===0&&(y===null||y.lanes===0)&&(y=t.lastRenderedReducer,y!==null))try{var b=t.lastRenderedState,x=y(b,s);if(g.hasEagerState=!0,g.eagerState=x,Wt(x,b))return Qs(e,t,g,0),ot===null&&Mn(),!1}catch{}finally{}if(s=yl(e,t,g,u),s!==null)return hn(s,e,u),Ch(s,t,u),!0}return!1}function Wc(e,t,s,u){if(u={lane:2,revertLane:xf(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},fu(e)){if(t)throw Error(r(479))}else t=yl(e,s,u,2),t!==null&&hn(t,e,2)}function fu(e){var t=e.alternate;return e===_||t!==null&&t===_}function Eh(e,t){H=N=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Ch(e,t,s){if((s&4194048)!==0){var u=t.lanes;u&=e.pendingLanes,s|=u,t.lanes=s,qr(e,s)}}var Gl={readContext:ft,use:lu,useCallback:le,useContext:le,useEffect:le,useImperativeHandle:le,useLayoutEffect:le,useInsertionEffect:le,useMemo:le,useReducer:le,useRef:le,useState:le,useDebugValue:le,useDeferredValue:le,useTransition:le,useSyncExternalStore:le,useId:le,useHostTransitionStatus:le,useFormState:le,useActionState:le,useOptimistic:le,useMemoCache:le,useCacheRefresh:le};Gl.useEffectEvent=le;var Ah={readContext:ft,use:lu,useCallback:function(e,t){return _t().memoizedState=[e,t===void 0?null:t],e},useContext:ft,useEffect:lh,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,uu(4194308,4,fh.bind(null,t,e),s)},useLayoutEffect:function(e,t){return uu(4194308,4,e,t)},useInsertionEffect:function(e,t){uu(4,2,e,t)},useMemo:function(e,t){var s=_t();t=t===void 0?null:t;var u=e();if(P){Gn(!0);try{e()}finally{Gn(!1)}}return s.memoizedState=[u,t],u},useReducer:function(e,t,s){var u=_t();if(s!==void 0){var g=s(t);if(P){Gn(!0);try{s(t)}finally{Gn(!1)}}}else g=t;return u.memoizedState=u.baseState=g,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:g},u.queue=e,e=e.dispatch=_v.bind(null,_,e),[u.memoizedState,e]},useRef:function(e){var t=_t();return e={current:e},t.memoizedState=e},useState:function(e){e=zc(e);var t=e.queue,s=_h.bind(null,_,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:Yc,useDeferredValue:function(e,t){var s=_t();return Kc(s,e,t)},useTransition:function(){var e=zc(!1);return e=mh.bind(null,_,e.queue,!0,!1),_t().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var u=_,g=_t();if(De){if(s===void 0)throw Error(r(407));s=s()}else{if(s=t(),ot===null)throw Error(r(349));(Ge&127)!==0||Jd(u,t,s)}g.memoizedState=s;var y={value:s,getSnapshot:t};return g.queue=y,lh(Kd.bind(null,u,y,e),[e]),u.flags|=2048,cr(9,{destroy:void 0},Yd.bind(null,u,y,s,t),null),s},useId:function(){var e=_t(),t=ot.identifierPrefix;if(De){var s=xn,u=wn;s=(u&~(1<<32-Bt(u)-1)).toString(32)+s,t="_"+t+"R_"+s,s=X++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=W++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Xc,useFormState:nh,useActionState:nh,useOptimistic:function(e){var t=_t();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=Wc.bind(null,_,!0,s),s.dispatch=t,[e,t]},useMemoCache:qc,useCacheRefresh:function(){return _t().memoizedState=Sv.bind(null,_)},useEffectEvent:function(e){var t=_t(),s={impl:e};return t.memoizedState=s,function(){if((Qe&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}},Zc={readContext:ft,use:lu,useCallback:hh,useContext:ft,useEffect:Jc,useImperativeHandle:dh,useInsertionEffect:uh,useLayoutEffect:ch,useMemo:ph,useReducer:au,useRef:rh,useState:function(){return au(Ui)},useDebugValue:Yc,useDeferredValue:function(e,t){var s=tt();return gh(s,A.memoizedState,e,t)},useTransition:function(){var e=au(Ui)[0],t=tt().memoizedState;return[typeof e=="boolean"?e:kl(e),t]},useSyncExternalStore:Fd,useId:Th,useHostTransitionStatus:Xc,useFormState:ih,useActionState:ih,useOptimistic:function(e,t){var s=tt();return Wd(s,A,e,t)},useMemoCache:qc,useCacheRefresh:Sh};Zc.useEffectEvent=ah;var Rh={readContext:ft,use:lu,useCallback:hh,useContext:ft,useEffect:Jc,useImperativeHandle:dh,useInsertionEffect:uh,useLayoutEffect:ch,useMemo:ph,useReducer:Vc,useRef:rh,useState:function(){return Vc(Ui)},useDebugValue:Yc,useDeferredValue:function(e,t){var s=tt();return A===null?Kc(s,e,t):gh(s,A.memoizedState,e,t)},useTransition:function(){var e=Vc(Ui)[0],t=tt().memoizedState;return[typeof e=="boolean"?e:kl(e),t]},useSyncExternalStore:Fd,useId:Th,useHostTransitionStatus:Xc,useFormState:sh,useActionState:sh,useOptimistic:function(e,t){var s=tt();return A!==null?Wd(s,A,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:qc,useCacheRefresh:Sh};Rh.useEffectEvent=ah;function $c(e,t,s,u){t=e.memoizedState,s=s(u,t),s=s==null?t:M({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var jc={enqueueSetState:function(e,t,s){e=e._reactInternals;var u=Cn(),g=On(u);g.payload=t,s!=null&&(g.callback=s),t=Yn(e,g,u),t!==null&&(hn(t,e,u),vs(t,e,u))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var u=Cn(),g=On(u);g.tag=1,g.payload=t,s!=null&&(g.callback=s),t=Yn(e,g,u),t!==null&&(hn(t,e,u),vs(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Cn(),u=On(s);u.tag=2,t!=null&&(u.callback=t),t=Yn(e,u,s),t!==null&&(hn(t,e,s),vs(t,e,s))}};function bh(e,t,s,u,g,y,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,y,b):t.prototype&&t.prototype.isPureReactComponent?!Ai(s,u)||!Ai(g,y):!0}function Mh(e,t,s,u){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,u),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,u),t.state!==e&&jc.enqueueReplaceState(t,t.state,null)}function _s(e,t){var s=t;if("ref"in t){s={};for(var u in t)u!=="ref"&&(s[u]=t[u])}if(e=e.defaultProps){s===t&&(s=M({},s));for(var g in e)s[g]===void 0&&(s[g]=e[g])}return s}function wh(e){Ri(e)}function xh(e){console.error(e)}function Ih(e){Ri(e)}function du(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(u){setTimeout(function(){throw u})}}function Nh(e,t,s){try{var u=e.onCaughtError;u(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function ef(e,t,s){return s=On(s),s.tag=3,s.payload={element:null},s.callback=function(){du(e,t)},s}function Oh(e){return e=On(e),e.tag=3,e}function Dh(e,t,s,u){var g=s.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;e.payload=function(){return g(y)},e.callback=function(){Nh(t,s,u)}}var b=s.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){Nh(t,s,u),typeof g!="function"&&(bo===null?bo=new Set([this]):bo.add(this));var x=u.stack;this.componentDidCatch(u.value,{componentStack:x!==null?x:""})})}function Ev(e,t,s,u,g){if(s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(t=s.alternate,t!==null&&Ii(t,s,g,!0),s=jt.current,s!==null){switch(s.tag){case 31:case 13:return an===null?Au():s.alternate===null&&pt===0&&(pt=3),s.flags&=-257,s.flags|=65536,s.lanes=g,u===sr?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([u]):t.add(u),bf(e,u,g)),!1;case 22:return s.flags|=65536,u===sr?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([u])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([u]):s.add(u)),bf(e,u,g)),!1}throw Error(r(435,s.tag))}return bf(e,u,g),Au(),!1}if(De)return t=jt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=g,u!==tr&&(e=Error(r(422),{cause:u}),us(nn(e,s)))):(u!==tr&&(t=Error(r(423),{cause:u}),us(nn(t,s))),e=e.current.alternate,e.flags|=65536,g&=-g,e.lanes|=g,u=nn(u,s),g=ef(e.stateNode,u,g),Nl(e,g),pt!==4&&(pt=2)),!1;var y=Error(r(520),{cause:u});if(y=nn(y,s),Yl===null?Yl=[y]:Yl.push(y),pt!==4&&(pt=2),t===null)return!0;u=nn(u,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=g&-g,s.lanes|=e,e=ef(s.stateNode,u,e),Nl(s,e),!1;case 1:if(t=s.type,y=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(bo===null||!bo.has(y))))return s.flags|=65536,g&=-g,s.lanes|=g,g=Oh(g),Dh(g,e,s,u),Nl(s,g),!1}s=s.return}while(s!==null);return!1}var tf=Error(r(461)),At=!1;function Pt(e,t,s,u){t.child=e===null?_o(t,null,s,u):Di(t,e.child,s,u)}function Uh(e,t,s,u,g){s=s.render;var y=t.ref;if("ref"in u){var b={};for(var x in u)x!=="ref"&&(b[x]=u[x])}else b=u;return ui(t),u=Ce(e,t,s,b,y,g),x=Re(),e!==null&&!At?(kt(e,t,g),Li(e,t,g)):(De&&x&&er(t),t.flags|=1,Pt(e,t,u,g),t.child)}function Lh(e,t,s,u,g){if(e===null){var y=s.type;return typeof y=="function"&&!Xs(y)&&y.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=y,kh(e,t,y,u,g)):(e=Zs(s.type,null,u,t,t.mode,g),e.ref=t.ref,e.return=t,t.child=e)}if(y=e.child,!cf(e,g)){var b=y.memoizedProps;if(s=s.compare,s=s!==null?s:Ai,s(b,u)&&e.ref===t.ref)return Li(e,t,g)}return t.flags|=1,e=Sn(y,u),e.ref=t.ref,e.return=t,t.child=e}function kh(e,t,s,u,g){if(e!==null){var y=e.memoizedProps;if(Ai(y,u)&&e.ref===t.ref)if(At=!1,t.pendingProps=u=y,cf(e,g))(e.flags&131072)!==0&&(At=!0);else return t.lanes=e.lanes,Li(e,t,g)}return nf(e,t,s,u,g)}function Ph(e,t,s,u){var g=u.children,y=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((t.flags&128)!==0){if(y=y!==null?y.baseLanes|s:s,e!==null){for(u=t.child=e.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~y}else u=0,t.child=null;return Gh(e,t,y,s,u)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&or(t,y!==null?y.cachePool:null),y!==null?ar(t,y):Ul(),ru(t);else return u=t.lanes=536870912,Gh(e,t,y!==null?y.baseLanes|s:s,s,u)}else y!==null?(or(t,y.cachePool),ar(t,y),hi(),t.memoizedState=null):(e!==null&&or(t,null),Ul(),hi());return Pt(e,t,g,s),t.child}function Hl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Gh(e,t,s,u,g){var y=Ml();return y=y===null?null:{parent:dt._currentValue,pool:y},t.memoizedState={baseLanes:s,cachePool:y},e!==null&&or(t,null),Ul(),ru(t),e!==null&&Ii(e,t,u,!0),t.childLanes=g,null}function hu(e,t){return t=gu({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Hh(e,t,s){return Di(t,e.child,null,s),e=hu(t,t.pendingProps),e.flags|=2,l(t),t.memoizedState=null,e}function Cv(e,t,s){var u=t.pendingProps,g=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(De){if(u.mode==="hidden")return e=hu(t,u),t.lanes=536870912,Hl(null,e);if(ur(t),(e=We)?(e=Zp(e,$t),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:li!==null?{id:wn,overflow:xn}:null,retryLane:536870912,hydrationErrors:null},s=$a(e),s.return=t,t.child=s,St=t,We=null)):e=null,e===null)throw sn(t);return t.lanes=536870912,null}return hu(t,u)}var y=e.memoizedState;if(y!==null){var b=y.dehydrated;if(ur(t),g)if(t.flags&256)t.flags&=-257,t=Hh(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(r(558));else if(At||Ii(e,t,s,!1),g=(s&e.childLanes)!==0,At||g){if(u=ot,u!==null&&(b=Br(u,s),b!==0&&b!==y.retryLane))throw y.retryLane=b,bi(e,b),hn(u,e,b),tf;Au(),t=Hh(e,t,s)}else e=y.treeContext,We=Un(b.nextSibling),St=t,De=!0,In=null,$t=!1,e!==null&&Zt(t,e),t=hu(t,u),t.flags|=4096;return t}return e=Sn(e.child,{mode:u.mode,children:u.children}),e.ref=t.ref,t.child=e,e.return=t,e}function pu(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(r(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function nf(e,t,s,u,g){return ui(t),s=Ce(e,t,s,u,void 0,g),u=Re(),e!==null&&!At?(kt(e,t,g),Li(e,t,g)):(De&&u&&er(t),t.flags|=1,Pt(e,t,s,g),t.child)}function qh(e,t,s,u,g,y){return ui(t),t.updateQueue=null,s=Ke(t,u,s,g),qe(e),u=Re(),e!==null&&!At?(kt(e,t,y),Li(e,t,y)):(De&&u&&er(t),t.flags|=1,Pt(e,t,s,y),t.child)}function Bh(e,t,s,u,g){if(ui(t),t.stateNode===null){var y=uo,b=s.contextType;typeof b=="object"&&b!==null&&(y=ft(b)),y=new s(u,y),t.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=jc,t.stateNode=y,y._reactInternals=t,y=t.stateNode,y.props=u,y.state=t.memoizedState,y.refs={},ys(t),b=s.contextType,y.context=typeof b=="object"&&b!==null?ft(b):uo,y.state=t.memoizedState,b=s.getDerivedStateFromProps,typeof b=="function"&&($c(t,s,b,u),y.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(b=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),b!==y.state&&jc.enqueueReplaceState(y,y.state,null),Ss(t,u,y,g),Ts(),y.state=t.memoizedState),typeof y.componentDidMount=="function"&&(t.flags|=4194308),u=!0}else if(e===null){y=t.stateNode;var x=t.memoizedProps,L=_s(s,x);y.props=L;var F=y.context,j=s.contextType;b=uo,typeof j=="object"&&j!==null&&(b=ft(j));var ne=s.getDerivedStateFromProps;j=typeof ne=="function"||typeof y.getSnapshotBeforeUpdate=="function",x=t.pendingProps!==x,j||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x||F!==b)&&Mh(t,y,u,b),Jn=!1;var J=t.memoizedState;y.state=J,Ss(t,u,y,g),Ts(),F=t.memoizedState,x||J!==F||Jn?(typeof ne=="function"&&($c(t,s,ne,u),F=t.memoizedState),(L=Jn||bh(t,s,L,u,J,F,b))?(j||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=u,t.memoizedState=F),y.props=u,y.state=F,y.context=b,u=L):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),u=!1)}else{y=t.stateNode,Il(e,t),b=t.memoizedProps,j=_s(s,b),y.props=j,ne=t.pendingProps,J=y.context,F=s.contextType,L=uo,typeof F=="object"&&F!==null&&(L=ft(F)),x=s.getDerivedStateFromProps,(F=typeof x=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(b!==ne||J!==L)&&Mh(t,y,u,L),Jn=!1,J=t.memoizedState,y.state=J,Ss(t,u,y,g),Ts();var K=t.memoizedState;b!==ne||J!==K||Jn||e!==null&&e.dependencies!==null&&ln(e.dependencies)?(typeof x=="function"&&($c(t,s,x,u),K=t.memoizedState),(j=Jn||bh(t,s,j,u,J,K,L)||e!==null&&e.dependencies!==null&&ln(e.dependencies))?(F||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,K,L),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,K,L)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||b===e.memoizedProps&&J===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&J===e.memoizedState||(t.flags|=1024),t.memoizedProps=u,t.memoizedState=K),y.props=u,y.state=K,y.context=L,u=j):(typeof y.componentDidUpdate!="function"||b===e.memoizedProps&&J===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&J===e.memoizedState||(t.flags|=1024),u=!1)}return y=u,pu(e,t),u=(t.flags&128)!==0,y||u?(y=t.stateNode,s=u&&typeof s.getDerivedStateFromError!="function"?null:y.render(),t.flags|=1,e!==null&&u?(t.child=Di(t,e.child,null,g),t.child=Di(t,null,s,g)):Pt(e,t,s,g),t.memoizedState=y.state,e=t.child):e=Li(e,t,g),e}function Vh(e,t,s,u){return zn(),t.flags|=256,Pt(e,t,s,u),t.child}var of={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sf(e){return{baseLanes:e,cachePool:eu()}}function rf(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=En),e}function zh(e,t,s){var u=t.pendingProps,g=!1,y=(t.flags&128)!==0,b;if((b=y)||(b=e!==null&&e.memoizedState===null?!1:(a.current&2)!==0),b&&(g=!0,t.flags&=-129),b=(t.flags&32)!==0,t.flags&=-33,e===null){if(De){if(g?di(t):hi(),(e=We)?(e=Zp(e,$t),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:li!==null?{id:wn,overflow:xn}:null,retryLane:536870912,hydrationErrors:null},s=$a(e),s.return=t,t.child=s,St=t,We=null)):e=null,e===null)throw sn(t);return Vf(e)?t.lanes=32:t.lanes=536870912,null}var x=u.children;return u=u.fallback,g?(hi(),g=t.mode,x=gu({mode:"hidden",children:x},g),u=wi(u,g,s,null),x.return=t,u.return=t,x.sibling=u,t.child=x,u=t.child,u.memoizedState=sf(s),u.childLanes=rf(e,b,s),t.memoizedState=of,Hl(null,u)):(di(t),lf(t,x))}var L=e.memoizedState;if(L!==null&&(x=L.dehydrated,x!==null)){if(y)t.flags&256?(di(t),t.flags&=-257,t=af(e,t,s)):t.memoizedState!==null?(hi(),t.child=e.child,t.flags|=128,t=null):(hi(),x=u.fallback,g=t.mode,u=gu({mode:"visible",children:u.children},g),x=wi(x,g,s,null),x.flags|=2,u.return=t,x.return=t,u.sibling=x,t.child=u,Di(t,e.child,null,s),u=t.child,u.memoizedState=sf(s),u.childLanes=rf(e,b,s),t.memoizedState=of,t=Hl(null,u));else if(di(t),Vf(x)){if(b=x.nextSibling&&x.nextSibling.dataset,b)var F=b.dgst;b=F,u=Error(r(419)),u.stack="",u.digest=b,us({value:u,source:null,stack:null}),t=af(e,t,s)}else if(At||Ii(e,t,s,!1),b=(s&e.childLanes)!==0,At||b){if(b=ot,b!==null&&(u=Br(b,s),u!==0&&u!==L.retryLane))throw L.retryLane=u,bi(e,u),hn(b,e,u),tf;Bf(x)||Au(),t=af(e,t,s)}else Bf(x)?(t.flags|=192,t.child=e.child,t=null):(e=L.treeContext,We=Un(x.nextSibling),St=t,De=!0,In=null,$t=!1,e!==null&&Zt(t,e),t=lf(t,u.children),t.flags|=4096);return t}return g?(hi(),x=u.fallback,g=t.mode,L=e.child,F=L.sibling,u=Sn(L,{mode:"hidden",children:u.children}),u.subtreeFlags=L.subtreeFlags&65011712,F!==null?x=Sn(F,x):(x=wi(x,g,s,null),x.flags|=2),x.return=t,u.return=t,u.sibling=x,t.child=u,Hl(null,u),u=t.child,x=e.child.memoizedState,x===null?x=sf(s):(g=x.cachePool,g!==null?(L=dt._currentValue,g=g.parent!==L?{parent:L,pool:L}:g):g=eu(),x={baseLanes:x.baseLanes|s,cachePool:g}),u.memoizedState=x,u.childLanes=rf(e,b,s),t.memoizedState=of,Hl(e.child,u)):(di(t),s=e.child,e=s.sibling,s=Sn(s,{mode:"visible",children:u.children}),s.return=t,s.sibling=null,e!==null&&(b=t.deletions,b===null?(t.deletions=[e],t.flags|=16):b.push(e)),t.child=s,t.memoizedState=null,s)}function lf(e,t){return t=gu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function gu(e,t){return e=wt(22,e,null,t),e.lanes=0,e}function af(e,t,s){return Di(t,e.child,null,s),e=lf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Fh(e,t,s){e.lanes|=t;var u=e.alternate;u!==null&&(u.lanes|=t),nr(e.return,t,s)}function uf(e,t,s,u,g,y){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:g,treeForkCount:y}:(b.isBackwards=t,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=s,b.tailMode=g,b.treeForkCount=y)}function Jh(e,t,s){var u=t.pendingProps,g=u.revealOrder,y=u.tail;u=u.children;var b=a.current,x=(b&2)!==0;if(x?(b=b&1|2,t.flags|=128):b&=1,de(a,b),Pt(e,t,u,s),u=De?xi:0,!x&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fh(e,s,t);else if(e.tag===19)Fh(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(g){case"forwards":for(s=t.child,g=null;s!==null;)e=s.alternate,e!==null&&d(e)===null&&(g=s),s=s.sibling;s=g,s===null?(g=t.child,t.child=null):(g=s.sibling,s.sibling=null),uf(t,!1,g,s,y,u);break;case"backwards":case"unstable_legacy-backwards":for(s=null,g=t.child,t.child=null;g!==null;){if(e=g.alternate,e!==null&&d(e)===null){t.child=g;break}e=g.sibling,g.sibling=s,s=g,g=e}uf(t,!0,s,null,y,u);break;case"together":uf(t,!1,null,null,void 0,u);break;default:t.memoizedState=null}return t.child}function Li(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ro|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(Ii(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,s=Sn(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Sn(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function cf(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ln(e)))}function Av(e,t,s){switch(t.tag){case 3:Ut(t,t.stateNode.containerInfo),ai(t,dt,e.memoizedState.cache),zn();break;case 27:case 5:Qi(t);break;case 4:Ut(t,t.stateNode.containerInfo);break;case 10:ai(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ur(t),null;break;case 13:var u=t.memoizedState;if(u!==null)return u.dehydrated!==null?(di(t),t.flags|=128,null):(s&t.child.childLanes)!==0?zh(e,t,s):(di(t),e=Li(e,t,s),e!==null?e.sibling:null);di(t);break;case 19:var g=(e.flags&128)!==0;if(u=(s&t.childLanes)!==0,u||(Ii(e,t,s,!1),u=(s&t.childLanes)!==0),g){if(u)return Jh(e,t,s);t.flags|=128}if(g=t.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),de(a,a.current),u)break;return null;case 22:return t.lanes=0,Ph(e,t,s,t.pendingProps);case 24:ai(t,dt,e.memoizedState.cache)}return Li(e,t,s)}function Yh(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)At=!0;else{if(!cf(e,s)&&(t.flags&128)===0)return At=!1,Av(e,t,s);At=(e.flags&131072)!==0}else At=!1,De&&(t.flags&1048576)!==0&&ja(t,xi,t.index);switch(t.lanes=0,t.tag){case 16:e:{var u=t.pendingProps;if(e=Oi(t.elementType),t.type=e,typeof e=="function")Xs(e)?(u=_s(e,u),t.tag=1,t=Bh(null,t,e,u,s)):(t.tag=0,t=nf(null,t,e,u,s));else{if(e!=null){var g=e.$$typeof;if(g===ue){t.tag=11,t=Uh(null,t,e,u,s);break e}else if(g===ce){t.tag=14,t=Lh(null,t,e,u,s);break e}}throw t=Ve(e)||e,Error(r(306,t,""))}}return t;case 0:return nf(e,t,t.type,t.pendingProps,s);case 1:return u=t.type,g=_s(u,t.pendingProps),Bh(e,t,u,g,s);case 3:e:{if(Ut(t,t.stateNode.containerInfo),e===null)throw Error(r(387));u=t.pendingProps;var y=t.memoizedState;g=y.element,Il(e,t),Ss(t,u,null,s);var b=t.memoizedState;if(u=b.cache,ai(t,dt,u),u!==y.cache&&Cl(t,[dt],s,!0),Ts(),u=b.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:b.cache},t.updateQueue.baseState=y,t.memoizedState=y,t.flags&256){t=Vh(e,t,u,s);break e}else if(u!==g){g=nn(Error(r(424)),t),us(g),t=Vh(e,t,u,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(We=Un(e.firstChild),St=t,De=!0,In=null,$t=!0,s=_o(t,null,u,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(zn(),u===g){t=Li(e,t,s);break e}Pt(e,t,u,s)}t=t.child}return t;case 26:return pu(e,t),e===null?(s=ig(t.type,null,t.pendingProps,null))?t.memoizedState=s:De||(s=t.type,e=t.pendingProps,u=Nu(Le.current).createElement(s),u[bt]=t,u[It]=e,Gt(u,s,e),yt(u),t.stateNode=u):t.memoizedState=ig(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Qi(t),e===null&&De&&(u=t.stateNode=eg(t.type,t.pendingProps,Le.current),St=t,$t=!0,g=We,Io(t.type)?(zf=g,We=Un(u.firstChild)):We=g),Pt(e,t,t.pendingProps.children,s),pu(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&De&&((g=u=We)&&(u=e0(u,t.type,t.pendingProps,$t),u!==null?(t.stateNode=u,St=t,We=Un(u.firstChild),$t=!1,g=!0):g=!1),g||sn(t)),Qi(t),g=t.type,y=t.pendingProps,b=e!==null?e.memoizedProps:null,u=y.children,Gf(g,y)?u=null:b!==null&&Gf(g,b)&&(t.flags|=32),t.memoizedState!==null&&(g=Ce(e,t,et,null,null,s),ea._currentValue=g),pu(e,t),Pt(e,t,u,s),t.child;case 6:return e===null&&De&&((e=s=We)&&(s=t0(s,t.pendingProps,$t),s!==null?(t.stateNode=s,St=t,We=null,e=!0):e=!1),e||sn(t)),null;case 13:return zh(e,t,s);case 4:return Ut(t,t.stateNode.containerInfo),u=t.pendingProps,e===null?t.child=Di(t,null,u,s):Pt(e,t,u,s),t.child;case 11:return Uh(e,t,t.type,t.pendingProps,s);case 7:return Pt(e,t,t.pendingProps,s),t.child;case 8:return Pt(e,t,t.pendingProps.children,s),t.child;case 12:return Pt(e,t,t.pendingProps.children,s),t.child;case 10:return u=t.pendingProps,ai(t,t.type,u.value),Pt(e,t,u.children,s),t.child;case 9:return g=t.type._context,u=t.pendingProps.children,ui(t),g=ft(g),u=u(g),t.flags|=1,Pt(e,t,u,s),t.child;case 14:return Lh(e,t,t.type,t.pendingProps,s);case 15:return kh(e,t,t.type,t.pendingProps,s);case 19:return Jh(e,t,s);case 31:return Cv(e,t,s);case 22:return Ph(e,t,s,t.pendingProps);case 24:return ui(t),u=ft(dt),e===null?(g=Ml(),g===null&&(g=ot,y=ut(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=s),g=y),t.memoizedState={parent:u,cache:g},ys(t),ai(t,dt,g)):((e.lanes&s)!==0&&(Il(e,t),Ss(t,null,null,s),Ts()),g=e.memoizedState,y=t.memoizedState,g.parent!==u?(g={parent:u,cache:u},t.memoizedState=g,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=g),ai(t,dt,u)):(u=y.cache,ai(t,dt,u),u!==g.cache&&Cl(t,[dt],s,!0))),Pt(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function ki(e){e.flags|=4}function ff(e,t,s,u,g){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(g&335544128)===g)if(e.stateNode.complete)e.flags|=8192;else if(Tp())e.flags|=8192;else throw ci=sr,wl}else e.flags&=-16777217}function Kh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ag(t))if(Tp())e.flags|=8192;else throw ci=sr,wl}function mu(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Gr():536870912,e.lanes|=t,pr|=t)}function ql(e,t){if(!De)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function rt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,u=0;if(t)for(var g=e.child;g!==null;)s|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=e,g=g.sibling;else for(g=e.child;g!==null;)s|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=e,g=g.sibling;return e.subtreeFlags|=u,e.childLanes=s,t}function Rv(e,t,s){var u=t.pendingProps;switch(_l(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(t),null;case 1:return rt(t),null;case 3:return s=t.stateNode,u=null,e!==null&&(u=e.memoizedState.cache),t.memoizedState.cache!==u&&(t.flags|=2048),Fn(dt),lt(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Nn(t)?ki(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,po())),rt(t),null;case 26:var g=t.type,y=t.memoizedState;return e===null?(ki(t),y!==null?(rt(t),Kh(t,y)):(rt(t),ff(t,g,null,u,s))):y?y!==e.memoizedState?(ki(t),rt(t),Kh(t,y)):(rt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==u&&ki(t),rt(t),ff(t,g,e,u,s)),null;case 27:if(qo(t),s=Le.current,g=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==u&&ki(t);else{if(!u){if(t.stateNode===null)throw Error(r(166));return rt(t),null}e=he.current,Nn(t)?El(t):(e=eg(g,u,s),t.stateNode=e,ki(t))}return rt(t),null;case 5:if(qo(t),g=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==u&&ki(t);else{if(!u){if(t.stateNode===null)throw Error(r(166));return rt(t),null}if(y=he.current,Nn(t))El(t);else{var b=Nu(Le.current);switch(y){case 1:y=b.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=b.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=b.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=b.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=b.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?b.createElement("select",{is:u.is}):b.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?b.createElement(g,{is:u.is}):b.createElement(g)}}y[bt]=t,y[It]=u;e:for(b=t.child;b!==null;){if(b.tag===5||b.tag===6)y.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===t)break e;for(;b.sibling===null;){if(b.return===null||b.return===t)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}t.stateNode=y;e:switch(Gt(y,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ki(t)}}return rt(t),ff(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==u&&ki(t);else{if(typeof u!="string"&&t.stateNode===null)throw Error(r(166));if(e=Le.current,Nn(t)){if(e=t.stateNode,s=t.memoizedProps,u=null,g=St,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}e[bt]=t,e=!!(e.nodeValue===s||u!==null&&u.suppressHydrationWarning===!0||zp(e.nodeValue,s)),e||sn(t,!0)}else e=Nu(e).createTextNode(u),e[bt]=t,t.stateNode=e}return rt(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(u=Nn(t),s!==null){if(e===null){if(!u)throw Error(r(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[bt]=t}else zn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;rt(t),e=!1}else s=po(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(l(t),t):(l(t),null);if((t.flags&128)!==0)throw Error(r(558))}return rt(t),null;case 13:if(u=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(g=Nn(t),u!==null&&u.dehydrated!==null){if(e===null){if(!g)throw Error(r(318));if(g=t.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[bt]=t}else zn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;rt(t),g=!1}else g=po(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=g),g=!0;if(!g)return t.flags&256?(l(t),t):(l(t),null)}return l(t),(t.flags&128)!==0?(t.lanes=s,t):(s=u!==null,e=e!==null&&e.memoizedState!==null,s&&(u=t.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==g&&(u.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),mu(t,t.updateQueue),rt(t),null);case 4:return lt(),e===null&&Df(t.stateNode.containerInfo),rt(t),null;case 10:return Fn(t.type),rt(t),null;case 19:if(te(a),u=t.memoizedState,u===null)return rt(t),null;if(g=(t.flags&128)!==0,y=u.rendering,y===null)if(g)ql(u,!1);else{if(pt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(y=d(e),y!==null){for(t.flags|=128,ql(u,!1),e=y.updateQueue,t.updateQueue=e,mu(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)Ws(s,e),s=s.sibling;return de(a,a.current&1|2),De&&Vn(t,u.treeForkCount),t.child}e=e.sibling}u.tail!==null&&Oe()>_u&&(t.flags|=128,g=!0,ql(u,!1),t.lanes=4194304)}else{if(!g)if(e=d(y),e!==null){if(t.flags|=128,g=!0,e=e.updateQueue,t.updateQueue=e,mu(t,e),ql(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!De)return rt(t),null}else 2*Oe()-u.renderingStartTime>_u&&s!==536870912&&(t.flags|=128,g=!0,ql(u,!1),t.lanes=4194304);u.isBackwards?(y.sibling=t.child,t.child=y):(e=u.last,e!==null?e.sibling=y:t.child=y,u.last=y)}return u.tail!==null?(e=u.tail,u.rendering=e,u.tail=e.sibling,u.renderingStartTime=Oe(),e.sibling=null,s=a.current,de(a,g?s&1|2:s&1),De&&Vn(t,u.treeForkCount),e):(rt(t),null);case 22:case 23:return l(t),Ll(),u=t.memoizedState!==null,e!==null?e.memoizedState!==null!==u&&(t.flags|=8192):u&&(t.flags|=8192),u?(s&536870912)!==0&&(t.flags&128)===0&&(rt(t),t.subtreeFlags&6&&(t.flags|=8192)):rt(t),s=t.updateQueue,s!==null&&mu(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),u=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(u=t.memoizedState.cachePool.pool),u!==s&&(t.flags|=2048),e!==null&&te(Ni),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Fn(dt),rt(t),null;case 25:return null;case 30:return null}throw Error(r(156,t.tag))}function bv(e,t){switch(_l(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fn(dt),lt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return qo(t),null;case 31:if(t.memoizedState!==null){if(l(t),t.alternate===null)throw Error(r(340));zn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(l(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));zn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return te(a),null;case 4:return lt(),null;case 10:return Fn(t.type),null;case 22:case 23:return l(t),Ll(),e!==null&&te(Ni),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Fn(dt),null;case 25:return null;default:return null}}function Qh(e,t){switch(_l(t),t.tag){case 3:Fn(dt),lt();break;case 26:case 27:case 5:qo(t);break;case 4:lt();break;case 31:t.memoizedState!==null&&l(t);break;case 13:l(t);break;case 19:te(a);break;case 10:Fn(t.type);break;case 22:case 23:l(t),Ll(),e!==null&&te(Ni);break;case 24:Fn(dt)}}function Bl(e,t){try{var s=t.updateQueue,u=s!==null?s.lastEffect:null;if(u!==null){var g=u.next;s=g;do{if((s.tag&e)===e){u=void 0;var y=s.create,b=s.inst;u=y(),b.destroy=u}s=s.next}while(s!==g)}}catch(x){$e(t,t.return,x)}}function Co(e,t,s){try{var u=t.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var y=g.next;u=y;do{if((u.tag&e)===e){var b=u.inst,x=b.destroy;if(x!==void 0){b.destroy=void 0,g=t;var L=s,F=x;try{F()}catch(j){$e(g,L,j)}}}u=u.next}while(u!==y)}}catch(j){$e(t,t.return,j)}}function Xh(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{Dl(t,s)}catch(u){$e(e,e.return,u)}}}function Wh(e,t,s){s.props=_s(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(u){$e(e,t,u)}}function Vl(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var u=e.stateNode;break;case 30:u=e.stateNode;break;default:u=e.stateNode}typeof s=="function"?e.refCleanup=s(u):s.current=u}}catch(g){$e(e,t,g)}}function pi(e,t){var s=e.ref,u=e.refCleanup;if(s!==null)if(typeof u=="function")try{u()}catch(g){$e(e,t,g)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(g){$e(e,t,g)}else s.current=null}function Zh(e){var t=e.type,s=e.memoizedProps,u=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&u.focus();break e;case"img":s.src?u.src=s.src:s.srcSet&&(u.srcset=s.srcSet)}}catch(g){$e(e,e.return,g)}}function df(e,t,s){try{var u=e.stateNode;Qv(u,e.type,s,t),u[It]=t}catch(g){$e(e,e.return,g)}}function $h(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Io(e.type)||e.tag===4}function hf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$h(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Io(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pf(e,t,s){var u=e.tag;if(u===5||u===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=qn));else if(u!==4&&(u===27&&Io(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(pf(e,t,s),e=e.sibling;e!==null;)pf(e,t,s),e=e.sibling}function yu(e,t,s){var u=e.tag;if(u===5||u===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(u!==4&&(u===27&&Io(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(yu(e,t,s),e=e.sibling;e!==null;)yu(e,t,s),e=e.sibling}function jh(e){var t=e.stateNode,s=e.memoizedProps;try{for(var u=e.type,g=t.attributes;g.length;)t.removeAttributeNode(g[0]);Gt(t,u,s),t[bt]=e,t[It]=s}catch(y){$e(e,e.return,y)}}var Pi=!1,Rt=!1,gf=!1,ep=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function Mv(e,t){if(e=e.containerInfo,kf=Gu,e=Js(e),Ys(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var g=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{s.nodeType,y.nodeType}catch{s=null;break e}var b=0,x=-1,L=-1,F=0,j=0,ne=e,J=null;t:for(;;){for(var K;ne!==s||g!==0&&ne.nodeType!==3||(x=b+g),ne!==y||u!==0&&ne.nodeType!==3||(L=b+u),ne.nodeType===3&&(b+=ne.nodeValue.length),(K=ne.firstChild)!==null;)J=ne,ne=K;for(;;){if(ne===e)break t;if(J===s&&++F===g&&(x=b),J===y&&++j===u&&(L=b),(K=ne.nextSibling)!==null)break;ne=J,J=ne.parentNode}ne=K}s=x===-1||L===-1?null:{start:x,end:L}}else s=null}s=s||{start:0,end:0}}else s=null;for(Pf={focusedElem:e,selectionRange:s},Gu=!1,Ot=t;Ot!==null;)if(t=Ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ot=e;else for(;Ot!==null;){switch(t=Ot,y=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)g=e[s],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&y!==null){e=void 0,s=t,g=y.memoizedProps,y=y.memoizedState,u=s.stateNode;try{var me=_s(s.type,g);e=u.getSnapshotBeforeUpdate(me,y),u.__reactInternalSnapshotBeforeUpdate=e}catch(Ae){$e(s,s.return,Ae)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)qf(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":qf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=t.sibling,e!==null){e.return=t.return,Ot=e;break}Ot=t.return}}function tp(e,t,s){var u=s.flags;switch(s.tag){case 0:case 11:case 15:Hi(e,s),u&4&&Bl(5,s);break;case 1:if(Hi(e,s),u&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(b){$e(s,s.return,b)}else{var g=_s(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(g,t,e.__reactInternalSnapshotBeforeUpdate)}catch(b){$e(s,s.return,b)}}u&64&&Xh(s),u&512&&Vl(s,s.return);break;case 3:if(Hi(e,s),u&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{Dl(e,t)}catch(b){$e(s,s.return,b)}}break;case 27:t===null&&u&4&&jh(s);case 26:case 5:Hi(e,s),t===null&&u&4&&Zh(s),u&512&&Vl(s,s.return);break;case 12:Hi(e,s);break;case 31:Hi(e,s),u&4&&op(e,s);break;case 13:Hi(e,s),u&4&&sp(e,s),u&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=kv.bind(null,s),n0(e,s))));break;case 22:if(u=s.memoizedState!==null||Pi,!u){t=t!==null&&t.memoizedState!==null||Rt,g=Pi;var y=Rt;Pi=u,(Rt=t)&&!y?qi(e,s,(s.subtreeFlags&8772)!==0):Hi(e,s),Pi=g,Rt=y}break;case 30:break;default:Hi(e,s)}}function np(e){var t=e.alternate;t!==null&&(e.alternate=null,np(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Jr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ct=null,un=!1;function Gi(e,t,s){for(s=s.child;s!==null;)ip(e,t,s),s=s.sibling}function ip(e,t,s){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(yi,s)}catch{}switch(s.tag){case 26:Rt||pi(s,t),Gi(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Rt||pi(s,t);var u=ct,g=un;Io(s.type)&&(ct=s.stateNode,un=!1),Gi(e,t,s),Zl(s.stateNode),ct=u,un=g;break;case 5:Rt||pi(s,t);case 6:if(u=ct,g=un,ct=null,Gi(e,t,s),ct=u,un=g,ct!==null)if(un)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(s.stateNode)}catch(y){$e(s,t,y)}else try{ct.removeChild(s.stateNode)}catch(y){$e(s,t,y)}break;case 18:ct!==null&&(un?(e=ct,Xp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),Er(e)):Xp(ct,s.stateNode));break;case 4:u=ct,g=un,ct=s.stateNode.containerInfo,un=!0,Gi(e,t,s),ct=u,un=g;break;case 0:case 11:case 14:case 15:Co(2,s,t),Rt||Co(4,s,t),Gi(e,t,s);break;case 1:Rt||(pi(s,t),u=s.stateNode,typeof u.componentWillUnmount=="function"&&Wh(s,t,u)),Gi(e,t,s);break;case 21:Gi(e,t,s);break;case 22:Rt=(u=Rt)||s.memoizedState!==null,Gi(e,t,s),Rt=u;break;default:Gi(e,t,s)}}function op(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Er(e)}catch(s){$e(t,t.return,s)}}}function sp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Er(e)}catch(s){$e(t,t.return,s)}}function wv(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new ep),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new ep),t;default:throw Error(r(435,e.tag))}}function vu(e,t){var s=wv(e);t.forEach(function(u){if(!s.has(u)){s.add(u);var g=Pv.bind(null,e,u);u.then(g,g)}})}function cn(e,t){var s=t.deletions;if(s!==null)for(var u=0;u<s.length;u++){var g=s[u],y=e,b=t,x=b;e:for(;x!==null;){switch(x.tag){case 27:if(Io(x.type)){ct=x.stateNode,un=!1;break e}break;case 5:ct=x.stateNode,un=!1;break e;case 3:case 4:ct=x.stateNode.containerInfo,un=!0;break e}x=x.return}if(ct===null)throw Error(r(160));ip(y,b,g),ct=null,un=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)rp(t,e),t=t.sibling}var Kn=null;function rp(e,t){var s=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:cn(t,e),fn(e),u&4&&(Co(3,e,e.return),Bl(3,e),Co(5,e,e.return));break;case 1:cn(t,e),fn(e),u&512&&(Rt||s===null||pi(s,s.return)),u&64&&Pi&&(e=e.updateQueue,e!==null&&(u=e.callbacks,u!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?u:s.concat(u))));break;case 26:var g=Kn;if(cn(t,e),fn(e),u&512&&(Rt||s===null||pi(s,s.return)),u&4){var y=s!==null?s.memoizedState:null;if(u=e.memoizedState,s===null)if(u===null)if(e.stateNode===null){e:{u=e.type,s=e.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Zi]||y[bt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(u),g.head.insertBefore(y,g.querySelector("head > title"))),Gt(y,u,s),y[bt]=e,yt(y),u=y;break e;case"link":var b=rg("link","href",g).get(u+(s.href||""));if(b){for(var x=0;x<b.length;x++)if(y=b[x],y.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&y.getAttribute("rel")===(s.rel==null?null:s.rel)&&y.getAttribute("title")===(s.title==null?null:s.title)&&y.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){b.splice(x,1);break t}}y=g.createElement(u),Gt(y,u,s),g.head.appendChild(y);break;case"meta":if(b=rg("meta","content",g).get(u+(s.content||""))){for(x=0;x<b.length;x++)if(y=b[x],y.getAttribute("content")===(s.content==null?null:""+s.content)&&y.getAttribute("name")===(s.name==null?null:s.name)&&y.getAttribute("property")===(s.property==null?null:s.property)&&y.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&y.getAttribute("charset")===(s.charSet==null?null:s.charSet)){b.splice(x,1);break t}}y=g.createElement(u),Gt(y,u,s),g.head.appendChild(y);break;default:throw Error(r(468,u))}y[bt]=e,yt(y),u=y}e.stateNode=u}else lg(g,e.type,e.stateNode);else e.stateNode=sg(g,u,e.memoizedProps);else y!==u?(y===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):y.count--,u===null?lg(g,e.type,e.stateNode):sg(g,u,e.memoizedProps)):u===null&&e.stateNode!==null&&df(e,e.memoizedProps,s.memoizedProps)}break;case 27:cn(t,e),fn(e),u&512&&(Rt||s===null||pi(s,s.return)),s!==null&&u&4&&df(e,e.memoizedProps,s.memoizedProps);break;case 5:if(cn(t,e),fn(e),u&512&&(Rt||s===null||pi(s,s.return)),e.flags&32){g=e.stateNode;try{jn(g,"")}catch(me){$e(e,e.return,me)}}u&4&&e.stateNode!=null&&(g=e.memoizedProps,df(e,g,s!==null?s.memoizedProps:g)),u&1024&&(gf=!0);break;case 6:if(cn(t,e),fn(e),u&4){if(e.stateNode===null)throw Error(r(162));u=e.memoizedProps,s=e.stateNode;try{s.nodeValue=u}catch(me){$e(e,e.return,me)}}break;case 3:if(Uu=null,g=Kn,Kn=Ou(t.containerInfo),cn(t,e),Kn=g,fn(e),u&4&&s!==null&&s.memoizedState.isDehydrated)try{Er(t.containerInfo)}catch(me){$e(e,e.return,me)}gf&&(gf=!1,lp(e));break;case 4:u=Kn,Kn=Ou(e.stateNode.containerInfo),cn(t,e),fn(e),Kn=u;break;case 12:cn(t,e),fn(e);break;case 31:cn(t,e),fn(e),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,vu(e,u)));break;case 13:cn(t,e),fn(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Su=Oe()),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,vu(e,u)));break;case 22:g=e.memoizedState!==null;var L=s!==null&&s.memoizedState!==null,F=Pi,j=Rt;if(Pi=F||g,Rt=j||L,cn(t,e),Rt=j,Pi=F,fn(e),u&8192)e:for(t=e.stateNode,t._visibility=g?t._visibility&-2:t._visibility|1,g&&(s===null||L||Pi||Rt||Es(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){L=s=t;try{if(y=L.stateNode,g)b=y.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{x=L.stateNode;var ne=L.memoizedProps.style,J=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;x.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(me){$e(L,L.return,me)}}}else if(t.tag===6){if(s===null){L=t;try{L.stateNode.nodeValue=g?"":L.memoizedProps}catch(me){$e(L,L.return,me)}}}else if(t.tag===18){if(s===null){L=t;try{var K=L.stateNode;g?Wp(K,!0):Wp(L.stateNode,!1)}catch(me){$e(L,L.return,me)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}u&4&&(u=e.updateQueue,u!==null&&(s=u.retryQueue,s!==null&&(u.retryQueue=null,vu(e,s))));break;case 19:cn(t,e),fn(e),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,vu(e,u)));break;case 30:break;case 21:break;default:cn(t,e),fn(e)}}function fn(e){var t=e.flags;if(t&2){try{for(var s,u=e.return;u!==null;){if($h(u)){s=u;break}u=u.return}if(s==null)throw Error(r(160));switch(s.tag){case 27:var g=s.stateNode,y=hf(e);yu(e,y,g);break;case 5:var b=s.stateNode;s.flags&32&&(jn(b,""),s.flags&=-33);var x=hf(e);yu(e,x,b);break;case 3:case 4:var L=s.stateNode.containerInfo,F=hf(e);pf(e,F,L);break;default:throw Error(r(161))}}catch(j){$e(e,e.return,j)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;lp(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Hi(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)tp(e,t.alternate,t),t=t.sibling}function Es(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Co(4,t,t.return),Es(t);break;case 1:pi(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&Wh(t,t.return,s),Es(t);break;case 27:Zl(t.stateNode);case 26:case 5:pi(t,t.return),Es(t);break;case 22:t.memoizedState===null&&Es(t);break;case 30:Es(t);break;default:Es(t)}e=e.sibling}}function qi(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var u=t.alternate,g=e,y=t,b=y.flags;switch(y.tag){case 0:case 11:case 15:qi(g,y,s),Bl(4,y);break;case 1:if(qi(g,y,s),u=y,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(F){$e(u,u.return,F)}if(u=y,g=u.updateQueue,g!==null){var x=u.stateNode;try{var L=g.shared.hiddenCallbacks;if(L!==null)for(g.shared.hiddenCallbacks=null,g=0;g<L.length;g++)su(L[g],x)}catch(F){$e(u,u.return,F)}}s&&b&64&&Xh(y),Vl(y,y.return);break;case 27:jh(y);case 26:case 5:qi(g,y,s),s&&u===null&&b&4&&Zh(y),Vl(y,y.return);break;case 12:qi(g,y,s);break;case 31:qi(g,y,s),s&&b&4&&op(g,y);break;case 13:qi(g,y,s),s&&b&4&&sp(g,y);break;case 22:y.memoizedState===null&&qi(g,y,s),Vl(y,y.return);break;case 30:break;default:qi(g,y,s)}t=t.sibling}}function mf(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&ds(s))}function yf(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ds(e))}function Qn(e,t,s,u){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ap(e,t,s,u),t=t.sibling}function ap(e,t,s,u){var g=t.flags;switch(t.tag){case 0:case 11:case 15:Qn(e,t,s,u),g&2048&&Bl(9,t);break;case 1:Qn(e,t,s,u);break;case 3:Qn(e,t,s,u),g&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ds(e)));break;case 12:if(g&2048){Qn(e,t,s,u),e=t.stateNode;try{var y=t.memoizedProps,b=y.id,x=y.onPostCommit;typeof x=="function"&&x(b,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(L){$e(t,t.return,L)}}else Qn(e,t,s,u);break;case 31:Qn(e,t,s,u);break;case 13:Qn(e,t,s,u);break;case 23:break;case 22:y=t.stateNode,b=t.alternate,t.memoizedState!==null?y._visibility&2?Qn(e,t,s,u):zl(e,t):y._visibility&2?Qn(e,t,s,u):(y._visibility|=2,fr(e,t,s,u,(t.subtreeFlags&10256)!==0||!1)),g&2048&&mf(b,t);break;case 24:Qn(e,t,s,u),g&2048&&yf(t.alternate,t);break;default:Qn(e,t,s,u)}}function fr(e,t,s,u,g){for(g=g&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var y=e,b=t,x=s,L=u,F=b.flags;switch(b.tag){case 0:case 11:case 15:fr(y,b,x,L,g),Bl(8,b);break;case 23:break;case 22:var j=b.stateNode;b.memoizedState!==null?j._visibility&2?fr(y,b,x,L,g):zl(y,b):(j._visibility|=2,fr(y,b,x,L,g)),g&&F&2048&&mf(b.alternate,b);break;case 24:fr(y,b,x,L,g),g&&F&2048&&yf(b.alternate,b);break;default:fr(y,b,x,L,g)}t=t.sibling}}function zl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,u=t,g=u.flags;switch(u.tag){case 22:zl(s,u),g&2048&&mf(u.alternate,u);break;case 24:zl(s,u),g&2048&&yf(u.alternate,u);break;default:zl(s,u)}t=t.sibling}}var Fl=8192;function dr(e,t,s){if(e.subtreeFlags&Fl)for(e=e.child;e!==null;)up(e,t,s),e=e.sibling}function up(e,t,s){switch(e.tag){case 26:dr(e,t,s),e.flags&Fl&&e.memoizedState!==null&&p0(s,Kn,e.memoizedState,e.memoizedProps);break;case 5:dr(e,t,s);break;case 3:case 4:var u=Kn;Kn=Ou(e.stateNode.containerInfo),dr(e,t,s),Kn=u;break;case 22:e.memoizedState===null&&(u=e.alternate,u!==null&&u.memoizedState!==null?(u=Fl,Fl=16777216,dr(e,t,s),Fl=u):dr(e,t,s));break;default:dr(e,t,s)}}function cp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Jl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var u=t[s];Ot=u,dp(u,e)}cp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)fp(e),e=e.sibling}function fp(e){switch(e.tag){case 0:case 11:case 15:Jl(e),e.flags&2048&&Co(9,e,e.return);break;case 3:Jl(e);break;case 12:Jl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Tu(e)):Jl(e);break;default:Jl(e)}}function Tu(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var u=t[s];Ot=u,dp(u,e)}cp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Co(8,t,t.return),Tu(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,Tu(t));break;default:Tu(t)}e=e.sibling}}function dp(e,t){for(;Ot!==null;){var s=Ot;switch(s.tag){case 0:case 11:case 15:Co(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var u=s.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ds(s.memoizedState.cache)}if(u=s.child,u!==null)u.return=s,Ot=u;else e:for(s=e;Ot!==null;){u=Ot;var g=u.sibling,y=u.return;if(np(u),u===s){Ot=null;break e}if(g!==null){g.return=y,Ot=g;break e}Ot=y}}}var xv={getCacheForType:function(e){var t=ft(dt),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return ft(dt).controller.signal}},Iv=typeof WeakMap=="function"?WeakMap:Map,Qe=0,ot=null,ke=null,Ge=0,Ze=0,_n=null,Ao=!1,hr=!1,vf=!1,Bi=0,pt=0,Ro=0,Cs=0,Tf=0,En=0,pr=0,Yl=null,dn=null,Sf=!1,Su=0,hp=0,_u=1/0,Eu=null,bo=null,xt=0,Mo=null,gr=null,Vi=0,_f=0,Ef=null,pp=null,Kl=0,Cf=null;function Cn(){return(Qe&2)!==0&&Ge!==0?Ge&-Ge:O.T!==null?xf():Vr()}function gp(){if(En===0)if((Ge&536870912)===0||De){var e=vi;vi<<=1,(vi&3932160)===0&&(vi=262144),En=e}else En=536870912;return e=jt.current,e!==null&&(e.flags|=32),En}function hn(e,t,s){(e===ot&&(Ze===2||Ze===9)||e.cancelPendingCommit!==null)&&(mr(e,0),wo(e,Ge,En,!1)),Lt(e,s),((Qe&2)===0||e!==ot)&&(e===ot&&((Qe&2)===0&&(Cs|=s),pt===4&&wo(e,Ge,En,!1)),gi(e))}function mp(e,t,s){if((Qe&6)!==0)throw Error(r(327));var u=!s&&(t&127)===0&&(t&e.expiredLanes)===0||Xi(e,t),g=u?Dv(e,t):Rf(e,t,!0),y=u;do{if(g===0){hr&&!u&&wo(e,t,0,!1);break}else{if(s=e.current.alternate,y&&!Nv(s)){g=Rf(e,t,!1),y=!1;continue}if(g===2){if(y=t,e.errorRecoveryDisabledLanes&y)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){t=b;e:{var x=e;g=Yl;var L=x.current.memoizedState.isDehydrated;if(L&&(mr(x,b).flags|=256),b=Rf(x,b,!1),b!==2){if(vf&&!L){x.errorRecoveryDisabledLanes|=y,Cs|=y,g=4;break e}y=dn,dn=g,y!==null&&(dn===null?dn=y:dn.push.apply(dn,y))}g=b}if(y=!1,g!==2)continue}}if(g===1){mr(e,0),wo(e,t,0,!0);break}e:{switch(u=e,y=g,y){case 0:case 1:throw Error(r(345));case 4:if((t&4194048)!==t)break;case 6:wo(u,t,En,!Ao);break e;case 2:dn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((t&62914560)===t&&(g=Su+300-Oe(),10<g)){if(wo(u,t,En,!Ao),mt(u,0,!0)!==0)break e;Vi=t,u.timeoutHandle=Kp(yp.bind(null,u,s,dn,Eu,Sf,t,En,Cs,pr,Ao,y,"Throttled",-0,0),g);break e}yp(u,s,dn,Eu,Sf,t,En,Cs,pr,Ao,y,null,-0,0)}}break}while(!0);gi(e)}function yp(e,t,s,u,g,y,b,x,L,F,j,ne,J,K){if(e.timeoutHandle=-1,ne=t.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qn},up(t,y,ne);var me=(y&62914560)===y?Su-Oe():(y&4194048)===y?hp-Oe():0;if(me=g0(ne,me),me!==null){Vi=y,e.cancelPendingCommit=me(Rp.bind(null,e,t,y,s,u,g,b,x,L,j,ne,null,J,K)),wo(e,y,b,!F);return}}Rp(e,t,y,s,u,g,b,x,L)}function Nv(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var u=0;u<s.length;u++){var g=s[u],y=g.getSnapshot;g=g.value;try{if(!Wt(y(),g))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wo(e,t,s,u){t&=~Tf,t&=~Cs,e.suspendedLanes|=t,e.pingedLanes&=~t,u&&(e.warmLanes|=t),u=e.expirationTimes;for(var g=t;0<g;){var y=31-Bt(g),b=1<<y;u[y]=-1,g&=~b}s!==0&&ya(e,s,t)}function Cu(){return(Qe&6)===0?(Ql(0),!1):!0}function Af(){if(ke!==null){if(Ze===0)var e=ke.return;else e=ke,rn=Nt=null,Ct(e),So=null,gs=0,e=ke;for(;e!==null;)Qh(e.alternate,e),e=e.return;ke=null}}function mr(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,Zv(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Vi=0,Af(),ot=e,ke=s=Sn(e.current,null),Ge=t,Ze=0,_n=null,Ao=!1,hr=Xi(e,t),vf=!1,pr=En=Tf=Cs=Ro=pt=0,dn=Yl=null,Sf=!1,(t&8)!==0&&(t|=t&32);var u=e.entangledLanes;if(u!==0)for(e=e.entanglements,u&=t;0<u;){var g=31-Bt(u),y=1<<g;t|=e[g],u&=~y}return Bi=t,Mn(),s}function vp(e,t){_=null,O.H=Gl,t===To||t===ps?(t=xl(),Ze=3):t===wl?(t=xl(),Ze=4):Ze=t===tf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,_n=t,ke===null&&(pt=1,du(e,nn(t,e.current)))}function Tp(){var e=jt.current;return e===null?!0:(Ge&4194048)===Ge?an===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?e===an:!1}function Sp(){var e=O.H;return O.H=Gl,e===null?Gl:e}function _p(){var e=O.A;return O.A=xv,e}function Au(){pt=4,Ao||(Ge&4194048)!==Ge&&jt.current!==null||(hr=!0),(Ro&134217727)===0&&(Cs&134217727)===0||ot===null||wo(ot,Ge,En,!1)}function Rf(e,t,s){var u=Qe;Qe|=2;var g=Sp(),y=_p();(ot!==e||Ge!==t)&&(Eu=null,mr(e,t)),t=!1;var b=pt;e:do try{if(Ze!==0&&ke!==null){var x=ke,L=_n;switch(Ze){case 8:Af(),b=6;break e;case 3:case 2:case 9:case 6:jt.current===null&&(t=!0);var F=Ze;if(Ze=0,_n=null,yr(e,x,L,F),s&&hr){b=0;break e}break;default:F=Ze,Ze=0,_n=null,yr(e,x,L,F)}}Ov(),b=pt;break}catch(j){vp(e,j)}while(!0);return t&&e.shellSuspendCounter++,rn=Nt=null,Qe=u,O.H=g,O.A=y,ke===null&&(ot=null,Ge=0,Mn()),b}function Ov(){for(;ke!==null;)Ep(ke)}function Dv(e,t){var s=Qe;Qe|=2;var u=Sp(),g=_p();ot!==e||Ge!==t?(Eu=null,_u=Oe()+500,mr(e,t)):hr=Xi(e,t);e:do try{if(Ze!==0&&ke!==null){t=ke;var y=_n;t:switch(Ze){case 1:Ze=0,_n=null,yr(e,t,y,1);break;case 2:case 9:if(tu(y)){Ze=0,_n=null,Cp(t);break}t=function(){Ze!==2&&Ze!==9||ot!==e||(Ze=7),gi(e)},y.then(t,t);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:tu(y)?(Ze=0,_n=null,Cp(t)):(Ze=0,_n=null,yr(e,t,y,7));break;case 5:var b=null;switch(ke.tag){case 26:b=ke.memoizedState;case 5:case 27:var x=ke;if(b?ag(b):x.stateNode.complete){Ze=0,_n=null;var L=x.sibling;if(L!==null)ke=L;else{var F=x.return;F!==null?(ke=F,Ru(F)):ke=null}break t}}Ze=0,_n=null,yr(e,t,y,5);break;case 6:Ze=0,_n=null,yr(e,t,y,6);break;case 8:Af(),pt=6;break e;default:throw Error(r(462))}}Uv();break}catch(j){vp(e,j)}while(!0);return rn=Nt=null,O.H=u,O.A=g,Qe=s,ke!==null?0:(ot=null,Ge=0,Mn(),pt)}function Uv(){for(;ke!==null&&!Is();)Ep(ke)}function Ep(e){var t=Yh(e.alternate,e,Bi);e.memoizedProps=e.pendingProps,t===null?Ru(e):ke=t}function Cp(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=qh(s,t,t.pendingProps,t.type,void 0,Ge);break;case 11:t=qh(s,t,t.pendingProps,t.type.render,t.ref,Ge);break;case 5:Ct(t);default:Qh(s,t),t=ke=Ws(t,Bi),t=Yh(s,t,Bi)}e.memoizedProps=e.pendingProps,t===null?Ru(e):ke=t}function yr(e,t,s,u){rn=Nt=null,Ct(t),So=null,gs=0;var g=t.return;try{if(Ev(e,g,t,s,Ge)){pt=1,du(e,nn(s,e.current)),ke=null;return}}catch(y){if(g!==null)throw ke=g,y;pt=1,du(e,nn(s,e.current)),ke=null;return}t.flags&32768?(De||u===1?e=!0:hr||(Ge&536870912)!==0?e=!1:(Ao=e=!0,(u===2||u===9||u===3||u===6)&&(u=jt.current,u!==null&&u.tag===13&&(u.flags|=16384))),Ap(t,e)):Ru(t)}function Ru(e){var t=e;do{if((t.flags&32768)!==0){Ap(t,Ao);return}e=t.return;var s=Rv(t.alternate,t,Bi);if(s!==null){ke=s;return}if(t=t.sibling,t!==null){ke=t;return}ke=t=e}while(t!==null);pt===0&&(pt=5)}function Ap(e,t){do{var s=bv(e.alternate,e);if(s!==null){s.flags&=32767,ke=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){ke=e;return}ke=e=s}while(e!==null);pt=6,ke=null}function Rp(e,t,s,u,g,y,b,x,L){e.cancelPendingCommit=null;do bu();while(xt!==0);if((Qe&6)!==0)throw Error(r(327));if(t!==null){if(t===e.current)throw Error(r(177));if(y=t.lanes|t.childLanes,y|=ml,gc(e,s,y,b,x,L),e===ot&&(ke=ot=null,Ge=0),gr=t,Mo=e,Vi=s,_f=y,Ef=g,pp=u,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Gv(Fo,function(){return Ip(),null})):(e.callbackNode=null,e.callbackPriority=0),u=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||u){u=O.T,O.T=null,g=re.p,re.p=2,b=Qe,Qe|=4;try{Mv(e,t,s)}finally{Qe=b,re.p=g,O.T=u}}xt=1,bp(),Mp(),wp()}}function bp(){if(xt===1){xt=0;var e=Mo,t=gr,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=O.T,O.T=null;var u=re.p;re.p=2;var g=Qe;Qe|=4;try{rp(t,e);var y=Pf,b=Js(e.containerInfo),x=y.focusedElem,L=y.selectionRange;if(b!==x&&x&&x.ownerDocument&&Qa(x.ownerDocument.documentElement,x)){if(L!==null&&Ys(x)){var F=L.start,j=L.end;if(j===void 0&&(j=F),"selectionStart"in x)x.selectionStart=F,x.selectionEnd=Math.min(j,x.value.length);else{var ne=x.ownerDocument||document,J=ne&&ne.defaultView||window;if(J.getSelection){var K=J.getSelection(),me=x.textContent.length,Ae=Math.min(L.start,me),it=L.end===void 0?Ae:Math.min(L.end,me);!K.extend&&Ae>it&&(b=it,it=Ae,Ae=b);var q=rs(x,Ae),k=rs(x,it);if(q&&k&&(K.rangeCount!==1||K.anchorNode!==q.node||K.anchorOffset!==q.offset||K.focusNode!==k.node||K.focusOffset!==k.offset)){var z=ne.createRange();z.setStart(q.node,q.offset),K.removeAllRanges(),Ae>it?(K.addRange(z),K.extend(k.node,k.offset)):(z.setEnd(k.node,k.offset),K.addRange(z))}}}}for(ne=[],K=x;K=K.parentNode;)K.nodeType===1&&ne.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<ne.length;x++){var ee=ne[x];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Gu=!!kf,Pf=kf=null}finally{Qe=g,re.p=u,O.T=s}}e.current=t,xt=2}}function Mp(){if(xt===2){xt=0;var e=Mo,t=gr,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=O.T,O.T=null;var u=re.p;re.p=2;var g=Qe;Qe|=4;try{tp(e,t.alternate,t)}finally{Qe=g,re.p=u,O.T=s}}xt=3}}function wp(){if(xt===4||xt===3){xt=0,Ur();var e=Mo,t=gr,s=Vi,u=pp;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?xt=5:(xt=0,gr=Mo=null,xp(e,e.pendingLanes));var g=e.pendingLanes;if(g===0&&(bo=null),Os(s),t=t.stateNode,qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(yi,t,void 0,(t.current.flags&128)===128)}catch{}if(u!==null){t=O.T,g=re.p,re.p=2,O.T=null;try{for(var y=e.onRecoverableError,b=0;b<u.length;b++){var x=u[b];y(x.value,{componentStack:x.stack})}}finally{O.T=t,re.p=g}}(Vi&3)!==0&&bu(),gi(e),g=e.pendingLanes,(s&261930)!==0&&(g&42)!==0?e===Cf?Kl++:(Kl=0,Cf=e):Kl=0,Ql(0)}}function xp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ds(t)))}function bu(){return bp(),Mp(),wp(),Ip()}function Ip(){if(xt!==5)return!1;var e=Mo,t=_f;_f=0;var s=Os(Vi),u=O.T,g=re.p;try{re.p=32>s?32:s,O.T=null,s=Ef,Ef=null;var y=Mo,b=Vi;if(xt=0,gr=Mo=null,Vi=0,(Qe&6)!==0)throw Error(r(331));var x=Qe;if(Qe|=4,fp(y.current),ap(y,y.current,b,s),Qe=x,Ql(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(yi,y)}catch{}return!0}finally{re.p=g,O.T=u,xp(e,t)}}function Np(e,t,s){t=nn(s,t),t=ef(e.stateNode,t,2),e=Yn(e,t,2),e!==null&&(Lt(e,2),gi(e))}function $e(e,t,s){if(e.tag===3)Np(e,e,s);else for(;t!==null;){if(t.tag===3){Np(t,e,s);break}else if(t.tag===1){var u=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(bo===null||!bo.has(u))){e=nn(s,e),s=Oh(2),u=Yn(t,s,2),u!==null&&(Dh(s,u,t,e),Lt(u,2),gi(u));break}}t=t.return}}function bf(e,t,s){var u=e.pingCache;if(u===null){u=e.pingCache=new Iv;var g=new Set;u.set(t,g)}else g=u.get(t),g===void 0&&(g=new Set,u.set(t,g));g.has(s)||(vf=!0,g.add(s),e=Lv.bind(null,e,t,s),t.then(e,e))}function Lv(e,t,s){var u=e.pingCache;u!==null&&u.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,ot===e&&(Ge&s)===s&&(pt===4||pt===3&&(Ge&62914560)===Ge&&300>Oe()-Su?(Qe&2)===0&&mr(e,0):Tf|=s,pr===Ge&&(pr=0)),gi(e)}function Op(e,t){t===0&&(t=Gr()),e=bi(e,t),e!==null&&(Lt(e,t),gi(e))}function kv(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Op(e,s)}function Pv(e,t){var s=0;switch(e.tag){case 31:case 13:var u=e.stateNode,g=e.memoizedState;g!==null&&(s=g.retryLane);break;case 19:u=e.stateNode;break;case 22:u=e.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(t),Op(e,s)}function Gv(e,t){return mi(e,t)}var Mu=null,vr=null,Mf=!1,wu=!1,wf=!1,xo=0;function gi(e){e!==vr&&e.next===null&&(vr===null?Mu=vr=e:vr=vr.next=e),wu=!0,Mf||(Mf=!0,qv())}function Ql(e,t){if(!wf&&wu){wf=!0;do for(var s=!1,u=Mu;u!==null;){if(e!==0){var g=u.pendingLanes;if(g===0)var y=0;else{var b=u.suspendedLanes,x=u.pingedLanes;y=(1<<31-Bt(42|e)+1)-1,y&=g&~(b&~x),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(s=!0,kp(u,y))}else y=Ge,y=mt(u,u===ot?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Xi(u,y)||(s=!0,kp(u,y));u=u.next}while(s);wf=!1}}function Hv(){Dp()}function Dp(){wu=Mf=!1;var e=0;xo!==0&&Wv()&&(e=xo);for(var t=Oe(),s=null,u=Mu;u!==null;){var g=u.next,y=Up(u,t);y===0?(u.next=null,s===null?Mu=g:s.next=g,g===null&&(vr=s)):(s=u,(e!==0||(y&3)!==0)&&(wu=!0)),u=g}xt!==0&&xt!==5||Ql(e),xo!==0&&(xo=0)}function Up(e,t){for(var s=e.suspendedLanes,u=e.pingedLanes,g=e.expirationTimes,y=e.pendingLanes&-62914561;0<y;){var b=31-Bt(y),x=1<<b,L=g[b];L===-1?((x&s)===0||(x&u)!==0)&&(g[b]=pc(x,t)):L<=t&&(e.expiredLanes|=x),y&=~x}if(t=ot,s=Ge,s=mt(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),u=e.callbackNode,s===0||e===t&&(Ze===2||Ze===9)||e.cancelPendingCommit!==null)return u!==null&&u!==null&&Vo(u),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Xi(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(u!==null&&Vo(u),Os(s)){case 2:case 8:s=zo;break;case 32:s=Fo;break;case 268435456:s=Ht;break;default:s=Fo}return u=Lp.bind(null,e),s=mi(s,u),e.callbackPriority=t,e.callbackNode=s,t}return u!==null&&u!==null&&Vo(u),e.callbackPriority=2,e.callbackNode=null,2}function Lp(e,t){if(xt!==0&&xt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(bu()&&e.callbackNode!==s)return null;var u=Ge;return u=mt(e,e===ot?u:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),u===0?null:(mp(e,u,t),Up(e,Oe()),e.callbackNode!=null&&e.callbackNode===s?Lp.bind(null,e):null)}function kp(e,t){if(bu())return null;mp(e,t,!0)}function qv(){$v(function(){(Qe&6)!==0?mi(Lr,Hv):Dp()})}function xf(){if(xo===0){var e=yo;e===0&&(e=Jo,Jo<<=1,(Jo&261888)===0&&(Jo=256)),xo=e}return xo}function Pp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Wo(""+e)}function Gp(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function Bv(e,t,s,u,g){if(t==="submit"&&s&&s.stateNode===g){var y=Pp((g[It]||null).action),b=u.submitter;b&&(t=(t=b[It]||null)?Pp(t.formAction):b.getAttribute("formAction"),t!==null&&(y=t,b=null));var x=new Vs("action","action",null,u,g);e.push({event:x,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(xo!==0){var L=b?Gp(g,b):new FormData(g);Qc(s,{pending:!0,data:L,method:g.method,action:y},null,L)}}else typeof y=="function"&&(x.preventDefault(),L=b?Gp(g,b):new FormData(g),Qc(s,{pending:!0,data:L,method:g.method,action:y},y,L))},currentTarget:g}]})}}for(var If=0;If<gl.length;If++){var Nf=gl[If],Vv=Nf.toLowerCase(),zv=Nf[0].toUpperCase()+Nf.slice(1);Tn(Vv,"on"+zv)}Tn(Xa,"onAnimationEnd"),Tn(dl,"onAnimationIteration"),Tn(ri,"onAnimationStart"),Tn("dblclick","onDoubleClick"),Tn("focusin","onFocus"),Tn("focusout","onBlur"),Tn(hl,"onTransitionRun"),Tn(kc,"onTransitionStart"),Tn(Wa,"onTransitionCancel"),Tn(pl,"onTransitionEnd"),eo("onMouseEnter",["mouseout","mouseover"]),eo("onMouseLeave",["mouseout","mouseover"]),eo("onPointerEnter",["pointerout","pointerover"]),eo("onPointerLeave",["pointerout","pointerover"]),$n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$n("onBeforeInput",["compositionend","keypress","textInput","paste"]),$n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xl));function Hp(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var u=e[s],g=u.event;u=u.listeners;e:{var y=void 0;if(t)for(var b=u.length-1;0<=b;b--){var x=u[b],L=x.instance,F=x.currentTarget;if(x=x.listener,L!==y&&g.isPropagationStopped())break e;y=x,g.currentTarget=F;try{y(g)}catch(j){Ri(j)}g.currentTarget=null,y=L}else for(b=0;b<u.length;b++){if(x=u[b],L=x.instance,F=x.currentTarget,x=x.listener,L!==y&&g.isPropagationStopped())break e;y=x,g.currentTarget=F;try{y(g)}catch(j){Ri(j)}g.currentTarget=null,y=L}}}}function Pe(e,t){var s=t[zr];s===void 0&&(s=t[zr]=new Set);var u=e+"__bubble";s.has(u)||(qp(t,e,2,!1),s.add(u))}function Of(e,t,s){var u=0;t&&(u|=4),qp(s,e,u,t)}var xu="_reactListening"+Math.random().toString(36).slice(2);function Df(e){if(!e[xu]){e[xu]=!0,Yr.forEach(function(s){s!=="selectionchange"&&(Fv.has(s)||Of(s,!1,e),Of(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xu]||(t[xu]=!0,Of("selectionchange",!1,t))}}function qp(e,t,s,u){switch(gg(t)){case 2:var g=v0;break;case 8:g=T0;break;default:g=Qf}s=g.bind(null,t,s,e),g=void 0,!no||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(g=!0),u?g!==void 0?e.addEventListener(t,s,{capture:!0,passive:g}):e.addEventListener(t,s,!0):g!==void 0?e.addEventListener(t,s,{passive:g}):e.addEventListener(t,s,!1)}function Uf(e,t,s,u,g){var y=u;if((t&1)===0&&(t&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var x=u.stateNode.containerInfo;if(x===g)break;if(b===4)for(b=u.return;b!==null;){var L=b.tag;if((L===3||L===4)&&b.stateNode.containerInfo===g)return;b=b.return}for(;x!==null;){if(b=$i(x),b===null)return;if(L=b.tag,L===5||L===6||L===26||L===27){u=y=b;continue e}x=x.parentNode}}u=u.return}Zr(function(){var F=y,j=Xr(s),ne=[];e:{var J=Za.get(e);if(J!==void 0){var K=Vs,me=e;switch(e){case"keypress":if(Bs(s)===0)break e;case"keydown":case"keyup":K=ii;break;case"focusin":me="focus",K=io;break;case"focusout":me="blur",K=io;break;case"beforeblur":case"afterblur":K=io;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Aa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Ra;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Nc;break;case Xa:case dl:case ri:K=Ac;break;case pl:K=Ia;break;case"scroll":case"scrollend":K=_c;break;case"wheel":K=Na;break;case"copy":case"cut":case"paste":K=bc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=wa;break;case"toggle":case"beforetoggle":K=Da}var Ae=(t&4)!==0,it=!Ae&&(e==="scroll"||e==="scrollend"),q=Ae?J!==null?J+"Capture":null:J;Ae=[];for(var k=F,z;k!==null;){var ee=k;if(z=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||z===null||q===null||(ee=_i(k,q),ee!=null&&Ae.push(Wl(k,ee,z))),it)break;k=k.return}0<Ae.length&&(J=new K(J,me,null,s,j),ne.push({event:J,listeners:Ae}))}}if((t&7)===0){e:{if(J=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",J&&s!==qs&&(me=s.relatedTarget||s.fromElement)&&($i(me)||me[Wi]))break e;if((K||J)&&(J=j.window===j?j:(J=j.ownerDocument)?J.defaultView||J.parentWindow:window,K?(me=s.relatedTarget||s.toElement,K=F,me=me?$i(me):null,me!==null&&(it=p(me),Ae=me.tag,me!==it||Ae!==5&&Ae!==27&&Ae!==6)&&(me=null)):(K=null,me=F),K!==me)){if(Ae=Aa,ee="onMouseLeave",q="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(Ae=wa,ee="onPointerLeave",q="onPointerEnter",k="pointer"),it=K==null?J:Ko(K),z=me==null?J:Ko(me),J=new Ae(ee,k+"leave",K,s,j),J.target=it,J.relatedTarget=z,ee=null,$i(j)===F&&(Ae=new Ae(q,k+"enter",me,s,j),Ae.target=z,Ae.relatedTarget=it,ee=Ae),it=ee,K&&me)t:{for(Ae=Jv,q=K,k=me,z=0,ee=q;ee;ee=Ae(ee))z++;ee=0;for(var _e=k;_e;_e=Ae(_e))ee++;for(;0<z-ee;)q=Ae(q),z--;for(;0<ee-z;)k=Ae(k),ee--;for(;z--;){if(q===k||k!==null&&q===k.alternate){Ae=q;break t}q=Ae(q),k=Ae(k)}Ae=null}else Ae=null;K!==null&&Bp(ne,J,K,Ae,!1),me!==null&&it!==null&&Bp(ne,it,me,Ae,!0)}}e:{if(J=F?Ko(F):window,K=J.nodeName&&J.nodeName.toLowerCase(),K==="select"||K==="input"&&J.type==="file")var Fe=ol;else if(il(J))if(sl)Fe=Ja;else{Fe=za;var ve=ss}else K=J.nodeName,!K||K.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?F&&Hs(F.elementType)&&(Fe=ol):Fe=Fa;if(Fe&&(Fe=Fe(e,F))){qa(ne,Fe,s,j);break e}ve&&ve(e,J,F),e==="focusout"&&F&&J.type==="number"&&F.memoizedProps.value!=null&&Qr(J,"number",J.value)}switch(ve=F?Ko(F):window,e){case"focusin":(il(ve)||ve.contentEditable==="true")&&(oi=ve,ls=F,as=null);break;case"focusout":as=ls=oi=null;break;case"mousedown":ul=!0;break;case"contextmenu":case"mouseup":case"dragend":ul=!1,Ks(ne,s,j);break;case"selectionchange":if(Ft)break;case"keydown":case"keyup":Ks(ne,s,j)}var Ue;if(Fs)e:{switch(e){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else so?Pa(e,s)&&(He="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(He="onCompositionStart");He&&(yn&&s.locale!=="ko"&&(so||He!=="onCompositionStart"?He==="onCompositionEnd"&&so&&(Ue=$r()):(Xt=j,ni="value"in Xt?Xt.value:Xt.textContent,so=!0)),ve=Iu(F,He),0<ve.length&&(He=new nl(He,e,null,s,j),ne.push({event:He,listeners:ve}),Ue?He.data=Ue:(Ue=Ga(s),Ue!==null&&(He.data=Ue)))),(Ue=ns?Uc(e,s):Ha(e,s))&&(He=Iu(F,"onBeforeInput"),0<He.length&&(ve=new nl("onBeforeInput","beforeinput",null,s,j),ne.push({event:ve,listeners:He}),ve.data=Ue)),Bv(ne,e,F,s,j)}Hp(ne,t)})}function Wl(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Iu(e,t){for(var s=t+"Capture",u=[];e!==null;){var g=e,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=_i(e,s),g!=null&&u.unshift(Wl(e,g,y)),g=_i(e,t),g!=null&&u.push(Wl(e,g,y))),e.tag===3)return u;e=e.return}return[]}function Jv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Bp(e,t,s,u,g){for(var y=t._reactName,b=[];s!==null&&s!==u;){var x=s,L=x.alternate,F=x.stateNode;if(x=x.tag,L!==null&&L===u)break;x!==5&&x!==26&&x!==27||F===null||(L=F,g?(F=_i(s,y),F!=null&&b.unshift(Wl(s,F,L))):g||(F=_i(s,y),F!=null&&b.push(Wl(s,F,L)))),s=s.return}b.length!==0&&e.push({event:t,listeners:b})}var Yv=/\r\n?/g,Kv=/\u0000|\uFFFD/g;function Vp(e){return(typeof e=="string"?e:""+e).replace(Yv,`
`).replace(Kv,"")}function zp(e,t){return t=Vp(t),Vp(e)===t}function nt(e,t,s,u,g,y){switch(s){case"children":typeof u=="string"?t==="body"||t==="textarea"&&u===""||jn(e,u):(typeof u=="number"||typeof u=="bigint")&&t!=="body"&&jn(e,""+u);break;case"className":ks(e,"class",u);break;case"tabIndex":ks(e,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ks(e,s,u);break;case"style":Ee(e,u,y);break;case"data":if(t!=="object"){ks(e,"data",u);break}case"src":case"href":if(u===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(s);break}u=Wo(""+u),e.setAttribute(s,u);break;case"action":case"formAction":if(typeof u=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(s==="formAction"?(t!=="input"&&nt(e,t,"name",g.name,g,null),nt(e,t,"formEncType",g.formEncType,g,null),nt(e,t,"formMethod",g.formMethod,g,null),nt(e,t,"formTarget",g.formTarget,g,null)):(nt(e,t,"encType",g.encType,g,null),nt(e,t,"method",g.method,g,null),nt(e,t,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(s);break}u=Wo(""+u),e.setAttribute(s,u);break;case"onClick":u!=null&&(e.onclick=qn);break;case"onScroll":u!=null&&Pe("scroll",e);break;case"onScrollEnd":u!=null&&Pe("scrollend",e);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(s=u.__html,s!=null){if(g.children!=null)throw Error(r(60));e.innerHTML=s}}break;case"multiple":e.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":e.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){e.removeAttribute("xlink:href");break}s=Wo(""+u),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(s,""+u):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":u===!0?e.setAttribute(s,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(s,u):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?e.setAttribute(s,u):e.removeAttribute(s);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?e.removeAttribute(s):e.setAttribute(s,u);break;case"popover":Pe("beforetoggle",e),Pe("toggle",e),Qo(e,"popover",u);break;case"xlinkActuate":Rn(e,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Rn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Rn(e,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Rn(e,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Rn(e,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Rn(e,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Rn(e,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Rn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Rn(e,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Qo(e,"is",u);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Vt.get(s)||s,Qo(e,s,u))}}function Lf(e,t,s,u,g,y){switch(s){case"style":Ee(e,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(s=u.__html,s!=null){if(g.children!=null)throw Error(r(60));e.innerHTML=s}}break;case"children":typeof u=="string"?jn(e,u):(typeof u=="number"||typeof u=="bigint")&&jn(e,""+u);break;case"onScroll":u!=null&&Pe("scroll",e);break;case"onScrollEnd":u!=null&&Pe("scrollend",e);break;case"onClick":u!=null&&(e.onclick=qn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!at.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(g=s.endsWith("Capture"),t=s.slice(2,g?s.length-7:void 0),y=e[It]||null,y=y!=null?y[s]:null,typeof y=="function"&&e.removeEventListener(t,y,g),typeof u=="function")){typeof y!="function"&&y!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,u,g);break e}s in e?e[s]=u:u===!0?e.setAttribute(s,""):Qo(e,s,u)}}}function Gt(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",e),Pe("load",e);var u=!1,g=!1,y;for(y in s)if(s.hasOwnProperty(y)){var b=s[y];if(b!=null)switch(y){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:nt(e,t,y,b,s,null)}}g&&nt(e,t,"srcSet",s.srcSet,s,null),u&&nt(e,t,"src",s.src,s,null);return;case"input":Pe("invalid",e);var x=y=b=g=null,L=null,F=null;for(u in s)if(s.hasOwnProperty(u)){var j=s[u];if(j!=null)switch(u){case"name":g=j;break;case"type":b=j;break;case"checked":L=j;break;case"defaultChecked":F=j;break;case"value":y=j;break;case"defaultValue":x=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(137,t));break;default:nt(e,t,u,j,s,null)}}Ti(e,y,x,L,F,b,g,!1);return;case"select":Pe("invalid",e),u=b=y=null;for(g in s)if(s.hasOwnProperty(g)&&(x=s[g],x!=null))switch(g){case"value":y=x;break;case"defaultValue":b=x;break;case"multiple":u=x;default:nt(e,t,g,x,s,null)}t=y,s=b,e.multiple=!!u,t!=null?to(e,!!u,t,!1):s!=null&&to(e,!!u,s,!0);return;case"textarea":Pe("invalid",e),y=g=u=null;for(b in s)if(s.hasOwnProperty(b)&&(x=s[b],x!=null))switch(b){case"value":u=x;break;case"defaultValue":g=x;break;case"children":y=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:nt(e,t,b,x,s,null)}Ca(e,u,g,y);return;case"option":for(L in s)if(s.hasOwnProperty(L)&&(u=s[L],u!=null))switch(L){case"selected":e.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:nt(e,t,L,u,s,null)}return;case"dialog":Pe("beforetoggle",e),Pe("toggle",e),Pe("cancel",e),Pe("close",e);break;case"iframe":case"object":Pe("load",e);break;case"video":case"audio":for(u=0;u<Xl.length;u++)Pe(Xl[u],e);break;case"image":Pe("error",e),Pe("load",e);break;case"details":Pe("toggle",e);break;case"embed":case"source":case"link":Pe("error",e),Pe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in s)if(s.hasOwnProperty(F)&&(u=s[F],u!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:nt(e,t,F,u,s,null)}return;default:if(Hs(t)){for(j in s)s.hasOwnProperty(j)&&(u=s[j],u!==void 0&&Lf(e,t,j,u,s,void 0));return}}for(x in s)s.hasOwnProperty(x)&&(u=s[x],u!=null&&nt(e,t,x,u,s,null))}function Qv(e,t,s,u){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,b=null,x=null,L=null,F=null,j=null;for(K in s){var ne=s[K];if(s.hasOwnProperty(K)&&ne!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":L=ne;default:u.hasOwnProperty(K)||nt(e,t,K,null,u,ne)}}for(var J in u){var K=u[J];if(ne=s[J],u.hasOwnProperty(J)&&(K!=null||ne!=null))switch(J){case"type":y=K;break;case"name":g=K;break;case"checked":F=K;break;case"defaultChecked":j=K;break;case"value":b=K;break;case"defaultValue":x=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,t));break;default:K!==ne&&nt(e,t,J,K,u,ne)}}Xo(e,b,x,L,F,j,y,g);return;case"select":K=b=x=J=null;for(y in s)if(L=s[y],s.hasOwnProperty(y)&&L!=null)switch(y){case"value":break;case"multiple":K=L;default:u.hasOwnProperty(y)||nt(e,t,y,null,u,L)}for(g in u)if(y=u[g],L=s[g],u.hasOwnProperty(g)&&(y!=null||L!=null))switch(g){case"value":J=y;break;case"defaultValue":x=y;break;case"multiple":b=y;default:y!==L&&nt(e,t,g,y,u,L)}t=x,s=b,u=K,J!=null?to(e,!!s,J,!1):!!u!=!!s&&(t!=null?to(e,!!s,t,!0):to(e,!!s,s?[]:"",!1));return;case"textarea":K=J=null;for(x in s)if(g=s[x],s.hasOwnProperty(x)&&g!=null&&!u.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:nt(e,t,x,null,u,g)}for(b in u)if(g=u[b],y=s[b],u.hasOwnProperty(b)&&(g!=null||y!=null))switch(b){case"value":J=g;break;case"defaultValue":K=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==y&&nt(e,t,b,g,u,y)}Gs(e,J,K);return;case"option":for(var me in s)if(J=s[me],s.hasOwnProperty(me)&&J!=null&&!u.hasOwnProperty(me))switch(me){case"selected":e.selected=!1;break;default:nt(e,t,me,null,u,J)}for(L in u)if(J=u[L],K=s[L],u.hasOwnProperty(L)&&J!==K&&(J!=null||K!=null))switch(L){case"selected":e.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:nt(e,t,L,J,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in s)J=s[Ae],s.hasOwnProperty(Ae)&&J!=null&&!u.hasOwnProperty(Ae)&&nt(e,t,Ae,null,u,J);for(F in u)if(J=u[F],K=s[F],u.hasOwnProperty(F)&&J!==K&&(J!=null||K!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,t));break;default:nt(e,t,F,J,u,K)}return;default:if(Hs(t)){for(var it in s)J=s[it],s.hasOwnProperty(it)&&J!==void 0&&!u.hasOwnProperty(it)&&Lf(e,t,it,void 0,u,J);for(j in u)J=u[j],K=s[j],!u.hasOwnProperty(j)||J===K||J===void 0&&K===void 0||Lf(e,t,j,J,u,K);return}}for(var q in s)J=s[q],s.hasOwnProperty(q)&&J!=null&&!u.hasOwnProperty(q)&&nt(e,t,q,null,u,J);for(ne in u)J=u[ne],K=s[ne],!u.hasOwnProperty(ne)||J===K||J==null&&K==null||nt(e,t,ne,J,u,K)}function Fp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Xv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),u=0;u<s.length;u++){var g=s[u],y=g.transferSize,b=g.initiatorType,x=g.duration;if(y&&x&&Fp(b)){for(b=0,x=g.responseEnd,u+=1;u<s.length;u++){var L=s[u],F=L.startTime;if(F>x)break;var j=L.transferSize,ne=L.initiatorType;j&&Fp(ne)&&(L=L.responseEnd,b+=j*(L<x?1:(x-F)/(L-F)))}if(--u,t+=8*(y+b)/(g.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var kf=null,Pf=null;function Nu(e){return e.nodeType===9?e:e.ownerDocument}function Jp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Yp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Gf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hf=null;function Wv(){var e=window.event;return e&&e.type==="popstate"?e===Hf?!1:(Hf=e,!0):(Hf=null,!1)}var Kp=typeof setTimeout=="function"?setTimeout:void 0,Zv=typeof clearTimeout=="function"?clearTimeout:void 0,Qp=typeof Promise=="function"?Promise:void 0,$v=typeof queueMicrotask=="function"?queueMicrotask:typeof Qp<"u"?function(e){return Qp.resolve(null).then(e).catch(jv)}:Kp;function jv(e){setTimeout(function(){throw e})}function Io(e){return e==="head"}function Xp(e,t){var s=t,u=0;do{var g=s.nextSibling;if(e.removeChild(s),g&&g.nodeType===8)if(s=g.data,s==="/$"||s==="/&"){if(u===0){e.removeChild(g),Er(t);return}u--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")u++;else if(s==="html")Zl(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Zl(s);for(var y=s.firstChild;y;){var b=y.nextSibling,x=y.nodeName;y[Zi]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&y.rel.toLowerCase()==="stylesheet"||s.removeChild(y),y=b}}else s==="body"&&Zl(e.ownerDocument.body);s=g}while(s);Er(t)}function Wp(e,t){var s=e;e=0;do{var u=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),u&&u.nodeType===8)if(s=u.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=u}while(s)}function qf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":qf(s),Jr(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function e0(e,t,s,u){for(;e.nodeType===1;){var g=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!u&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(u){if(!e[Zi])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(y=e.getAttribute("rel"),y==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(y!==g.rel||e.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||e.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||e.getAttribute("title")!==(g.title==null?null:g.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(y=e.getAttribute("src"),(y!==(g.src==null?null:g.src)||e.getAttribute("type")!==(g.type==null?null:g.type)||e.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&e.getAttribute("name")===y)return e}else return e;if(e=Un(e.nextSibling),e===null)break}return null}function t0(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Un(e.nextSibling),e===null))return null;return e}function Zp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Un(e.nextSibling),e===null))return null;return e}function Bf(e){return e.data==="$?"||e.data==="$~"}function Vf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function n0(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var u=function(){t(),s.removeEventListener("DOMContentLoaded",u)};s.addEventListener("DOMContentLoaded",u),e._reactRetry=u}}function Un(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var zf=null;function $p(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return Un(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function jp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function eg(e,t,s){switch(t=Nu(s),e){case"html":if(e=t.documentElement,!e)throw Error(r(452));return e;case"head":if(e=t.head,!e)throw Error(r(453));return e;case"body":if(e=t.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Zl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Jr(e)}var Ln=new Map,tg=new Set;function Ou(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var zi=re.d;re.d={f:i0,r:o0,D:s0,C:r0,L:l0,m:a0,X:c0,S:u0,M:f0};function i0(){var e=zi.f(),t=Cu();return e||t}function o0(e){var t=Se(e);t!==null&&t.tag===5&&t.type==="form"?vh(t):zi.r(e)}var Tr=typeof document>"u"?null:document;function ng(e,t,s){var u=Tr;if(u&&typeof t=="string"&&t){var g=ht(t);g='link[rel="'+e+'"][href="'+g+'"]',typeof s=="string"&&(g+='[crossorigin="'+s+'"]'),tg.has(g)||(tg.add(g),e={rel:e,crossOrigin:s,href:t},u.querySelector(g)===null&&(t=u.createElement("link"),Gt(t,"link",e),yt(t),u.head.appendChild(t)))}}function s0(e){zi.D(e),ng("dns-prefetch",e,null)}function r0(e,t){zi.C(e,t),ng("preconnect",e,t)}function l0(e,t,s){zi.L(e,t,s);var u=Tr;if(u&&e&&t){var g='link[rel="preload"][as="'+ht(t)+'"]';t==="image"&&s&&s.imageSrcSet?(g+='[imagesrcset="'+ht(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(g+='[imagesizes="'+ht(s.imageSizes)+'"]')):g+='[href="'+ht(e)+'"]';var y=g;switch(t){case"style":y=Sr(e);break;case"script":y=_r(e)}Ln.has(y)||(e=M({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),Ln.set(y,e),u.querySelector(g)!==null||t==="style"&&u.querySelector($l(y))||t==="script"&&u.querySelector(jl(y))||(t=u.createElement("link"),Gt(t,"link",e),yt(t),u.head.appendChild(t)))}}function a0(e,t){zi.m(e,t);var s=Tr;if(s&&e){var u=t&&typeof t.as=="string"?t.as:"script",g='link[rel="modulepreload"][as="'+ht(u)+'"][href="'+ht(e)+'"]',y=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=_r(e)}if(!Ln.has(y)&&(e=M({rel:"modulepreload",href:e},t),Ln.set(y,e),s.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(jl(y)))return}u=s.createElement("link"),Gt(u,"link",e),yt(u),s.head.appendChild(u)}}}function u0(e,t,s){zi.S(e,t,s);var u=Tr;if(u&&e){var g=ji(u).hoistableStyles,y=Sr(e);t=t||"default";var b=g.get(y);if(!b){var x={loading:0,preload:null};if(b=u.querySelector($l(y)))x.loading=5;else{e=M({rel:"stylesheet",href:e,"data-precedence":t},s),(s=Ln.get(y))&&Ff(e,s);var L=b=u.createElement("link");yt(L),Gt(L,"link",e),L._p=new Promise(function(F,j){L.onload=F,L.onerror=j}),L.addEventListener("load",function(){x.loading|=1}),L.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Du(b,t,u)}b={type:"stylesheet",instance:b,count:1,state:x},g.set(y,b)}}}function c0(e,t){zi.X(e,t);var s=Tr;if(s&&e){var u=ji(s).hoistableScripts,g=_r(e),y=u.get(g);y||(y=s.querySelector(jl(g)),y||(e=M({src:e,async:!0},t),(t=Ln.get(g))&&Jf(e,t),y=s.createElement("script"),yt(y),Gt(y,"link",e),s.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function f0(e,t){zi.M(e,t);var s=Tr;if(s&&e){var u=ji(s).hoistableScripts,g=_r(e),y=u.get(g);y||(y=s.querySelector(jl(g)),y||(e=M({src:e,async:!0,type:"module"},t),(t=Ln.get(g))&&Jf(e,t),y=s.createElement("script"),yt(y),Gt(y,"link",e),s.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function ig(e,t,s,u){var g=(g=Le.current)?Ou(g):null;if(!g)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=Sr(s.href),s=ji(g).hoistableStyles,u=s.get(t),u||(u={type:"style",instance:null,count:0,state:null},s.set(t,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Sr(s.href);var y=ji(g).hoistableStyles,b=y.get(e);if(b||(g=g.ownerDocument||g,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(e,b),(y=g.querySelector($l(e)))&&!y._p&&(b.instance=y,b.state.loading=5),Ln.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Ln.set(e,s),y||d0(g,e,s,b.state))),t&&u===null)throw Error(r(528,""));return b}if(t&&u!==null)throw Error(r(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=_r(s),s=ji(g).hoistableScripts,u=s.get(t),u||(u={type:"script",instance:null,count:0,state:null},s.set(t,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Sr(e){return'href="'+ht(e)+'"'}function $l(e){return'link[rel="stylesheet"]['+e+"]"}function og(e){return M({},e,{"data-precedence":e.precedence,precedence:null})}function d0(e,t,s,u){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?u.loading=1:(t=e.createElement("link"),u.preload=t,t.addEventListener("load",function(){return u.loading|=1}),t.addEventListener("error",function(){return u.loading|=2}),Gt(t,"link",s),yt(t),e.head.appendChild(t))}function _r(e){return'[src="'+ht(e)+'"]'}function jl(e){return"script[async]"+e}function sg(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var u=e.querySelector('style[data-href~="'+ht(s.href)+'"]');if(u)return t.instance=u,yt(u),u;var g=M({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return u=(e.ownerDocument||e).createElement("style"),yt(u),Gt(u,"style",g),Du(u,s.precedence,e),t.instance=u;case"stylesheet":g=Sr(s.href);var y=e.querySelector($l(g));if(y)return t.state.loading|=4,t.instance=y,yt(y),y;u=og(s),(g=Ln.get(g))&&Ff(u,g),y=(e.ownerDocument||e).createElement("link"),yt(y);var b=y;return b._p=new Promise(function(x,L){b.onload=x,b.onerror=L}),Gt(y,"link",u),t.state.loading|=4,Du(y,s.precedence,e),t.instance=y;case"script":return y=_r(s.src),(g=e.querySelector(jl(y)))?(t.instance=g,yt(g),g):(u=s,(g=Ln.get(y))&&(u=M({},s),Jf(u,g)),e=e.ownerDocument||e,g=e.createElement("script"),yt(g),Gt(g,"link",u),e.head.appendChild(g),t.instance=g);case"void":return null;default:throw Error(r(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(u=t.instance,t.state.loading|=4,Du(u,s.precedence,e));return t.instance}function Du(e,t,s){for(var u=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,y=g,b=0;b<u.length;b++){var x=u[b];if(x.dataset.precedence===t)y=x;else if(y!==g)break}y?y.parentNode.insertBefore(e,y.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function Ff(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Jf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Uu=null;function rg(e,t,s){if(Uu===null){var u=new Map,g=Uu=new Map;g.set(s,u)}else g=Uu,u=g.get(s),u||(u=new Map,g.set(s,u));if(u.has(e))return u;for(u.set(e,null),s=s.getElementsByTagName(e),g=0;g<s.length;g++){var y=s[g];if(!(y[Zi]||y[bt]||e==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var b=y.getAttribute(t)||"";b=e+b;var x=u.get(b);x?x.push(y):u.set(b,[y])}}return u}function lg(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function h0(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function ag(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function p0(e,t,s,u){if(s.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var g=Sr(u.href),y=t.querySelector($l(g));if(y){t=y._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Lu.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=y,yt(y);return}y=t.ownerDocument||t,u=og(u),(g=Ln.get(g))&&Ff(u,g),y=y.createElement("link"),yt(y);var b=y;b._p=new Promise(function(x,L){b.onload=x,b.onerror=L}),Gt(y,"link",u),s.instance=y}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Lu.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var Yf=0;function g0(e,t){return e.stylesheets&&e.count===0&&Pu(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var u=setTimeout(function(){if(e.stylesheets&&Pu(e,e.stylesheets),e.unsuspend){var y=e.unsuspend;e.unsuspend=null,y()}},6e4+t);0<e.imgBytes&&Yf===0&&(Yf=62500*Xv());var g=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Pu(e,e.stylesheets),e.unsuspend)){var y=e.unsuspend;e.unsuspend=null,y()}},(e.imgBytes>Yf?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Lu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Pu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ku=null;function Pu(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ku=new Map,t.forEach(m0,e),ku=null,Lu.call(e))}function m0(e,t){if(!(t.state.loading&4)){var s=ku.get(e);if(s)var u=s.get(null);else{s=new Map,ku.set(e,s);for(var g=e.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var b=g[y];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(s.set(b.dataset.precedence,b),u=b)}u&&s.set(null,u)}g=t.instance,b=g.getAttribute("data-precedence"),y=s.get(b)||u,y===u&&s.set(null,g),s.set(b,g),this.count++,u=Lu.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),y?y.parentNode.insertBefore(g,y.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(g,e.firstChild)),t.state.loading|=4}}var ea={$$typeof:oe,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function y0(e,t,s,u,g,y,b,x,L){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hr(0),this.hiddenUpdates=Hr(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function ug(e,t,s,u,g,y,b,x,L,F,j,ne){return e=new y0(e,t,s,b,L,F,j,ne,x),t=1,y===!0&&(t|=24),y=wt(3,null,null,t),e.current=y,y.stateNode=e,t=ut(),t.refCount++,e.pooledCache=t,t.refCount++,y.memoizedState={element:u,isDehydrated:s,cache:t},ys(y),e}function cg(e){return e?(e=uo,e):uo}function fg(e,t,s,u,g,y){g=cg(g),u.context===null?u.context=g:u.pendingContext=g,u=On(t),u.payload={element:s},y=y===void 0?null:y,y!==null&&(u.callback=y),s=Yn(e,u,t),s!==null&&(hn(s,e,t),vs(s,e,t))}function dg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Kf(e,t){dg(e,t),(e=e.alternate)&&dg(e,t)}function hg(e){if(e.tag===13||e.tag===31){var t=bi(e,67108864);t!==null&&hn(t,e,67108864),Kf(e,67108864)}}function pg(e){if(e.tag===13||e.tag===31){var t=Cn();t=Ns(t);var s=bi(e,t);s!==null&&hn(s,e,t),Kf(e,t)}}var Gu=!0;function v0(e,t,s,u){var g=O.T;O.T=null;var y=re.p;try{re.p=2,Qf(e,t,s,u)}finally{re.p=y,O.T=g}}function T0(e,t,s,u){var g=O.T;O.T=null;var y=re.p;try{re.p=8,Qf(e,t,s,u)}finally{re.p=y,O.T=g}}function Qf(e,t,s,u){if(Gu){var g=Xf(u);if(g===null)Uf(e,t,u,Hu,s),mg(e,u);else if(_0(g,e,t,s,u))u.stopPropagation();else if(mg(e,u),t&4&&-1<S0.indexOf(e)){for(;g!==null;){var y=Se(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var b=An(y.pendingLanes);if(b!==0){var x=y;for(x.pendingLanes|=2,x.entangledLanes|=2;b;){var L=1<<31-Bt(b);x.entanglements[1]|=L,b&=~L}gi(y),(Qe&6)===0&&(_u=Oe()+500,Ql(0))}}break;case 31:case 13:x=bi(y,2),x!==null&&hn(x,y,2),Cu(),Kf(y,2)}if(y=Xf(u),y===null&&Uf(e,t,u,Hu,s),y===g)break;g=y}g!==null&&u.stopPropagation()}else Uf(e,t,u,null,s)}}function Xf(e){return e=Xr(e),Wf(e)}var Hu=null;function Wf(e){if(Hu=null,e=$i(e),e!==null){var t=p(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=m(t),e!==null)return e;e=null}else if(s===31){if(e=T(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Hu=e,null}function gg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pa()){case Lr:return 2;case zo:return 8;case Fo:case ga:return 32;case Ht:return 268435456;default:return 32}default:return 32}}var Zf=!1,No=null,Oo=null,Do=null,ta=new Map,na=new Map,Uo=[],S0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mg(e,t){switch(e){case"focusin":case"focusout":No=null;break;case"dragenter":case"dragleave":Oo=null;break;case"mouseover":case"mouseout":Do=null;break;case"pointerover":case"pointerout":ta.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":na.delete(t.pointerId)}}function ia(e,t,s,u,g,y){return e===null||e.nativeEvent!==y?(e={blockedOn:t,domEventName:s,eventSystemFlags:u,nativeEvent:y,targetContainers:[g]},t!==null&&(t=Se(t),t!==null&&hg(t)),e):(e.eventSystemFlags|=u,t=e.targetContainers,g!==null&&t.indexOf(g)===-1&&t.push(g),e)}function _0(e,t,s,u,g){switch(t){case"focusin":return No=ia(No,e,t,s,u,g),!0;case"dragenter":return Oo=ia(Oo,e,t,s,u,g),!0;case"mouseover":return Do=ia(Do,e,t,s,u,g),!0;case"pointerover":var y=g.pointerId;return ta.set(y,ia(ta.get(y)||null,e,t,s,u,g)),!0;case"gotpointercapture":return y=g.pointerId,na.set(y,ia(na.get(y)||null,e,t,s,u,g)),!0}return!1}function yg(e){var t=$i(e.target);if(t!==null){var s=p(t);if(s!==null){if(t=s.tag,t===13){if(t=m(s),t!==null){e.blockedOn=t,va(e.priority,function(){pg(s)});return}}else if(t===31){if(t=T(s),t!==null){e.blockedOn=t,va(e.priority,function(){pg(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Xf(e.nativeEvent);if(s===null){s=e.nativeEvent;var u=new s.constructor(s.type,s);qs=u,s.target.dispatchEvent(u),qs=null}else return t=Se(s),t!==null&&hg(t),e.blockedOn=s,!1;t.shift()}return!0}function vg(e,t,s){qu(e)&&s.delete(t)}function E0(){Zf=!1,No!==null&&qu(No)&&(No=null),Oo!==null&&qu(Oo)&&(Oo=null),Do!==null&&qu(Do)&&(Do=null),ta.forEach(vg),na.forEach(vg)}function Bu(e,t){e.blockedOn===t&&(e.blockedOn=null,Zf||(Zf=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,E0)))}var Vu=null;function Tg(e){Vu!==e&&(Vu=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Vu===e&&(Vu=null);for(var t=0;t<e.length;t+=3){var s=e[t],u=e[t+1],g=e[t+2];if(typeof u!="function"){if(Wf(u||s)===null)continue;break}var y=Se(s);y!==null&&(e.splice(t,3),t-=3,Qc(y,{pending:!0,data:g,method:s.method,action:u},u,g))}}))}function Er(e){function t(L){return Bu(L,e)}No!==null&&Bu(No,e),Oo!==null&&Bu(Oo,e),Do!==null&&Bu(Do,e),ta.forEach(t),na.forEach(t);for(var s=0;s<Uo.length;s++){var u=Uo[s];u.blockedOn===e&&(u.blockedOn=null)}for(;0<Uo.length&&(s=Uo[0],s.blockedOn===null);)yg(s),s.blockedOn===null&&Uo.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(u=0;u<s.length;u+=3){var g=s[u],y=s[u+1],b=g[It]||null;if(typeof y=="function")b||Tg(s);else if(b){var x=null;if(y&&y.hasAttribute("formAction")){if(g=y,b=y[It]||null)x=b.formAction;else if(Wf(g)!==null)continue}else x=b.action;typeof x=="function"?s[u+1]=x:(s.splice(u,3),u-=3),Tg(s)}}}function Sg(){function e(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(b){return g=b})},focusReset:"manual",scroll:"manual"})}function t(){g!==null&&(g(),g=null),u||setTimeout(s,20)}function s(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){u=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),g!==null&&(g(),g=null)}}}function $f(e){this._internalRoot=e}zu.prototype.render=$f.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));var s=t.current,u=Cn();fg(s,u,e,t,null,null)},zu.prototype.unmount=$f.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fg(e.current,2,null,e,null,null),Cu(),t[Wi]=null}};function zu(e){this._internalRoot=e}zu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vr();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Uo.length&&t!==0&&t<Uo[s].priority;s++);Uo.splice(s,0,e),s===0&&yg(e)}};var _g=n.version;if(_g!=="19.2.4")throw Error(r(527,_g,"19.2.4"));re.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=S(t),e=e!==null?C(e):null,e=e===null?null:e.stateNode,e};var C0={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fu.isDisabled&&Fu.supportsFiber)try{yi=Fu.inject(C0),qt=Fu}catch{}}return sa.createRoot=function(e,t){if(!c(e))throw Error(r(299));var s=!1,u="",g=wh,y=xh,b=Ih;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(u=t.identifierPrefix),t.onUncaughtError!==void 0&&(g=t.onUncaughtError),t.onCaughtError!==void 0&&(y=t.onCaughtError),t.onRecoverableError!==void 0&&(b=t.onRecoverableError)),t=ug(e,1,!1,null,null,s,u,null,g,y,b,Sg),e[Wi]=t.current,Df(e),new $f(t)},sa.hydrateRoot=function(e,t,s){if(!c(e))throw Error(r(299));var u=!1,g="",y=wh,b=xh,x=Ih,L=null;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(x=s.onRecoverableError),s.formState!==void 0&&(L=s.formState)),t=ug(e,1,!0,t,s??null,u,g,L,y,b,x,Sg),t.context=cg(null),s=t.current,u=Cn(),u=Ns(u),g=On(u),g.callback=null,Yn(s,g,u),s=u,t.current.lanes=s,Lt(t,s),gi(t),e[Wi]=t.current,Df(e),new zu(t)},sa.version="19.2.4",sa}var Ng;function O0(){if(Ng)return td.exports;Ng=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),td.exports=N0(),td.exports}var D0=O0();const U0=py(D0),L0=()=>U.jsxs(U.Fragment,{children:[U.jsx("div",{className:"crt-overlay"}),U.jsx("div",{className:"crt-vignette"}),U.jsx("div",{className:"scanline-bar"})]}),Ju=({name:i,iconUrl:n,onDoubleClick:o})=>{const[r,c]=st.useState(!1);return U.jsxs("div",{className:`w-20 flex flex-col items-center gap-1 cursor-pointer p-2 ${r?"bg-blue-900/40 outline-dashed outline-1 outline-white":""}`,onClick:()=>c(!r),onDoubleClick:o,children:[U.jsx("img",{src:n,alt:i,className:"w-10 h-10 drop-shadow-lg"}),U.jsx("span",{className:"text-[11px] text-white text-center leading-tight drop-shadow-[1px_1px_black]",children:i})]})};var As=-1;let Og=!1;const Po="/HORemake/";function k0(){if(As++,As===0){const n=document.createElement("img"),o=document.createElement("div");o.className="fixed bottom-10 left-1/2 -translate-x-1/2 text-red-500 font-bold text-xl z-2 bg-black p-4 rounded-lg text-center min-w-[300px]",n.src=Po+"img/eye.gif",n.className="fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-32 h-32 z-2 pointer-events-none",document.body.appendChild(n),document.body.appendChild(o),setTimeout(()=>{n.src=Po+"img/static-eye.gif";const r="you should not close the main page. go back";let c=0;const p=setInterval(()=>{c<r.length?(o.innerHTML=r.substring(0,c+1),c++):clearInterval(p)},30);setTimeout(()=>{document.body.contains(o)&&(document.body.removeChild(o),document.body.removeChild(n));const m=new MouseEvent("dblclick",{view:window,bubbles:!0,cancelable:!0}),T=document.querySelector('img[alt="MyComputer"]');T&&T.closest(".cursor-pointer").dispatchEvent(m)},3e3)},3e3)}console.log(As);const i=document.createElement("img");As===1&&(i.src=Po+"img/hole2.png",i.className="fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-32 h-32 z-2 pointer-events-none",console.log(As)),As===2&&(i.src=Po+"img/hole2.png",i.className="fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-35 h-35 z-2 max-w-[400px] max-h-[400px] pointer-events-none"),As===3&&(i.src=Po+"img/hole2.png",i.className="fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-35 h-35 z-2 max-w-[900px] max-h-[900px] pointer-events-none",P0()),document.body.appendChild(i)}function P0(){if(Og)return;Og=!0;const i=document.getElementById("strange");i&&(i.style.transition="opacity 8s ease",i.style.opacity="0",i.style.filter="grayscale(100%)");const n=document.getElementById("webamp");n&&(n.style.transition="filter 4s ease",n.style.filter="grayscale(100%)"),document.body.style.pointerEvents="none",document.body.style.userSelect="none",document.body.style.overflow="hidden",document.body.style.backgroundColor="black";const o=document.createElement("div");o.style.position="fixed",o.style.inset="0",o.style.background="black",o.style.opacity="0",o.style.transition="opacity 8s ease",o.style.zIndex="20000",o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center",o.style.justifyContent="center",o.style.gap="16px",o.style.pointerEvents="none",document.body.appendChild(o),requestAnimationFrame(()=>{o.style.opacity="1"});const r="pill-rain-style";if(!document.getElementById(r)){const M=document.createElement("style");M.id=r,M.textContent=`
      @keyframes pill-fall {
        0% { transform: translate3d(var(--pill-x), -15%, 0) rotate(var(--pill-rot)); opacity: 0; }
        10% { opacity: 1; }
        100% { transform: translate3d(var(--pill-x), 115vh, 0) rotate(calc(var(--pill-rot) + 360deg)); opacity: 0; }
      }
    `,document.head.appendChild(M)}const c=document.createElement("div");c.style.position="fixed",c.style.inset="0",c.style.zIndex="19999",c.style.pointerEvents="none",c.style.overflow="hidden",document.body.appendChild(c);const p=document.createElement("div");p.style.position="fixed",p.style.inset="0",p.style.zIndex="20002",p.style.pointerEvents="none",p.style.overflow="hidden",document.body.appendChild(p);const m=new Audio(Po+"sounds/transition.mp3");m.play().catch(()=>{});let T=null,E=null;const S=M=>{const w=document.createElement("img");w.src=Po+"img/redpill.png",w.style.position="absolute",w.style.top="-10vh",w.style.left="0",w.style.width=`${28+Math.random()*28}px`,w.style.height="auto",w.style.opacity="0",w.style.setProperty("--pill-x",`${Math.random()*100}vw`),w.style.setProperty("--pill-rot",`${Math.random()*360}deg`),w.style.animation=`pill-fall ${M}s linear forwards`,(Math.random()<.3?c:p).appendChild(w),w.addEventListener("animationend",()=>{w.parentElement&&w.parentElement.removeChild(w)})},C=()=>{T=window.setInterval(()=>{const w=m.duration&&!Number.isNaN(m.duration)?m.duration:24,D=Math.min(1,Math.max(0,m.currentTime/w)),B=Math.ceil(1+D*10),Q=12-D*8;for(let Y=0;Y<B;Y++)S(Q+Math.random()*1.5)},220)};m.readyState>=1?C():(m.addEventListener("loadedmetadata",C,{once:!0}),E=window.setTimeout(C,800)),m.onended=()=>{T!==null&&window.clearInterval(T),E!==null&&window.clearTimeout(E),window.location.assign("https://www.google.com/search?sca_esv=c552f29483bb25be&sxsrf=ANbL-n6J0AZdLR5oea5Mema22mRTfpxncg:1770403761765&udm=2&fbs=ADc_l-acAb_3MMOAUx0zmbUpgBqRiigBgL2I_pgQa-94zvB056b93wKmVeAAORa3GINFZT67RHmD8tBnhEcNAi-9cSkykYi2vGg7-7d7OTSZBzJHwrefv6k6ncRExwSCVXDyy_u0qHQct1OaWVFOEGVmmMb7NrAjms-04EMNwYPagdhmVvcO0WLuWwIqQLXTuSb0OiXpU9tKkHc4YkZUHTp2CQkY23bsnA&q=cute+cats&sa=X&sqi=2&ved=2ahUKEwjz19D6w8WSAxWiBbkGHZrDEN4QtKgLegQIFhAB&biw=2133&bih=1012&dpr=0.9")},setTimeout(()=>{const M=document.createElement("img");M.src=Po+"img/polpot.jpeg",M.className="fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-32 h-32 z-2 pointer-events-none fade-in";const w=document.createElement("div");w.className="fixed bottom-10 left-1/2 -translate-x-1/2 text-red-500 font-bold text-xl z-2 bg-black p-4 rounded-lg text-center min-w-[300px]";const D=["you are not safe anymore","i told you...","Your soul is now cursed","and I will remember you"];async function B(){for(let Q=0;Q<D.length;Q++){const Y=D[Q];await new Promise($=>{let ae=0;const oe=setInterval(()=>{w.innerHTML=Y.substring(0,ae+1),ae++,ae>=Y.length&&(clearInterval(oe),setTimeout($,4e3))},50)})}}o.appendChild(M),o.appendChild(w),B(),requestAnimationFrame(()=>{M.style.opacity="1"})},4200)}const sd=({title:i,onClose:n,children:o,className:r})=>U.jsxs("div",{className:`fixed win95-border bg-[#c0c0c0] flex flex-col p-[2px] shadow-2xl overflow-hidden ${r}`,children:[U.jsxs("div",{className:"bg-[#000080] text-white flex items-center justify-between px-2 py-[2px] md:py-[3px] select-none flex-shrink-0",children:[U.jsxs("span",{className:"text-[10px] md:text-xs font-bold flex items-center gap-1 md:gap-2 truncate",children:[U.jsx("img",{src:"https://img.icons8.com/color/16/folder-invoices.png",alt:"icon",className:"w-3 h-3 md:w-4 md:h-4"}),U.jsx("span",{className:"truncate",children:i})]}),U.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[U.jsx("button",{className:"win95-button w-3 h-3 md:w-4 md:h-4 flex items-center justify-center text-[8px] md:text-[10px] text-black font-black",children:"_"}),U.jsx("button",{className:"win95-button w-3 h-3 md:w-4 md:h-4 flex items-center justify-center text-[8px] md:text-[10px] text-black font-black",children:""}),U.jsx("button",{onClick:()=>{n(),k0()},className:"win95-button w-3 h-3 md:w-4 md:h-4 flex items-center justify-center text-[8px] md:text-[10px] text-black font-black hover:bg-red-500",children:""})]})]}),U.jsx("div",{className:"flex-grow bg-white border border-[#808080] m-[2px] overflow-hidden relative",children:o})]}),G0=({title:i,children:n,className:o})=>U.jsxs("div",{className:`fixed win95-border bg-[#c0c0c0] flex flex-col p-[2px] shadow-2xl overflow-hidden ${o}`,children:[U.jsxs("div",{className:"bg-[#000080] text-white flex items-center justify-between px-2 py-[2px] md:py-[3px] select-none flex-shrink-0",children:[U.jsxs("span",{className:"text-[10px] md:text-xs font-bold flex items-center gap-1 md:gap-2 truncate",children:[U.jsx("img",{src:"/HORemake/img/health-medicine-pills22.gif",alt:"icon",className:"w-4 h-4 md:w-5 md:h-5"}),U.jsx("span",{className:"truncate",children:i})]}),U.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[U.jsx("button",{className:"win95-button w-3 h-3 md:w-4 md:h-4 flex items-center justify-center text-[8px] md:text-[10px] text-black font-black",children:"_"}),U.jsx("button",{className:"win95-button w-3 h-3 md:w-4 md:h-4 flex items-center justify-center text-[8px] md:text-[10px] text-black font-black",children:""}),U.jsx("button",{className:"win95-button w-3 h-3 md:w-4 md:h-4 flex items-center justify-center text-[8px] md:text-[10px] text-black font-black hover:bg-red-500",children:""})]})]}),U.jsx("div",{className:"flex-grow bg-white border border-[#808080] m-[2px] overflow-hidden relative",children:n})]}),H0=()=>{const[i,n]=st.useState(0);st.useEffect(()=>{const r=localStorage.getItem("visitor_count");let c=r?parseInt(r,10):1318;const p=Math.floor(Math.random()*3)+1;c+=p,n(c),localStorage.setItem("visitor_count",c.toString())},[]);const o=i.toString().padStart(6,"0");return U.jsxs("div",{className:"flex flex-col items-center p-2 bg-black/10 border border-gray-400 mt-2",children:[U.jsx("p",{className:"text-[10px] font-bold uppercase mb-1 tracking-wider text-gray-600",children:"Site Visitors Since '99"}),U.jsx("div",{className:"flex bg-black border border-gray-600 shadow-[inset_1px_1px_2px_rgba(255,255,255,0.2)]",children:o.split("").map((r,c)=>U.jsx("span",{className:"counter-digit",children:r},c))})]})},q0=({assetBase:i})=>U.jsxs("div",{className:"win95-border p-3 bg-[#f0f0f0] space-y-3 h-full overflow-y-auto no-scrollbar",children:[U.jsxs("div",{className:"flex gap-3 items-start border-b-2 border-dotted border-gray-400 pb-3",children:[U.jsxs("div",{className:"w-14 h-14 win95-border bg-black p-[2px] flex-shrink-0 group overflow-hidden relative",children:[U.jsx("img",{src:"/HORemake//img/me.jpg",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",alt:"User Avatar"}),U.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border border-white rounded-full animate-pulse shadow-sm"})]}),U.jsxs("div",{className:"flex flex-col",children:[U.jsx("h2",{className:"text-[14px] font-black leading-none text-blue-900 mb-1",children:"Shalashaska-"}),U.jsx("p",{className:"text-[9px] font-mono text-gray-500 leading-tight",children:"LV. 99 JAVA MAGE"}),U.jsxs("div",{className:"flex gap-1 mt-1",children:[U.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full border border-gray-400"}),U.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full border border-gray-400"}),U.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full border border-gray-400"})]}),U.jsx("div",{className:"flex justify-end -mt-12",children:U.jsx("img",{className:"w-1/2 h-1/2  select-none",src:"/HORemake/img/noodles.gif"})})]})]}),U.jsxs("div",{children:[U.jsx("h3",{className:"text-[10px] font-black uppercase tracking-tighter text-gray-400 mb-2 px-1",children:"Social Protocols"}),U.jsxs("ul",{className:"grid grid-cols-1 gap-1",children:[U.jsx("li",{children:U.jsxs("a",{href:"https://github.com/Reennaan",target:"_blank",rel:"noopener noreferrer",className:"win95-button flex items-center justify-between px-2 py-1 text-[15px] font-bold text-gray-800 hover:text-blue-800 group",children:[U.jsxs("span",{className:"flex items-center gap-2",children:[U.jsx("img",{src:`${i}img/githubgif.gif`,className:"w-4 h-4",alt:""}),"Github.lnk"]}),U.jsx("span",{className:"text-[8px] opacity-0 group-hover:opacity-100 transition-opacity",children:">>"})]})}),U.jsx("li",{children:U.jsxs("a",{href:"https://www.last.fm/pt/user/Shalashaska-",target:"_blank",rel:"noopener noreferrer",className:"win95-button flex items-center justify-between px-2 py-1 text-[15px] font-bold text-gray-800 hover:text-blue-800 group",children:[U.jsxs("span",{className:"flex items-center gap-2",children:[U.jsx("img",{src:`${i}img/musicnote.webp`,className:"w-4 h-4",alt:""}),"Lastfm.url"]}),U.jsx("span",{className:"text-[8px] opacity-0 group-hover:opacity-100 transition-opacity",children:">>"})]})}),U.jsx("li",{children:U.jsxs("div",{className:"win95-button flex items-center justify-between px-2 py-1 text-[15px] font-bold text-gray-800 cursor-help group",children:[U.jsxs("span",{className:"flex items-center gap-2",children:[U.jsx("img",{src:`${i}img/mail.gif`,className:"h-4",alt:""}),"Fax.daemon"]}),U.jsx("span",{className:"text-[9px] font-mono text-blue-600 bg-blue-100 px-1 border border-blue-200 opacity-0 group-hover:opacity-100",children:"ONLINE"})]})}),U.jsx("li",{children:U.jsxs("a",{href:"https://hiddenwoods.neocities.org/blog",target:"_blank",rel:"noopener noreferrer",className:"win95-button flex items-center justify-between px-2 py-1 text-[15px] font-bold text-gray-800 hover:text-blue-800 group",children:[U.jsxs("span",{className:"flex items-center gap-2",children:[U.jsx("img",{src:`${i}img/Simple_book.gif`,className:"w-4 h-4",alt:""}),"Blog.sys"]}),U.jsx("span",{className:"text-[8px] opacity-0 group-hover:opacity-100 transition-opacity",children:">>"})]})}),U.jsx("li",{children:U.jsxs("a",{href:"#",className:"win95-button flex items-center justify-between px-2 py-1 text-[15px] font-bold text-gray-800 hover:text-blue-800 group",children:[U.jsxs("span",{className:"flex items-center gap-2",children:[U.jsx("img",{src:`${i}img/Music_CD.gif`,className:"w-4 h-4",alt:""}),"Spotify.exe"]}),U.jsx("span",{className:"text-[8px] opacity-0 group-hover:opacity-100 transition-opacity",children:">>"})]})})]})]}),U.jsxs("div",{className:"bg-[#c0c0c0] win95-border border-t-0 p-2 inset-shadow",children:[U.jsx("h3",{className:"text-[10px] font-black uppercase text-gray-500 mb-2",children:"Internal State"}),U.jsxs("div",{className:"space-y-2",children:[U.jsxs("div",{className:"flex flex-col gap-[2px]",children:[U.jsx("span",{className:"text-[15px] font-bold text-blue-900 leading-none",children:"Reading"}),U.jsx("span",{className:"text-[15px] text-gray-700 bg-white/50 px-1 border-l-2 border-green-400",children:"Meridiano de Sangue"})]}),U.jsxs("div",{className:"flex flex-col gap-[2px]",children:[U.jsx("span",{className:"text-[15px] font-bold text-green-900 leading-none",children:"Playing"}),U.jsx("span",{className:"text-[15px] text-gray-700 bg-white/50 px-1 border-l-2 border-green-400",children:"25 Awards Silver Case"})]}),U.jsx("div",{className:"pt-2 mt-1 border-t border-gray-300",children:U.jsxs("div",{className:"flex items-center justify-between text-[10px] font-black",children:[U.jsx("span",{className:"text-red-600 animate-pulse unsaved",children:"DISK_UNSAVED"}),U.jsxs("div",{className:"flex gap-[1px]",children:[U.jsx("div",{className:"w-2 h-3 bg-red-600 ssquare"}),U.jsx("div",{className:"w-2 h-3 bg-gray-300 ssquare"}),U.jsx("div",{className:"w-2 h-3 bg-gray-300 ssquare"})]})]})})]})]}),U.jsx(H0,{})]}),B0=[{date:"2026/02/06",name:"Soul Extractor",status:"Done",url:""},{date:"2026/01/31",name:"HORemake",status:"Done",url:"https://github.com/Reennaan/HORemake"},{date:"2025/09/21",name:"HiddenHiddenThoughts",status:"Done",url:"https://hiddenwoods.neocities.org/blog"},{date:"2025/09/07",name:"TitanicKaggle",status:"Done",url:"https://github.com/Reennaan/Titanic_desafio"},{date:"2025/08/14",name:"ExperimentZero",status:"Done",url:"https://github.com/Reennaan/ExperimentZero"},{date:"2025/01/25",name:"Mango",status:"Down",url:"https://github.com/Reennaan/joguinho"},{date:"2025/01/25",name:"Unknown",status:"Done",url:"https://github.com/Reennaan/unknown-soldier"},{date:"2024/01/25",name:"Minesweeper",status:"Done",url:"https://reennaan.github.io/Minesweeper/"},{date:"2024/09/03",name:"Naointendorip",status:"Down",url:"https://github.com/Reennaan/Naointendorip"},{date:"2024/09/03",name:"naointendoripAPI",status:"Down",url:"https://github.com/Reennaan/naointendoripAPI"}],V0=()=>U.jsxs("div",{className:"win95-border p-4 bg-white",children:[U.jsx("h3",{className:"text-sm font-bold border-b mb-2",children:"Summary.txt"}),U.jsx("div",{className:"space-y-1 font-mono text-[11px] h-32 overflow-y-auto bg-gray-50 p-2 border inset-shadow",children:B0.map((i,n)=>U.jsxs("div",{className:"flex justify-between hover:bg-blue-800 hover:text-white group cursor-pointer px-1",children:[U.jsxs("span",{children:["[",i.date,"] ",U.jsx("span",{className:"group-hover:underline",children:i.name})]}),U.jsxs("span",{className:i.status==="Down"?"text-red-600 group-hover:text-red-200":"text-green-600 group-hover:text-green-200",children:["[",i.status,"]"]})]},n))}),U.jsx("br",{}),U.jsx("marquee",{children:U.jsxs("div",{className:"flex items-center gap-2 whitespace-nowrap",children:[U.jsx("img",{src:"/HORemake/img/buttons/125.png"}),U.jsx("img",{src:"/HORemake/img/buttons/bestviewed.gif"}),U.jsx("img",{src:"/HORemake/img/buttons/goodwithcomupter.gif"}),U.jsx("img",{src:"/HORemake/img/buttons/ie4.gif"}),U.jsx("img",{src:"/HORemake/img/buttons/best_chrome.gif"}),U.jsx("a",{href:"https://neocities.org",children:U.jsx("img",{src:"/HORemake/img/buttons/neocities2.gif"})}),U.jsx("img",{src:"/HORemake/img/buttons/java2.gif"}),U.jsx("img",{src:"/HORemake/img/buttons/ilikecomputer.png"}),U.jsx("img",{src:"/HORemake/img/buttons/madewithnotepad2.gif"}),U.jsx("img",{src:"/HORemake/img/buttons/mangoad.gif"}),U.jsx("a",{href:"https://neocities.org",children:U.jsx("img",{src:"/HORemake/img/buttons/neocities.gif"})}),U.jsx("img",{src:"/HORemake/img/buttons/phonechump.gif"}),U.jsx("a",{href:"https://neocities.org",children:U.jsx("img",{src:"/HORemake/img/buttons/neocitieschill.gif"})}),U.jsx("img",{src:"/HORemake/img/buttons/wwwbutton.gif"}),U.jsx("img",{src:"/HORemake/img/buttons/eyes2.gif"}),U.jsx("img",{src:"/HORemake/img/buttons/handcoded.gif"})]})})]}),z0=({assetBase:i})=>{const[n,o]=st.useState([]),[r,c]=st.useState(!0);return st.useEffect(()=>{(async()=>{const m="https://ws.audioscrobbler.com/2.0/?method=user.gettopalbums&user=Shalashaska-&api_key=0929ed3fd3c3e7b2319317afda26a1cc&format=json&limit=5&period=7day";try{const E=await(await fetch(m)).json();if(E.topalbums&&E.topalbums.album){const S=E.topalbums.album.map(C=>({name:C.name,artist:C.artist.name,image:C.image.find(M=>M.size==="large")["#text"]||"https://via.placeholder.com/64",url:C.url}));o(S)}}catch(T){console.error("Error fetching Last.fm albums:",T)}finally{c(!1)}})()},[]),U.jsxs("div",{className:"win95-border p-3 bg-white h-full overflow-hidden flex flex-col min-h-[17rem]",children:[U.jsx("h3",{className:"text-xs font-bold border-b mb-2 flex-shrink-0",children:"Top albums of the week"}),U.jsx("div",{className:"space-y-2 flex-grow overflow-y-auto no-scrollbar pr-0",children:r?U.jsx("div",{className:"text-[15px] animate-pulse",children:"Scanning database..."}):n.length>0?n.map((p,m)=>U.jsxs("div",{onClick:()=>window.open(p.url,"_blank"),className:"flex items-center gap-2 hover:bg-blue-100 p-1 cursor-pointer relative group",children:[U.jsxs("div",{className:"relative flex-shrink-0",children:[U.jsx("img",{src:p.image,alt:p.name,className:"w-10 h-10 win95-border object-cover"}),U.jsx("img",{src:`${i}img/setabemmassa.png`,className:"absolute -bottom-1 -left-1 w-3 h-3 z-10 opacity-0 group-hover:opacity-100 transition-opacity"})]}),U.jsxs("div",{className:"truncate flex-grow leading-tight",children:[p.name.length>45?gy.createElement("marquee",{scrollamount:"2",className:"font-bold block"},p.name):U.jsx("p",{className:"font-bold truncate text[13px]",children:p.name}),U.jsx("p",{className:"text-gray-500 truncate text-[12px]",children:p.artist})]})]},m)):U.jsx("div",{className:"text-[15px]",children:"No recent auditory data."})})]})},F0=({assetBase:i})=>{const n=st.useRef(null);return st.useEffect(()=>{const o=async()=>{if(window.Webamp&&n.current){const r=new window.Webamp({initialTracks:[{metaData:{artist:"Final Fantasy IX",title:"Fairy Battle"},url:"/HORemake/sounds/fairy-battle.mp3"}],initialSkin:{url:`${i}img/reiayanami_winskin.wsz`}});await r.renderWhenReady(n.current),r.appendTracks([{url:"/HORemake/sounds/into-the-depths-catacombs.mp3"},{url:"/HORemake/sounds/fallen-down.mp3"}])}};console.log("/HORemake/"),o()},[i]),U.jsx("div",{className:"fixed top-[26.5vh] right-[24%] z-[50] pointer-events-auto",ref:n})},J0=()=>{const i=st.useRef(null),n=st.useRef(null),o=st.useRef(!1);return st.useEffect(()=>{if(o.current)return;const c=setTimeout(async()=>{if(window.Dos&&i.current&&!o.current)try{o.current=!0;const p=await window.Dos(i.current).run("./public/doom.zip");n.current=p;const m=i.current.querySelector("canvas");m&&(m.style.width="100%",m.style.height="100%",m.style.objectFit="contain")}catch(p){console.error("Erro ao iniciar o Doom:",p),o.current=!1}},800);return()=>{clearTimeout(c),n.current&&(n.current.exit(),n.current=null),o.current=!1}},[]),U.jsxs("div",{className:"w-full h-full bg-black relative flex flex-col overflow-hidden",children:[U.jsx("style",{children:`
        .dosbox-container { width: 100% !important; height: 100% !important; background: #000; }
        .jsdos-canvas { width: 100% !important; height: 100% !important; }
      `}),U.jsx("div",{className:"flex-grow relative bg-black",children:U.jsx("div",{ref:i,className:"absolute inset-0 w-full h-full"})}),U.jsxs("div",{className:"p-2 bg-[#c0c0c0] text-[10px] border-t border-gray-600 font-mono flex justify-between flex-shrink-0 text-black select-none",children:[U.jsx("span",{children:"[SYSTEM]: EMULATING DOS/4GW"}),U.jsx("span",{children:"CONTROLS: ARROWS / CTRL / SPACE"})]})]})};var Y0={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let K0,Q0;function X0(){return{geminiUrl:K0,vertexUrl:Q0}}function W0(i,n,o,r){var c,p;if(!(i!=null&&i.baseUrl)){const m=X0();return n?(c=m.vertexUrl)!==null&&c!==void 0?c:o:(p=m.geminiUrl)!==null&&p!==void 0?p:r}return i.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yi{}function pe(i,n){const o=/\{([^}]+)\}/g;return i.replace(o,(r,c)=>{if(Object.prototype.hasOwnProperty.call(n,c)){const p=n[c];return p!=null?String(p):""}else throw new Error(`Key '${c}' not found in valueMap.`)})}function h(i,n,o){for(let p=0;p<n.length-1;p++){const m=n[p];if(m.endsWith("[]")){const T=m.slice(0,-2);if(!(T in i))if(Array.isArray(o))i[T]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${m}`);if(Array.isArray(i[T])){const E=i[T];if(Array.isArray(o))for(let S=0;S<E.length;S++){const C=E[S];h(C,n.slice(p+1),o[S])}else for(const S of E)h(S,n.slice(p+1),o)}return}else if(m.endsWith("[0]")){const T=m.slice(0,-3);T in i||(i[T]=[{}]);const E=i[T];h(E[0],n.slice(p+1),o);return}(!i[m]||typeof i[m]!="object")&&(i[m]={}),i=i[m]}const r=n[n.length-1],c=i[r];if(c!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===c)return;if(typeof c=="object"&&typeof o=="object"&&c!==null&&o!==null)Object.assign(c,o);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(i,o):i[r]=o}function f(i,n,o=void 0){try{if(n.length===1&&n[0]==="_self")return i;for(let r=0;r<n.length;r++){if(typeof i!="object"||i===null)return o;const c=n[r];if(c.endsWith("[]")){const p=c.slice(0,-2);if(p in i){const m=i[p];return Array.isArray(m)?m.map(T=>f(T,n.slice(r+1),o)):o}else return o}else i=i[c]}return i}catch(r){if(r instanceof TypeError)return o;throw r}}function Z0(i,n){for(const[o,r]of Object.entries(n)){const c=o.split("."),p=r.split("."),m=new Set;let T=-1;for(let E=0;E<c.length;E++)if(c[E]==="*"){T=E;break}if(T!==-1&&p.length>T)for(let E=T;E<p.length;E++){const S=p[E];S!=="*"&&!S.endsWith("[]")&&!S.endsWith("[0]")&&m.add(S)}ud(i,c,p,0,m)}}function ud(i,n,o,r,c){if(r>=n.length||typeof i!="object"||i===null)return;const p=n[r];if(p.endsWith("[]")){const m=p.slice(0,-2),T=i;if(m in T&&Array.isArray(T[m]))for(const E of T[m])ud(E,n,o,r+1,c)}else if(p==="*"){if(typeof i=="object"&&i!==null&&!Array.isArray(i)){const m=i,T=Object.keys(m).filter(S=>!S.startsWith("_")&&!c.has(S)),E={};for(const S of T)E[S]=m[S];for(const[S,C]of Object.entries(E)){const M=[];for(const w of o.slice(r))w==="*"?M.push(S):M.push(w);h(m,M,C)}for(const S of T)delete m[S]}}else{const m=i;p in m&&ud(m[p],n,o,r+1,c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ud(i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $0(i){const n={},o=f(i,["operationName"]);o!=null&&h(n,["operationName"],o);const r=f(i,["resourceName"]);return r!=null&&h(n,["_url","resourceName"],r),n}function j0(i){const n={},o=f(i,["name"]);o!=null&&h(n,["name"],o);const r=f(i,["metadata"]);r!=null&&h(n,["metadata"],r);const c=f(i,["done"]);c!=null&&h(n,["done"],c);const p=f(i,["error"]);p!=null&&h(n,["error"],p);const m=f(i,["response","generateVideoResponse"]);return m!=null&&h(n,["response"],tT(m)),n}function eT(i){const n={},o=f(i,["name"]);o!=null&&h(n,["name"],o);const r=f(i,["metadata"]);r!=null&&h(n,["metadata"],r);const c=f(i,["done"]);c!=null&&h(n,["done"],c);const p=f(i,["error"]);p!=null&&h(n,["error"],p);const m=f(i,["response"]);return m!=null&&h(n,["response"],nT(m)),n}function tT(i){const n={},o=f(i,["generatedSamples"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>iT(m))),h(n,["generatedVideos"],p)}const r=f(i,["raiMediaFilteredCount"]);r!=null&&h(n,["raiMediaFilteredCount"],r);const c=f(i,["raiMediaFilteredReasons"]);return c!=null&&h(n,["raiMediaFilteredReasons"],c),n}function nT(i){const n={},o=f(i,["videos"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>oT(m))),h(n,["generatedVideos"],p)}const r=f(i,["raiMediaFilteredCount"]);r!=null&&h(n,["raiMediaFilteredCount"],r);const c=f(i,["raiMediaFilteredReasons"]);return c!=null&&h(n,["raiMediaFilteredReasons"],c),n}function iT(i){const n={},o=f(i,["video"]);return o!=null&&h(n,["video"],cT(o)),n}function oT(i){const n={},o=f(i,["_self"]);return o!=null&&h(n,["video"],fT(o)),n}function sT(i){const n={},o=f(i,["operationName"]);return o!=null&&h(n,["_url","operationName"],o),n}function rT(i){const n={},o=f(i,["operationName"]);return o!=null&&h(n,["_url","operationName"],o),n}function lT(i){const n={},o=f(i,["name"]);o!=null&&h(n,["name"],o);const r=f(i,["metadata"]);r!=null&&h(n,["metadata"],r);const c=f(i,["done"]);c!=null&&h(n,["done"],c);const p=f(i,["error"]);p!=null&&h(n,["error"],p);const m=f(i,["response"]);return m!=null&&h(n,["response"],aT(m)),n}function aT(i){const n={},o=f(i,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(i,["parent"]);r!=null&&h(n,["parent"],r);const c=f(i,["documentName"]);return c!=null&&h(n,["documentName"],c),n}function yy(i){const n={},o=f(i,["name"]);o!=null&&h(n,["name"],o);const r=f(i,["metadata"]);r!=null&&h(n,["metadata"],r);const c=f(i,["done"]);c!=null&&h(n,["done"],c);const p=f(i,["error"]);p!=null&&h(n,["error"],p);const m=f(i,["response"]);return m!=null&&h(n,["response"],uT(m)),n}function uT(i){const n={},o=f(i,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(i,["parent"]);r!=null&&h(n,["parent"],r);const c=f(i,["documentName"]);return c!=null&&h(n,["documentName"],c),n}function cT(i){const n={},o=f(i,["uri"]);o!=null&&h(n,["uri"],o);const r=f(i,["encodedVideo"]);r!=null&&h(n,["videoBytes"],Ud(r));const c=f(i,["encoding"]);return c!=null&&h(n,["mimeType"],c),n}function fT(i){const n={},o=f(i,["gcsUri"]);o!=null&&h(n,["uri"],o);const r=f(i,["bytesBase64Encoded"]);r!=null&&h(n,["videoBytes"],Ud(r));const c=f(i,["mimeType"]);return c!=null&&h(n,["mimeType"],c),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Dg;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Dg||(Dg={}));var Ug;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(Ug||(Ug={}));var Lg;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(Lg||(Lg={}));var Go;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(Go||(Go={}));var kg;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(kg||(kg={}));var Pg;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(Pg||(Pg={}));var Gg;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Gg||(Gg={}));var Hg;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Hg||(Hg={}));var qg;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(qg||(qg={}));var Bg;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Bg||(Bg={}));var Vg;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(Vg||(Vg={}));var zg;(function(i){i.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH",i.MINIMAL="MINIMAL"})(zg||(zg={}));var Fg;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Fg||(Fg={}));var Jg;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(Jg||(Jg={}));var Yg;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(Yg||(Yg={}));var Kg;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE",i.IMAGE_RECITATION="IMAGE_RECITATION",i.IMAGE_OTHER="IMAGE_OTHER"})(Kg||(Kg={}));var Qg;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(Qg||(Qg={}));var Xg;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Xg||(Xg={}));var Wg;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Wg||(Wg={}));var Zg;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(Zg||(Zg={}));var $g;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})($g||($g={}));var tc;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(tc||(tc={}));var jg;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(jg||(jg={}));var em;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(em||(em={}));var tm;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(tm||(tm={}));var cd;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(cd||(cd={}));var nm;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(nm||(nm={}));var im;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",i.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(im||(im={}));var fd;(function(i){i.COLLECTION="COLLECTION"})(fd||(fd={}));var om;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(om||(om={}));var sm;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(sm||(sm={}));var rm;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(rm||(rm={}));var lm;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(lm||(lm={}));var am;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(am||(am={}));var um;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(um||(um={}));var cm;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(cm||(cm={}));var fm;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(fm||(fm={}));var dm;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(dm||(dm={}));var hm;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(hm||(hm={}));var pm;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(pm||(pm={}));var gm;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(gm||(gm={}));var mm;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(mm||(mm={}));var ym;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING",i.DISTILLATION="DISTILLATION"})(ym||(ym={}));var vm;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(vm||(vm={}));var Tm;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(Tm||(Tm={}));var Sm;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED",i.REGISTERED="REGISTERED"})(Sm||(Sm={}));var _m;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(_m||(_m={}));var Em;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(Em||(Em={}));var Cm;(function(i){i.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",i.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",i.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Cm||(Cm={}));var Am;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.ACTIVITY_START="ACTIVITY_START",i.ACTIVITY_END="ACTIVITY_END"})(Am||(Am={}));var Rm;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Rm||(Rm={}));var bm;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(bm||(bm={}));var Mm;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(Mm||(Mm={}));var wm;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(wm||(wm={}));var xm;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(xm||(xm={}));var Im;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(Im||(Im={}));var br;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(br||(br={}));class dd{constructor(n){const o={};for(const r of n.headers.entries())o[r[0]]=r[1];this.headers=o,this.responseInternal=n}json(){return this.responseInternal.json()}}class ra{get text(){var n,o,r,c,p,m,T,E;if(((c=(r=(o=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||o===void 0?void 0:o.content)===null||r===void 0?void 0:r.parts)===null||c===void 0?void 0:c.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let S="",C=!1;const M=[];for(const w of(E=(T=(m=(p=this.candidates)===null||p===void 0?void 0:p[0])===null||m===void 0?void 0:m.content)===null||T===void 0?void 0:T.parts)!==null&&E!==void 0?E:[]){for(const[D,B]of Object.entries(w))D!=="text"&&D!=="thought"&&D!=="thoughtSignature"&&(B!==null||B!==void 0)&&M.push(D);if(typeof w.text=="string"){if(typeof w.thought=="boolean"&&w.thought)continue;C=!0,S+=w.text}}return M.length>0&&console.warn(`there are non-text parts ${M} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),C?S:void 0}get data(){var n,o,r,c,p,m,T,E;if(((c=(r=(o=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||o===void 0?void 0:o.content)===null||r===void 0?void 0:r.parts)===null||c===void 0?void 0:c.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let S="";const C=[];for(const M of(E=(T=(m=(p=this.candidates)===null||p===void 0?void 0:p[0])===null||m===void 0?void 0:m.content)===null||T===void 0?void 0:T.parts)!==null&&E!==void 0?E:[]){for(const[w,D]of Object.entries(M))w!=="inlineData"&&(D!==null||D!==void 0)&&C.push(w);M.inlineData&&typeof M.inlineData.data=="string"&&(S+=atob(M.inlineData.data))}return C.length>0&&console.warn(`there are non-data parts ${C} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),S.length>0?btoa(S):void 0}get functionCalls(){var n,o,r,c,p,m,T,E;if(((c=(r=(o=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||o===void 0?void 0:o.content)===null||r===void 0?void 0:r.parts)===null||c===void 0?void 0:c.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const S=(E=(T=(m=(p=this.candidates)===null||p===void 0?void 0:p[0])===null||m===void 0?void 0:m.content)===null||T===void 0?void 0:T.parts)===null||E===void 0?void 0:E.filter(C=>C.functionCall).map(C=>C.functionCall).filter(C=>C!==void 0);if((S==null?void 0:S.length)!==0)return S}get executableCode(){var n,o,r,c,p,m,T,E,S;if(((c=(r=(o=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||o===void 0?void 0:o.content)===null||r===void 0?void 0:r.parts)===null||c===void 0?void 0:c.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const C=(E=(T=(m=(p=this.candidates)===null||p===void 0?void 0:p[0])===null||m===void 0?void 0:m.content)===null||T===void 0?void 0:T.parts)===null||E===void 0?void 0:E.filter(M=>M.executableCode).map(M=>M.executableCode).filter(M=>M!==void 0);if((C==null?void 0:C.length)!==0)return(S=C==null?void 0:C[0])===null||S===void 0?void 0:S.code}get codeExecutionResult(){var n,o,r,c,p,m,T,E,S;if(((c=(r=(o=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||o===void 0?void 0:o.content)===null||r===void 0?void 0:r.parts)===null||c===void 0?void 0:c.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const C=(E=(T=(m=(p=this.candidates)===null||p===void 0?void 0:p[0])===null||m===void 0?void 0:m.content)===null||T===void 0?void 0:T.parts)===null||E===void 0?void 0:E.filter(M=>M.codeExecutionResult).map(M=>M.codeExecutionResult).filter(M=>M!==void 0);if((C==null?void 0:C.length)!==0)return(S=C==null?void 0:C[0])===null||S===void 0?void 0:S.output}}class Nm{}class Om{}class dT{}class hT{}class pT{}class gT{}class Dm{}class Um{}class Lm{}class mT{}class nc{_fromAPIResponse({apiResponse:n,_isVertexAI:o}){const r=new nc;let c;const p=n;return o?c=eT(p):c=j0(p),Object.assign(r,c),r}}class km{}class Pm{}class Gm{}class Hm{}class yT{}class vT{}class TT{}class Ld{_fromAPIResponse({apiResponse:n,_isVertexAI:o}){const r=new Ld,p=lT(n);return Object.assign(r,p),r}}class ST{}class _T{}class ET{}class CT{}class qm{}class AT{get text(){var n,o,r;let c="",p=!1;const m=[];for(const T of(r=(o=(n=this.serverContent)===null||n===void 0?void 0:n.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&r!==void 0?r:[]){for(const[E,S]of Object.entries(T))E!=="text"&&E!=="thought"&&S!==null&&m.push(E);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;p=!0,c+=T.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?c:void 0}get data(){var n,o,r;let c="";const p=[];for(const m of(r=(o=(n=this.serverContent)===null||n===void 0?void 0:n.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&r!==void 0?r:[]){for(const[T,E]of Object.entries(m))T!=="inlineData"&&E!==null&&p.push(T);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}}class RT{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class kd{_fromAPIResponse({apiResponse:n,_isVertexAI:o}){const r=new kd,p=yy(n);return Object.assign(r,p),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ye(i,n){if(!n||typeof n!="string")throw new Error("model is required and must be a string");if(n.includes("..")||n.includes("?")||n.includes("&"))throw new Error("invalid model parameter");if(i.isVertexAI()){if(n.startsWith("publishers/")||n.startsWith("projects/")||n.startsWith("models/"))return n;if(n.indexOf("/")>=0){const o=n.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${n}`}else return n.startsWith("models/")||n.startsWith("tunedModels/")?n:`models/${n}`}function vy(i,n){const o=Ye(i,n);return o?o.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${o}`:o.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${o}`:o:""}function Ty(i){return Array.isArray(i)?i.map(n=>ic(n)):[ic(i)]}function ic(i){if(typeof i=="object"&&i!==null)return i;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof i}`)}function Sy(i){const n=ic(i);if(n.mimeType&&n.mimeType.startsWith("image/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function _y(i){const n=ic(i);if(n.mimeType&&n.mimeType.startsWith("audio/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function Bm(i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function Ey(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(n=>Bm(n)):[Bm(i)]}function hd(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function Vm(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function zm(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function Kt(i){if(i==null)throw new Error("ContentUnion is required");return hd(i)?i:{role:"user",parts:Ey(i)}}function Pd(i,n){if(!n)return[];if(i.isVertexAI()&&Array.isArray(n))return n.flatMap(o=>{const r=Kt(o);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(i.isVertexAI()){const o=Kt(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(n)?n.map(o=>Kt(o)):[Kt(n)]}function kn(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i)){if(Vm(i)||zm(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Kt(i)]}const n=[],o=[],r=hd(i[0]);for(const c of i){const p=hd(c);if(p!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(p)n.push(c);else{if(Vm(c)||zm(c))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(c)}}return r||n.push({role:"user",parts:Ey(o)}),n}function bT(i,n){i.includes("null")&&(n.nullable=!0);const o=i.filter(r=>r!=="null");if(o.length===1)n.type=Object.values(Go).includes(o[0].toUpperCase())?o[0].toUpperCase():Go.TYPE_UNSPECIFIED;else{n.anyOf=[];for(const r of o)n.anyOf.push({type:Object.values(Go).includes(r.toUpperCase())?r.toUpperCase():Go.TYPE_UNSPECIFIED})}}function wr(i){const n={},o=["items"],r=["anyOf"],c=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const p=i.anyOf;p!=null&&p.length==2&&(p[0].type==="null"?(n.nullable=!0,i=p[1]):p[1].type==="null"&&(n.nullable=!0,i=p[0])),i.type instanceof Array&&bT(i.type,n);for(const[m,T]of Object.entries(i))if(T!=null)if(m=="type"){if(T==="null")throw new Error("type: null can not be the only possible type for the field.");if(T instanceof Array)continue;n.type=Object.values(Go).includes(T.toUpperCase())?T.toUpperCase():Go.TYPE_UNSPECIFIED}else if(o.includes(m))n[m]=wr(T);else if(r.includes(m)){const E=[];for(const S of T){if(S.type=="null"){n.nullable=!0;continue}E.push(wr(S))}n[m]=E}else if(c.includes(m)){const E={};for(const[S,C]of Object.entries(T))E[S]=wr(C);n[m]=E}else{if(m==="additionalProperties")continue;n[m]=T}return n}function Gd(i){return wr(i)}function Hd(i){if(typeof i=="object")return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function qd(i){if("multiSpeakerVoiceConfig"in i)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return i}function Ir(i){if(i.functionDeclarations)for(const n of i.functionDeclarations)n.parameters&&(Object.keys(n.parameters).includes("$schema")?n.parametersJsonSchema||(n.parametersJsonSchema=n.parameters,delete n.parameters):n.parameters=wr(n.parameters)),n.response&&(Object.keys(n.response).includes("$schema")?n.responseJsonSchema||(n.responseJsonSchema=n.response,delete n.response):n.response=wr(n.response));return i}function Nr(i){if(i==null)throw new Error("tools is required");if(!Array.isArray(i))throw new Error("tools is required and must be an array of Tools");const n=[];for(const o of i)n.push(o);return n}function MT(i,n,o,r=1){const c=!n.startsWith(`${o}/`)&&n.split("/").length===r;return i.isVertexAI()?n.startsWith("projects/")?n:n.startsWith("locations/")?`projects/${i.getProject()}/${n}`:n.startsWith(`${o}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${n}`:c?`projects/${i.getProject()}/locations/${i.getLocation()}/${o}/${n}`:n:c?`${o}/${n}`:n}function Ki(i,n){if(typeof n!="string")throw new Error("name must be a string");return MT(i,n,"cachedContents")}function Cy(i){switch(i){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return i}}function Ho(i){return Ud(i)}function wT(i){return i!=null&&typeof i=="object"&&"name"in i}function xT(i){return i!=null&&typeof i=="object"&&"video"in i}function IT(i){return i!=null&&typeof i=="object"&&"uri"in i}function Ay(i){var n;let o;if(wT(i)&&(o=i.name),!(IT(i)&&(o=i.uri,o===void 0))&&!(xT(i)&&(o=(n=i.video)===null||n===void 0?void 0:n.uri,o===void 0))){if(typeof i=="string"&&(o=i),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const c=o.split("files/")[1].match(/[a-z0-9]+/);if(c===null)throw new Error(`Could not extract file name from URI ${o}`);o=c[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function Ry(i,n){let o;return i.isVertexAI()?o=n?"publishers/google/models":"models":o=n?"models":"tunedModels",o}function by(i){for(const n of["models","tunedModels","publisherModels"])if(NT(i,n))return i[n];return[]}function NT(i,n){return i!==null&&typeof i=="object"&&n in i}function OT(i,n={}){const o=i,r={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(r.responseJsonSchema=o.outputSchema),n.behavior&&(r.behavior=n.behavior),{functionDeclarations:[r]}}function DT(i,n={}){const o=[],r=new Set;for(const c of i){const p=c.name;if(r.has(p))throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);r.add(p);const m=OT(c,n);m.functionDeclarations&&o.push(...m.functionDeclarations)}return{functionDeclarations:o}}function My(i,n){let o;if(typeof n=="string")if(i.isVertexAI())if(n.startsWith("gs://"))o={format:"jsonl",gcsUri:[n]};else if(n.startsWith("bq://"))o={format:"bigquery",bigqueryUri:n};else throw new Error(`Unsupported string source for Vertex AI: ${n}`);else if(n.startsWith("files/"))o={fileName:n};else throw new Error(`Unsupported string source for Gemini API: ${n}`);else if(Array.isArray(n)){if(i.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:n}}else o=n;const r=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,c=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(i.isVertexAI()){if(c>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||c!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function UT(i){if(typeof i!="string")return i;const n=i;if(n.startsWith("gs://"))return{format:"jsonl",gcsUri:n};if(n.startsWith("bq://"))return{format:"bigquery",bigqueryUri:n};throw new Error(`Unsupported destination: ${n}`)}function wy(i){if(typeof i!="object"||i===null)return{};const n=i,o=n.inlinedResponses;if(typeof o!="object"||o===null)return i;const c=o.inlinedResponses;if(!Array.isArray(c)||c.length===0)return i;let p=!1;for(const m of c){if(typeof m!="object"||m===null)continue;const E=m.response;if(typeof E!="object"||E===null)continue;if(E.embedding!==void 0){p=!0;break}}return p&&(n.inlinedEmbedContentResponses=n.inlinedResponses,delete n.inlinedResponses),i}function Or(i,n){const o=n;if(!i.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function xy(i){const n=i;return n==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":n==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":n==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":n==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":n==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":n==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":n==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LT(i){const n={},o=f(i,["responsesFile"]);o!=null&&h(n,["fileName"],o);const r=f(i,["inlinedResponses","inlinedResponses"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(m=>gS(m))),h(n,["inlinedResponses"],p)}const c=f(i,["inlinedEmbedContentResponses","inlinedResponses"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>m)),h(n,["inlinedEmbedContentResponses"],p)}return n}function kT(i){const n={},o=f(i,["predictionsFormat"]);o!=null&&h(n,["format"],o);const r=f(i,["gcsDestination","outputUriPrefix"]);r!=null&&h(n,["gcsUri"],r);const c=f(i,["bigqueryDestination","outputUri"]);return c!=null&&h(n,["bigqueryUri"],c),n}function PT(i){const n={},o=f(i,["format"]);o!=null&&h(n,["predictionsFormat"],o);const r=f(i,["gcsUri"]);r!=null&&h(n,["gcsDestination","outputUriPrefix"],r);const c=f(i,["bigqueryUri"]);if(c!=null&&h(n,["bigqueryDestination","outputUri"],c),f(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(i,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(i,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return n}function Zu(i){const n={},o=f(i,["name"]);o!=null&&h(n,["name"],o);const r=f(i,["metadata","displayName"]);r!=null&&h(n,["displayName"],r);const c=f(i,["metadata","state"]);c!=null&&h(n,["state"],xy(c));const p=f(i,["metadata","createTime"]);p!=null&&h(n,["createTime"],p);const m=f(i,["metadata","endTime"]);m!=null&&h(n,["endTime"],m);const T=f(i,["metadata","updateTime"]);T!=null&&h(n,["updateTime"],T);const E=f(i,["metadata","model"]);E!=null&&h(n,["model"],E);const S=f(i,["metadata","output"]);return S!=null&&h(n,["dest"],LT(wy(S))),n}function pd(i){const n={},o=f(i,["name"]);o!=null&&h(n,["name"],o);const r=f(i,["displayName"]);r!=null&&h(n,["displayName"],r);const c=f(i,["state"]);c!=null&&h(n,["state"],xy(c));const p=f(i,["error"]);p!=null&&h(n,["error"],p);const m=f(i,["createTime"]);m!=null&&h(n,["createTime"],m);const T=f(i,["startTime"]);T!=null&&h(n,["startTime"],T);const E=f(i,["endTime"]);E!=null&&h(n,["endTime"],E);const S=f(i,["updateTime"]);S!=null&&h(n,["updateTime"],S);const C=f(i,["model"]);C!=null&&h(n,["model"],C);const M=f(i,["inputConfig"]);M!=null&&h(n,["src"],GT(M));const w=f(i,["outputConfig"]);w!=null&&h(n,["dest"],kT(wy(w)));const D=f(i,["completionStats"]);return D!=null&&h(n,["completionStats"],D),n}function GT(i){const n={},o=f(i,["instancesFormat"]);o!=null&&h(n,["format"],o);const r=f(i,["gcsSource","uris"]);r!=null&&h(n,["gcsUri"],r);const c=f(i,["bigquerySource","inputUri"]);return c!=null&&h(n,["bigqueryUri"],c),n}function HT(i,n){const o={};if(f(n,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=f(n,["fileName"]);r!=null&&h(o,["fileName"],r);const c=f(n,["inlinedRequests"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>pS(i,m))),h(o,["requests","requests"],p)}return o}function qT(i){const n={},o=f(i,["format"]);o!=null&&h(n,["instancesFormat"],o);const r=f(i,["gcsUri"]);r!=null&&h(n,["gcsSource","uris"],r);const c=f(i,["bigqueryUri"]);if(c!=null&&h(n,["bigquerySource","inputUri"],c),f(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(i,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return n}function BT(i){const n={},o=f(i,["data"]);if(o!=null&&h(n,["data"],o),f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(i,["mimeType"]);return r!=null&&h(n,["mimeType"],r),n}function VT(i,n){const o={},r=f(n,["name"]);return r!=null&&h(o,["_url","name"],Or(i,r)),o}function zT(i,n){const o={},r=f(n,["name"]);return r!=null&&h(o,["_url","name"],Or(i,r)),o}function FT(i){const n={},o=f(i,["content"]);o!=null&&h(n,["content"],o);const r=f(i,["citationMetadata"]);r!=null&&h(n,["citationMetadata"],JT(r));const c=f(i,["tokenCount"]);c!=null&&h(n,["tokenCount"],c);const p=f(i,["finishReason"]);p!=null&&h(n,["finishReason"],p);const m=f(i,["avgLogprobs"]);m!=null&&h(n,["avgLogprobs"],m);const T=f(i,["groundingMetadata"]);T!=null&&h(n,["groundingMetadata"],T);const E=f(i,["index"]);E!=null&&h(n,["index"],E);const S=f(i,["logprobsResult"]);S!=null&&h(n,["logprobsResult"],S);const C=f(i,["safetyRatings"]);if(C!=null){let w=C;Array.isArray(w)&&(w=w.map(D=>D)),h(n,["safetyRatings"],w)}const M=f(i,["urlContextMetadata"]);return M!=null&&h(n,["urlContextMetadata"],M),n}function JT(i){const n={},o=f(i,["citationSources"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>c)),h(n,["citations"],r)}return n}function Iy(i){const n={},o=f(i,["parts"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(p=>ES(p))),h(n,["parts"],c)}const r=f(i,["role"]);return r!=null&&h(n,["role"],r),n}function YT(i,n){const o={},r=f(i,["displayName"]);if(n!==void 0&&r!=null&&h(n,["batch","displayName"],r),f(i,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function KT(i,n){const o={},r=f(i,["displayName"]);n!==void 0&&r!=null&&h(n,["displayName"],r);const c=f(i,["dest"]);return n!==void 0&&c!=null&&h(n,["outputConfig"],PT(UT(c))),o}function Fm(i,n){const o={},r=f(n,["model"]);r!=null&&h(o,["_url","model"],Ye(i,r));const c=f(n,["src"]);c!=null&&h(o,["batch","inputConfig"],HT(i,My(i,c)));const p=f(n,["config"]);return p!=null&&YT(p,o),o}function QT(i,n){const o={},r=f(n,["model"]);r!=null&&h(o,["model"],Ye(i,r));const c=f(n,["src"]);c!=null&&h(o,["inputConfig"],qT(My(i,c)));const p=f(n,["config"]);return p!=null&&KT(p,o),o}function XT(i,n){const o={},r=f(i,["displayName"]);return n!==void 0&&r!=null&&h(n,["batch","displayName"],r),o}function WT(i,n){const o={},r=f(n,["model"]);r!=null&&h(o,["_url","model"],Ye(i,r));const c=f(n,["src"]);c!=null&&h(o,["batch","inputConfig"],iS(i,c));const p=f(n,["config"]);return p!=null&&XT(p,o),o}function ZT(i,n){const o={},r=f(n,["name"]);return r!=null&&h(o,["_url","name"],Or(i,r)),o}function $T(i,n){const o={},r=f(n,["name"]);return r!=null&&h(o,["_url","name"],Or(i,r)),o}function jT(i){const n={},o=f(i,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(i,["name"]);r!=null&&h(n,["name"],r);const c=f(i,["done"]);c!=null&&h(n,["done"],c);const p=f(i,["error"]);return p!=null&&h(n,["error"],p),n}function eS(i){const n={},o=f(i,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(i,["name"]);r!=null&&h(n,["name"],r);const c=f(i,["done"]);c!=null&&h(n,["done"],c);const p=f(i,["error"]);return p!=null&&h(n,["error"],p),n}function tS(i,n){const o={},r=f(n,["contents"]);if(r!=null){let p=Pd(i,r);Array.isArray(p)&&(p=p.map(m=>m)),h(o,["requests[]","request","content"],p)}const c=f(n,["config"]);return c!=null&&(h(o,["_self"],nS(c,o)),Z0(o,{"requests[].*":"requests[].request.*"})),o}function nS(i,n){const o={},r=f(i,["taskType"]);n!==void 0&&r!=null&&h(n,["requests[]","taskType"],r);const c=f(i,["title"]);n!==void 0&&c!=null&&h(n,["requests[]","title"],c);const p=f(i,["outputDimensionality"]);if(n!==void 0&&p!=null&&h(n,["requests[]","outputDimensionality"],p),f(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function iS(i,n){const o={},r=f(n,["fileName"]);r!=null&&h(o,["file_name"],r);const c=f(n,["inlinedRequests"]);return c!=null&&h(o,["requests"],tS(i,c)),o}function oS(i){const n={};if(f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(i,["fileUri"]);o!=null&&h(n,["fileUri"],o);const r=f(i,["mimeType"]);return r!=null&&h(n,["mimeType"],r),n}function sS(i){const n={},o=f(i,["id"]);o!=null&&h(n,["id"],o);const r=f(i,["args"]);r!=null&&h(n,["args"],r);const c=f(i,["name"]);if(c!=null&&h(n,["name"],c),f(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function rS(i){const n={},o=f(i,["allowedFunctionNames"]);o!=null&&h(n,["allowedFunctionNames"],o);const r=f(i,["mode"]);if(r!=null&&h(n,["mode"],r),f(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function lS(i,n,o){const r={},c=f(n,["systemInstruction"]);o!==void 0&&c!=null&&h(o,["systemInstruction"],Iy(Kt(c)));const p=f(n,["temperature"]);p!=null&&h(r,["temperature"],p);const m=f(n,["topP"]);m!=null&&h(r,["topP"],m);const T=f(n,["topK"]);T!=null&&h(r,["topK"],T);const E=f(n,["candidateCount"]);E!=null&&h(r,["candidateCount"],E);const S=f(n,["maxOutputTokens"]);S!=null&&h(r,["maxOutputTokens"],S);const C=f(n,["stopSequences"]);C!=null&&h(r,["stopSequences"],C);const M=f(n,["responseLogprobs"]);M!=null&&h(r,["responseLogprobs"],M);const w=f(n,["logprobs"]);w!=null&&h(r,["logprobs"],w);const D=f(n,["presencePenalty"]);D!=null&&h(r,["presencePenalty"],D);const B=f(n,["frequencyPenalty"]);B!=null&&h(r,["frequencyPenalty"],B);const Q=f(n,["seed"]);Q!=null&&h(r,["seed"],Q);const Y=f(n,["responseMimeType"]);Y!=null&&h(r,["responseMimeType"],Y);const $=f(n,["responseSchema"]);$!=null&&h(r,["responseSchema"],Gd($));const ae=f(n,["responseJsonSchema"]);if(ae!=null&&h(r,["responseJsonSchema"],ae),f(n,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(n,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const oe=f(n,["safetySettings"]);if(o!==void 0&&oe!=null){let R=oe;Array.isArray(R)&&(R=R.map(Ve=>CS(Ve))),h(o,["safetySettings"],R)}const ue=f(n,["tools"]);if(o!==void 0&&ue!=null){let R=Nr(ue);Array.isArray(R)&&(R=R.map(Ve=>RS(Ir(Ve)))),h(o,["tools"],R)}const ie=f(n,["toolConfig"]);if(o!==void 0&&ie!=null&&h(o,["toolConfig"],AS(ie)),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const V=f(n,["cachedContent"]);o!==void 0&&V!=null&&h(o,["cachedContent"],Ki(i,V));const ce=f(n,["responseModalities"]);ce!=null&&h(r,["responseModalities"],ce);const xe=f(n,["mediaResolution"]);xe!=null&&h(r,["mediaResolution"],xe);const ye=f(n,["speechConfig"]);if(ye!=null&&h(r,["speechConfig"],Hd(ye)),f(n,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Ie=f(n,["thinkingConfig"]);Ie!=null&&h(r,["thinkingConfig"],Ie);const Ne=f(n,["imageConfig"]);Ne!=null&&h(r,["imageConfig"],hS(Ne));const Xe=f(n,["enableEnhancedCivicAnswers"]);if(Xe!=null&&h(r,["enableEnhancedCivicAnswers"],Xe),f(n,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function aS(i){const n={},o=f(i,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(i,["candidates"]);if(r!=null){let E=r;Array.isArray(E)&&(E=E.map(S=>FT(S))),h(n,["candidates"],E)}const c=f(i,["modelVersion"]);c!=null&&h(n,["modelVersion"],c);const p=f(i,["promptFeedback"]);p!=null&&h(n,["promptFeedback"],p);const m=f(i,["responseId"]);m!=null&&h(n,["responseId"],m);const T=f(i,["usageMetadata"]);return T!=null&&h(n,["usageMetadata"],T),n}function uS(i,n){const o={},r=f(n,["name"]);return r!=null&&h(o,["_url","name"],Or(i,r)),o}function cS(i,n){const o={},r=f(n,["name"]);return r!=null&&h(o,["_url","name"],Or(i,r)),o}function fS(i){const n={};if(f(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=f(i,["enableWidget"]);return o!=null&&h(n,["enableWidget"],o),n}function dS(i){const n={};if(f(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=f(i,["timeRangeFilter"]);return o!=null&&h(n,["timeRangeFilter"],o),n}function hS(i){const n={},o=f(i,["aspectRatio"]);o!=null&&h(n,["aspectRatio"],o);const r=f(i,["imageSize"]);if(r!=null&&h(n,["imageSize"],r),f(i,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function pS(i,n){const o={},r=f(n,["model"]);r!=null&&h(o,["request","model"],Ye(i,r));const c=f(n,["contents"]);if(c!=null){let T=kn(c);Array.isArray(T)&&(T=T.map(E=>Iy(E))),h(o,["request","contents"],T)}const p=f(n,["metadata"]);p!=null&&h(o,["metadata"],p);const m=f(n,["config"]);return m!=null&&h(o,["request","generationConfig"],lS(i,m,f(o,["request"],{}))),o}function gS(i){const n={},o=f(i,["response"]);o!=null&&h(n,["response"],aS(o));const r=f(i,["metadata"]);r!=null&&h(n,["metadata"],r);const c=f(i,["error"]);return c!=null&&h(n,["error"],c),n}function mS(i,n){const o={},r=f(i,["pageSize"]);n!==void 0&&r!=null&&h(n,["_query","pageSize"],r);const c=f(i,["pageToken"]);if(n!==void 0&&c!=null&&h(n,["_query","pageToken"],c),f(i,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function yS(i,n){const o={},r=f(i,["pageSize"]);n!==void 0&&r!=null&&h(n,["_query","pageSize"],r);const c=f(i,["pageToken"]);n!==void 0&&c!=null&&h(n,["_query","pageToken"],c);const p=f(i,["filter"]);return n!==void 0&&p!=null&&h(n,["_query","filter"],p),o}function vS(i){const n={},o=f(i,["config"]);return o!=null&&mS(o,n),n}function TS(i){const n={},o=f(i,["config"]);return o!=null&&yS(o,n),n}function SS(i){const n={},o=f(i,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(i,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const c=f(i,["operations"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>Zu(m))),h(n,["batchJobs"],p)}return n}function _S(i){const n={},o=f(i,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(i,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const c=f(i,["batchPredictionJobs"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>pd(m))),h(n,["batchJobs"],p)}return n}function ES(i){const n={},o=f(i,["mediaResolution"]);o!=null&&h(n,["mediaResolution"],o);const r=f(i,["codeExecutionResult"]);r!=null&&h(n,["codeExecutionResult"],r);const c=f(i,["executableCode"]);c!=null&&h(n,["executableCode"],c);const p=f(i,["fileData"]);p!=null&&h(n,["fileData"],oS(p));const m=f(i,["functionCall"]);m!=null&&h(n,["functionCall"],sS(m));const T=f(i,["functionResponse"]);T!=null&&h(n,["functionResponse"],T);const E=f(i,["inlineData"]);E!=null&&h(n,["inlineData"],BT(E));const S=f(i,["text"]);S!=null&&h(n,["text"],S);const C=f(i,["thought"]);C!=null&&h(n,["thought"],C);const M=f(i,["thoughtSignature"]);M!=null&&h(n,["thoughtSignature"],M);const w=f(i,["videoMetadata"]);return w!=null&&h(n,["videoMetadata"],w),n}function CS(i){const n={},o=f(i,["category"]);if(o!=null&&h(n,["category"],o),f(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(i,["threshold"]);return r!=null&&h(n,["threshold"],r),n}function AS(i){const n={},o=f(i,["retrievalConfig"]);o!=null&&h(n,["retrievalConfig"],o);const r=f(i,["functionCallingConfig"]);return r!=null&&h(n,["functionCallingConfig"],rS(r)),n}function RS(i){const n={};if(f(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(i,["computerUse"]);o!=null&&h(n,["computerUse"],o);const r=f(i,["fileSearch"]);r!=null&&h(n,["fileSearch"],r);const c=f(i,["codeExecution"]);if(c!=null&&h(n,["codeExecution"],c),f(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=f(i,["functionDeclarations"]);if(p!=null){let C=p;Array.isArray(C)&&(C=C.map(M=>M)),h(n,["functionDeclarations"],C)}const m=f(i,["googleMaps"]);m!=null&&h(n,["googleMaps"],fS(m));const T=f(i,["googleSearch"]);T!=null&&h(n,["googleSearch"],dS(T));const E=f(i,["googleSearchRetrieval"]);E!=null&&h(n,["googleSearchRetrieval"],E);const S=f(i,["urlContext"]);return S!=null&&h(n,["urlContext"],S),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ji;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(Ji||(Ji={}));class bs{constructor(n,o,r,c){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(n,r,c)}init(n,o,r){var c,p;this.nameInternal=n,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o==null?void 0:o.sdkHttpResponse,this.idxInternal=0;let m={config:{}};!r||Object.keys(r).length===0?m={config:{}}:typeof r=="object"?m=Object.assign({},r):m=r,m.config&&(m.config.pageToken=o.nextPageToken),this.paramsInternal=m,this.pageInternalSize=(p=(c=m.config)===null||c===void 0?void 0:c.pageSize)!==null&&p!==void 0?p:this.pageInternal.length}initNextPage(n){this.init(this.nameInternal,n,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(n){return this.pageInternal[n]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const n=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:n,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const n=await this.requestInternal(this.params);return this.initNextPage(n),this.page}hasNextPage(){var n;return((n=this.params.config)===null||n===void 0?void 0:n.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bS extends Yi{constructor(n){super(),this.apiClient=n,this.list=async(o={})=>new bs(Ji.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(o),o),this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)}}createInlinedGenerateContentRequest(n){const o=Fm(this.apiClient,n),r=o._url,c=pe("{model}:batchGenerateContent",r),T=o.batch.inputConfig.requests,E=T.requests,S=[];for(const C of E){const M=Object.assign({},C);if(M.systemInstruction){const w=M.systemInstruction;delete M.systemInstruction;const D=M.request;D.systemInstruction=w,M.request=D}S.push(M)}return T.requests=S,delete o.config,delete o._url,delete o._query,{path:c,body:o}}getGcsUri(n){if(typeof n=="string")return n.startsWith("gs://")?n:void 0;if(!Array.isArray(n)&&n.gcsUri&&n.gcsUri.length>0)return n.gcsUri[0]}getBigqueryUri(n){if(typeof n=="string")return n.startsWith("bq://")?n:void 0;if(!Array.isArray(n))return n.bigqueryUri}formatDestination(n,o){const r=o?Object.assign({},o):{},c=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${c}`),r.dest===void 0){const p=this.getGcsUri(n),m=this.getBigqueryUri(n);if(p)p.endsWith(".jsonl")?r.dest=`${p.slice(0,-6)}/dest`:r.dest=`${p}_dest_${c}`;else if(m)r.dest=`${m}_dest_${c}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=QT(this.apiClient,n);return T=pe("batchPredictionJobs",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json()),m.then(C=>pd(C))}else{const S=Fm(this.apiClient,n);return T=pe("{model}:batchGenerateContent",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"POST",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json()),m.then(C=>Zu(C))}}async createEmbeddingsInternal(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const T=WT(this.apiClient,n);return p=pe("{model}:asyncBatchEmbedContent",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json()),c.then(E=>Zu(E))}}async get(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=cS(this.apiClient,n);return T=pe("batchPredictionJobs/{name}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json()),m.then(C=>pd(C))}else{const S=uS(this.apiClient,n);return T=pe("batches/{name}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"GET",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json()),m.then(C=>Zu(C))}}async cancel(n){var o,r,c,p;let m="",T={};if(this.apiClient.isVertexAI()){const E=zT(this.apiClient,n);m=pe("batchPredictionJobs/{name}:cancel",E._url),T=E._query,delete E._url,delete E._query,await this.apiClient.request({path:m,queryParams:T,body:JSON.stringify(E),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal})}else{const E=VT(this.apiClient,n);m=pe("batches/{name}:cancel",E._url),T=E._query,delete E._url,delete E._query,await this.apiClient.request({path:m,queryParams:T,body:JSON.stringify(E),httpMethod:"POST",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal})}}async listInternal(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=TS(n);return T=pe("batchPredictionJobs",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=_S(C),w=new qm;return Object.assign(w,M),w})}else{const S=vS(n);return T=pe("batches",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"GET",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=SS(C),w=new qm;return Object.assign(w,M),w})}}async delete(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=$T(this.apiClient,n);return T=pe("batchPredictionJobs/{name}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"DELETE",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>eS(C))}else{const S=ZT(this.apiClient,n);return T=pe("batches/{name}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"DELETE",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>jT(C))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MS(i){const n={},o=f(i,["data"]);if(o!=null&&h(n,["data"],o),f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(i,["mimeType"]);return r!=null&&h(n,["mimeType"],r),n}function Jm(i){const n={},o=f(i,["parts"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(p=>WS(p))),h(n,["parts"],c)}const r=f(i,["role"]);return r!=null&&h(n,["role"],r),n}function wS(i,n){const o={},r=f(i,["ttl"]);n!==void 0&&r!=null&&h(n,["ttl"],r);const c=f(i,["expireTime"]);n!==void 0&&c!=null&&h(n,["expireTime"],c);const p=f(i,["displayName"]);n!==void 0&&p!=null&&h(n,["displayName"],p);const m=f(i,["contents"]);if(n!==void 0&&m!=null){let C=kn(m);Array.isArray(C)&&(C=C.map(M=>Jm(M))),h(n,["contents"],C)}const T=f(i,["systemInstruction"]);n!==void 0&&T!=null&&h(n,["systemInstruction"],Jm(Kt(T)));const E=f(i,["tools"]);if(n!==void 0&&E!=null){let C=E;Array.isArray(C)&&(C=C.map(M=>$S(M))),h(n,["tools"],C)}const S=f(i,["toolConfig"]);if(n!==void 0&&S!=null&&h(n,["toolConfig"],ZS(S)),f(i,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function xS(i,n){const o={},r=f(i,["ttl"]);n!==void 0&&r!=null&&h(n,["ttl"],r);const c=f(i,["expireTime"]);n!==void 0&&c!=null&&h(n,["expireTime"],c);const p=f(i,["displayName"]);n!==void 0&&p!=null&&h(n,["displayName"],p);const m=f(i,["contents"]);if(n!==void 0&&m!=null){let M=kn(m);Array.isArray(M)&&(M=M.map(w=>w)),h(n,["contents"],M)}const T=f(i,["systemInstruction"]);n!==void 0&&T!=null&&h(n,["systemInstruction"],Kt(T));const E=f(i,["tools"]);if(n!==void 0&&E!=null){let M=E;Array.isArray(M)&&(M=M.map(w=>jS(w))),h(n,["tools"],M)}const S=f(i,["toolConfig"]);n!==void 0&&S!=null&&h(n,["toolConfig"],S);const C=f(i,["kmsKeyName"]);return n!==void 0&&C!=null&&h(n,["encryption_spec","kmsKeyName"],C),o}function IS(i,n){const o={},r=f(n,["model"]);r!=null&&h(o,["model"],vy(i,r));const c=f(n,["config"]);return c!=null&&wS(c,o),o}function NS(i,n){const o={},r=f(n,["model"]);r!=null&&h(o,["model"],vy(i,r));const c=f(n,["config"]);return c!=null&&xS(c,o),o}function OS(i,n){const o={},r=f(n,["name"]);return r!=null&&h(o,["_url","name"],Ki(i,r)),o}function DS(i,n){const o={},r=f(n,["name"]);return r!=null&&h(o,["_url","name"],Ki(i,r)),o}function US(i){const n={},o=f(i,["sdkHttpResponse"]);return o!=null&&h(n,["sdkHttpResponse"],o),n}function LS(i){const n={},o=f(i,["sdkHttpResponse"]);return o!=null&&h(n,["sdkHttpResponse"],o),n}function kS(i){const n={};if(f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(i,["fileUri"]);o!=null&&h(n,["fileUri"],o);const r=f(i,["mimeType"]);return r!=null&&h(n,["mimeType"],r),n}function PS(i){const n={},o=f(i,["id"]);o!=null&&h(n,["id"],o);const r=f(i,["args"]);r!=null&&h(n,["args"],r);const c=f(i,["name"]);if(c!=null&&h(n,["name"],c),f(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function GS(i){const n={},o=f(i,["allowedFunctionNames"]);o!=null&&h(n,["allowedFunctionNames"],o);const r=f(i,["mode"]);if(r!=null&&h(n,["mode"],r),f(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function HS(i){const n={},o=f(i,["description"]);o!=null&&h(n,["description"],o);const r=f(i,["name"]);r!=null&&h(n,["name"],r);const c=f(i,["parameters"]);c!=null&&h(n,["parameters"],c);const p=f(i,["parametersJsonSchema"]);p!=null&&h(n,["parametersJsonSchema"],p);const m=f(i,["response"]);m!=null&&h(n,["response"],m);const T=f(i,["responseJsonSchema"]);if(T!=null&&h(n,["responseJsonSchema"],T),f(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function qS(i,n){const o={},r=f(n,["name"]);return r!=null&&h(o,["_url","name"],Ki(i,r)),o}function BS(i,n){const o={},r=f(n,["name"]);return r!=null&&h(o,["_url","name"],Ki(i,r)),o}function VS(i){const n={};if(f(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=f(i,["enableWidget"]);return o!=null&&h(n,["enableWidget"],o),n}function zS(i){const n={};if(f(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=f(i,["timeRangeFilter"]);return o!=null&&h(n,["timeRangeFilter"],o),n}function FS(i,n){const o={},r=f(i,["pageSize"]);n!==void 0&&r!=null&&h(n,["_query","pageSize"],r);const c=f(i,["pageToken"]);return n!==void 0&&c!=null&&h(n,["_query","pageToken"],c),o}function JS(i,n){const o={},r=f(i,["pageSize"]);n!==void 0&&r!=null&&h(n,["_query","pageSize"],r);const c=f(i,["pageToken"]);return n!==void 0&&c!=null&&h(n,["_query","pageToken"],c),o}function YS(i){const n={},o=f(i,["config"]);return o!=null&&FS(o,n),n}function KS(i){const n={},o=f(i,["config"]);return o!=null&&JS(o,n),n}function QS(i){const n={},o=f(i,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(i,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const c=f(i,["cachedContents"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>m)),h(n,["cachedContents"],p)}return n}function XS(i){const n={},o=f(i,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(i,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const c=f(i,["cachedContents"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>m)),h(n,["cachedContents"],p)}return n}function WS(i){const n={},o=f(i,["mediaResolution"]);o!=null&&h(n,["mediaResolution"],o);const r=f(i,["codeExecutionResult"]);r!=null&&h(n,["codeExecutionResult"],r);const c=f(i,["executableCode"]);c!=null&&h(n,["executableCode"],c);const p=f(i,["fileData"]);p!=null&&h(n,["fileData"],kS(p));const m=f(i,["functionCall"]);m!=null&&h(n,["functionCall"],PS(m));const T=f(i,["functionResponse"]);T!=null&&h(n,["functionResponse"],T);const E=f(i,["inlineData"]);E!=null&&h(n,["inlineData"],MS(E));const S=f(i,["text"]);S!=null&&h(n,["text"],S);const C=f(i,["thought"]);C!=null&&h(n,["thought"],C);const M=f(i,["thoughtSignature"]);M!=null&&h(n,["thoughtSignature"],M);const w=f(i,["videoMetadata"]);return w!=null&&h(n,["videoMetadata"],w),n}function ZS(i){const n={},o=f(i,["retrievalConfig"]);o!=null&&h(n,["retrievalConfig"],o);const r=f(i,["functionCallingConfig"]);return r!=null&&h(n,["functionCallingConfig"],GS(r)),n}function $S(i){const n={};if(f(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(i,["computerUse"]);o!=null&&h(n,["computerUse"],o);const r=f(i,["fileSearch"]);r!=null&&h(n,["fileSearch"],r);const c=f(i,["codeExecution"]);if(c!=null&&h(n,["codeExecution"],c),f(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=f(i,["functionDeclarations"]);if(p!=null){let C=p;Array.isArray(C)&&(C=C.map(M=>M)),h(n,["functionDeclarations"],C)}const m=f(i,["googleMaps"]);m!=null&&h(n,["googleMaps"],VS(m));const T=f(i,["googleSearch"]);T!=null&&h(n,["googleSearch"],zS(T));const E=f(i,["googleSearchRetrieval"]);E!=null&&h(n,["googleSearchRetrieval"],E);const S=f(i,["urlContext"]);return S!=null&&h(n,["urlContext"],S),n}function jS(i){const n={},o=f(i,["retrieval"]);o!=null&&h(n,["retrieval"],o);const r=f(i,["computerUse"]);if(r!=null&&h(n,["computerUse"],r),f(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(i,["codeExecution"]);c!=null&&h(n,["codeExecution"],c);const p=f(i,["enterpriseWebSearch"]);p!=null&&h(n,["enterpriseWebSearch"],p);const m=f(i,["functionDeclarations"]);if(m!=null){let M=m;Array.isArray(M)&&(M=M.map(w=>HS(w))),h(n,["functionDeclarations"],M)}const T=f(i,["googleMaps"]);T!=null&&h(n,["googleMaps"],T);const E=f(i,["googleSearch"]);E!=null&&h(n,["googleSearch"],E);const S=f(i,["googleSearchRetrieval"]);S!=null&&h(n,["googleSearchRetrieval"],S);const C=f(i,["urlContext"]);return C!=null&&h(n,["urlContext"],C),n}function e_(i,n){const o={},r=f(i,["ttl"]);n!==void 0&&r!=null&&h(n,["ttl"],r);const c=f(i,["expireTime"]);return n!==void 0&&c!=null&&h(n,["expireTime"],c),o}function t_(i,n){const o={},r=f(i,["ttl"]);n!==void 0&&r!=null&&h(n,["ttl"],r);const c=f(i,["expireTime"]);return n!==void 0&&c!=null&&h(n,["expireTime"],c),o}function n_(i,n){const o={},r=f(n,["name"]);r!=null&&h(o,["_url","name"],Ki(i,r));const c=f(n,["config"]);return c!=null&&e_(c,o),o}function i_(i,n){const o={},r=f(n,["name"]);r!=null&&h(o,["_url","name"],Ki(i,r));const c=f(n,["config"]);return c!=null&&t_(c,o),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class o_ extends Yi{constructor(n){super(),this.apiClient=n,this.list=async(o={})=>new bs(Ji.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(o),o)}async create(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=NS(this.apiClient,n);return T=pe("cachedContents",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json()),m.then(C=>C)}else{const S=IS(this.apiClient,n);return T=pe("cachedContents",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"POST",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json()),m.then(C=>C)}}async get(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=BS(this.apiClient,n);return T=pe("{name}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json()),m.then(C=>C)}else{const S=qS(this.apiClient,n);return T=pe("{name}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"GET",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json()),m.then(C=>C)}}async delete(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=DS(this.apiClient,n);return T=pe("{name}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"DELETE",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=LS(C),w=new Gm;return Object.assign(w,M),w})}else{const S=OS(this.apiClient,n);return T=pe("{name}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"DELETE",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=US(C),w=new Gm;return Object.assign(w,M),w})}}async update(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=i_(this.apiClient,n);return T=pe("{name}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"PATCH",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json()),m.then(C=>C)}else{const S=n_(this.apiClient,n);return T=pe("{name}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"PATCH",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json()),m.then(C=>C)}}async listInternal(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=KS(n);return T=pe("cachedContents",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=XS(C),w=new Hm;return Object.assign(w,M),w})}else{const S=YS(n);return T=pe("cachedContents",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"GET",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=QS(C),w=new Hm;return Object.assign(w,M),w})}}}function oc(i,n){var o={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&n.indexOf(r)<0&&(o[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,r=Object.getOwnPropertySymbols(i);c<r.length;c++)n.indexOf(r[c])<0&&Object.prototype.propertyIsEnumerable.call(i,r[c])&&(o[r[c]]=i[r[c]]);return o}function Ym(i){var n=typeof Symbol=="function"&&Symbol.iterator,o=n&&i[n],r=0;if(o)return o.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function be(i){return this instanceof be?(this.v=i,this):new be(i)}function Xn(i,n,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=o.apply(i,n||[]),c,p=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),T("next"),T("throw"),T("return",m),c[Symbol.asyncIterator]=function(){return this},c;function m(D){return function(B){return Promise.resolve(B).then(D,M)}}function T(D,B){r[D]&&(c[D]=function(Q){return new Promise(function(Y,$){p.push([D,Q,Y,$])>1||E(D,Q)})},B&&(c[D]=B(c[D])))}function E(D,B){try{S(r[D](B))}catch(Q){w(p[0][3],Q)}}function S(D){D.value instanceof be?Promise.resolve(D.value.v).then(C,M):w(p[0][2],D)}function C(D){E("next",D)}function M(D){E("throw",D)}function w(D,B){D(B),p.shift(),p.length&&E(p[0][0],p[0][1])}}function Wn(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=i[Symbol.asyncIterator],o;return n?n.call(i):(i=typeof Ym=="function"?Ym(i):i[Symbol.iterator](),o={},r("next"),r("throw"),r("return"),o[Symbol.asyncIterator]=function(){return this},o);function r(p){o[p]=i[p]&&function(m){return new Promise(function(T,E){m=i[p](m),c(T,E,m.done,m.value)})}}function c(p,m,T,E){Promise.resolve(E).then(function(S){p({value:S,done:T})},m)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s_(i){var n;if(i.candidates==null||i.candidates.length===0)return!1;const o=(n=i.candidates[0])===null||n===void 0?void 0:n.content;return o===void 0?!1:Ny(o)}function Ny(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const n of i.parts)if(n===void 0||Object.keys(n).length===0)return!1;return!0}function r_(i){if(i.length!==0){for(const n of i)if(n.role!=="user"&&n.role!=="model")throw new Error(`Role must be user or model, but got ${n.role}.`)}}function Km(i){if(i===void 0||i.length===0)return[];const n=[],o=i.length;let r=0;for(;r<o;)if(i[r].role==="user")n.push(i[r]),r++;else{const c=[];let p=!0;for(;r<o&&i[r].role==="model";)c.push(i[r]),p&&!Ny(i[r])&&(p=!1),r++;p?n.push(...c):n.pop()}return n}class l_{constructor(n,o){this.modelsModule=n,this.apiClient=o}create(n){return new a_(this.apiClient,this.modelsModule,n.model,n.config,structuredClone(n.history))}}class a_{constructor(n,o,r,c={},p=[]){this.apiClient=n,this.modelsModule=o,this.model=r,this.config=c,this.history=p,this.sendPromise=Promise.resolve(),r_(p)}async sendMessage(n){var o;await this.sendPromise;const r=Kt(n.message),c=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(o=n.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var p,m,T;const E=await c,S=(m=(p=E.candidates)===null||p===void 0?void 0:p[0])===null||m===void 0?void 0:m.content,C=E.automaticFunctionCallingHistory,M=this.getHistory(!0).length;let w=[];C!=null&&(w=(T=C.slice(M))!==null&&T!==void 0?T:[]);const D=S?[S]:[];this.recordHistory(r,D,w)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),c}async sendMessageStream(n){var o;await this.sendPromise;const r=Kt(n.message),c=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(o=n.config)!==null&&o!==void 0?o:this.config});this.sendPromise=c.then(()=>{}).catch(()=>{});const p=await c;return this.processStreamResponse(p,r)}getHistory(n=!1){const o=n?Km(this.history):this.history;return structuredClone(o)}processStreamResponse(n,o){return Xn(this,arguments,function*(){var c,p,m,T,E,S;const C=[];try{for(var M=!0,w=Wn(n),D;D=yield be(w.next()),c=D.done,!c;M=!0){T=D.value,M=!1;const B=T;if(s_(B)){const Q=(S=(E=B.candidates)===null||E===void 0?void 0:E[0])===null||S===void 0?void 0:S.content;Q!==void 0&&C.push(Q)}yield yield be(B)}}catch(B){p={error:B}}finally{try{!M&&!c&&(m=w.return)&&(yield be(m.call(w)))}finally{if(p)throw p.error}}this.recordHistory(o,C)})}recordHistory(n,o,r){let c=[];o.length>0&&o.every(p=>p.role!==void 0)?c=o:c.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Km(r)):this.history.push(n),this.history.push(...c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class da extends Error{constructor(n){super(n.message),this.name="ApiError",this.status=n.status,Object.setPrototypeOf(this,da.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u_(i){const n={},o=f(i,["file"]);return o!=null&&h(n,["file"],o),n}function c_(i){const n={},o=f(i,["sdkHttpResponse"]);return o!=null&&h(n,["sdkHttpResponse"],o),n}function f_(i){const n={},o=f(i,["name"]);return o!=null&&h(n,["_url","file"],Ay(o)),n}function d_(i){const n={},o=f(i,["sdkHttpResponse"]);return o!=null&&h(n,["sdkHttpResponse"],o),n}function h_(i){const n={},o=f(i,["name"]);return o!=null&&h(n,["_url","file"],Ay(o)),n}function p_(i){const n={},o=f(i,["uris"]);return o!=null&&h(n,["uris"],o),n}function g_(i,n){const o={},r=f(i,["pageSize"]);n!==void 0&&r!=null&&h(n,["_query","pageSize"],r);const c=f(i,["pageToken"]);return n!==void 0&&c!=null&&h(n,["_query","pageToken"],c),o}function m_(i){const n={},o=f(i,["config"]);return o!=null&&g_(o,n),n}function y_(i){const n={},o=f(i,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(i,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const c=f(i,["files"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>m)),h(n,["files"],p)}return n}function v_(i){const n={},o=f(i,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(i,["files"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(p=>p)),h(n,["files"],c)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T_ extends Yi{constructor(n){super(),this.apiClient=n,this.list=async(o={})=>new bs(Ji.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(o),o)}async upload(n){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(n.file,n.config).then(o=>o)}async download(n){await this.apiClient.downloadFile(n)}async registerFiles(n){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(n){return this.registerFilesInternal(n)}async listInternal(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const T=m_(n);return p=pe("files",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json().then(S=>{const C=S;return C.sdkHttpResponse={headers:E.headers},C})),c.then(E=>{const S=y_(E),C=new ST;return Object.assign(C,S),C})}}async createInternal(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const T=u_(n);return p=pe("upload/v1beta/files",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json()),c.then(E=>{const S=c_(E),C=new _T;return Object.assign(C,S),C})}}async get(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const T=h_(n);return p=pe("files/{file}",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json()),c.then(E=>E)}}async delete(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const T=f_(n);return p=pe("files/{file}",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"DELETE",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json().then(S=>{const C=S;return C.sdkHttpResponse={headers:E.headers},C})),c.then(E=>{const S=d_(E),C=new ET;return Object.assign(C,S),C})}}async registerFilesInternal(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const T=p_(n);return p=pe("files:register",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json()),c.then(E=>{const S=v_(E),C=new CT;return Object.assign(C,S),C})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $u(i){const n={},o=f(i,["data"]);if(o!=null&&h(n,["data"],o),f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(i,["mimeType"]);return r!=null&&h(n,["mimeType"],r),n}function S_(i){const n={},o=f(i,["parts"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(p=>k_(p))),h(n,["parts"],c)}const r=f(i,["role"]);return r!=null&&h(n,["role"],r),n}function __(i){const n={};if(f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(i,["fileUri"]);o!=null&&h(n,["fileUri"],o);const r=f(i,["mimeType"]);return r!=null&&h(n,["mimeType"],r),n}function E_(i){const n={},o=f(i,["id"]);o!=null&&h(n,["id"],o);const r=f(i,["args"]);r!=null&&h(n,["args"],r);const c=f(i,["name"]);if(c!=null&&h(n,["name"],c),f(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function C_(i){const n={},o=f(i,["description"]);o!=null&&h(n,["description"],o);const r=f(i,["name"]);r!=null&&h(n,["name"],r);const c=f(i,["parameters"]);c!=null&&h(n,["parameters"],c);const p=f(i,["parametersJsonSchema"]);p!=null&&h(n,["parametersJsonSchema"],p);const m=f(i,["response"]);m!=null&&h(n,["response"],m);const T=f(i,["responseJsonSchema"]);if(T!=null&&h(n,["responseJsonSchema"],T),f(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function A_(i){const n={},o=f(i,["modelSelectionConfig"]);o!=null&&h(n,["modelConfig"],o);const r=f(i,["responseJsonSchema"]);r!=null&&h(n,["responseJsonSchema"],r);const c=f(i,["audioTimestamp"]);c!=null&&h(n,["audioTimestamp"],c);const p=f(i,["candidateCount"]);p!=null&&h(n,["candidateCount"],p);const m=f(i,["enableAffectiveDialog"]);m!=null&&h(n,["enableAffectiveDialog"],m);const T=f(i,["frequencyPenalty"]);T!=null&&h(n,["frequencyPenalty"],T);const E=f(i,["logprobs"]);E!=null&&h(n,["logprobs"],E);const S=f(i,["maxOutputTokens"]);S!=null&&h(n,["maxOutputTokens"],S);const C=f(i,["mediaResolution"]);C!=null&&h(n,["mediaResolution"],C);const M=f(i,["presencePenalty"]);M!=null&&h(n,["presencePenalty"],M);const w=f(i,["responseLogprobs"]);w!=null&&h(n,["responseLogprobs"],w);const D=f(i,["responseMimeType"]);D!=null&&h(n,["responseMimeType"],D);const B=f(i,["responseModalities"]);B!=null&&h(n,["responseModalities"],B);const Q=f(i,["responseSchema"]);Q!=null&&h(n,["responseSchema"],Q);const Y=f(i,["routingConfig"]);Y!=null&&h(n,["routingConfig"],Y);const $=f(i,["seed"]);$!=null&&h(n,["seed"],$);const ae=f(i,["speechConfig"]);ae!=null&&h(n,["speechConfig"],ae);const oe=f(i,["stopSequences"]);oe!=null&&h(n,["stopSequences"],oe);const ue=f(i,["temperature"]);ue!=null&&h(n,["temperature"],ue);const ie=f(i,["thinkingConfig"]);ie!=null&&h(n,["thinkingConfig"],ie);const V=f(i,["topK"]);V!=null&&h(n,["topK"],V);const ce=f(i,["topP"]);if(ce!=null&&h(n,["topP"],ce),f(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function R_(i){const n={};if(f(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=f(i,["enableWidget"]);return o!=null&&h(n,["enableWidget"],o),n}function b_(i){const n={};if(f(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=f(i,["timeRangeFilter"]);return o!=null&&h(n,["timeRangeFilter"],o),n}function M_(i,n){const o={},r=f(i,["generationConfig"]);n!==void 0&&r!=null&&h(n,["setup","generationConfig"],r);const c=f(i,["responseModalities"]);n!==void 0&&c!=null&&h(n,["setup","generationConfig","responseModalities"],c);const p=f(i,["temperature"]);n!==void 0&&p!=null&&h(n,["setup","generationConfig","temperature"],p);const m=f(i,["topP"]);n!==void 0&&m!=null&&h(n,["setup","generationConfig","topP"],m);const T=f(i,["topK"]);n!==void 0&&T!=null&&h(n,["setup","generationConfig","topK"],T);const E=f(i,["maxOutputTokens"]);n!==void 0&&E!=null&&h(n,["setup","generationConfig","maxOutputTokens"],E);const S=f(i,["mediaResolution"]);n!==void 0&&S!=null&&h(n,["setup","generationConfig","mediaResolution"],S);const C=f(i,["seed"]);n!==void 0&&C!=null&&h(n,["setup","generationConfig","seed"],C);const M=f(i,["speechConfig"]);n!==void 0&&M!=null&&h(n,["setup","generationConfig","speechConfig"],qd(M));const w=f(i,["thinkingConfig"]);n!==void 0&&w!=null&&h(n,["setup","generationConfig","thinkingConfig"],w);const D=f(i,["enableAffectiveDialog"]);n!==void 0&&D!=null&&h(n,["setup","generationConfig","enableAffectiveDialog"],D);const B=f(i,["systemInstruction"]);n!==void 0&&B!=null&&h(n,["setup","systemInstruction"],S_(Kt(B)));const Q=f(i,["tools"]);if(n!==void 0&&Q!=null){let V=Nr(Q);Array.isArray(V)&&(V=V.map(ce=>G_(Ir(ce)))),h(n,["setup","tools"],V)}const Y=f(i,["sessionResumption"]);n!==void 0&&Y!=null&&h(n,["setup","sessionResumption"],P_(Y));const $=f(i,["inputAudioTranscription"]);n!==void 0&&$!=null&&h(n,["setup","inputAudioTranscription"],$);const ae=f(i,["outputAudioTranscription"]);n!==void 0&&ae!=null&&h(n,["setup","outputAudioTranscription"],ae);const oe=f(i,["realtimeInputConfig"]);n!==void 0&&oe!=null&&h(n,["setup","realtimeInputConfig"],oe);const ue=f(i,["contextWindowCompression"]);n!==void 0&&ue!=null&&h(n,["setup","contextWindowCompression"],ue);const ie=f(i,["proactivity"]);if(n!==void 0&&ie!=null&&h(n,["setup","proactivity"],ie),f(i,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function w_(i,n){const o={},r=f(i,["generationConfig"]);n!==void 0&&r!=null&&h(n,["setup","generationConfig"],A_(r));const c=f(i,["responseModalities"]);n!==void 0&&c!=null&&h(n,["setup","generationConfig","responseModalities"],c);const p=f(i,["temperature"]);n!==void 0&&p!=null&&h(n,["setup","generationConfig","temperature"],p);const m=f(i,["topP"]);n!==void 0&&m!=null&&h(n,["setup","generationConfig","topP"],m);const T=f(i,["topK"]);n!==void 0&&T!=null&&h(n,["setup","generationConfig","topK"],T);const E=f(i,["maxOutputTokens"]);n!==void 0&&E!=null&&h(n,["setup","generationConfig","maxOutputTokens"],E);const S=f(i,["mediaResolution"]);n!==void 0&&S!=null&&h(n,["setup","generationConfig","mediaResolution"],S);const C=f(i,["seed"]);n!==void 0&&C!=null&&h(n,["setup","generationConfig","seed"],C);const M=f(i,["speechConfig"]);n!==void 0&&M!=null&&h(n,["setup","generationConfig","speechConfig"],qd(M));const w=f(i,["thinkingConfig"]);n!==void 0&&w!=null&&h(n,["setup","generationConfig","thinkingConfig"],w);const D=f(i,["enableAffectiveDialog"]);n!==void 0&&D!=null&&h(n,["setup","generationConfig","enableAffectiveDialog"],D);const B=f(i,["systemInstruction"]);n!==void 0&&B!=null&&h(n,["setup","systemInstruction"],Kt(B));const Q=f(i,["tools"]);if(n!==void 0&&Q!=null){let ce=Nr(Q);Array.isArray(ce)&&(ce=ce.map(xe=>H_(Ir(xe)))),h(n,["setup","tools"],ce)}const Y=f(i,["sessionResumption"]);n!==void 0&&Y!=null&&h(n,["setup","sessionResumption"],Y);const $=f(i,["inputAudioTranscription"]);n!==void 0&&$!=null&&h(n,["setup","inputAudioTranscription"],$);const ae=f(i,["outputAudioTranscription"]);n!==void 0&&ae!=null&&h(n,["setup","outputAudioTranscription"],ae);const oe=f(i,["realtimeInputConfig"]);n!==void 0&&oe!=null&&h(n,["setup","realtimeInputConfig"],oe);const ue=f(i,["contextWindowCompression"]);n!==void 0&&ue!=null&&h(n,["setup","contextWindowCompression"],ue);const ie=f(i,["proactivity"]);n!==void 0&&ie!=null&&h(n,["setup","proactivity"],ie);const V=f(i,["explicitVadSignal"]);return n!==void 0&&V!=null&&h(n,["setup","explicitVadSignal"],V),o}function x_(i,n){const o={},r=f(n,["model"]);r!=null&&h(o,["setup","model"],Ye(i,r));const c=f(n,["config"]);return c!=null&&h(o,["config"],M_(c,o)),o}function I_(i,n){const o={},r=f(n,["model"]);r!=null&&h(o,["setup","model"],Ye(i,r));const c=f(n,["config"]);return c!=null&&h(o,["config"],w_(c,o)),o}function N_(i){const n={},o=f(i,["musicGenerationConfig"]);return o!=null&&h(n,["musicGenerationConfig"],o),n}function O_(i){const n={},o=f(i,["weightedPrompts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>c)),h(n,["weightedPrompts"],r)}return n}function D_(i){const n={},o=f(i,["media"]);if(o!=null){let S=Ty(o);Array.isArray(S)&&(S=S.map(C=>$u(C))),h(n,["mediaChunks"],S)}const r=f(i,["audio"]);r!=null&&h(n,["audio"],$u(_y(r)));const c=f(i,["audioStreamEnd"]);c!=null&&h(n,["audioStreamEnd"],c);const p=f(i,["video"]);p!=null&&h(n,["video"],$u(Sy(p)));const m=f(i,["text"]);m!=null&&h(n,["text"],m);const T=f(i,["activityStart"]);T!=null&&h(n,["activityStart"],T);const E=f(i,["activityEnd"]);return E!=null&&h(n,["activityEnd"],E),n}function U_(i){const n={},o=f(i,["media"]);if(o!=null){let S=Ty(o);Array.isArray(S)&&(S=S.map(C=>C)),h(n,["mediaChunks"],S)}const r=f(i,["audio"]);r!=null&&h(n,["audio"],_y(r));const c=f(i,["audioStreamEnd"]);c!=null&&h(n,["audioStreamEnd"],c);const p=f(i,["video"]);p!=null&&h(n,["video"],Sy(p));const m=f(i,["text"]);m!=null&&h(n,["text"],m);const T=f(i,["activityStart"]);T!=null&&h(n,["activityStart"],T);const E=f(i,["activityEnd"]);return E!=null&&h(n,["activityEnd"],E),n}function L_(i){const n={},o=f(i,["setupComplete"]);o!=null&&h(n,["setupComplete"],o);const r=f(i,["serverContent"]);r!=null&&h(n,["serverContent"],r);const c=f(i,["toolCall"]);c!=null&&h(n,["toolCall"],c);const p=f(i,["toolCallCancellation"]);p!=null&&h(n,["toolCallCancellation"],p);const m=f(i,["usageMetadata"]);m!=null&&h(n,["usageMetadata"],q_(m));const T=f(i,["goAway"]);T!=null&&h(n,["goAway"],T);const E=f(i,["sessionResumptionUpdate"]);E!=null&&h(n,["sessionResumptionUpdate"],E);const S=f(i,["voiceActivityDetectionSignal"]);S!=null&&h(n,["voiceActivityDetectionSignal"],S);const C=f(i,["voiceActivity"]);return C!=null&&h(n,["voiceActivity"],B_(C)),n}function k_(i){const n={},o=f(i,["mediaResolution"]);o!=null&&h(n,["mediaResolution"],o);const r=f(i,["codeExecutionResult"]);r!=null&&h(n,["codeExecutionResult"],r);const c=f(i,["executableCode"]);c!=null&&h(n,["executableCode"],c);const p=f(i,["fileData"]);p!=null&&h(n,["fileData"],__(p));const m=f(i,["functionCall"]);m!=null&&h(n,["functionCall"],E_(m));const T=f(i,["functionResponse"]);T!=null&&h(n,["functionResponse"],T);const E=f(i,["inlineData"]);E!=null&&h(n,["inlineData"],$u(E));const S=f(i,["text"]);S!=null&&h(n,["text"],S);const C=f(i,["thought"]);C!=null&&h(n,["thought"],C);const M=f(i,["thoughtSignature"]);M!=null&&h(n,["thoughtSignature"],M);const w=f(i,["videoMetadata"]);return w!=null&&h(n,["videoMetadata"],w),n}function P_(i){const n={},o=f(i,["handle"]);if(o!=null&&h(n,["handle"],o),f(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function G_(i){const n={};if(f(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(i,["computerUse"]);o!=null&&h(n,["computerUse"],o);const r=f(i,["fileSearch"]);r!=null&&h(n,["fileSearch"],r);const c=f(i,["codeExecution"]);if(c!=null&&h(n,["codeExecution"],c),f(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=f(i,["functionDeclarations"]);if(p!=null){let C=p;Array.isArray(C)&&(C=C.map(M=>M)),h(n,["functionDeclarations"],C)}const m=f(i,["googleMaps"]);m!=null&&h(n,["googleMaps"],R_(m));const T=f(i,["googleSearch"]);T!=null&&h(n,["googleSearch"],b_(T));const E=f(i,["googleSearchRetrieval"]);E!=null&&h(n,["googleSearchRetrieval"],E);const S=f(i,["urlContext"]);return S!=null&&h(n,["urlContext"],S),n}function H_(i){const n={},o=f(i,["retrieval"]);o!=null&&h(n,["retrieval"],o);const r=f(i,["computerUse"]);if(r!=null&&h(n,["computerUse"],r),f(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(i,["codeExecution"]);c!=null&&h(n,["codeExecution"],c);const p=f(i,["enterpriseWebSearch"]);p!=null&&h(n,["enterpriseWebSearch"],p);const m=f(i,["functionDeclarations"]);if(m!=null){let M=m;Array.isArray(M)&&(M=M.map(w=>C_(w))),h(n,["functionDeclarations"],M)}const T=f(i,["googleMaps"]);T!=null&&h(n,["googleMaps"],T);const E=f(i,["googleSearch"]);E!=null&&h(n,["googleSearch"],E);const S=f(i,["googleSearchRetrieval"]);S!=null&&h(n,["googleSearchRetrieval"],S);const C=f(i,["urlContext"]);return C!=null&&h(n,["urlContext"],C),n}function q_(i){const n={},o=f(i,["promptTokenCount"]);o!=null&&h(n,["promptTokenCount"],o);const r=f(i,["cachedContentTokenCount"]);r!=null&&h(n,["cachedContentTokenCount"],r);const c=f(i,["candidatesTokenCount"]);c!=null&&h(n,["responseTokenCount"],c);const p=f(i,["toolUsePromptTokenCount"]);p!=null&&h(n,["toolUsePromptTokenCount"],p);const m=f(i,["thoughtsTokenCount"]);m!=null&&h(n,["thoughtsTokenCount"],m);const T=f(i,["totalTokenCount"]);T!=null&&h(n,["totalTokenCount"],T);const E=f(i,["promptTokensDetails"]);if(E!=null){let D=E;Array.isArray(D)&&(D=D.map(B=>B)),h(n,["promptTokensDetails"],D)}const S=f(i,["cacheTokensDetails"]);if(S!=null){let D=S;Array.isArray(D)&&(D=D.map(B=>B)),h(n,["cacheTokensDetails"],D)}const C=f(i,["candidatesTokensDetails"]);if(C!=null){let D=C;Array.isArray(D)&&(D=D.map(B=>B)),h(n,["responseTokensDetails"],D)}const M=f(i,["toolUsePromptTokensDetails"]);if(M!=null){let D=M;Array.isArray(D)&&(D=D.map(B=>B)),h(n,["toolUsePromptTokensDetails"],D)}const w=f(i,["trafficType"]);return w!=null&&h(n,["trafficType"],w),n}function B_(i){const n={},o=f(i,["type"]);return o!=null&&h(n,["voiceActivityType"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V_(i,n){const o={},r=f(i,["data"]);if(r!=null&&h(o,["data"],r),f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const c=f(i,["mimeType"]);return c!=null&&h(o,["mimeType"],c),o}function z_(i,n){const o={},r=f(i,["content"]);r!=null&&h(o,["content"],r);const c=f(i,["citationMetadata"]);c!=null&&h(o,["citationMetadata"],F_(c));const p=f(i,["tokenCount"]);p!=null&&h(o,["tokenCount"],p);const m=f(i,["finishReason"]);m!=null&&h(o,["finishReason"],m);const T=f(i,["avgLogprobs"]);T!=null&&h(o,["avgLogprobs"],T);const E=f(i,["groundingMetadata"]);E!=null&&h(o,["groundingMetadata"],E);const S=f(i,["index"]);S!=null&&h(o,["index"],S);const C=f(i,["logprobsResult"]);C!=null&&h(o,["logprobsResult"],C);const M=f(i,["safetyRatings"]);if(M!=null){let D=M;Array.isArray(D)&&(D=D.map(B=>B)),h(o,["safetyRatings"],D)}const w=f(i,["urlContextMetadata"]);return w!=null&&h(o,["urlContextMetadata"],w),o}function F_(i,n){const o={},r=f(i,["citationSources"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(p=>p)),h(o,["citations"],c)}return o}function J_(i,n,o){const r={},c=f(n,["model"]);c!=null&&h(r,["_url","model"],Ye(i,c));const p=f(n,["contents"]);if(p!=null){let m=kn(p);Array.isArray(m)&&(m=m.map(T=>T)),h(r,["contents"],m)}return r}function Y_(i,n){const o={},r=f(i,["sdkHttpResponse"]);r!=null&&h(o,["sdkHttpResponse"],r);const c=f(i,["tokensInfo"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>m)),h(o,["tokensInfo"],p)}return o}function K_(i,n){const o={},r=f(i,["values"]);r!=null&&h(o,["values"],r);const c=f(i,["statistics"]);return c!=null&&h(o,["statistics"],Q_(c)),o}function Q_(i,n){const o={},r=f(i,["truncated"]);r!=null&&h(o,["truncated"],r);const c=f(i,["token_count"]);return c!=null&&h(o,["tokenCount"],c),o}function lc(i,n){const o={},r=f(i,["parts"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(m=>iC(m))),h(o,["parts"],p)}const c=f(i,["role"]);return c!=null&&h(o,["role"],c),o}function X_(i,n){const o={},r=f(i,["controlType"]);r!=null&&h(o,["controlType"],r);const c=f(i,["enableControlImageComputation"]);return c!=null&&h(o,["computeControl"],c),o}function W_(i,n){const o={};if(f(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return o}function Z_(i,n,o){const r={},c=f(i,["systemInstruction"]);n!==void 0&&c!=null&&h(n,["systemInstruction"],Kt(c));const p=f(i,["tools"]);if(n!==void 0&&p!=null){let T=p;Array.isArray(T)&&(T=T.map(E=>Ly(E))),h(n,["tools"],T)}const m=f(i,["generationConfig"]);return n!==void 0&&m!=null&&h(n,["generationConfig"],VE(m)),r}function $_(i,n,o){const r={},c=f(n,["model"]);c!=null&&h(r,["_url","model"],Ye(i,c));const p=f(n,["contents"]);if(p!=null){let T=kn(p);Array.isArray(T)&&(T=T.map(E=>lc(E))),h(r,["contents"],T)}const m=f(n,["config"]);return m!=null&&W_(m),r}function j_(i,n,o){const r={},c=f(n,["model"]);c!=null&&h(r,["_url","model"],Ye(i,c));const p=f(n,["contents"]);if(p!=null){let T=kn(p);Array.isArray(T)&&(T=T.map(E=>E)),h(r,["contents"],T)}const m=f(n,["config"]);return m!=null&&Z_(m,r),r}function eE(i,n){const o={},r=f(i,["sdkHttpResponse"]);r!=null&&h(o,["sdkHttpResponse"],r);const c=f(i,["totalTokens"]);c!=null&&h(o,["totalTokens"],c);const p=f(i,["cachedContentTokenCount"]);return p!=null&&h(o,["cachedContentTokenCount"],p),o}function tE(i,n){const o={},r=f(i,["sdkHttpResponse"]);r!=null&&h(o,["sdkHttpResponse"],r);const c=f(i,["totalTokens"]);return c!=null&&h(o,["totalTokens"],c),o}function nE(i,n,o){const r={},c=f(n,["model"]);return c!=null&&h(r,["_url","name"],Ye(i,c)),r}function iE(i,n,o){const r={},c=f(n,["model"]);return c!=null&&h(r,["_url","name"],Ye(i,c)),r}function oE(i,n){const o={},r=f(i,["sdkHttpResponse"]);return r!=null&&h(o,["sdkHttpResponse"],r),o}function sE(i,n){const o={},r=f(i,["sdkHttpResponse"]);return r!=null&&h(o,["sdkHttpResponse"],r),o}function rE(i,n,o){const r={},c=f(i,["outputGcsUri"]);n!==void 0&&c!=null&&h(n,["parameters","storageUri"],c);const p=f(i,["negativePrompt"]);n!==void 0&&p!=null&&h(n,["parameters","negativePrompt"],p);const m=f(i,["numberOfImages"]);n!==void 0&&m!=null&&h(n,["parameters","sampleCount"],m);const T=f(i,["aspectRatio"]);n!==void 0&&T!=null&&h(n,["parameters","aspectRatio"],T);const E=f(i,["guidanceScale"]);n!==void 0&&E!=null&&h(n,["parameters","guidanceScale"],E);const S=f(i,["seed"]);n!==void 0&&S!=null&&h(n,["parameters","seed"],S);const C=f(i,["safetyFilterLevel"]);n!==void 0&&C!=null&&h(n,["parameters","safetySetting"],C);const M=f(i,["personGeneration"]);n!==void 0&&M!=null&&h(n,["parameters","personGeneration"],M);const w=f(i,["includeSafetyAttributes"]);n!==void 0&&w!=null&&h(n,["parameters","includeSafetyAttributes"],w);const D=f(i,["includeRaiReason"]);n!==void 0&&D!=null&&h(n,["parameters","includeRaiReason"],D);const B=f(i,["language"]);n!==void 0&&B!=null&&h(n,["parameters","language"],B);const Q=f(i,["outputMimeType"]);n!==void 0&&Q!=null&&h(n,["parameters","outputOptions","mimeType"],Q);const Y=f(i,["outputCompressionQuality"]);n!==void 0&&Y!=null&&h(n,["parameters","outputOptions","compressionQuality"],Y);const $=f(i,["addWatermark"]);n!==void 0&&$!=null&&h(n,["parameters","addWatermark"],$);const ae=f(i,["labels"]);n!==void 0&&ae!=null&&h(n,["labels"],ae);const oe=f(i,["editMode"]);n!==void 0&&oe!=null&&h(n,["parameters","editMode"],oe);const ue=f(i,["baseSteps"]);return n!==void 0&&ue!=null&&h(n,["parameters","editConfig","baseSteps"],ue),r}function lE(i,n,o){const r={},c=f(n,["model"]);c!=null&&h(r,["_url","model"],Ye(i,c));const p=f(n,["prompt"]);p!=null&&h(r,["instances[0]","prompt"],p);const m=f(n,["referenceImages"]);if(m!=null){let E=m;Array.isArray(E)&&(E=E.map(S=>uC(S))),h(r,["instances[0]","referenceImages"],E)}const T=f(n,["config"]);return T!=null&&rE(T,r),r}function aE(i,n){const o={},r=f(i,["sdkHttpResponse"]);r!=null&&h(o,["sdkHttpResponse"],r);const c=f(i,["predictions"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>ac(m))),h(o,["generatedImages"],p)}return o}function uE(i,n,o){const r={},c=f(i,["taskType"]);n!==void 0&&c!=null&&h(n,["requests[]","taskType"],c);const p=f(i,["title"]);n!==void 0&&p!=null&&h(n,["requests[]","title"],p);const m=f(i,["outputDimensionality"]);if(n!==void 0&&m!=null&&h(n,["requests[]","outputDimensionality"],m),f(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function cE(i,n,o){const r={},c=f(i,["taskType"]);n!==void 0&&c!=null&&h(n,["instances[]","task_type"],c);const p=f(i,["title"]);n!==void 0&&p!=null&&h(n,["instances[]","title"],p);const m=f(i,["outputDimensionality"]);n!==void 0&&m!=null&&h(n,["parameters","outputDimensionality"],m);const T=f(i,["mimeType"]);n!==void 0&&T!=null&&h(n,["instances[]","mimeType"],T);const E=f(i,["autoTruncate"]);return n!==void 0&&E!=null&&h(n,["parameters","autoTruncate"],E),r}function fE(i,n,o){const r={},c=f(n,["model"]);c!=null&&h(r,["_url","model"],Ye(i,c));const p=f(n,["contents"]);if(p!=null){let E=Pd(i,p);Array.isArray(E)&&(E=E.map(S=>S)),h(r,["requests[]","content"],E)}const m=f(n,["config"]);m!=null&&uE(m,r);const T=f(n,["model"]);return T!==void 0&&h(r,["requests[]","model"],Ye(i,T)),r}function dE(i,n,o){const r={},c=f(n,["model"]);c!=null&&h(r,["_url","model"],Ye(i,c));const p=f(n,["contents"]);if(p!=null){let T=Pd(i,p);Array.isArray(T)&&(T=T.map(E=>E)),h(r,["instances[]","content"],T)}const m=f(n,["config"]);return m!=null&&cE(m,r),r}function hE(i,n){const o={},r=f(i,["sdkHttpResponse"]);r!=null&&h(o,["sdkHttpResponse"],r);const c=f(i,["embeddings"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(T=>T)),h(o,["embeddings"],m)}const p=f(i,["metadata"]);return p!=null&&h(o,["metadata"],p),o}function pE(i,n){const o={},r=f(i,["sdkHttpResponse"]);r!=null&&h(o,["sdkHttpResponse"],r);const c=f(i,["predictions[]","embeddings"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(T=>K_(T))),h(o,["embeddings"],m)}const p=f(i,["metadata"]);return p!=null&&h(o,["metadata"],p),o}function gE(i,n){const o={},r=f(i,["endpoint"]);r!=null&&h(o,["name"],r);const c=f(i,["deployedModelId"]);return c!=null&&h(o,["deployedModelId"],c),o}function mE(i,n){const o={};if(f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(i,["fileUri"]);r!=null&&h(o,["fileUri"],r);const c=f(i,["mimeType"]);return c!=null&&h(o,["mimeType"],c),o}function yE(i,n){const o={},r=f(i,["id"]);r!=null&&h(o,["id"],r);const c=f(i,["args"]);c!=null&&h(o,["args"],c);const p=f(i,["name"]);if(p!=null&&h(o,["name"],p),f(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return o}function vE(i,n){const o={},r=f(i,["allowedFunctionNames"]);r!=null&&h(o,["allowedFunctionNames"],r);const c=f(i,["mode"]);if(c!=null&&h(o,["mode"],c),f(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return o}function TE(i,n){const o={},r=f(i,["description"]);r!=null&&h(o,["description"],r);const c=f(i,["name"]);c!=null&&h(o,["name"],c);const p=f(i,["parameters"]);p!=null&&h(o,["parameters"],p);const m=f(i,["parametersJsonSchema"]);m!=null&&h(o,["parametersJsonSchema"],m);const T=f(i,["response"]);T!=null&&h(o,["response"],T);const E=f(i,["responseJsonSchema"]);if(E!=null&&h(o,["responseJsonSchema"],E),f(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return o}function SE(i,n,o,r){const c={},p=f(n,["systemInstruction"]);o!==void 0&&p!=null&&h(o,["systemInstruction"],lc(Kt(p)));const m=f(n,["temperature"]);m!=null&&h(c,["temperature"],m);const T=f(n,["topP"]);T!=null&&h(c,["topP"],T);const E=f(n,["topK"]);E!=null&&h(c,["topK"],E);const S=f(n,["candidateCount"]);S!=null&&h(c,["candidateCount"],S);const C=f(n,["maxOutputTokens"]);C!=null&&h(c,["maxOutputTokens"],C);const M=f(n,["stopSequences"]);M!=null&&h(c,["stopSequences"],M);const w=f(n,["responseLogprobs"]);w!=null&&h(c,["responseLogprobs"],w);const D=f(n,["logprobs"]);D!=null&&h(c,["logprobs"],D);const B=f(n,["presencePenalty"]);B!=null&&h(c,["presencePenalty"],B);const Q=f(n,["frequencyPenalty"]);Q!=null&&h(c,["frequencyPenalty"],Q);const Y=f(n,["seed"]);Y!=null&&h(c,["seed"],Y);const $=f(n,["responseMimeType"]);$!=null&&h(c,["responseMimeType"],$);const ae=f(n,["responseSchema"]);ae!=null&&h(c,["responseSchema"],Gd(ae));const oe=f(n,["responseJsonSchema"]);if(oe!=null&&h(c,["responseJsonSchema"],oe),f(n,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(n,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ue=f(n,["safetySettings"]);if(o!==void 0&&ue!=null){let Ve=ue;Array.isArray(Ve)&&(Ve=Ve.map(gt=>cC(gt))),h(o,["safetySettings"],Ve)}const ie=f(n,["tools"]);if(o!==void 0&&ie!=null){let Ve=Nr(ie);Array.isArray(Ve)&&(Ve=Ve.map(gt=>yC(Ir(gt)))),h(o,["tools"],Ve)}const V=f(n,["toolConfig"]);if(o!==void 0&&V!=null&&h(o,["toolConfig"],mC(V)),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=f(n,["cachedContent"]);o!==void 0&&ce!=null&&h(o,["cachedContent"],Ki(i,ce));const xe=f(n,["responseModalities"]);xe!=null&&h(c,["responseModalities"],xe);const ye=f(n,["mediaResolution"]);ye!=null&&h(c,["mediaResolution"],ye);const Ie=f(n,["speechConfig"]);if(Ie!=null&&h(c,["speechConfig"],Hd(Ie)),f(n,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Ne=f(n,["thinkingConfig"]);Ne!=null&&h(c,["thinkingConfig"],Ne);const Xe=f(n,["imageConfig"]);Xe!=null&&h(c,["imageConfig"],KE(Xe));const R=f(n,["enableEnhancedCivicAnswers"]);if(R!=null&&h(c,["enableEnhancedCivicAnswers"],R),f(n,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return c}function _E(i,n,o,r){const c={},p=f(n,["systemInstruction"]);o!==void 0&&p!=null&&h(o,["systemInstruction"],Kt(p));const m=f(n,["temperature"]);m!=null&&h(c,["temperature"],m);const T=f(n,["topP"]);T!=null&&h(c,["topP"],T);const E=f(n,["topK"]);E!=null&&h(c,["topK"],E);const S=f(n,["candidateCount"]);S!=null&&h(c,["candidateCount"],S);const C=f(n,["maxOutputTokens"]);C!=null&&h(c,["maxOutputTokens"],C);const M=f(n,["stopSequences"]);M!=null&&h(c,["stopSequences"],M);const w=f(n,["responseLogprobs"]);w!=null&&h(c,["responseLogprobs"],w);const D=f(n,["logprobs"]);D!=null&&h(c,["logprobs"],D);const B=f(n,["presencePenalty"]);B!=null&&h(c,["presencePenalty"],B);const Q=f(n,["frequencyPenalty"]);Q!=null&&h(c,["frequencyPenalty"],Q);const Y=f(n,["seed"]);Y!=null&&h(c,["seed"],Y);const $=f(n,["responseMimeType"]);$!=null&&h(c,["responseMimeType"],$);const ae=f(n,["responseSchema"]);ae!=null&&h(c,["responseSchema"],Gd(ae));const oe=f(n,["responseJsonSchema"]);oe!=null&&h(c,["responseJsonSchema"],oe);const ue=f(n,["routingConfig"]);ue!=null&&h(c,["routingConfig"],ue);const ie=f(n,["modelSelectionConfig"]);ie!=null&&h(c,["modelConfig"],ie);const V=f(n,["safetySettings"]);if(o!==void 0&&V!=null){let Te=V;Array.isArray(Te)&&(Te=Te.map(fe=>fe)),h(o,["safetySettings"],Te)}const ce=f(n,["tools"]);if(o!==void 0&&ce!=null){let Te=Nr(ce);Array.isArray(Te)&&(Te=Te.map(fe=>Ly(Ir(fe)))),h(o,["tools"],Te)}const xe=f(n,["toolConfig"]);o!==void 0&&xe!=null&&h(o,["toolConfig"],xe);const ye=f(n,["labels"]);o!==void 0&&ye!=null&&h(o,["labels"],ye);const Ie=f(n,["cachedContent"]);o!==void 0&&Ie!=null&&h(o,["cachedContent"],Ki(i,Ie));const Ne=f(n,["responseModalities"]);Ne!=null&&h(c,["responseModalities"],Ne);const Xe=f(n,["mediaResolution"]);Xe!=null&&h(c,["mediaResolution"],Xe);const R=f(n,["speechConfig"]);R!=null&&h(c,["speechConfig"],Hd(R));const Ve=f(n,["audioTimestamp"]);Ve!=null&&h(c,["audioTimestamp"],Ve);const gt=f(n,["thinkingConfig"]);gt!=null&&h(c,["thinkingConfig"],gt);const O=f(n,["imageConfig"]);if(O!=null&&h(c,["imageConfig"],QE(O)),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const re=f(n,["modelArmorConfig"]);return o!==void 0&&re!=null&&h(o,["modelArmorConfig"],re),c}function Qm(i,n,o){const r={},c=f(n,["model"]);c!=null&&h(r,["_url","model"],Ye(i,c));const p=f(n,["contents"]);if(p!=null){let T=kn(p);Array.isArray(T)&&(T=T.map(E=>lc(E))),h(r,["contents"],T)}const m=f(n,["config"]);return m!=null&&h(r,["generationConfig"],SE(i,m,r)),r}function Xm(i,n,o){const r={},c=f(n,["model"]);c!=null&&h(r,["_url","model"],Ye(i,c));const p=f(n,["contents"]);if(p!=null){let T=kn(p);Array.isArray(T)&&(T=T.map(E=>E)),h(r,["contents"],T)}const m=f(n,["config"]);return m!=null&&h(r,["generationConfig"],_E(i,m,r)),r}function Wm(i,n){const o={},r=f(i,["sdkHttpResponse"]);r!=null&&h(o,["sdkHttpResponse"],r);const c=f(i,["candidates"]);if(c!=null){let S=c;Array.isArray(S)&&(S=S.map(C=>z_(C))),h(o,["candidates"],S)}const p=f(i,["modelVersion"]);p!=null&&h(o,["modelVersion"],p);const m=f(i,["promptFeedback"]);m!=null&&h(o,["promptFeedback"],m);const T=f(i,["responseId"]);T!=null&&h(o,["responseId"],T);const E=f(i,["usageMetadata"]);return E!=null&&h(o,["usageMetadata"],E),o}function Zm(i,n){const o={},r=f(i,["sdkHttpResponse"]);r!=null&&h(o,["sdkHttpResponse"],r);const c=f(i,["candidates"]);if(c!=null){let C=c;Array.isArray(C)&&(C=C.map(M=>M)),h(o,["candidates"],C)}const p=f(i,["createTime"]);p!=null&&h(o,["createTime"],p);const m=f(i,["modelVersion"]);m!=null&&h(o,["modelVersion"],m);const T=f(i,["promptFeedback"]);T!=null&&h(o,["promptFeedback"],T);const E=f(i,["responseId"]);E!=null&&h(o,["responseId"],E);const S=f(i,["usageMetadata"]);return S!=null&&h(o,["usageMetadata"],S),o}function EE(i,n,o){const r={};if(f(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const c=f(i,["numberOfImages"]);n!==void 0&&c!=null&&h(n,["parameters","sampleCount"],c);const p=f(i,["aspectRatio"]);n!==void 0&&p!=null&&h(n,["parameters","aspectRatio"],p);const m=f(i,["guidanceScale"]);if(n!==void 0&&m!=null&&h(n,["parameters","guidanceScale"],m),f(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const T=f(i,["safetyFilterLevel"]);n!==void 0&&T!=null&&h(n,["parameters","safetySetting"],T);const E=f(i,["personGeneration"]);n!==void 0&&E!=null&&h(n,["parameters","personGeneration"],E);const S=f(i,["includeSafetyAttributes"]);n!==void 0&&S!=null&&h(n,["parameters","includeSafetyAttributes"],S);const C=f(i,["includeRaiReason"]);n!==void 0&&C!=null&&h(n,["parameters","includeRaiReason"],C);const M=f(i,["language"]);n!==void 0&&M!=null&&h(n,["parameters","language"],M);const w=f(i,["outputMimeType"]);n!==void 0&&w!=null&&h(n,["parameters","outputOptions","mimeType"],w);const D=f(i,["outputCompressionQuality"]);if(n!==void 0&&D!=null&&h(n,["parameters","outputOptions","compressionQuality"],D),f(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=f(i,["imageSize"]);if(n!==void 0&&B!=null&&h(n,["parameters","sampleImageSize"],B),f(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function CE(i,n,o){const r={},c=f(i,["outputGcsUri"]);n!==void 0&&c!=null&&h(n,["parameters","storageUri"],c);const p=f(i,["negativePrompt"]);n!==void 0&&p!=null&&h(n,["parameters","negativePrompt"],p);const m=f(i,["numberOfImages"]);n!==void 0&&m!=null&&h(n,["parameters","sampleCount"],m);const T=f(i,["aspectRatio"]);n!==void 0&&T!=null&&h(n,["parameters","aspectRatio"],T);const E=f(i,["guidanceScale"]);n!==void 0&&E!=null&&h(n,["parameters","guidanceScale"],E);const S=f(i,["seed"]);n!==void 0&&S!=null&&h(n,["parameters","seed"],S);const C=f(i,["safetyFilterLevel"]);n!==void 0&&C!=null&&h(n,["parameters","safetySetting"],C);const M=f(i,["personGeneration"]);n!==void 0&&M!=null&&h(n,["parameters","personGeneration"],M);const w=f(i,["includeSafetyAttributes"]);n!==void 0&&w!=null&&h(n,["parameters","includeSafetyAttributes"],w);const D=f(i,["includeRaiReason"]);n!==void 0&&D!=null&&h(n,["parameters","includeRaiReason"],D);const B=f(i,["language"]);n!==void 0&&B!=null&&h(n,["parameters","language"],B);const Q=f(i,["outputMimeType"]);n!==void 0&&Q!=null&&h(n,["parameters","outputOptions","mimeType"],Q);const Y=f(i,["outputCompressionQuality"]);n!==void 0&&Y!=null&&h(n,["parameters","outputOptions","compressionQuality"],Y);const $=f(i,["addWatermark"]);n!==void 0&&$!=null&&h(n,["parameters","addWatermark"],$);const ae=f(i,["labels"]);n!==void 0&&ae!=null&&h(n,["labels"],ae);const oe=f(i,["imageSize"]);n!==void 0&&oe!=null&&h(n,["parameters","sampleImageSize"],oe);const ue=f(i,["enhancePrompt"]);return n!==void 0&&ue!=null&&h(n,["parameters","enhancePrompt"],ue),r}function AE(i,n,o){const r={},c=f(n,["model"]);c!=null&&h(r,["_url","model"],Ye(i,c));const p=f(n,["prompt"]);p!=null&&h(r,["instances[0]","prompt"],p);const m=f(n,["config"]);return m!=null&&EE(m,r),r}function RE(i,n,o){const r={},c=f(n,["model"]);c!=null&&h(r,["_url","model"],Ye(i,c));const p=f(n,["prompt"]);p!=null&&h(r,["instances[0]","prompt"],p);const m=f(n,["config"]);return m!=null&&CE(m,r),r}function bE(i,n){const o={},r=f(i,["sdkHttpResponse"]);r!=null&&h(o,["sdkHttpResponse"],r);const c=f(i,["predictions"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(T=>GE(T))),h(o,["generatedImages"],m)}const p=f(i,["positivePromptSafetyAttributes"]);return p!=null&&h(o,["positivePromptSafetyAttributes"],Dy(p)),o}function ME(i,n){const o={},r=f(i,["sdkHttpResponse"]);r!=null&&h(o,["sdkHttpResponse"],r);const c=f(i,["predictions"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(T=>ac(T))),h(o,["generatedImages"],m)}const p=f(i,["positivePromptSafetyAttributes"]);return p!=null&&h(o,["positivePromptSafetyAttributes"],Uy(p)),o}function wE(i,n,o){const r={},c=f(i,["numberOfVideos"]);if(n!==void 0&&c!=null&&h(n,["parameters","sampleCount"],c),f(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const p=f(i,["durationSeconds"]);if(n!==void 0&&p!=null&&h(n,["parameters","durationSeconds"],p),f(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const m=f(i,["aspectRatio"]);n!==void 0&&m!=null&&h(n,["parameters","aspectRatio"],m);const T=f(i,["resolution"]);n!==void 0&&T!=null&&h(n,["parameters","resolution"],T);const E=f(i,["personGeneration"]);if(n!==void 0&&E!=null&&h(n,["parameters","personGeneration"],E),f(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const S=f(i,["negativePrompt"]);n!==void 0&&S!=null&&h(n,["parameters","negativePrompt"],S);const C=f(i,["enhancePrompt"]);if(n!==void 0&&C!=null&&h(n,["parameters","enhancePrompt"],C),f(i,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const M=f(i,["lastFrame"]);n!==void 0&&M!=null&&h(n,["instances[0]","lastFrame"],uc(M));const w=f(i,["referenceImages"]);if(n!==void 0&&w!=null){let D=w;Array.isArray(D)&&(D=D.map(B=>IC(B))),h(n,["instances[0]","referenceImages"],D)}if(f(i,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(i,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function xE(i,n,o){const r={},c=f(i,["numberOfVideos"]);n!==void 0&&c!=null&&h(n,["parameters","sampleCount"],c);const p=f(i,["outputGcsUri"]);n!==void 0&&p!=null&&h(n,["parameters","storageUri"],p);const m=f(i,["fps"]);n!==void 0&&m!=null&&h(n,["parameters","fps"],m);const T=f(i,["durationSeconds"]);n!==void 0&&T!=null&&h(n,["parameters","durationSeconds"],T);const E=f(i,["seed"]);n!==void 0&&E!=null&&h(n,["parameters","seed"],E);const S=f(i,["aspectRatio"]);n!==void 0&&S!=null&&h(n,["parameters","aspectRatio"],S);const C=f(i,["resolution"]);n!==void 0&&C!=null&&h(n,["parameters","resolution"],C);const M=f(i,["personGeneration"]);n!==void 0&&M!=null&&h(n,["parameters","personGeneration"],M);const w=f(i,["pubsubTopic"]);n!==void 0&&w!=null&&h(n,["parameters","pubsubTopic"],w);const D=f(i,["negativePrompt"]);n!==void 0&&D!=null&&h(n,["parameters","negativePrompt"],D);const B=f(i,["enhancePrompt"]);n!==void 0&&B!=null&&h(n,["parameters","enhancePrompt"],B);const Q=f(i,["generateAudio"]);n!==void 0&&Q!=null&&h(n,["parameters","generateAudio"],Q);const Y=f(i,["lastFrame"]);n!==void 0&&Y!=null&&h(n,["instances[0]","lastFrame"],Zn(Y));const $=f(i,["referenceImages"]);if(n!==void 0&&$!=null){let ue=$;Array.isArray(ue)&&(ue=ue.map(ie=>NC(ie))),h(n,["instances[0]","referenceImages"],ue)}const ae=f(i,["mask"]);n!==void 0&&ae!=null&&h(n,["instances[0]","mask"],xC(ae));const oe=f(i,["compressionQuality"]);return n!==void 0&&oe!=null&&h(n,["parameters","compressionQuality"],oe),r}function IE(i,n){const o={},r=f(i,["name"]);r!=null&&h(o,["name"],r);const c=f(i,["metadata"]);c!=null&&h(o,["metadata"],c);const p=f(i,["done"]);p!=null&&h(o,["done"],p);const m=f(i,["error"]);m!=null&&h(o,["error"],m);const T=f(i,["response","generateVideoResponse"]);return T!=null&&h(o,["response"],UE(T)),o}function NE(i,n){const o={},r=f(i,["name"]);r!=null&&h(o,["name"],r);const c=f(i,["metadata"]);c!=null&&h(o,["metadata"],c);const p=f(i,["done"]);p!=null&&h(o,["done"],p);const m=f(i,["error"]);m!=null&&h(o,["error"],m);const T=f(i,["response"]);return T!=null&&h(o,["response"],LE(T)),o}function OE(i,n,o){const r={},c=f(n,["model"]);c!=null&&h(r,["_url","model"],Ye(i,c));const p=f(n,["prompt"]);p!=null&&h(r,["instances[0]","prompt"],p);const m=f(n,["image"]);m!=null&&h(r,["instances[0]","image"],uc(m));const T=f(n,["video"]);T!=null&&h(r,["instances[0]","video"],ky(T));const E=f(n,["source"]);E!=null&&kE(E,r);const S=f(n,["config"]);return S!=null&&wE(S,r),r}function DE(i,n,o){const r={},c=f(n,["model"]);c!=null&&h(r,["_url","model"],Ye(i,c));const p=f(n,["prompt"]);p!=null&&h(r,["instances[0]","prompt"],p);const m=f(n,["image"]);m!=null&&h(r,["instances[0]","image"],Zn(m));const T=f(n,["video"]);T!=null&&h(r,["instances[0]","video"],Py(T));const E=f(n,["source"]);E!=null&&PE(E,r);const S=f(n,["config"]);return S!=null&&xE(S,r),r}function UE(i,n){const o={},r=f(i,["generatedSamples"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(T=>qE(T))),h(o,["generatedVideos"],m)}const c=f(i,["raiMediaFilteredCount"]);c!=null&&h(o,["raiMediaFilteredCount"],c);const p=f(i,["raiMediaFilteredReasons"]);return p!=null&&h(o,["raiMediaFilteredReasons"],p),o}function LE(i,n){const o={},r=f(i,["videos"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(T=>BE(T))),h(o,["generatedVideos"],m)}const c=f(i,["raiMediaFilteredCount"]);c!=null&&h(o,["raiMediaFilteredCount"],c);const p=f(i,["raiMediaFilteredReasons"]);return p!=null&&h(o,["raiMediaFilteredReasons"],p),o}function kE(i,n,o){const r={},c=f(i,["prompt"]);n!==void 0&&c!=null&&h(n,["instances[0]","prompt"],c);const p=f(i,["image"]);n!==void 0&&p!=null&&h(n,["instances[0]","image"],uc(p));const m=f(i,["video"]);return n!==void 0&&m!=null&&h(n,["instances[0]","video"],ky(m)),r}function PE(i,n,o){const r={},c=f(i,["prompt"]);n!==void 0&&c!=null&&h(n,["instances[0]","prompt"],c);const p=f(i,["image"]);n!==void 0&&p!=null&&h(n,["instances[0]","image"],Zn(p));const m=f(i,["video"]);return n!==void 0&&m!=null&&h(n,["instances[0]","video"],Py(m)),r}function GE(i,n){const o={},r=f(i,["_self"]);r!=null&&h(o,["image"],XE(r));const c=f(i,["raiFilteredReason"]);c!=null&&h(o,["raiFilteredReason"],c);const p=f(i,["_self"]);return p!=null&&h(o,["safetyAttributes"],Dy(p)),o}function ac(i,n){const o={},r=f(i,["_self"]);r!=null&&h(o,["image"],Oy(r));const c=f(i,["raiFilteredReason"]);c!=null&&h(o,["raiFilteredReason"],c);const p=f(i,["_self"]);p!=null&&h(o,["safetyAttributes"],Uy(p));const m=f(i,["prompt"]);return m!=null&&h(o,["enhancedPrompt"],m),o}function HE(i,n){const o={},r=f(i,["_self"]);r!=null&&h(o,["mask"],Oy(r));const c=f(i,["labels"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>m)),h(o,["labels"],p)}return o}function qE(i,n){const o={},r=f(i,["video"]);return r!=null&&h(o,["video"],MC(r)),o}function BE(i,n){const o={},r=f(i,["_self"]);return r!=null&&h(o,["video"],wC(r)),o}function VE(i,n){const o={},r=f(i,["modelSelectionConfig"]);r!=null&&h(o,["modelConfig"],r);const c=f(i,["responseJsonSchema"]);c!=null&&h(o,["responseJsonSchema"],c);const p=f(i,["audioTimestamp"]);p!=null&&h(o,["audioTimestamp"],p);const m=f(i,["candidateCount"]);m!=null&&h(o,["candidateCount"],m);const T=f(i,["enableAffectiveDialog"]);T!=null&&h(o,["enableAffectiveDialog"],T);const E=f(i,["frequencyPenalty"]);E!=null&&h(o,["frequencyPenalty"],E);const S=f(i,["logprobs"]);S!=null&&h(o,["logprobs"],S);const C=f(i,["maxOutputTokens"]);C!=null&&h(o,["maxOutputTokens"],C);const M=f(i,["mediaResolution"]);M!=null&&h(o,["mediaResolution"],M);const w=f(i,["presencePenalty"]);w!=null&&h(o,["presencePenalty"],w);const D=f(i,["responseLogprobs"]);D!=null&&h(o,["responseLogprobs"],D);const B=f(i,["responseMimeType"]);B!=null&&h(o,["responseMimeType"],B);const Q=f(i,["responseModalities"]);Q!=null&&h(o,["responseModalities"],Q);const Y=f(i,["responseSchema"]);Y!=null&&h(o,["responseSchema"],Y);const $=f(i,["routingConfig"]);$!=null&&h(o,["routingConfig"],$);const ae=f(i,["seed"]);ae!=null&&h(o,["seed"],ae);const oe=f(i,["speechConfig"]);oe!=null&&h(o,["speechConfig"],oe);const ue=f(i,["stopSequences"]);ue!=null&&h(o,["stopSequences"],ue);const ie=f(i,["temperature"]);ie!=null&&h(o,["temperature"],ie);const V=f(i,["thinkingConfig"]);V!=null&&h(o,["thinkingConfig"],V);const ce=f(i,["topK"]);ce!=null&&h(o,["topK"],ce);const xe=f(i,["topP"]);if(xe!=null&&h(o,["topP"],xe),f(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function zE(i,n,o){const r={},c=f(n,["model"]);return c!=null&&h(r,["_url","name"],Ye(i,c)),r}function FE(i,n,o){const r={},c=f(n,["model"]);return c!=null&&h(r,["_url","name"],Ye(i,c)),r}function JE(i,n){const o={};if(f(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=f(i,["enableWidget"]);return r!=null&&h(o,["enableWidget"],r),o}function YE(i,n){const o={};if(f(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=f(i,["timeRangeFilter"]);return r!=null&&h(o,["timeRangeFilter"],r),o}function KE(i,n){const o={},r=f(i,["aspectRatio"]);r!=null&&h(o,["aspectRatio"],r);const c=f(i,["imageSize"]);if(c!=null&&h(o,["imageSize"],c),f(i,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return o}function QE(i,n){const o={},r=f(i,["aspectRatio"]);r!=null&&h(o,["aspectRatio"],r);const c=f(i,["imageSize"]);c!=null&&h(o,["imageSize"],c);const p=f(i,["personGeneration"]);p!=null&&h(o,["personGeneration"],p);const m=f(i,["outputMimeType"]);m!=null&&h(o,["imageOutputOptions","mimeType"],m);const T=f(i,["outputCompressionQuality"]);return T!=null&&h(o,["imageOutputOptions","compressionQuality"],T),o}function XE(i,n){const o={},r=f(i,["bytesBase64Encoded"]);r!=null&&h(o,["imageBytes"],Ho(r));const c=f(i,["mimeType"]);return c!=null&&h(o,["mimeType"],c),o}function Oy(i,n){const o={},r=f(i,["gcsUri"]);r!=null&&h(o,["gcsUri"],r);const c=f(i,["bytesBase64Encoded"]);c!=null&&h(o,["imageBytes"],Ho(c));const p=f(i,["mimeType"]);return p!=null&&h(o,["mimeType"],p),o}function uc(i,n){const o={};if(f(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=f(i,["imageBytes"]);r!=null&&h(o,["bytesBase64Encoded"],Ho(r));const c=f(i,["mimeType"]);return c!=null&&h(o,["mimeType"],c),o}function Zn(i,n){const o={},r=f(i,["gcsUri"]);r!=null&&h(o,["gcsUri"],r);const c=f(i,["imageBytes"]);c!=null&&h(o,["bytesBase64Encoded"],Ho(c));const p=f(i,["mimeType"]);return p!=null&&h(o,["mimeType"],p),o}function WE(i,n,o,r){const c={},p=f(n,["pageSize"]);o!==void 0&&p!=null&&h(o,["_query","pageSize"],p);const m=f(n,["pageToken"]);o!==void 0&&m!=null&&h(o,["_query","pageToken"],m);const T=f(n,["filter"]);o!==void 0&&T!=null&&h(o,["_query","filter"],T);const E=f(n,["queryBase"]);return o!==void 0&&E!=null&&h(o,["_url","models_url"],Ry(i,E)),c}function ZE(i,n,o,r){const c={},p=f(n,["pageSize"]);o!==void 0&&p!=null&&h(o,["_query","pageSize"],p);const m=f(n,["pageToken"]);o!==void 0&&m!=null&&h(o,["_query","pageToken"],m);const T=f(n,["filter"]);o!==void 0&&T!=null&&h(o,["_query","filter"],T);const E=f(n,["queryBase"]);return o!==void 0&&E!=null&&h(o,["_url","models_url"],Ry(i,E)),c}function $E(i,n,o){const r={},c=f(n,["config"]);return c!=null&&WE(i,c,r),r}function jE(i,n,o){const r={},c=f(n,["config"]);return c!=null&&ZE(i,c,r),r}function eC(i,n){const o={},r=f(i,["sdkHttpResponse"]);r!=null&&h(o,["sdkHttpResponse"],r);const c=f(i,["nextPageToken"]);c!=null&&h(o,["nextPageToken"],c);const p=f(i,["_self"]);if(p!=null){let m=by(p);Array.isArray(m)&&(m=m.map(T=>gd(T))),h(o,["models"],m)}return o}function tC(i,n){const o={},r=f(i,["sdkHttpResponse"]);r!=null&&h(o,["sdkHttpResponse"],r);const c=f(i,["nextPageToken"]);c!=null&&h(o,["nextPageToken"],c);const p=f(i,["_self"]);if(p!=null){let m=by(p);Array.isArray(m)&&(m=m.map(T=>md(T))),h(o,["models"],m)}return o}function nC(i,n){const o={},r=f(i,["maskMode"]);r!=null&&h(o,["maskMode"],r);const c=f(i,["segmentationClasses"]);c!=null&&h(o,["maskClasses"],c);const p=f(i,["maskDilation"]);return p!=null&&h(o,["dilation"],p),o}function gd(i,n){const o={},r=f(i,["name"]);r!=null&&h(o,["name"],r);const c=f(i,["displayName"]);c!=null&&h(o,["displayName"],c);const p=f(i,["description"]);p!=null&&h(o,["description"],p);const m=f(i,["version"]);m!=null&&h(o,["version"],m);const T=f(i,["_self"]);T!=null&&h(o,["tunedModelInfo"],vC(T));const E=f(i,["inputTokenLimit"]);E!=null&&h(o,["inputTokenLimit"],E);const S=f(i,["outputTokenLimit"]);S!=null&&h(o,["outputTokenLimit"],S);const C=f(i,["supportedGenerationMethods"]);C!=null&&h(o,["supportedActions"],C);const M=f(i,["temperature"]);M!=null&&h(o,["temperature"],M);const w=f(i,["maxTemperature"]);w!=null&&h(o,["maxTemperature"],w);const D=f(i,["topP"]);D!=null&&h(o,["topP"],D);const B=f(i,["topK"]);B!=null&&h(o,["topK"],B);const Q=f(i,["thinking"]);return Q!=null&&h(o,["thinking"],Q),o}function md(i,n){const o={},r=f(i,["name"]);r!=null&&h(o,["name"],r);const c=f(i,["displayName"]);c!=null&&h(o,["displayName"],c);const p=f(i,["description"]);p!=null&&h(o,["description"],p);const m=f(i,["versionId"]);m!=null&&h(o,["version"],m);const T=f(i,["deployedModels"]);if(T!=null){let w=T;Array.isArray(w)&&(w=w.map(D=>gE(D))),h(o,["endpoints"],w)}const E=f(i,["labels"]);E!=null&&h(o,["labels"],E);const S=f(i,["_self"]);S!=null&&h(o,["tunedModelInfo"],TC(S));const C=f(i,["defaultCheckpointId"]);C!=null&&h(o,["defaultCheckpointId"],C);const M=f(i,["checkpoints"]);if(M!=null){let w=M;Array.isArray(w)&&(w=w.map(D=>D)),h(o,["checkpoints"],w)}return o}function iC(i,n){const o={},r=f(i,["mediaResolution"]);r!=null&&h(o,["mediaResolution"],r);const c=f(i,["codeExecutionResult"]);c!=null&&h(o,["codeExecutionResult"],c);const p=f(i,["executableCode"]);p!=null&&h(o,["executableCode"],p);const m=f(i,["fileData"]);m!=null&&h(o,["fileData"],mE(m));const T=f(i,["functionCall"]);T!=null&&h(o,["functionCall"],yE(T));const E=f(i,["functionResponse"]);E!=null&&h(o,["functionResponse"],E);const S=f(i,["inlineData"]);S!=null&&h(o,["inlineData"],V_(S));const C=f(i,["text"]);C!=null&&h(o,["text"],C);const M=f(i,["thought"]);M!=null&&h(o,["thought"],M);const w=f(i,["thoughtSignature"]);w!=null&&h(o,["thoughtSignature"],w);const D=f(i,["videoMetadata"]);return D!=null&&h(o,["videoMetadata"],D),o}function oC(i,n){const o={},r=f(i,["productImage"]);return r!=null&&h(o,["image"],Zn(r)),o}function sC(i,n,o){const r={},c=f(i,["numberOfImages"]);n!==void 0&&c!=null&&h(n,["parameters","sampleCount"],c);const p=f(i,["baseSteps"]);n!==void 0&&p!=null&&h(n,["parameters","baseSteps"],p);const m=f(i,["outputGcsUri"]);n!==void 0&&m!=null&&h(n,["parameters","storageUri"],m);const T=f(i,["seed"]);n!==void 0&&T!=null&&h(n,["parameters","seed"],T);const E=f(i,["safetyFilterLevel"]);n!==void 0&&E!=null&&h(n,["parameters","safetySetting"],E);const S=f(i,["personGeneration"]);n!==void 0&&S!=null&&h(n,["parameters","personGeneration"],S);const C=f(i,["addWatermark"]);n!==void 0&&C!=null&&h(n,["parameters","addWatermark"],C);const M=f(i,["outputMimeType"]);n!==void 0&&M!=null&&h(n,["parameters","outputOptions","mimeType"],M);const w=f(i,["outputCompressionQuality"]);n!==void 0&&w!=null&&h(n,["parameters","outputOptions","compressionQuality"],w);const D=f(i,["enhancePrompt"]);n!==void 0&&D!=null&&h(n,["parameters","enhancePrompt"],D);const B=f(i,["labels"]);return n!==void 0&&B!=null&&h(n,["labels"],B),r}function rC(i,n,o){const r={},c=f(n,["model"]);c!=null&&h(r,["_url","model"],Ye(i,c));const p=f(n,["source"]);p!=null&&aC(p,r);const m=f(n,["config"]);return m!=null&&sC(m,r),r}function lC(i,n){const o={},r=f(i,["predictions"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(p=>ac(p))),h(o,["generatedImages"],c)}return o}function aC(i,n,o){const r={},c=f(i,["prompt"]);n!==void 0&&c!=null&&h(n,["instances[0]","prompt"],c);const p=f(i,["personImage"]);n!==void 0&&p!=null&&h(n,["instances[0]","personImage","image"],Zn(p));const m=f(i,["productImages"]);if(n!==void 0&&m!=null){let T=m;Array.isArray(T)&&(T=T.map(E=>oC(E))),h(n,["instances[0]","productImages"],T)}return r}function uC(i,n){const o={},r=f(i,["referenceImage"]);r!=null&&h(o,["referenceImage"],Zn(r));const c=f(i,["referenceId"]);c!=null&&h(o,["referenceId"],c);const p=f(i,["referenceType"]);p!=null&&h(o,["referenceType"],p);const m=f(i,["maskImageConfig"]);m!=null&&h(o,["maskImageConfig"],nC(m));const T=f(i,["controlImageConfig"]);T!=null&&h(o,["controlImageConfig"],X_(T));const E=f(i,["styleImageConfig"]);E!=null&&h(o,["styleImageConfig"],E);const S=f(i,["subjectImageConfig"]);return S!=null&&h(o,["subjectImageConfig"],S),o}function Dy(i,n){const o={},r=f(i,["safetyAttributes","categories"]);r!=null&&h(o,["categories"],r);const c=f(i,["safetyAttributes","scores"]);c!=null&&h(o,["scores"],c);const p=f(i,["contentType"]);return p!=null&&h(o,["contentType"],p),o}function Uy(i,n){const o={},r=f(i,["safetyAttributes","categories"]);r!=null&&h(o,["categories"],r);const c=f(i,["safetyAttributes","scores"]);c!=null&&h(o,["scores"],c);const p=f(i,["contentType"]);return p!=null&&h(o,["contentType"],p),o}function cC(i,n){const o={},r=f(i,["category"]);if(r!=null&&h(o,["category"],r),f(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const c=f(i,["threshold"]);return c!=null&&h(o,["threshold"],c),o}function fC(i,n){const o={},r=f(i,["image"]);return r!=null&&h(o,["image"],Zn(r)),o}function dC(i,n,o){const r={},c=f(i,["mode"]);n!==void 0&&c!=null&&h(n,["parameters","mode"],c);const p=f(i,["maxPredictions"]);n!==void 0&&p!=null&&h(n,["parameters","maxPredictions"],p);const m=f(i,["confidenceThreshold"]);n!==void 0&&m!=null&&h(n,["parameters","confidenceThreshold"],m);const T=f(i,["maskDilation"]);n!==void 0&&T!=null&&h(n,["parameters","maskDilation"],T);const E=f(i,["binaryColorThreshold"]);n!==void 0&&E!=null&&h(n,["parameters","binaryColorThreshold"],E);const S=f(i,["labels"]);return n!==void 0&&S!=null&&h(n,["labels"],S),r}function hC(i,n,o){const r={},c=f(n,["model"]);c!=null&&h(r,["_url","model"],Ye(i,c));const p=f(n,["source"]);p!=null&&gC(p,r);const m=f(n,["config"]);return m!=null&&dC(m,r),r}function pC(i,n){const o={},r=f(i,["predictions"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(p=>HE(p))),h(o,["generatedMasks"],c)}return o}function gC(i,n,o){const r={},c=f(i,["prompt"]);n!==void 0&&c!=null&&h(n,["instances[0]","prompt"],c);const p=f(i,["image"]);n!==void 0&&p!=null&&h(n,["instances[0]","image"],Zn(p));const m=f(i,["scribbleImage"]);return n!==void 0&&m!=null&&h(n,["instances[0]","scribble"],fC(m)),r}function mC(i,n){const o={},r=f(i,["retrievalConfig"]);r!=null&&h(o,["retrievalConfig"],r);const c=f(i,["functionCallingConfig"]);return c!=null&&h(o,["functionCallingConfig"],vE(c)),o}function yC(i,n){const o={};if(f(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=f(i,["computerUse"]);r!=null&&h(o,["computerUse"],r);const c=f(i,["fileSearch"]);c!=null&&h(o,["fileSearch"],c);const p=f(i,["codeExecution"]);if(p!=null&&h(o,["codeExecution"],p),f(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=f(i,["functionDeclarations"]);if(m!=null){let M=m;Array.isArray(M)&&(M=M.map(w=>w)),h(o,["functionDeclarations"],M)}const T=f(i,["googleMaps"]);T!=null&&h(o,["googleMaps"],JE(T));const E=f(i,["googleSearch"]);E!=null&&h(o,["googleSearch"],YE(E));const S=f(i,["googleSearchRetrieval"]);S!=null&&h(o,["googleSearchRetrieval"],S);const C=f(i,["urlContext"]);return C!=null&&h(o,["urlContext"],C),o}function Ly(i,n){const o={},r=f(i,["retrieval"]);r!=null&&h(o,["retrieval"],r);const c=f(i,["computerUse"]);if(c!=null&&h(o,["computerUse"],c),f(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const p=f(i,["codeExecution"]);p!=null&&h(o,["codeExecution"],p);const m=f(i,["enterpriseWebSearch"]);m!=null&&h(o,["enterpriseWebSearch"],m);const T=f(i,["functionDeclarations"]);if(T!=null){let w=T;Array.isArray(w)&&(w=w.map(D=>TE(D))),h(o,["functionDeclarations"],w)}const E=f(i,["googleMaps"]);E!=null&&h(o,["googleMaps"],E);const S=f(i,["googleSearch"]);S!=null&&h(o,["googleSearch"],S);const C=f(i,["googleSearchRetrieval"]);C!=null&&h(o,["googleSearchRetrieval"],C);const M=f(i,["urlContext"]);return M!=null&&h(o,["urlContext"],M),o}function vC(i,n){const o={},r=f(i,["baseModel"]);r!=null&&h(o,["baseModel"],r);const c=f(i,["createTime"]);c!=null&&h(o,["createTime"],c);const p=f(i,["updateTime"]);return p!=null&&h(o,["updateTime"],p),o}function TC(i,n){const o={},r=f(i,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&h(o,["baseModel"],r);const c=f(i,["createTime"]);c!=null&&h(o,["createTime"],c);const p=f(i,["updateTime"]);return p!=null&&h(o,["updateTime"],p),o}function SC(i,n,o){const r={},c=f(i,["displayName"]);n!==void 0&&c!=null&&h(n,["displayName"],c);const p=f(i,["description"]);n!==void 0&&p!=null&&h(n,["description"],p);const m=f(i,["defaultCheckpointId"]);return n!==void 0&&m!=null&&h(n,["defaultCheckpointId"],m),r}function _C(i,n,o){const r={},c=f(i,["displayName"]);n!==void 0&&c!=null&&h(n,["displayName"],c);const p=f(i,["description"]);n!==void 0&&p!=null&&h(n,["description"],p);const m=f(i,["defaultCheckpointId"]);return n!==void 0&&m!=null&&h(n,["defaultCheckpointId"],m),r}function EC(i,n,o){const r={},c=f(n,["model"]);c!=null&&h(r,["_url","name"],Ye(i,c));const p=f(n,["config"]);return p!=null&&SC(p,r),r}function CC(i,n,o){const r={},c=f(n,["model"]);c!=null&&h(r,["_url","model"],Ye(i,c));const p=f(n,["config"]);return p!=null&&_C(p,r),r}function AC(i,n,o){const r={},c=f(i,["outputGcsUri"]);n!==void 0&&c!=null&&h(n,["parameters","storageUri"],c);const p=f(i,["safetyFilterLevel"]);n!==void 0&&p!=null&&h(n,["parameters","safetySetting"],p);const m=f(i,["personGeneration"]);n!==void 0&&m!=null&&h(n,["parameters","personGeneration"],m);const T=f(i,["includeRaiReason"]);n!==void 0&&T!=null&&h(n,["parameters","includeRaiReason"],T);const E=f(i,["outputMimeType"]);n!==void 0&&E!=null&&h(n,["parameters","outputOptions","mimeType"],E);const S=f(i,["outputCompressionQuality"]);n!==void 0&&S!=null&&h(n,["parameters","outputOptions","compressionQuality"],S);const C=f(i,["enhanceInputImage"]);n!==void 0&&C!=null&&h(n,["parameters","upscaleConfig","enhanceInputImage"],C);const M=f(i,["imagePreservationFactor"]);n!==void 0&&M!=null&&h(n,["parameters","upscaleConfig","imagePreservationFactor"],M);const w=f(i,["labels"]);n!==void 0&&w!=null&&h(n,["labels"],w);const D=f(i,["numberOfImages"]);n!==void 0&&D!=null&&h(n,["parameters","sampleCount"],D);const B=f(i,["mode"]);return n!==void 0&&B!=null&&h(n,["parameters","mode"],B),r}function RC(i,n,o){const r={},c=f(n,["model"]);c!=null&&h(r,["_url","model"],Ye(i,c));const p=f(n,["image"]);p!=null&&h(r,["instances[0]","image"],Zn(p));const m=f(n,["upscaleFactor"]);m!=null&&h(r,["parameters","upscaleConfig","upscaleFactor"],m);const T=f(n,["config"]);return T!=null&&AC(T,r),r}function bC(i,n){const o={},r=f(i,["sdkHttpResponse"]);r!=null&&h(o,["sdkHttpResponse"],r);const c=f(i,["predictions"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>ac(m))),h(o,["generatedImages"],p)}return o}function MC(i,n){const o={},r=f(i,["uri"]);r!=null&&h(o,["uri"],r);const c=f(i,["encodedVideo"]);c!=null&&h(o,["videoBytes"],Ho(c));const p=f(i,["encoding"]);return p!=null&&h(o,["mimeType"],p),o}function wC(i,n){const o={},r=f(i,["gcsUri"]);r!=null&&h(o,["uri"],r);const c=f(i,["bytesBase64Encoded"]);c!=null&&h(o,["videoBytes"],Ho(c));const p=f(i,["mimeType"]);return p!=null&&h(o,["mimeType"],p),o}function xC(i,n){const o={},r=f(i,["image"]);r!=null&&h(o,["_self"],Zn(r));const c=f(i,["maskMode"]);return c!=null&&h(o,["maskMode"],c),o}function IC(i,n){const o={},r=f(i,["image"]);r!=null&&h(o,["image"],uc(r));const c=f(i,["referenceType"]);return c!=null&&h(o,["referenceType"],c),o}function NC(i,n){const o={},r=f(i,["image"]);r!=null&&h(o,["image"],Zn(r));const c=f(i,["referenceType"]);return c!=null&&h(o,["referenceType"],c),o}function ky(i,n){const o={},r=f(i,["uri"]);r!=null&&h(o,["uri"],r);const c=f(i,["videoBytes"]);c!=null&&h(o,["encodedVideo"],Ho(c));const p=f(i,["mimeType"]);return p!=null&&h(o,["encoding"],p),o}function Py(i,n){const o={},r=f(i,["uri"]);r!=null&&h(o,["gcsUri"],r);const c=f(i,["videoBytes"]);c!=null&&h(o,["bytesBase64Encoded"],Ho(c));const p=f(i,["mimeType"]);return p!=null&&h(o,["mimeType"],p),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OC(i,n){const o={},r=f(i,["displayName"]);return n!==void 0&&r!=null&&h(n,["displayName"],r),o}function DC(i){const n={},o=f(i,["config"]);return o!=null&&OC(o,n),n}function UC(i,n){const o={},r=f(i,["force"]);return n!==void 0&&r!=null&&h(n,["_query","force"],r),o}function LC(i){const n={},o=f(i,["name"]);o!=null&&h(n,["_url","name"],o);const r=f(i,["config"]);return r!=null&&UC(r,n),n}function kC(i){const n={},o=f(i,["name"]);return o!=null&&h(n,["_url","name"],o),n}function PC(i,n){const o={},r=f(i,["customMetadata"]);if(n!==void 0&&r!=null){let p=r;Array.isArray(p)&&(p=p.map(m=>m)),h(n,["customMetadata"],p)}const c=f(i,["chunkingConfig"]);return n!==void 0&&c!=null&&h(n,["chunkingConfig"],c),o}function GC(i){const n={},o=f(i,["name"]);o!=null&&h(n,["name"],o);const r=f(i,["metadata"]);r!=null&&h(n,["metadata"],r);const c=f(i,["done"]);c!=null&&h(n,["done"],c);const p=f(i,["error"]);p!=null&&h(n,["error"],p);const m=f(i,["response"]);return m!=null&&h(n,["response"],qC(m)),n}function HC(i){const n={},o=f(i,["fileSearchStoreName"]);o!=null&&h(n,["_url","file_search_store_name"],o);const r=f(i,["fileName"]);r!=null&&h(n,["fileName"],r);const c=f(i,["config"]);return c!=null&&PC(c,n),n}function qC(i){const n={},o=f(i,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(i,["parent"]);r!=null&&h(n,["parent"],r);const c=f(i,["documentName"]);return c!=null&&h(n,["documentName"],c),n}function BC(i,n){const o={},r=f(i,["pageSize"]);n!==void 0&&r!=null&&h(n,["_query","pageSize"],r);const c=f(i,["pageToken"]);return n!==void 0&&c!=null&&h(n,["_query","pageToken"],c),o}function VC(i){const n={},o=f(i,["config"]);return o!=null&&BC(o,n),n}function zC(i){const n={},o=f(i,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(i,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const c=f(i,["fileSearchStores"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>m)),h(n,["fileSearchStores"],p)}return n}function Gy(i,n){const o={},r=f(i,["mimeType"]);n!==void 0&&r!=null&&h(n,["mimeType"],r);const c=f(i,["displayName"]);n!==void 0&&c!=null&&h(n,["displayName"],c);const p=f(i,["customMetadata"]);if(n!==void 0&&p!=null){let T=p;Array.isArray(T)&&(T=T.map(E=>E)),h(n,["customMetadata"],T)}const m=f(i,["chunkingConfig"]);return n!==void 0&&m!=null&&h(n,["chunkingConfig"],m),o}function FC(i){const n={},o=f(i,["fileSearchStoreName"]);o!=null&&h(n,["_url","file_search_store_name"],o);const r=f(i,["config"]);return r!=null&&Gy(r,n),n}function JC(i){const n={},o=f(i,["sdkHttpResponse"]);return o!=null&&h(n,["sdkHttpResponse"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YC="Content-Type",KC="X-Server-Timeout",QC="User-Agent",yd="x-goog-api-client",XC="1.39.0",WC=`google-genai-sdk/${XC}`,ZC="v1beta1",$C="v1beta";class jC{constructor(n){var o,r,c;this.clientOptions=Object.assign({},n),this.customBaseUrl=(o=n.httpOptions)===null||o===void 0?void 0:o.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const p={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const T=n.project&&n.location||!!n.apiKey;this.customBaseUrl&&!T?(p.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?p.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(p.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),p.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:ZC}else{if(!this.clientOptions.apiKey)throw new da({message:"API key must be set when using the Gemini API.",status:403});p.apiVersion=(c=this.clientOptions.apiVersion)!==null&&c!==void 0?c:$C,p.baseUrl="https://generativelanguage.googleapis.com/"}p.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=p,n.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(p,n.httpOptions))}isVertexAI(){var n;return(n=this.clientOptions.vertexai)!==null&&n!==void 0?n:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const n=new Headers;return await this.clientOptions.auth.addAuthHeaders(n),n}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(n){if(!n||n.baseUrl===void 0||n.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[n.baseUrl.endsWith("/")?n.baseUrl.slice(0,-1):n.baseUrl];return n.apiVersion&&n.apiVersion!==""&&r.push(n.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const n=this.getBaseUrl(),o=new URL(n);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(n){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=n;else throw new Error("HTTP options are not correctly set.")}constructUrl(n,o,r){const c=[this.getRequestUrlInternal(o)];return r&&c.push(this.getBaseResourcePath()),n!==""&&c.push(n),new URL(`${c.join("/")}`)}shouldPrependVertexProjectPath(n,o){return!(o.baseUrl&&o.baseUrlResourceScope===fd.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||n.path.startsWith("projects/")||n.httpMethod==="GET"&&n.path.startsWith("publishers/google/models"))}async request(n){let o=this.clientOptions.httpOptions;n.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));const r=this.shouldPrependVertexProjectPath(n,o),c=this.constructUrl(n.path,o,r);if(n.queryParams)for(const[m,T]of Object.entries(n.queryParams))c.searchParams.append(m,String(T));let p={};if(n.httpMethod==="GET"){if(n.body&&n.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else p.body=n.body;return p=await this.includeExtraHttpOptionsToRequestInit(p,o,c.toString(),n.abortSignal),this.unaryApiCall(c,p,n.httpMethod)}patchHttpOptions(n,o){const r=JSON.parse(JSON.stringify(n));for(const[c,p]of Object.entries(o))typeof p=="object"?r[c]=Object.assign(Object.assign({},r[c]),p):p!==void 0&&(r[c]=p);return r}async requestStream(n){let o=this.clientOptions.httpOptions;n.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));const r=this.shouldPrependVertexProjectPath(n,o),c=this.constructUrl(n.path,o,r);(!c.searchParams.has("alt")||c.searchParams.get("alt")!=="sse")&&c.searchParams.set("alt","sse");let p={};return p.body=n.body,p=await this.includeExtraHttpOptionsToRequestInit(p,o,c.toString(),n.abortSignal),this.streamApiCall(c,p,n.httpMethod)}async includeExtraHttpOptionsToRequestInit(n,o,r,c){if(o&&o.timeout||c){const p=new AbortController,m=p.signal;if(o.timeout&&(o==null?void 0:o.timeout)>0){const T=setTimeout(()=>p.abort(),o.timeout);T&&typeof T.unref=="function"&&T.unref()}c&&c.addEventListener("abort",()=>{p.abort()}),n.signal=m}return o&&o.extraBody!==null&&eA(n,o.extraBody),n.headers=await this.getHeadersInternal(o,r),n}async unaryApiCall(n,o,r){return this.apiCall(n.toString(),Object.assign(Object.assign({},o),{method:r})).then(async c=>(await $m(c),new dd(c))).catch(c=>{throw c instanceof Error?c:new Error(JSON.stringify(c))})}async streamApiCall(n,o,r){return this.apiCall(n.toString(),Object.assign(Object.assign({},o),{method:r})).then(async c=>(await $m(c),this.processStreamResponse(c))).catch(c=>{throw c instanceof Error?c:new Error(JSON.stringify(c))})}processStreamResponse(n){return Xn(this,arguments,function*(){var r;const c=(r=n==null?void 0:n.body)===null||r===void 0?void 0:r.getReader(),p=new TextDecoder("utf-8");if(!c)throw new Error("Response body is empty");try{let m="";const T="data:",E=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:S,value:C}=yield be(c.read());if(S){if(m.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const M=p.decode(C,{stream:!0});try{const B=JSON.parse(M);if("error"in B){const Q=JSON.parse(JSON.stringify(B.error)),Y=Q.status,$=Q.code,ae=`got status: ${Y}. ${JSON.stringify(B)}`;if($>=400&&$<600)throw new da({message:ae,status:$})}}catch(B){if(B.name==="ApiError")throw B}m+=M;let w=-1,D=0;for(;;){w=-1,D=0;for(const Y of E){const $=m.indexOf(Y);$!==-1&&(w===-1||$<w)&&(w=$,D=Y.length)}if(w===-1)break;const B=m.substring(0,w);m=m.substring(w+D);const Q=B.trim();if(Q.startsWith(T)){const Y=Q.substring(T.length).trim();try{const $=new Response(Y,{headers:n==null?void 0:n.headers,status:n==null?void 0:n.status,statusText:n==null?void 0:n.statusText});yield yield be(new dd($))}catch($){throw new Error(`exception parsing stream chunk ${Y}. ${$}`)}}}}}finally{c.releaseLock()}})}async apiCall(n,o){return fetch(n,o).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const n={},o=WC+" "+this.clientOptions.userAgentExtra;return n[QC]=o,n[yd]=o,n[YC]="application/json",n}async getHeadersInternal(n,o){const r=new Headers;if(n&&n.headers){for(const[c,p]of Object.entries(n.headers))r.append(c,p);n.timeout&&n.timeout>0&&r.append(KC,String(Math.ceil(n.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,o),r}getFileName(n){var o;let r="";return typeof n=="string"&&(r=n.replace(/[/\\]+$/,""),r=(o=r.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),r}async uploadFile(n,o){var r;const c={};o!=null&&(c.mimeType=o.mimeType,c.name=o.name,c.displayName=o.displayName),c.name&&!c.name.startsWith("files/")&&(c.name=`files/${c.name}`);const p=this.clientOptions.uploader,m=await p.stat(n);c.sizeBytes=String(m.size);const T=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:m.type;if(T===void 0||T==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");c.mimeType=T;const E={file:c},S=this.getFileName(n),C=pe("upload/v1beta/files",E._url),M=await this.fetchUploadUrl(C,c.sizeBytes,c.mimeType,S,E,o==null?void 0:o.httpOptions);return p.upload(n,M,this)}async uploadFileToFileSearchStore(n,o,r){var c;const p=this.clientOptions.uploader,m=await p.stat(o),T=String(m.size),E=(c=r==null?void 0:r.mimeType)!==null&&c!==void 0?c:m.type;if(E===void 0||E==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const S=`upload/v1beta/${n}:uploadToFileSearchStore`,C=this.getFileName(o),M={};r!=null&&Gy(r,M);const w=await this.fetchUploadUrl(S,T,E,C,M,r==null?void 0:r.httpOptions);return p.uploadToFileSearchStore(o,w,this)}async downloadFile(n){await this.clientOptions.downloader.download(n,this)}async fetchUploadUrl(n,o,r,c,p,m){var T;let E={};m?E=m:E={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${r}`},c?{"X-Goog-Upload-File-Name":c}:{})};const S=await this.request({path:n,body:JSON.stringify(p),httpMethod:"POST",httpOptions:E});if(!S||!(S!=null&&S.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const C=(T=S==null?void 0:S.headers)===null||T===void 0?void 0:T["x-goog-upload-url"];if(C===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return C}}async function $m(i){var n;if(i===void 0)throw new Error("response is undefined");if(!i.ok){const o=i.status;let r;!((n=i.headers.get("content-type"))===null||n===void 0)&&n.includes("application/json")?r=await i.json():r={error:{message:await i.text(),code:i.status,status:i.statusText}};const c=JSON.stringify(r);throw o>=400&&o<600?new da({message:c,status:o}):new Error(c)}}function eA(i,n){if(!n||Object.keys(n).length===0)return;if(i.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof i.body=="string"&&i.body.length>0)try{const p=JSON.parse(i.body);if(typeof p=="object"&&p!==null&&!Array.isArray(p))o=p;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(p,m){const T=Object.assign({},p);for(const E in m)if(Object.prototype.hasOwnProperty.call(m,E)){const S=m[E],C=T[E];S&&typeof S=="object"&&!Array.isArray(S)&&C&&typeof C=="object"&&!Array.isArray(C)?T[E]=r(C,S):(C&&S&&typeof C!=typeof S&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${E}". Original type: ${typeof C}, New type: ${typeof S}. Overwriting.`),T[E]=S)}return T}const c=r(o,n);i.body=JSON.stringify(c)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tA="mcp_used/unknown";let nA=!1;function Hy(i){for(const n of i)if(iA(n)||typeof n=="object"&&"inputSchema"in n)return!0;return nA}function qy(i){var n;const o=(n=i[yd])!==null&&n!==void 0?n:"";i[yd]=(o+` ${tA}`).trimStart()}function iA(i){return i!==null&&typeof i=="object"&&i instanceof Bd}function oA(i){return Xn(this,arguments,function*(o,r=100){let c,p=0;for(;p<r;){const m=yield be(o.listTools({cursor:c}));for(const T of m.tools)yield yield be(T),p++;if(!m.nextCursor)break;c=m.nextCursor}})}class Bd{constructor(n=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=n,this.config=o}static create(n,o){return new Bd(n,o)}async initialize(){var n,o,r,c;if(this.mcpTools.length>0)return;const p={},m=[];for(const C of this.mcpClients)try{for(var T=!0,E=(o=void 0,Wn(oA(C))),S;S=await E.next(),n=S.done,!n;T=!0){c=S.value,T=!1;const M=c;m.push(M);const w=M.name;if(p[w])throw new Error(`Duplicate function name ${w} found in MCP tools. Please ensure function names are unique.`);p[w]=C}}catch(M){o={error:M}}finally{try{!T&&!n&&(r=E.return)&&await r.call(E)}finally{if(o)throw o.error}}this.mcpTools=m,this.functionNameToMcpClient=p}async tool(){return await this.initialize(),DT(this.mcpTools,this.config)}async callTool(n){await this.initialize();const o=[];for(const r of n)if(r.name in this.functionNameToMcpClient){const c=this.functionNameToMcpClient[r.name];let p;this.config.timeout&&(p={timeout:this.config.timeout});const m=await c.callTool({name:r.name,arguments:r.args},void 0,p);o.push({functionResponse:{name:r.name,response:m.isError?{error:m}:m}})}return o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function sA(i,n,o){const r=new RT;let c;o.data instanceof Blob?c=JSON.parse(await o.data.text()):c=JSON.parse(o.data),Object.assign(r,c),n(r)}class rA{constructor(n,o,r){this.apiClient=n,this.auth=o,this.webSocketFactory=r}async connect(n){var o,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const c=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion(),m=uA(this.apiClient.getDefaultHeaders()),T=this.apiClient.getApiKey(),E=`${c}/ws/google.ai.generativelanguage.${p}.GenerativeService.BidiGenerateMusic?key=${T}`;let S=()=>{};const C=new Promise(oe=>{S=oe}),M=n.callbacks,w=function(){S({})},D=this.apiClient,B={onopen:w,onmessage:oe=>{sA(D,M.onmessage,oe)},onerror:(o=M==null?void 0:M.onerror)!==null&&o!==void 0?o:function(oe){},onclose:(r=M==null?void 0:M.onclose)!==null&&r!==void 0?r:function(oe){}},Q=this.webSocketFactory.create(E,aA(m),B);Q.connect(),await C;const ae={setup:{model:Ye(this.apiClient,n.model)}};return Q.send(JSON.stringify(ae)),new lA(Q,this.apiClient)}}class lA{constructor(n,o){this.conn=n,this.apiClient=o}async setWeightedPrompts(n){if(!n.weightedPrompts||Object.keys(n.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=O_(n);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(n){n.musicGenerationConfig||(n.musicGenerationConfig={});const o=N_(n);this.conn.send(JSON.stringify(o))}sendPlaybackControl(n){const o={playbackControl:n};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(br.PLAY)}pause(){this.sendPlaybackControl(br.PAUSE)}stop(){this.sendPlaybackControl(br.STOP)}resetContext(){this.sendPlaybackControl(br.RESET_CONTEXT)}close(){this.conn.close()}}function aA(i){const n={};return i.forEach((o,r)=>{n[r]=o}),n}function uA(i){const n=new Headers;for(const[o,r]of Object.entries(i))n.append(o,r);return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cA="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function fA(i,n,o){const r=new AT;let c;o.data instanceof Blob?c=await o.data.text():o.data instanceof ArrayBuffer?c=new TextDecoder().decode(o.data):c=o.data;const p=JSON.parse(c);if(i.isVertexAI()){const m=L_(p);Object.assign(r,m)}else Object.assign(r,p);n(r)}class dA{constructor(n,o,r){this.apiClient=n,this.auth=o,this.webSocketFactory=r,this.music=new rA(this.apiClient,this.auth,this.webSocketFactory)}async connect(n){var o,r,c,p,m,T;if(n.config&&n.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const E=this.apiClient.getWebsocketBaseUrl(),S=this.apiClient.getApiVersion();let C;const M=this.apiClient.getHeaders();n.config&&n.config.tools&&Hy(n.config.tools)&&qy(M);const w=mA(M);if(this.apiClient.isVertexAI()){const ye=this.apiClient.getProject(),Ie=this.apiClient.getLocation(),Ne=this.apiClient.getApiKey(),Xe=!!ye&&!!Ie||!!Ne;this.apiClient.getCustomBaseUrl()&&!Xe?C=E:(C=`${E}/ws/google.cloud.aiplatform.${S}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(w,C))}else{const ye=this.apiClient.getApiKey();let Ie="BidiGenerateContent",Ne="key";ye!=null&&ye.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),S!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Ie="BidiGenerateContentConstrained",Ne="access_token"),C=`${E}/ws/google.ai.generativelanguage.${S}.GenerativeService.${Ie}?${Ne}=${ye}`}let D=()=>{};const B=new Promise(ye=>{D=ye}),Q=n.callbacks,Y=function(){var ye;(ye=Q==null?void 0:Q.onopen)===null||ye===void 0||ye.call(Q),D({})},$=this.apiClient,ae={onopen:Y,onmessage:ye=>{fA($,Q.onmessage,ye)},onerror:(o=Q==null?void 0:Q.onerror)!==null&&o!==void 0?o:function(ye){},onclose:(r=Q==null?void 0:Q.onclose)!==null&&r!==void 0?r:function(ye){}},oe=this.webSocketFactory.create(C,gA(w),ae);oe.connect(),await B;let ue=Ye(this.apiClient,n.model);if(this.apiClient.isVertexAI()&&ue.startsWith("publishers/")){const ye=this.apiClient.getProject(),Ie=this.apiClient.getLocation();ye&&Ie&&(ue=`projects/${ye}/locations/${Ie}/`+ue)}let ie={};this.apiClient.isVertexAI()&&((c=n.config)===null||c===void 0?void 0:c.responseModalities)===void 0&&(n.config===void 0?n.config={responseModalities:[tc.AUDIO]}:n.config.responseModalities=[tc.AUDIO]),!((p=n.config)===null||p===void 0)&&p.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const V=(T=(m=n.config)===null||m===void 0?void 0:m.tools)!==null&&T!==void 0?T:[],ce=[];for(const ye of V)if(this.isCallableTool(ye)){const Ie=ye;ce.push(await Ie.tool())}else ce.push(ye);ce.length>0&&(n.config.tools=ce);const xe={model:ue,config:n.config,callbacks:n.callbacks};return this.apiClient.isVertexAI()?ie=I_(this.apiClient,xe):ie=x_(this.apiClient,xe),delete ie.config,oe.send(JSON.stringify(ie)),new pA(oe,this.apiClient)}isCallableTool(n){return"callTool"in n&&typeof n.callTool=="function"}}const hA={turnComplete:!0};class pA{constructor(n,o){this.conn=n,this.apiClient=o}tLiveClientContent(n,o){if(o.turns!==null&&o.turns!==void 0){let r=[];try{r=kn(o.turns),n.isVertexAI()||(r=r.map(c=>lc(c)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:r,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(n,o){let r=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?r=o.functionResponses:r=[o.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const p of r){if(typeof p!="object"||p===null||!("name"in p)||!("response"in p))throw new Error(`Could not parse function response, type '${typeof p}'.`);if(!n.isVertexAI()&&!("id"in p))throw new Error(cA)}return{toolResponse:{functionResponses:r}}}sendClientContent(n){n=Object.assign(Object.assign({},hA),n);const o=this.tLiveClientContent(this.apiClient,n);this.conn.send(JSON.stringify(o))}sendRealtimeInput(n){let o={};this.apiClient.isVertexAI()?o={realtimeInput:U_(n)}:o={realtimeInput:D_(n)},this.conn.send(JSON.stringify(o))}sendToolResponse(n){if(n.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,n);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function gA(i){const n={};return i.forEach((o,r)=>{n[r]=o}),n}function mA(i){const n=new Headers;for(const[o,r]of Object.entries(i))n.append(o,r);return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jm=10;function ey(i){var n,o,r;if(!((n=i==null?void 0:i.automaticFunctionCalling)===null||n===void 0)&&n.disable)return!0;let c=!1;for(const m of(o=i==null?void 0:i.tools)!==null&&o!==void 0?o:[])if(xr(m)){c=!0;break}if(!c)return!0;const p=(r=i==null?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return p&&(p<0||!Number.isInteger(p))||p==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",p),!0):!1}function xr(i){return"callTool"in i&&typeof i.callTool=="function"}function yA(i){var n,o,r;return(r=(o=(n=i.config)===null||n===void 0?void 0:n.tools)===null||o===void 0?void 0:o.some(c=>xr(c)))!==null&&r!==void 0?r:!1}function ty(i){var n;const o=[];return!((n=i==null?void 0:i.config)===null||n===void 0)&&n.tools&&i.config.tools.forEach((r,c)=>{if(xr(r))return;const p=r;p.functionDeclarations&&p.functionDeclarations.length>0&&o.push(c)}),o}function ny(i){var n;return!(!((n=i==null?void 0:i.automaticFunctionCalling)===null||n===void 0)&&n.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vA extends Yi{constructor(n){super(),this.apiClient=n,this.generateContent=async o=>{var r,c,p,m,T;const E=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!yA(o)||ey(o.config))return await this.generateContentInternal(E);const S=ty(o);if(S.length>0){const Q=S.map(Y=>`tools[${Y}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${Q}.`)}let C,M;const w=kn(E.contents),D=(p=(c=(r=E.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||c===void 0?void 0:c.maximumRemoteCalls)!==null&&p!==void 0?p:jm;let B=0;for(;B<D&&(C=await this.generateContentInternal(E),!(!C.functionCalls||C.functionCalls.length===0));){const Q=C.candidates[0].content,Y=[];for(const $ of(T=(m=o.config)===null||m===void 0?void 0:m.tools)!==null&&T!==void 0?T:[])if(xr($)){const oe=await $.callTool(C.functionCalls);Y.push(...oe)}B++,M={role:"user",parts:Y},E.contents=kn(E.contents),E.contents.push(Q),E.contents.push(M),ny(E.config)&&(w.push(Q),w.push(M))}return ny(E.config)&&(C.automaticFunctionCallingHistory=w),C},this.generateContentStream=async o=>{var r,c,p,m,T;if(this.maybeMoveToResponseJsonSchem(o),ey(o.config)){const M=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(M)}const E=ty(o);if(E.length>0){const M=E.map(w=>`tools[${w}]`).join(", ");throw new Error(`Incompatible tools found at ${M}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const S=(p=(c=(r=o==null?void 0:o.config)===null||r===void 0?void 0:r.toolConfig)===null||c===void 0?void 0:c.functionCallingConfig)===null||p===void 0?void 0:p.streamFunctionCallArguments,C=(T=(m=o==null?void 0:o.config)===null||m===void 0?void 0:m.automaticFunctionCalling)===null||T===void 0?void 0:T.disable;if(S&&!C)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(r=>{var c;let p;const m=[];if(r!=null&&r.generatedImages)for(const E of r.generatedImages)E&&(E!=null&&E.safetyAttributes)&&((c=E==null?void 0:E.safetyAttributes)===null||c===void 0?void 0:c.contentType)==="Positive Prompt"?p=E==null?void 0:E.safetyAttributes:m.push(E);let T;return p?T={generatedImages:m,positivePromptSafetyAttributes:p,sdkHttpResponse:r.sdkHttpResponse}:T={generatedImages:m,sdkHttpResponse:r.sdkHttpResponse},T}),this.list=async o=>{var r;const m={config:Object.assign(Object.assign({},{queryBase:!0}),o==null?void 0:o.config)};if(this.apiClient.isVertexAI()&&!m.config.queryBase){if(!((r=m.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");m.config.filter="labels.tune-type:*"}return new bs(Ji.PAGED_ITEM_MODELS,T=>this.listInternal(T),await this.listInternal(m),m)},this.editImage=async o=>{const r={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(r.referenceImages=o.referenceImages.map(c=>c.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async o=>{let r={numberOfImages:1,mode:"upscale"};o.config&&(r=Object.assign(Object.assign({},r),o.config));const c={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:r};return await this.upscaleImageInternal(c)},this.generateVideos=async o=>{var r,c,p,m,T,E;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=o.video)===null||r===void 0)&&r.uri&&(!((c=o.video)===null||c===void 0)&&c.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((m=(p=o.source)===null||p===void 0?void 0:p.video)===null||m===void 0)&&m.uri&&(!((E=(T=o.source)===null||T===void 0?void 0:T.video)===null||E===void 0)&&E.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(n){n.config&&n.config.responseSchema&&(n.config.responseJsonSchema||Object.keys(n.config.responseSchema).includes("$schema")&&(n.config.responseJsonSchema=n.config.responseSchema,delete n.config.responseSchema))}async processParamsMaybeAddMcpUsage(n){var o,r,c;const p=(o=n.config)===null||o===void 0?void 0:o.tools;if(!p)return n;const m=await Promise.all(p.map(async E=>xr(E)?await E.tool():E)),T={model:n.model,contents:n.contents,config:Object.assign(Object.assign({},n.config),{tools:m})};if(T.config.tools=m,n.config&&n.config.tools&&Hy(n.config.tools)){const E=(c=(r=n.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&c!==void 0?c:{};let S=Object.assign({},E);Object.keys(S).length===0&&(S=this.apiClient.getDefaultHeaders()),qy(S),T.config.httpOptions=Object.assign(Object.assign({},n.config.httpOptions),{headers:S})}return T}async initAfcToolsMap(n){var o,r,c;const p=new Map;for(const m of(r=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&r!==void 0?r:[])if(xr(m)){const T=m,E=await T.tool();for(const S of(c=E.functionDeclarations)!==null&&c!==void 0?c:[]){if(!S.name)throw new Error("Function declaration name is required.");if(p.has(S.name))throw new Error(`Duplicate tool declaration name: ${S.name}`);p.set(S.name,T)}}return p}async processAfcStream(n){var o,r,c;const p=(c=(r=(o=n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&c!==void 0?c:jm;let m=!1,T=0;const E=await this.initAfcToolsMap(n);return(function(S,C,M){return Xn(this,arguments,function*(){for(var w,D,B,Q,Y,$;T<p;){m&&(T++,m=!1);const ie=yield be(S.processParamsMaybeAddMcpUsage(M)),V=yield be(S.generateContentStreamInternal(ie)),ce=[],xe=[];try{for(var ae=!0,oe=(D=void 0,Wn(V)),ue;ue=yield be(oe.next()),w=ue.done,!w;ae=!0){Q=ue.value,ae=!1;const ye=Q;if(yield yield be(ye),ye.candidates&&(!((Y=ye.candidates[0])===null||Y===void 0)&&Y.content)){xe.push(ye.candidates[0].content);for(const Ie of($=ye.candidates[0].content.parts)!==null&&$!==void 0?$:[])if(T<p&&Ie.functionCall){if(!Ie.functionCall.name)throw new Error("Function call name was not returned by the model.");if(C.has(Ie.functionCall.name)){const Ne=yield be(C.get(Ie.functionCall.name).callTool([Ie.functionCall]));ce.push(...Ne)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${C.keys()}, mising tool: ${Ie.functionCall.name}`)}}}}catch(ye){D={error:ye}}finally{try{!ae&&!w&&(B=oe.return)&&(yield be(B.call(oe)))}finally{if(D)throw D.error}}if(ce.length>0){m=!0;const ye=new ra;ye.candidates=[{content:{role:"user",parts:ce}}],yield yield be(ye);const Ie=[];Ie.push(...xe),Ie.push({role:"user",parts:ce});const Ne=kn(M.contents).concat(Ie);M.contents=Ne}else break}})})(this,E,n)}async generateContentInternal(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=Xm(this.apiClient,n);return T=pe("{model}:generateContent",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=Zm(C),w=new ra;return Object.assign(w,M),w})}else{const S=Qm(this.apiClient,n);return T=pe("{model}:generateContent",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"POST",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=Wm(C),w=new ra;return Object.assign(w,M),w})}}async generateContentStreamInternal(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=Xm(this.apiClient,n);return T=pe("{model}:streamGenerateContent?alt=sse",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.requestStream({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}),m.then(function(M){return Xn(this,arguments,function*(){var w,D,B,Q;try{for(var Y=!0,$=Wn(M),ae;ae=yield be($.next()),w=ae.done,!w;Y=!0){Q=ae.value,Y=!1;const oe=Q,ue=Zm(yield be(oe.json()),n);ue.sdkHttpResponse={headers:oe.headers};const ie=new ra;Object.assign(ie,ue),yield yield be(ie)}}catch(oe){D={error:oe}}finally{try{!Y&&!w&&(B=$.return)&&(yield be(B.call($)))}finally{if(D)throw D.error}}})})}else{const S=Qm(this.apiClient,n);return T=pe("{model}:streamGenerateContent?alt=sse",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.requestStream({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"POST",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}),m.then(function(M){return Xn(this,arguments,function*(){var w,D,B,Q;try{for(var Y=!0,$=Wn(M),ae;ae=yield be($.next()),w=ae.done,!w;Y=!0){Q=ae.value,Y=!1;const oe=Q,ue=Wm(yield be(oe.json()),n);ue.sdkHttpResponse={headers:oe.headers};const ie=new ra;Object.assign(ie,ue),yield yield be(ie)}}catch(oe){D={error:oe}}finally{try{!Y&&!w&&(B=$.return)&&(yield be(B.call($)))}finally{if(D)throw D.error}}})})}}async embedContent(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=dE(this.apiClient,n);return T=pe("{model}:predict",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=pE(C),w=new Nm;return Object.assign(w,M),w})}else{const S=fE(this.apiClient,n);return T=pe("{model}:batchEmbedContents",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"POST",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=hE(C),w=new Nm;return Object.assign(w,M),w})}}async generateImagesInternal(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=RE(this.apiClient,n);return T=pe("{model}:predict",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=ME(C),w=new Om;return Object.assign(w,M),w})}else{const S=AE(this.apiClient,n);return T=pe("{model}:predict",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"POST",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=bE(C),w=new Om;return Object.assign(w,M),w})}}async editImageInternal(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI()){const T=lE(this.apiClient,n);return p=pe("{model}:predict",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json().then(S=>{const C=S;return C.sdkHttpResponse={headers:E.headers},C})),c.then(E=>{const S=aE(E),C=new dT;return Object.assign(C,S),C})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI()){const T=RC(this.apiClient,n);return p=pe("{model}:predict",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json().then(S=>{const C=S;return C.sdkHttpResponse={headers:E.headers},C})),c.then(E=>{const S=bC(E),C=new hT;return Object.assign(C,S),C})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI()){const T=rC(this.apiClient,n);return p=pe("{model}:predict",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json()),c.then(E=>{const S=lC(E),C=new pT;return Object.assign(C,S),C})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI()){const T=hC(this.apiClient,n);return p=pe("{model}:predict",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json()),c.then(E=>{const S=pC(E),C=new gT;return Object.assign(C,S),C})}else throw new Error("This method is only supported by the Vertex AI.")}async get(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=FE(this.apiClient,n);return T=pe("{name}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json()),m.then(C=>md(C))}else{const S=zE(this.apiClient,n);return T=pe("{name}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"GET",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json()),m.then(C=>gd(C))}}async listInternal(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=jE(this.apiClient,n);return T=pe("{models_url}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=tC(C),w=new Dm;return Object.assign(w,M),w})}else{const S=$E(this.apiClient,n);return T=pe("{models_url}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"GET",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=eC(C),w=new Dm;return Object.assign(w,M),w})}}async update(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=CC(this.apiClient,n);return T=pe("{model}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"PATCH",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json()),m.then(C=>md(C))}else{const S=EC(this.apiClient,n);return T=pe("{name}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"PATCH",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json()),m.then(C=>gd(C))}}async delete(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=iE(this.apiClient,n);return T=pe("{name}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"DELETE",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=sE(C),w=new Um;return Object.assign(w,M),w})}else{const S=nE(this.apiClient,n);return T=pe("{name}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"DELETE",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=oE(C),w=new Um;return Object.assign(w,M),w})}}async countTokens(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=j_(this.apiClient,n);return T=pe("{model}:countTokens",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=tE(C),w=new Lm;return Object.assign(w,M),w})}else{const S=$_(this.apiClient,n);return T=pe("{model}:countTokens",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"POST",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=eE(C),w=new Lm;return Object.assign(w,M),w})}}async computeTokens(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI()){const T=J_(this.apiClient,n);return p=pe("{model}:computeTokens",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json().then(S=>{const C=S;return C.sdkHttpResponse={headers:E.headers},C})),c.then(E=>{const S=Y_(E),C=new mT;return Object.assign(C,S),C})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=DE(this.apiClient,n);return T=pe("{model}:predictLongRunning",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json()),m.then(C=>{const M=NE(C),w=new nc;return Object.assign(w,M),w})}else{const S=OE(this.apiClient,n);return T=pe("{model}:predictLongRunning",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"POST",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json()),m.then(C=>{const M=IE(C),w=new nc;return Object.assign(w,M),w})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TA extends Yi{constructor(n){super(),this.apiClient=n}async getVideosOperation(n){const o=n.operation,r=n.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const c=o.name.split("/operations/")[0];let p;r&&"httpOptions"in r&&(p=r.httpOptions);const m=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:c,config:{httpOptions:p}});return o._fromAPIResponse({apiResponse:m,_isVertexAI:!0})}else{const c=await this.getVideosOperationInternal({operationName:o.name,config:r});return o._fromAPIResponse({apiResponse:c,_isVertexAI:!1})}}async get(n){const o=n.operation,r=n.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const c=o.name.split("/operations/")[0];let p;r&&"httpOptions"in r&&(p=r.httpOptions);const m=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:c,config:{httpOptions:p}});return o._fromAPIResponse({apiResponse:m,_isVertexAI:!0})}else{const c=await this.getVideosOperationInternal({operationName:o.name,config:r});return o._fromAPIResponse({apiResponse:c,_isVertexAI:!1})}}async getVideosOperationInternal(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=rT(n);return T=pe("{operationName}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json()),m}else{const S=sT(n);return T=pe("{operationName}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"GET",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json()),m}}async fetchPredictVideosOperationInternal(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI()){const T=$0(n);return p=pe("{resourceName}:fetchPredictOperation",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json()),c}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SA(i){const n={},o=f(i,["data"]);if(o!=null&&h(n,["data"],o),f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(i,["mimeType"]);return r!=null&&h(n,["mimeType"],r),n}function _A(i){const n={},o=f(i,["parts"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(p=>IA(p))),h(n,["parts"],c)}const r=f(i,["role"]);return r!=null&&h(n,["role"],r),n}function EA(i,n,o){const r={},c=f(n,["expireTime"]);o!==void 0&&c!=null&&h(o,["expireTime"],c);const p=f(n,["newSessionExpireTime"]);o!==void 0&&p!=null&&h(o,["newSessionExpireTime"],p);const m=f(n,["uses"]);o!==void 0&&m!=null&&h(o,["uses"],m);const T=f(n,["liveConnectConstraints"]);o!==void 0&&T!=null&&h(o,["bidiGenerateContentSetup"],xA(i,T));const E=f(n,["lockAdditionalFields"]);return o!==void 0&&E!=null&&h(o,["fieldMask"],E),r}function CA(i,n){const o={},r=f(n,["config"]);return r!=null&&h(o,["config"],EA(i,r,o)),o}function AA(i){const n={};if(f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(i,["fileUri"]);o!=null&&h(n,["fileUri"],o);const r=f(i,["mimeType"]);return r!=null&&h(n,["mimeType"],r),n}function RA(i){const n={},o=f(i,["id"]);o!=null&&h(n,["id"],o);const r=f(i,["args"]);r!=null&&h(n,["args"],r);const c=f(i,["name"]);if(c!=null&&h(n,["name"],c),f(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function bA(i){const n={};if(f(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=f(i,["enableWidget"]);return o!=null&&h(n,["enableWidget"],o),n}function MA(i){const n={};if(f(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=f(i,["timeRangeFilter"]);return o!=null&&h(n,["timeRangeFilter"],o),n}function wA(i,n){const o={},r=f(i,["generationConfig"]);n!==void 0&&r!=null&&h(n,["setup","generationConfig"],r);const c=f(i,["responseModalities"]);n!==void 0&&c!=null&&h(n,["setup","generationConfig","responseModalities"],c);const p=f(i,["temperature"]);n!==void 0&&p!=null&&h(n,["setup","generationConfig","temperature"],p);const m=f(i,["topP"]);n!==void 0&&m!=null&&h(n,["setup","generationConfig","topP"],m);const T=f(i,["topK"]);n!==void 0&&T!=null&&h(n,["setup","generationConfig","topK"],T);const E=f(i,["maxOutputTokens"]);n!==void 0&&E!=null&&h(n,["setup","generationConfig","maxOutputTokens"],E);const S=f(i,["mediaResolution"]);n!==void 0&&S!=null&&h(n,["setup","generationConfig","mediaResolution"],S);const C=f(i,["seed"]);n!==void 0&&C!=null&&h(n,["setup","generationConfig","seed"],C);const M=f(i,["speechConfig"]);n!==void 0&&M!=null&&h(n,["setup","generationConfig","speechConfig"],qd(M));const w=f(i,["thinkingConfig"]);n!==void 0&&w!=null&&h(n,["setup","generationConfig","thinkingConfig"],w);const D=f(i,["enableAffectiveDialog"]);n!==void 0&&D!=null&&h(n,["setup","generationConfig","enableAffectiveDialog"],D);const B=f(i,["systemInstruction"]);n!==void 0&&B!=null&&h(n,["setup","systemInstruction"],_A(Kt(B)));const Q=f(i,["tools"]);if(n!==void 0&&Q!=null){let V=Nr(Q);Array.isArray(V)&&(V=V.map(ce=>OA(Ir(ce)))),h(n,["setup","tools"],V)}const Y=f(i,["sessionResumption"]);n!==void 0&&Y!=null&&h(n,["setup","sessionResumption"],NA(Y));const $=f(i,["inputAudioTranscription"]);n!==void 0&&$!=null&&h(n,["setup","inputAudioTranscription"],$);const ae=f(i,["outputAudioTranscription"]);n!==void 0&&ae!=null&&h(n,["setup","outputAudioTranscription"],ae);const oe=f(i,["realtimeInputConfig"]);n!==void 0&&oe!=null&&h(n,["setup","realtimeInputConfig"],oe);const ue=f(i,["contextWindowCompression"]);n!==void 0&&ue!=null&&h(n,["setup","contextWindowCompression"],ue);const ie=f(i,["proactivity"]);if(n!==void 0&&ie!=null&&h(n,["setup","proactivity"],ie),f(i,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function xA(i,n){const o={},r=f(n,["model"]);r!=null&&h(o,["setup","model"],Ye(i,r));const c=f(n,["config"]);return c!=null&&h(o,["config"],wA(c,o)),o}function IA(i){const n={},o=f(i,["mediaResolution"]);o!=null&&h(n,["mediaResolution"],o);const r=f(i,["codeExecutionResult"]);r!=null&&h(n,["codeExecutionResult"],r);const c=f(i,["executableCode"]);c!=null&&h(n,["executableCode"],c);const p=f(i,["fileData"]);p!=null&&h(n,["fileData"],AA(p));const m=f(i,["functionCall"]);m!=null&&h(n,["functionCall"],RA(m));const T=f(i,["functionResponse"]);T!=null&&h(n,["functionResponse"],T);const E=f(i,["inlineData"]);E!=null&&h(n,["inlineData"],SA(E));const S=f(i,["text"]);S!=null&&h(n,["text"],S);const C=f(i,["thought"]);C!=null&&h(n,["thought"],C);const M=f(i,["thoughtSignature"]);M!=null&&h(n,["thoughtSignature"],M);const w=f(i,["videoMetadata"]);return w!=null&&h(n,["videoMetadata"],w),n}function NA(i){const n={},o=f(i,["handle"]);if(o!=null&&h(n,["handle"],o),f(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function OA(i){const n={};if(f(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(i,["computerUse"]);o!=null&&h(n,["computerUse"],o);const r=f(i,["fileSearch"]);r!=null&&h(n,["fileSearch"],r);const c=f(i,["codeExecution"]);if(c!=null&&h(n,["codeExecution"],c),f(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=f(i,["functionDeclarations"]);if(p!=null){let C=p;Array.isArray(C)&&(C=C.map(M=>M)),h(n,["functionDeclarations"],C)}const m=f(i,["googleMaps"]);m!=null&&h(n,["googleMaps"],bA(m));const T=f(i,["googleSearch"]);T!=null&&h(n,["googleSearch"],MA(T));const E=f(i,["googleSearchRetrieval"]);E!=null&&h(n,["googleSearchRetrieval"],E);const S=f(i,["urlContext"]);return S!=null&&h(n,["urlContext"],S),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DA(i){const n=[];for(const o in i)if(Object.prototype.hasOwnProperty.call(i,o)){const r=i[o];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const c=Object.keys(r).map(p=>`${o}.${p}`);n.push(...c)}else n.push(o)}return n.join(",")}function UA(i,n){let o=null;const r=i.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const p=r.setup;typeof p=="object"&&p!==null?(i.bidiGenerateContentSetup=p,o=p):delete i.bidiGenerateContentSetup}else r!==void 0&&delete i.bidiGenerateContentSetup;const c=i.fieldMask;if(o){const p=DA(o);if(Array.isArray(n==null?void 0:n.lockAdditionalFields)&&(n==null?void 0:n.lockAdditionalFields.length)===0)p?i.fieldMask=p:delete i.fieldMask;else if(n!=null&&n.lockAdditionalFields&&n.lockAdditionalFields.length>0&&c!==null&&Array.isArray(c)&&c.length>0){const m=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let T=[];c.length>0&&(T=c.map(S=>m.includes(S)?`generationConfig.${S}`:S));const E=[];p&&E.push(p),T.length>0&&E.push(...T),E.length>0?i.fieldMask=E.join(","):delete i.fieldMask}else delete i.fieldMask}else c!==null&&Array.isArray(c)&&c.length>0?i.fieldMask=c.join(","):delete i.fieldMask;return i}class LA extends Yi{constructor(n){super(),this.apiClient=n}async create(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const T=CA(this.apiClient,n);p=pe("auth_tokens",T._url),m=T._query,delete T.config,delete T._url,delete T._query;const E=UA(T,n.config);return c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(E),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json()),c.then(S=>S)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kA(i,n){const o={},r=f(i,["force"]);return n!==void 0&&r!=null&&h(n,["_query","force"],r),o}function PA(i){const n={},o=f(i,["name"]);o!=null&&h(n,["_url","name"],o);const r=f(i,["config"]);return r!=null&&kA(r,n),n}function GA(i){const n={},o=f(i,["name"]);return o!=null&&h(n,["_url","name"],o),n}function HA(i,n){const o={},r=f(i,["pageSize"]);n!==void 0&&r!=null&&h(n,["_query","pageSize"],r);const c=f(i,["pageToken"]);return n!==void 0&&c!=null&&h(n,["_query","pageToken"],c),o}function qA(i){const n={},o=f(i,["parent"]);o!=null&&h(n,["_url","parent"],o);const r=f(i,["config"]);return r!=null&&HA(r,n),n}function BA(i){const n={},o=f(i,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(i,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const c=f(i,["documents"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>m)),h(n,["documents"],p)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VA extends Yi{constructor(n){super(),this.apiClient=n,this.list=async o=>new bs(Ji.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:o.parent,config:r.config}),await this.listInternal(o),o)}async get(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const T=GA(n);return p=pe("{name}",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json()),c.then(E=>E)}}async delete(n){var o,r;let c="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=PA(n);c=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const T=qA(n);return p=pe("{parent}/documents",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json()),c.then(E=>{const S=BA(E),C=new yT;return Object.assign(C,S),C})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zA extends Yi{constructor(n,o=new VA(n)){super(),this.apiClient=n,this.documents=o,this.list=async(r={})=>new bs(Ji.PAGED_ITEM_FILE_SEARCH_STORES,c=>this.listInternal(c),await this.listInternal(r),r)}async uploadToFileSearchStore(n){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(n.fileSearchStoreName,n.file,n.config)}async create(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const T=DC(n);return p=pe("fileSearchStores",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json()),c.then(E=>E)}}async get(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const T=kC(n);return p=pe("{name}",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json()),c.then(E=>E)}}async delete(n){var o,r;let c="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=LC(n);c=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const T=VC(n);return p=pe("fileSearchStores",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json()),c.then(E=>{const S=zC(E),C=new vT;return Object.assign(C,S),C})}}async uploadToFileSearchStoreInternal(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const T=FC(n);return p=pe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json()),c.then(E=>{const S=JC(E),C=new TT;return Object.assign(C,S),C})}}async importFile(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const T=HC(n);return p=pe("{file_search_store_name}:importFile",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json()),c.then(E=>{const S=GC(E),C=new Ld;return Object.assign(C,S),C})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let By=function(){const{crypto:i}=globalThis;if(i!=null&&i.randomUUID)return By=i.randomUUID.bind(i),i.randomUUID();const n=new Uint8Array(1),o=i?()=>i.getRandomValues(n)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^o()&15>>+r/4).toString(16))};const FA=()=>By();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vd(i){return typeof i=="object"&&i!==null&&("name"in i&&i.name==="AbortError"||"message"in i&&String(i.message).includes("FetchRequestCanceledException"))}const Td=i=>{if(i instanceof Error)return i;if(typeof i=="object"&&i!==null){try{if(Object.prototype.toString.call(i)==="[object Error]"){const n=new Error(i.message,i.cause?{cause:i.cause}:{});return i.stack&&(n.stack=i.stack),i.cause&&!n.cause&&(n.cause=i.cause),i.name&&(n.name=i.name),n}}catch{}try{return new Error(JSON.stringify(i))}catch{}}return new Error(i)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pn extends Error{}class tn extends Pn{constructor(n,o,r,c){super(`${tn.makeMessage(n,o,r)}`),this.status=n,this.headers=c,this.error=o}static makeMessage(n,o,r){const c=o!=null&&o.message?typeof o.message=="string"?o.message:JSON.stringify(o.message):o?JSON.stringify(o):r;return n&&c?`${n} ${c}`:n?`${n} status code (no body)`:c||"(no status code or body)"}static generate(n,o,r,c){if(!n||!c)return new cc({message:r,cause:Td(o)});const p=o;return n===400?new zy(n,p,r,c):n===401?new Fy(n,p,r,c):n===403?new Jy(n,p,r,c):n===404?new Yy(n,p,r,c):n===409?new Ky(n,p,r,c):n===422?new Qy(n,p,r,c):n===429?new Xy(n,p,r,c):n>=500?new Wy(n,p,r,c):new tn(n,p,r,c)}}class Sd extends tn{constructor({message:n}={}){super(void 0,void 0,n||"Request was aborted.",void 0)}}class cc extends tn{constructor({message:n,cause:o}){super(void 0,void 0,n||"Connection error.",void 0),o&&(this.cause=o)}}class Vy extends cc{constructor({message:n}={}){super({message:n??"Request timed out."})}}class zy extends tn{}class Fy extends tn{}class Jy extends tn{}class Yy extends tn{}class Ky extends tn{}class Qy extends tn{}class Xy extends tn{}class Wy extends tn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JA=/^[a-z][a-z0-9+.-]*:/i,YA=i=>JA.test(i);let _d=i=>(_d=Array.isArray,_d(i));const KA=_d;let QA=KA;const iy=QA;function XA(i){if(!i)return!0;for(const n in i)return!1;return!0}function WA(i,n){return Object.prototype.hasOwnProperty.call(i,n)}const ZA=(i,n)=>{if(typeof n!="number"||!Number.isInteger(n))throw new Pn(`${i} must be an integer`);if(n<0)throw new Pn(`${i} must be a positive integer`);return n},$A=i=>{try{return JSON.parse(i)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jA=i=>new Promise(n=>setTimeout(n,i));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eR(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const tR=()=>{var i,n,o,r,c;const p=eR();if(p==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cr,"X-Stainless-OS":sy(Deno.build.os),"X-Stainless-Arch":oy(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(n=(i=Deno.version)===null||i===void 0?void 0:i.deno)!==null&&n!==void 0?n:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(p==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cr,"X-Stainless-OS":sy((o=globalThis.process.platform)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Arch":oy((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(c=globalThis.process.version)!==null&&c!==void 0?c:"unknown"};const m=nR();return m?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${m.browser}`,"X-Stainless-Runtime-Version":m.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function nR(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:n,pattern:o}of i){const r=o.exec(navigator.userAgent);if(r){const c=r[1]||0,p=r[2]||0,m=r[3]||0;return{browser:n,version:`${c}.${p}.${m}`}}}return null}const oy=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",sy=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let Yu;const iR=()=>Yu??(Yu=tR());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oR(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Zy(...i){const n=globalThis.ReadableStream;if(typeof n>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new n(...i)}function sR(i){let n=Symbol.asyncIterator in i?i[Symbol.asyncIterator]():i[Symbol.iterator]();return Zy({start(){},async pull(o){const{done:r,value:c}=await n.next();r?o.close():o.enqueue(c)},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}function $y(i){if(i[Symbol.asyncIterator])return i;const n=i.getReader();return{async next(){try{const o=await n.read();return o!=null&&o.done&&n.releaseLock(),o}catch(o){throw n.releaseLock(),o}},async return(){const o=n.cancel();return n.releaseLock(),await o,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function rR(i){var n,o;if(i===null||typeof i!="object")return;if(i[Symbol.asyncIterator]){await((o=(n=i[Symbol.asyncIterator]()).return)===null||o===void 0?void 0:o.call(n));return}const r=i.getReader(),c=r.cancel();r.releaseLock(),await c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lR=({headers:i,body:n})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(n)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jy=()=>{var i;if(typeof File>"u"){const{process:n}=globalThis,o=typeof((i=n==null?void 0:n.versions)===null||i===void 0?void 0:i.node)=="string"&&parseInt(n.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(o?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function rd(i,n,o){return jy(),new File(i,n??"unknown_file",o)}function aR(i){return(typeof i=="object"&&i!==null&&("name"in i&&i.name&&String(i.name)||"url"in i&&i.url&&String(i.url)||"filename"in i&&i.filename&&String(i.filename)||"path"in i&&i.path&&String(i.path))||"").split(/[\\/]/).pop()||void 0}const uR=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ev=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",cR=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&ev(i),fR=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function";async function dR(i,n,o){if(jy(),i=await i,cR(i))return i instanceof File?i:rd([await i.arrayBuffer()],i.name);if(fR(i)){const c=await i.blob();return n||(n=new URL(i.url).pathname.split(/[\\/]/).pop()),rd(await Ed(c),n,o)}const r=await Ed(i);if(n||(n=aR(i)),!(o!=null&&o.type)){const c=r.find(p=>typeof p=="object"&&"type"in p&&p.type);typeof c=="string"&&(o=Object.assign(Object.assign({},o),{type:c}))}return rd(r,n,o)}async function Ed(i){var n,o,r,c,p;let m=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)m.push(i);else if(ev(i))m.push(i instanceof Blob?i:await i.arrayBuffer());else if(uR(i))try{for(var T=!0,E=Wn(i),S;S=await E.next(),n=S.done,!n;T=!0){c=S.value,T=!1;const C=c;m.push(...await Ed(C))}}catch(C){o={error:C}}finally{try{!T&&!n&&(r=E.return)&&await r.call(E)}finally{if(o)throw o.error}}else{const C=(p=i==null?void 0:i.constructor)===null||p===void 0?void 0:p.name;throw new Error(`Unexpected data type: ${typeof i}${C?`; constructor: ${C}`:""}${hR(i)}`)}return m}function hR(i){return typeof i!="object"||i===null?"":`; props: [${Object.getOwnPropertyNames(i).map(o=>`"${o}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tv{constructor(n){this._client=n}}tv._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nv(i){return i.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const ry=Object.freeze(Object.create(null)),pR=(i=nv)=>(function(o,...r){if(o.length===1)return o[0];let c=!1;const p=[],m=o.reduce((C,M,w)=>{var D,B,Q;/[?#]/.test(M)&&(c=!0);const Y=r[w];let $=(c?encodeURIComponent:i)(""+Y);return w!==r.length&&(Y==null||typeof Y=="object"&&Y.toString===((Q=Object.getPrototypeOf((B=Object.getPrototypeOf((D=Y.hasOwnProperty)!==null&&D!==void 0?D:ry))!==null&&B!==void 0?B:ry))===null||Q===void 0?void 0:Q.toString))&&($=Y+"",p.push({start:C.length+M.length,length:$.length,error:`Value of type ${Object.prototype.toString.call(Y).slice(8,-1)} is not a valid path parameter`})),C+M+(w===r.length?"":$)},""),T=m.split(/[?#]/,1)[0],E=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let S;for(;(S=E.exec(T))!==null;)p.push({start:S.index,length:S[0].length,error:`Value "${S[0]}" can't be safely passed as a path parameter`});if(p.sort((C,M)=>C.start-M.start),p.length>0){let C=0;const M=p.reduce((w,D)=>{const B=" ".repeat(D.start-C),Q="^".repeat(D.length);return C=D.start+D.length,w+B+Q},"");throw new Pn(`Path parameters result in path with invalid segments:
${p.map(w=>w.error).join(`
`)}
${m}
${M}`)}return m}),Ku=pR(nv);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iv extends tv{create(n,o){var r;const{api_version:c=this._client.apiVersion}=n,p=oc(n,["api_version"]);if("model"in p&&"agent_config"in p)throw new Pn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in p&&"generation_config"in p)throw new Pn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Ku`/${c}/interactions`,Object.assign(Object.assign({body:p},o),{stream:(r=n.stream)!==null&&r!==void 0?r:!1}))}delete(n,o={},r){const{api_version:c=this._client.apiVersion}=o??{};return this._client.delete(Ku`/${c}/interactions/${n}`,r)}cancel(n,o={},r){const{api_version:c=this._client.apiVersion}=o??{};return this._client.post(Ku`/${c}/interactions/${n}/cancel`,r)}get(n,o={},r){var c;const p=o??{},{api_version:m=this._client.apiVersion}=p,T=oc(p,["api_version"]);return this._client.get(Ku`/${m}/interactions/${n}`,Object.assign(Object.assign({query:T},r),{stream:(c=o==null?void 0:o.stream)!==null&&c!==void 0?c:!1}))}}iv._key=Object.freeze(["interactions"]);class ov extends iv{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gR(i){let n=0;for(const c of i)n+=c.length;const o=new Uint8Array(n);let r=0;for(const c of i)o.set(c,r),r+=c.length;return o}let Qu;function Vd(i){let n;return(Qu??(n=new globalThis.TextEncoder,Qu=n.encode.bind(n)))(i)}let Xu;function ly(i){let n;return(Xu??(n=new globalThis.TextDecoder,Xu=n.decode.bind(n)))(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fc{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(n){if(n==null)return[];const o=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Vd(n):n;this.buffer=gR([this.buffer,o]);const r=[];let c;for(;(c=mR(this.buffer,this.carriageReturnIndex))!=null;){if(c.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=c.index;continue}if(this.carriageReturnIndex!=null&&(c.index!==this.carriageReturnIndex+1||c.carriage)){r.push(ly(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const p=this.carriageReturnIndex!==null?c.preceding-1:c.preceding,m=ly(this.buffer.subarray(0,p));r.push(m),this.buffer=this.buffer.subarray(c.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}fc.NEWLINE_CHARS=new Set([`
`,"\r"]);fc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function mR(i,n){for(let c=n??0;c<i.length;c++){if(i[c]===10)return{preceding:c,index:c+1,carriage:!1};if(i[c]===13)return{preceding:c,index:c+1,carriage:!0}}return null}function yR(i){for(let r=0;r<i.length-1;r++){if(i[r]===10&&i[r+1]===10||i[r]===13&&i[r+1]===13)return r+2;if(i[r]===13&&i[r+1]===10&&r+3<i.length&&i[r+2]===13&&i[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sc={off:0,error:200,warn:300,info:400,debug:500},ay=(i,n,o)=>{if(i){if(WA(sc,i))return i;en(o).warn(`${n} was set to ${JSON.stringify(i)}, expected one of ${JSON.stringify(Object.keys(sc))}`)}};function aa(){}function Wu(i,n,o){return!n||sc[i]>sc[o]?aa:n[i].bind(n)}const vR={error:aa,warn:aa,info:aa,debug:aa};let uy=new WeakMap;function en(i){var n;const o=i.logger,r=(n=i.logLevel)!==null&&n!==void 0?n:"off";if(!o)return vR;const c=uy.get(o);if(c&&c[0]===r)return c[1];const p={error:Wu("error",o,r),warn:Wu("warn",o,r),info:Wu("info",o,r),debug:Wu("debug",o,r)};return uy.set(o,[r,p]),p}const Rs=i=>(i.options&&(i.options=Object.assign({},i.options),delete i.options.headers),i.headers&&(i.headers=Object.fromEntries((i.headers instanceof Headers?[...i.headers]:Object.entries(i.headers)).map(([n,o])=>[n,n.toLowerCase()==="x-goog-api-key"||n.toLowerCase()==="authorization"||n.toLowerCase()==="cookie"||n.toLowerCase()==="set-cookie"?"***":o]))),"retryOfRequestLogID"in i&&(i.retryOfRequestLogID&&(i.retryOf=i.retryOfRequestLogID),delete i.retryOfRequestLogID),i);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mr{constructor(n,o,r){this.iterator=n,this.controller=o,this.client=r}static fromSSEResponse(n,o,r){let c=!1;const p=r?en(r):console;function m(){return Xn(this,arguments,function*(){var E,S,C,M;if(c)throw new Pn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");c=!0;let w=!1;try{try{for(var D=!0,B=Wn(TR(n,o)),Q;Q=yield be(B.next()),E=Q.done,!E;D=!0){M=Q.value,D=!1;const Y=M;if(!w)if(Y.data.startsWith("[DONE]")){w=!0;continue}else try{yield yield be(JSON.parse(Y.data))}catch($){throw p.error("Could not parse message into JSON:",Y.data),p.error("From chunk:",Y.raw),$}}}catch(Y){S={error:Y}}finally{try{!D&&!E&&(C=B.return)&&(yield be(C.call(B)))}finally{if(S)throw S.error}}w=!0}catch(Y){if(vd(Y))return yield be(void 0);throw Y}finally{w||o.abort()}})}return new Mr(m,o,r)}static fromReadableStream(n,o,r){let c=!1;function p(){return Xn(this,arguments,function*(){var E,S,C,M;const w=new fc,D=$y(n);try{for(var B=!0,Q=Wn(D),Y;Y=yield be(Q.next()),E=Y.done,!E;B=!0){M=Y.value,B=!1;const $=M;for(const ae of w.decode($))yield yield be(ae)}}catch($){S={error:$}}finally{try{!B&&!E&&(C=Q.return)&&(yield be(C.call(Q)))}finally{if(S)throw S.error}}for(const $ of w.flush())yield yield be($)})}function m(){return Xn(this,arguments,function*(){var E,S,C,M;if(c)throw new Pn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");c=!0;let w=!1;try{try{for(var D=!0,B=Wn(p()),Q;Q=yield be(B.next()),E=Q.done,!E;D=!0){M=Q.value,D=!1;const Y=M;w||Y&&(yield yield be(JSON.parse(Y)))}}catch(Y){S={error:Y}}finally{try{!D&&!E&&(C=B.return)&&(yield be(C.call(B)))}finally{if(S)throw S.error}}w=!0}catch(Y){if(vd(Y))return yield be(void 0);throw Y}finally{w||o.abort()}})}return new Mr(m,o,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const n=[],o=[],r=this.iterator(),c=p=>({next:()=>{if(p.length===0){const m=r.next();n.push(m),o.push(m)}return p.shift()}});return[new Mr(()=>c(n),this.controller,this.client),new Mr(()=>c(o),this.controller,this.client)]}toReadableStream(){const n=this;let o;return Zy({async start(){o=n[Symbol.asyncIterator]()},async pull(r){try{const{value:c,done:p}=await o.next();if(p)return r.close();const m=Vd(JSON.stringify(c)+`
`);r.enqueue(m)}catch(c){r.error(c)}},async cancel(){var r;await((r=o.return)===null||r===void 0?void 0:r.call(o))}})}}function TR(i,n){return Xn(this,arguments,function*(){var r,c,p,m;if(!i.body)throw n.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Pn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Pn("Attempted to iterate over a response with no body");const T=new _R,E=new fc,S=$y(i.body);try{for(var C=!0,M=Wn(SR(S)),w;w=yield be(M.next()),r=w.done,!r;C=!0){m=w.value,C=!1;const D=m;for(const B of E.decode(D)){const Q=T.decode(B);Q&&(yield yield be(Q))}}}catch(D){c={error:D}}finally{try{!C&&!r&&(p=M.return)&&(yield be(p.call(M)))}finally{if(c)throw c.error}}for(const D of E.flush()){const B=T.decode(D);B&&(yield yield be(B))}})}function SR(i){return Xn(this,arguments,function*(){var o,r,c,p;let m=new Uint8Array;try{for(var T=!0,E=Wn(i),S;S=yield be(E.next()),o=S.done,!o;T=!0){p=S.value,T=!1;const C=p;if(C==null)continue;const M=C instanceof ArrayBuffer?new Uint8Array(C):typeof C=="string"?Vd(C):C;let w=new Uint8Array(m.length+M.length);w.set(m),w.set(M,m.length),m=w;let D;for(;(D=yR(m))!==-1;)yield yield be(m.slice(0,D)),m=m.slice(D)}}catch(C){r={error:C}}finally{try{!T&&!o&&(c=E.return)&&(yield be(c.call(E)))}finally{if(r)throw r.error}}m.length>0&&(yield yield be(m))})}class _R{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(n){if(n.endsWith("\r")&&(n=n.substring(0,n.length-1)),!n){if(!this.event&&!this.data.length)return null;const p={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],p}if(this.chunks.push(n),n.startsWith(":"))return null;let[o,r,c]=ER(n,":");return c.startsWith(" ")&&(c=c.substring(1)),o==="event"?this.event=c:o==="data"&&this.data.push(c),null}}function ER(i,n){const o=i.indexOf(n);return o!==-1?[i.substring(0,o),n,i.substring(o+n.length)]:[i,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function CR(i,n){const{response:o,requestLogID:r,retryOfRequestLogID:c,startTime:p}=n,m=await(async()=>{var T;if(n.options.stream)return en(i).debug("response",o.status,o.url,o.headers,o.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(o,n.controller,i):Mr.fromSSEResponse(o,n.controller,i);if(o.status===204)return null;if(n.options.__binaryResponse)return o;const E=o.headers.get("content-type"),S=(T=E==null?void 0:E.split(";")[0])===null||T===void 0?void 0:T.trim();return(S==null?void 0:S.includes("application/json"))||(S==null?void 0:S.endsWith("+json"))?await o.json():await o.text()})();return en(i).debug(`[${r}] response parsed`,Rs({retryOfRequestLogID:c,url:o.url,status:o.status,body:m,durationMs:Date.now()-p})),m}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zd extends Promise{constructor(n,o,r=CR){super(c=>{c(null)}),this.responsePromise=o,this.parseResponse=r,this.client=n}_thenUnwrap(n){return new zd(this.client,this.responsePromise,async(o,r)=>n(await this.parseResponse(o,r),r))}asResponse(){return this.responsePromise.then(n=>n.response)}async withResponse(){const[n,o]=await Promise.all([this.parse(),this.asResponse()]);return{data:n,response:o}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(n=>this.parseResponse(this.client,n))),this.parsedPromise}then(n,o){return this.parse().then(n,o)}catch(n){return this.parse().catch(n)}finally(n){return this.parse().finally(n)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sv=Symbol("brand.privateNullableHeaders");function*AR(i){if(!i)return;if(sv in i){const{values:r,nulls:c}=i;yield*r.entries();for(const p of c)yield[p,null];return}let n=!1,o;i instanceof Headers?o=i.entries():iy(i)?o=i:(n=!0,o=Object.entries(i??{}));for(let r of o){const c=r[0];if(typeof c!="string")throw new TypeError("expected header name to be a string");const p=iy(r[1])?r[1]:[r[1]];let m=!1;for(const T of p)T!==void 0&&(n&&!m&&(m=!0,yield[c,null]),yield[c,T])}}const la=i=>{const n=new Headers,o=new Set;for(const r of i){const c=new Set;for(const[p,m]of AR(r)){const T=p.toLowerCase();c.has(T)||(n.delete(p),c.add(T)),m===null?(n.delete(p),o.add(T)):(n.append(p,m),o.delete(T))}}return{[sv]:!0,values:n,nulls:o}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ld=i=>{var n,o,r,c,p,m;if(typeof globalThis.process<"u")return(r=(o=(n=Y0)===null||n===void 0?void 0:n[i])===null||o===void 0?void 0:o.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(m=(p=(c=globalThis.Deno.env)===null||c===void 0?void 0:c.get)===null||p===void 0?void 0:p.call(c,i))===null||m===void 0?void 0:m.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var rv;class dc{constructor(n){var o,r,c,p,m,T,E,{baseURL:S=ld("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:C=(o=ld("GEMINI_API_KEY"))!==null&&o!==void 0?o:null,apiVersion:M="v1beta"}=n,w=oc(n,["baseURL","apiKey","apiVersion"]);const D=Object.assign(Object.assign({apiKey:C,apiVersion:M},w),{baseURL:S||"https://generativelanguage.googleapis.com"});this.baseURL=D.baseURL,this.timeout=(r=D.timeout)!==null&&r!==void 0?r:dc.DEFAULT_TIMEOUT,this.logger=(c=D.logger)!==null&&c!==void 0?c:console;const B="warn";this.logLevel=B,this.logLevel=(m=(p=ay(D.logLevel,"ClientOptions.logLevel",this))!==null&&p!==void 0?p:ay(ld("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&m!==void 0?m:B,this.fetchOptions=D.fetchOptions,this.maxRetries=(T=D.maxRetries)!==null&&T!==void 0?T:2,this.fetch=(E=D.fetch)!==null&&E!==void 0?E:oR(),this.encoder=lR,this._options=D,this.apiKey=C,this.apiVersion=M,this.clientAdapter=D.clientAdapter}withOptions(n){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),n))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:n,nulls:o}){if(!(n.has("authorization")||n.has("x-goog-api-key"))&&!(this.apiKey&&n.get("x-goog-api-key"))&&!o.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(n){const o=la([n.headers]);if(!(o.values.has("authorization")||o.values.has("x-goog-api-key"))){if(this.apiKey)return la([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return la([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(n){return Object.entries(n).filter(([o,r])=>typeof r<"u").map(([o,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(o)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(o)}=`;throw new Pn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Cr}`}defaultIdempotencyKey(){return`stainless-node-retry-${FA()}`}makeStatusError(n,o,r,c){return tn.generate(n,o,r,c)}buildURL(n,o,r){const c=!this.baseURLOverridden()&&r||this.baseURL,p=YA(n)?new URL(n):new URL(c+(c.endsWith("/")&&n.startsWith("/")?n.slice(1):n)),m=this.defaultQuery();return XA(m)||(o=Object.assign(Object.assign({},m),o)),typeof o=="object"&&o&&!Array.isArray(o)&&(p.search=this.stringifyQuery(o)),p.toString()}async prepareOptions(n){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!n.path.startsWith(`/${this.apiVersion}/projects/`)){const o=n.path.slice(this.apiVersion.length+1);n.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${o}`}}async prepareRequest(n,{url:o,options:r}){}get(n,o){return this.methodRequest("get",n,o)}post(n,o){return this.methodRequest("post",n,o)}patch(n,o){return this.methodRequest("patch",n,o)}put(n,o){return this.methodRequest("put",n,o)}delete(n,o){return this.methodRequest("delete",n,o)}methodRequest(n,o,r){return this.request(Promise.resolve(r).then(c=>Object.assign({method:n,path:o},c)))}request(n,o=null){return new zd(this,this.makeRequest(n,o,void 0))}async makeRequest(n,o,r){var c,p,m;const T=await n,E=(c=T.maxRetries)!==null&&c!==void 0?c:this.maxRetries;o==null&&(o=E),await this.prepareOptions(T);const{req:S,url:C,timeout:M}=await this.buildRequest(T,{retryCount:E-o});await this.prepareRequest(S,{url:C,options:T});const w="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),D=r===void 0?"":`, retryOf: ${r}`,B=Date.now();if(en(this).debug(`[${w}] sending request`,Rs({retryOfRequestLogID:r,method:T.method,url:C,options:T,headers:S.headers})),!((p=T.signal)===null||p===void 0)&&p.aborted)throw new Sd;const Q=new AbortController,Y=await this.fetchWithTimeout(C,S,M,Q).catch(Td),$=Date.now();if(Y instanceof globalThis.Error){const oe=`retrying, ${o} attempts remaining`;if(!((m=T.signal)===null||m===void 0)&&m.aborted)throw new Sd;const ue=vd(Y)||/timed? ?out/i.test(String(Y)+("cause"in Y?String(Y.cause):""));if(o)return en(this).info(`[${w}] connection ${ue?"timed out":"failed"} - ${oe}`),en(this).debug(`[${w}] connection ${ue?"timed out":"failed"} (${oe})`,Rs({retryOfRequestLogID:r,url:C,durationMs:$-B,message:Y.message})),this.retryRequest(T,o,r??w);throw en(this).info(`[${w}] connection ${ue?"timed out":"failed"} - error; no more retries left`),en(this).debug(`[${w}] connection ${ue?"timed out":"failed"} (error; no more retries left)`,Rs({retryOfRequestLogID:r,url:C,durationMs:$-B,message:Y.message})),ue?new Vy:new cc({cause:Y})}const ae=`[${w}${D}] ${S.method} ${C} ${Y.ok?"succeeded":"failed"} with status ${Y.status} in ${$-B}ms`;if(!Y.ok){const oe=await this.shouldRetry(Y);if(o&&oe){const ye=`retrying, ${o} attempts remaining`;return await rR(Y.body),en(this).info(`${ae} - ${ye}`),en(this).debug(`[${w}] response error (${ye})`,Rs({retryOfRequestLogID:r,url:Y.url,status:Y.status,headers:Y.headers,durationMs:$-B})),this.retryRequest(T,o,r??w,Y.headers)}const ue=oe?"error; no more retries left":"error; not retryable";en(this).info(`${ae} - ${ue}`);const ie=await Y.text().catch(ye=>Td(ye).message),V=$A(ie),ce=V?void 0:ie;throw en(this).debug(`[${w}] response error (${ue})`,Rs({retryOfRequestLogID:r,url:Y.url,status:Y.status,headers:Y.headers,message:ce,durationMs:Date.now()-B})),this.makeStatusError(Y.status,V,ce,Y.headers)}return en(this).info(ae),en(this).debug(`[${w}] response start`,Rs({retryOfRequestLogID:r,url:Y.url,status:Y.status,headers:Y.headers,durationMs:$-B})),{response:Y,options:T,controller:Q,requestLogID:w,retryOfRequestLogID:r,startTime:B}}async fetchWithTimeout(n,o,r,c){const p=o||{},{signal:m,method:T}=p,E=oc(p,["signal","method"]);m&&m.addEventListener("abort",()=>c.abort());const S=setTimeout(()=>c.abort(),r),C=globalThis.ReadableStream&&E.body instanceof globalThis.ReadableStream||typeof E.body=="object"&&E.body!==null&&Symbol.asyncIterator in E.body,M=Object.assign(Object.assign(Object.assign({signal:c.signal},C?{duplex:"half"}:{}),{method:"GET"}),E);T&&(M.method=T.toUpperCase());try{return await this.fetch.call(void 0,n,M)}finally{clearTimeout(S)}}async shouldRetry(n){const o=n.headers.get("x-should-retry");return o==="true"?!0:o==="false"?!1:n.status===408||n.status===409||n.status===429||n.status>=500}async retryRequest(n,o,r,c){var p;let m;const T=c==null?void 0:c.get("retry-after-ms");if(T){const S=parseFloat(T);Number.isNaN(S)||(m=S)}const E=c==null?void 0:c.get("retry-after");if(E&&!m){const S=parseFloat(E);Number.isNaN(S)?m=Date.parse(E)-Date.now():m=S*1e3}if(!(m&&0<=m&&m<60*1e3)){const S=(p=n.maxRetries)!==null&&p!==void 0?p:this.maxRetries;m=this.calculateDefaultRetryTimeoutMillis(o,S)}return await jA(m),this.makeRequest(n,o-1,r)}calculateDefaultRetryTimeoutMillis(n,o){const p=o-n,m=Math.min(.5*Math.pow(2,p),8),T=1-Math.random()*.25;return m*T*1e3}async buildRequest(n,{retryCount:o=0}={}){var r,c,p;const m=Object.assign({},n),{method:T,path:E,query:S,defaultBaseURL:C}=m,M=this.buildURL(E,S,C);"timeout"in m&&ZA("timeout",m.timeout),m.timeout=(r=m.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:w,body:D}=this.buildBody({options:m}),B=await this.buildHeaders({options:n,method:T,bodyHeaders:w,retryCount:o});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:T,headers:B},m.signal&&{signal:m.signal}),globalThis.ReadableStream&&D instanceof globalThis.ReadableStream&&{duplex:"half"}),D&&{body:D}),(c=this.fetchOptions)!==null&&c!==void 0?c:{}),(p=m.fetchOptions)!==null&&p!==void 0?p:{}),url:M,timeout:m.timeout}}async buildHeaders({options:n,method:o,bodyHeaders:r,retryCount:c}){let p={};this.idempotencyHeader&&o!=="get"&&(n.idempotencyKey||(n.idempotencyKey=this.defaultIdempotencyKey()),p[this.idempotencyHeader]=n.idempotencyKey);const m=await this.authHeaders(n);let T=la([p,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(c)},n.timeout?{"X-Stainless-Timeout":String(Math.trunc(n.timeout/1e3))}:{}),iR()),this._options.defaultHeaders,r,n.headers,m]);return this.validateHeaders(T),T.values}buildBody({options:{body:n,headers:o}}){if(!n)return{bodyHeaders:void 0,body:void 0};const r=la([o]);return ArrayBuffer.isView(n)||n instanceof ArrayBuffer||n instanceof DataView||typeof n=="string"&&r.values.has("content-type")||globalThis.Blob&&n instanceof globalThis.Blob||n instanceof FormData||n instanceof URLSearchParams||globalThis.ReadableStream&&n instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:n}:typeof n=="object"&&(Symbol.asyncIterator in n||Symbol.iterator in n&&"next"in n&&typeof n.next=="function")?{bodyHeaders:void 0,body:sR(n)}:this.encoder({body:n,headers:r})}}dc.DEFAULT_TIMEOUT=6e4;class Dt extends dc{constructor(){super(...arguments),this.interactions=new ov(this)}}rv=Dt;Dt.GeminiNextGenAPIClient=rv;Dt.GeminiNextGenAPIClientError=Pn;Dt.APIError=tn;Dt.APIConnectionError=cc;Dt.APIConnectionTimeoutError=Vy;Dt.APIUserAbortError=Sd;Dt.NotFoundError=Yy;Dt.ConflictError=Ky;Dt.RateLimitError=Xy;Dt.BadRequestError=zy;Dt.AuthenticationError=Fy;Dt.InternalServerError=Wy;Dt.PermissionDeniedError=Jy;Dt.UnprocessableEntityError=Qy;Dt.toFile=dR;Dt.Interactions=ov;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RR(i,n){const o={},r=f(i,["name"]);return r!=null&&h(o,["_url","name"],r),o}function bR(i,n){const o={},r=f(i,["name"]);return r!=null&&h(o,["_url","name"],r),o}function MR(i,n){const o={},r=f(i,["sdkHttpResponse"]);return r!=null&&h(o,["sdkHttpResponse"],r),o}function wR(i,n){const o={},r=f(i,["sdkHttpResponse"]);return r!=null&&h(o,["sdkHttpResponse"],r),o}function xR(i,n,o){const r={};if(f(i,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const c=f(i,["tunedModelDisplayName"]);if(n!==void 0&&c!=null&&h(n,["displayName"],c),f(i,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const p=f(i,["epochCount"]);n!==void 0&&p!=null&&h(n,["tuningTask","hyperparameters","epochCount"],p);const m=f(i,["learningRateMultiplier"]);if(m!=null&&h(r,["tuningTask","hyperparameters","learningRateMultiplier"],m),f(i,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(i,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(i,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(f(i,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(f(i,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const T=f(i,["batchSize"]);n!==void 0&&T!=null&&h(n,["tuningTask","hyperparameters","batchSize"],T);const E=f(i,["learningRate"]);if(n!==void 0&&E!=null&&h(n,["tuningTask","hyperparameters","learningRate"],E),f(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(i,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(f(i,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(f(i,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(f(i,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(f(i,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return r}function IR(i,n,o){const r={};let c=f(o,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const ie=f(i,["validationDataset"]);n!==void 0&&ie!=null&&h(n,["supervisedTuningSpec"],ad(ie))}else if(c==="PREFERENCE_TUNING"){const ie=f(i,["validationDataset"]);n!==void 0&&ie!=null&&h(n,["preferenceOptimizationSpec"],ad(ie))}else if(c==="DISTILLATION"){const ie=f(i,["validationDataset"]);n!==void 0&&ie!=null&&h(n,["distillationSpec"],ad(ie))}const p=f(i,["tunedModelDisplayName"]);n!==void 0&&p!=null&&h(n,["tunedModelDisplayName"],p);const m=f(i,["description"]);n!==void 0&&m!=null&&h(n,["description"],m);let T=f(o,["config","method"]);if(T===void 0&&(T="SUPERVISED_FINE_TUNING"),T==="SUPERVISED_FINE_TUNING"){const ie=f(i,["epochCount"]);n!==void 0&&ie!=null&&h(n,["supervisedTuningSpec","hyperParameters","epochCount"],ie)}else if(T==="PREFERENCE_TUNING"){const ie=f(i,["epochCount"]);n!==void 0&&ie!=null&&h(n,["preferenceOptimizationSpec","hyperParameters","epochCount"],ie)}else if(T==="DISTILLATION"){const ie=f(i,["epochCount"]);n!==void 0&&ie!=null&&h(n,["distillationSpec","hyperParameters","epochCount"],ie)}let E=f(o,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const ie=f(i,["learningRateMultiplier"]);n!==void 0&&ie!=null&&h(n,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],ie)}else if(E==="PREFERENCE_TUNING"){const ie=f(i,["learningRateMultiplier"]);n!==void 0&&ie!=null&&h(n,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],ie)}else if(E==="DISTILLATION"){const ie=f(i,["learningRateMultiplier"]);n!==void 0&&ie!=null&&h(n,["distillationSpec","hyperParameters","learningRateMultiplier"],ie)}let S=f(o,["config","method"]);if(S===void 0&&(S="SUPERVISED_FINE_TUNING"),S==="SUPERVISED_FINE_TUNING"){const ie=f(i,["exportLastCheckpointOnly"]);n!==void 0&&ie!=null&&h(n,["supervisedTuningSpec","exportLastCheckpointOnly"],ie)}else if(S==="PREFERENCE_TUNING"){const ie=f(i,["exportLastCheckpointOnly"]);n!==void 0&&ie!=null&&h(n,["preferenceOptimizationSpec","exportLastCheckpointOnly"],ie)}else if(S==="DISTILLATION"){const ie=f(i,["exportLastCheckpointOnly"]);n!==void 0&&ie!=null&&h(n,["distillationSpec","exportLastCheckpointOnly"],ie)}let C=f(o,["config","method"]);if(C===void 0&&(C="SUPERVISED_FINE_TUNING"),C==="SUPERVISED_FINE_TUNING"){const ie=f(i,["adapterSize"]);n!==void 0&&ie!=null&&h(n,["supervisedTuningSpec","hyperParameters","adapterSize"],ie)}else if(C==="PREFERENCE_TUNING"){const ie=f(i,["adapterSize"]);n!==void 0&&ie!=null&&h(n,["preferenceOptimizationSpec","hyperParameters","adapterSize"],ie)}else if(C==="DISTILLATION"){const ie=f(i,["adapterSize"]);n!==void 0&&ie!=null&&h(n,["distillationSpec","hyperParameters","adapterSize"],ie)}let M=f(o,["config","method"]);if(M===void 0&&(M="SUPERVISED_FINE_TUNING"),M==="SUPERVISED_FINE_TUNING"){const ie=f(i,["tuningMode"]);n!==void 0&&ie!=null&&h(n,["supervisedTuningSpec","tuningMode"],ie)}const w=f(i,["customBaseModel"]);n!==void 0&&w!=null&&h(n,["customBaseModel"],w);let D=f(o,["config","method"]);if(D===void 0&&(D="SUPERVISED_FINE_TUNING"),D==="SUPERVISED_FINE_TUNING"){const ie=f(i,["batchSize"]);n!==void 0&&ie!=null&&h(n,["supervisedTuningSpec","hyperParameters","batchSize"],ie)}let B=f(o,["config","method"]);if(B===void 0&&(B="SUPERVISED_FINE_TUNING"),B==="SUPERVISED_FINE_TUNING"){const ie=f(i,["learningRate"]);n!==void 0&&ie!=null&&h(n,["supervisedTuningSpec","hyperParameters","learningRate"],ie)}const Q=f(i,["labels"]);n!==void 0&&Q!=null&&h(n,["labels"],Q);const Y=f(i,["beta"]);n!==void 0&&Y!=null&&h(n,["preferenceOptimizationSpec","hyperParameters","beta"],Y);const $=f(i,["baseTeacherModel"]);n!==void 0&&$!=null&&h(n,["distillationSpec","baseTeacherModel"],$);const ae=f(i,["tunedTeacherModelSource"]);n!==void 0&&ae!=null&&h(n,["distillationSpec","tunedTeacherModelSource"],ae);const oe=f(i,["sftLossWeightMultiplier"]);n!==void 0&&oe!=null&&h(n,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],oe);const ue=f(i,["outputUri"]);return n!==void 0&&ue!=null&&h(n,["outputUri"],ue),r}function NR(i,n){const o={},r=f(i,["baseModel"]);r!=null&&h(o,["baseModel"],r);const c=f(i,["preTunedModel"]);c!=null&&h(o,["preTunedModel"],c);const p=f(i,["trainingDataset"]);p!=null&&VR(p);const m=f(i,["config"]);return m!=null&&xR(m,o),o}function OR(i,n){const o={},r=f(i,["baseModel"]);r!=null&&h(o,["baseModel"],r);const c=f(i,["preTunedModel"]);c!=null&&h(o,["preTunedModel"],c);const p=f(i,["trainingDataset"]);p!=null&&zR(p,o,n);const m=f(i,["config"]);return m!=null&&IR(m,o,n),o}function DR(i,n){const o={},r=f(i,["name"]);return r!=null&&h(o,["_url","name"],r),o}function UR(i,n){const o={},r=f(i,["name"]);return r!=null&&h(o,["_url","name"],r),o}function LR(i,n,o){const r={},c=f(i,["pageSize"]);n!==void 0&&c!=null&&h(n,["_query","pageSize"],c);const p=f(i,["pageToken"]);n!==void 0&&p!=null&&h(n,["_query","pageToken"],p);const m=f(i,["filter"]);return n!==void 0&&m!=null&&h(n,["_query","filter"],m),r}function kR(i,n,o){const r={},c=f(i,["pageSize"]);n!==void 0&&c!=null&&h(n,["_query","pageSize"],c);const p=f(i,["pageToken"]);n!==void 0&&p!=null&&h(n,["_query","pageToken"],p);const m=f(i,["filter"]);return n!==void 0&&m!=null&&h(n,["_query","filter"],m),r}function PR(i,n){const o={},r=f(i,["config"]);return r!=null&&LR(r,o),o}function GR(i,n){const o={},r=f(i,["config"]);return r!=null&&kR(r,o),o}function HR(i,n){const o={},r=f(i,["sdkHttpResponse"]);r!=null&&h(o,["sdkHttpResponse"],r);const c=f(i,["nextPageToken"]);c!=null&&h(o,["nextPageToken"],c);const p=f(i,["tunedModels"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(T=>lv(T))),h(o,["tuningJobs"],m)}return o}function qR(i,n){const o={},r=f(i,["sdkHttpResponse"]);r!=null&&h(o,["sdkHttpResponse"],r);const c=f(i,["nextPageToken"]);c!=null&&h(o,["nextPageToken"],c);const p=f(i,["tuningJobs"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(T=>Cd(T))),h(o,["tuningJobs"],m)}return o}function BR(i,n){const o={},r=f(i,["name"]);r!=null&&h(o,["model"],r);const c=f(i,["name"]);return c!=null&&h(o,["endpoint"],c),o}function VR(i,n){const o={};if(f(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(i,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=f(i,["examples"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(p=>p)),h(o,["examples","examples"],c)}return o}function zR(i,n,o){const r={};let c=f(o,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const m=f(i,["gcsUri"]);n!==void 0&&m!=null&&h(n,["supervisedTuningSpec","trainingDatasetUri"],m)}else if(c==="PREFERENCE_TUNING"){const m=f(i,["gcsUri"]);n!==void 0&&m!=null&&h(n,["preferenceOptimizationSpec","trainingDatasetUri"],m)}else if(c==="DISTILLATION"){const m=f(i,["gcsUri"]);n!==void 0&&m!=null&&h(n,["distillationSpec","promptDatasetUri"],m)}let p=f(o,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const m=f(i,["vertexDatasetResource"]);n!==void 0&&m!=null&&h(n,["supervisedTuningSpec","trainingDatasetUri"],m)}else if(p==="PREFERENCE_TUNING"){const m=f(i,["vertexDatasetResource"]);n!==void 0&&m!=null&&h(n,["preferenceOptimizationSpec","trainingDatasetUri"],m)}else if(p==="DISTILLATION"){const m=f(i,["vertexDatasetResource"]);n!==void 0&&m!=null&&h(n,["distillationSpec","promptDatasetUri"],m)}if(f(i,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function lv(i,n){const o={},r=f(i,["sdkHttpResponse"]);r!=null&&h(o,["sdkHttpResponse"],r);const c=f(i,["name"]);c!=null&&h(o,["name"],c);const p=f(i,["state"]);p!=null&&h(o,["state"],Cy(p));const m=f(i,["createTime"]);m!=null&&h(o,["createTime"],m);const T=f(i,["tuningTask","startTime"]);T!=null&&h(o,["startTime"],T);const E=f(i,["tuningTask","completeTime"]);E!=null&&h(o,["endTime"],E);const S=f(i,["updateTime"]);S!=null&&h(o,["updateTime"],S);const C=f(i,["description"]);C!=null&&h(o,["description"],C);const M=f(i,["baseModel"]);M!=null&&h(o,["baseModel"],M);const w=f(i,["_self"]);return w!=null&&h(o,["tunedModel"],BR(w)),o}function Cd(i,n){const o={},r=f(i,["sdkHttpResponse"]);r!=null&&h(o,["sdkHttpResponse"],r);const c=f(i,["name"]);c!=null&&h(o,["name"],c);const p=f(i,["state"]);p!=null&&h(o,["state"],Cy(p));const m=f(i,["createTime"]);m!=null&&h(o,["createTime"],m);const T=f(i,["startTime"]);T!=null&&h(o,["startTime"],T);const E=f(i,["endTime"]);E!=null&&h(o,["endTime"],E);const S=f(i,["updateTime"]);S!=null&&h(o,["updateTime"],S);const C=f(i,["error"]);C!=null&&h(o,["error"],C);const M=f(i,["description"]);M!=null&&h(o,["description"],M);const w=f(i,["baseModel"]);w!=null&&h(o,["baseModel"],w);const D=f(i,["tunedModel"]);D!=null&&h(o,["tunedModel"],D);const B=f(i,["preTunedModel"]);B!=null&&h(o,["preTunedModel"],B);const Q=f(i,["supervisedTuningSpec"]);Q!=null&&h(o,["supervisedTuningSpec"],Q);const Y=f(i,["preferenceOptimizationSpec"]);Y!=null&&h(o,["preferenceOptimizationSpec"],Y);const $=f(i,["distillationSpec"]);$!=null&&h(o,["distillationSpec"],$);const ae=f(i,["tuningDataStats"]);ae!=null&&h(o,["tuningDataStats"],ae);const oe=f(i,["encryptionSpec"]);oe!=null&&h(o,["encryptionSpec"],oe);const ue=f(i,["partnerModelTuningSpec"]);ue!=null&&h(o,["partnerModelTuningSpec"],ue);const ie=f(i,["customBaseModel"]);ie!=null&&h(o,["customBaseModel"],ie);const V=f(i,["experiment"]);V!=null&&h(o,["experiment"],V);const ce=f(i,["labels"]);ce!=null&&h(o,["labels"],ce);const xe=f(i,["outputUri"]);xe!=null&&h(o,["outputUri"],xe);const ye=f(i,["pipelineJob"]);ye!=null&&h(o,["pipelineJob"],ye);const Ie=f(i,["serviceAccount"]);Ie!=null&&h(o,["serviceAccount"],Ie);const Ne=f(i,["tunedModelDisplayName"]);Ne!=null&&h(o,["tunedModelDisplayName"],Ne);const Xe=f(i,["veoTuningSpec"]);return Xe!=null&&h(o,["veoTuningSpec"],Xe),o}function FR(i,n){const o={},r=f(i,["sdkHttpResponse"]);r!=null&&h(o,["sdkHttpResponse"],r);const c=f(i,["name"]);c!=null&&h(o,["name"],c);const p=f(i,["metadata"]);p!=null&&h(o,["metadata"],p);const m=f(i,["done"]);m!=null&&h(o,["done"],m);const T=f(i,["error"]);return T!=null&&h(o,["error"],T),o}function ad(i,n){const o={},r=f(i,["gcsUri"]);r!=null&&h(o,["validationDatasetUri"],r);const c=f(i,["vertexDatasetResource"]);return c!=null&&h(o,["validationDatasetUri"],c),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JR extends Yi{constructor(n){super(),this.apiClient=n,this.list=async(o={})=>new bs(Ji.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(o),o),this.get=async o=>await this.getInternal(o),this.tune=async o=>{var r;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const c={tunedModelName:o.baseModel};!((r=o.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(c.checkpointId=o.config.preTunedModelCheckpointId);const p=Object.assign(Object.assign({},o),{preTunedModel:c});return p.baseModel=void 0,await this.tuneInternal(p)}else{const c=Object.assign({},o);return await this.tuneInternal(c)}else{const c=Object.assign({},o),p=await this.tuneMldevInternal(c);let m="";return p.metadata!==void 0&&p.metadata.tunedModel!==void 0?m=p.metadata.tunedModel:p.name!==void 0&&p.name.includes("/operations/")&&(m=p.name.split("/operations/")[0]),{name:m,state:cd.JOB_STATE_QUEUED}}}}async getInternal(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=UR(n);return T=pe("{name}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>Cd(C))}else{const S=DR(n);return T=pe("{name}",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"GET",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>lv(C))}}async listInternal(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=GR(n);return T=pe("tuningJobs",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=qR(C),w=new km;return Object.assign(w,M),w})}else{const S=PR(n);return T=pe("tunedModels",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"GET",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=HR(C),w=new km;return Object.assign(w,M),w})}}async cancel(n){var o,r,c,p;let m,T="",E={};if(this.apiClient.isVertexAI()){const S=bR(n);return T=pe("{name}:cancel",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=wR(C),w=new Pm;return Object.assign(w,M),w})}else{const S=RR(n);return T=pe("{name}:cancel",S._url),E=S._query,delete S._url,delete S._query,m=this.apiClient.request({path:T,queryParams:E,body:JSON.stringify(S),httpMethod:"POST",httpOptions:(c=n.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(p=n.config)===null||p===void 0?void 0:p.abortSignal}).then(C=>C.json().then(M=>{const w=M;return w.sdkHttpResponse={headers:C.headers},w})),m.then(C=>{const M=MR(C),w=new Pm;return Object.assign(w,M),w})}}async tuneInternal(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI()){const T=OR(n,n);return p=pe("tuningJobs",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json().then(S=>{const C=S;return C.sdkHttpResponse={headers:E.headers},C})),c.then(E=>Cd(E))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(n){var o,r;let c,p="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const T=NR(n);return p=pe("tunedModels",T._url),m=T._query,delete T._url,delete T._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(T),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(E=>E.json().then(S=>{const C=S;return C.sdkHttpResponse={headers:E.headers},C})),c.then(E=>FR(E))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YR{async download(n,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const KR=1024*1024*8,QR=3,XR=1e3,WR=2,rc="x-goog-upload-status";async function ZR(i,n,o){var r;const c=await av(i,n,o),p=await(c==null?void 0:c.json());if(((r=c==null?void 0:c.headers)===null||r===void 0?void 0:r[rc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return p.file}async function $R(i,n,o){var r;const c=await av(i,n,o),p=await(c==null?void 0:c.json());if(((r=c==null?void 0:c.headers)===null||r===void 0?void 0:r[rc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const m=yy(p),T=new kd;return Object.assign(T,m),T}async function av(i,n,o){var r,c;let p=0,m=0,T=new dd(new Response),E="upload";for(p=i.size;m<p;){const S=Math.min(KR,p-m),C=i.slice(m,m+S);m+S>=p&&(E+=", finalize");let M=0,w=XR;for(;M<QR&&(T=await o.request({path:"",body:C,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:n,headers:{"X-Goog-Upload-Command":E,"X-Goog-Upload-Offset":String(m),"Content-Length":String(S)}}}),!(!((r=T==null?void 0:T.headers)===null||r===void 0)&&r[rc]));)M++,await eb(w),w=w*WR;if(m+=S,((c=T==null?void 0:T.headers)===null||c===void 0?void 0:c[rc])!=="active")break;if(p<=m)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return T}async function jR(i){return{size:i.size,type:i.type}}function eb(i){return new Promise(n=>setTimeout(n,i))}class tb{async upload(n,o,r){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return await ZR(n,o,r)}async uploadToFileSearchStore(n,o,r){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return await $R(n,o,r)}async stat(n){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return await jR(n)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nb{create(n,o,r){return new ib(n,o,r)}}class ib{constructor(n,o,r){this.url=n,this.headers=o,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(n){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(n)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cy="x-goog-api-key";class ob{constructor(n){this.apiKey=n}async addAuthHeaders(n,o){if(n.get(cy)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");n.append(cy,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sb="gl-node/";class rb{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const n=this.httpOptions;n!=null&&n.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new Dt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:n==null?void 0:n.timeout});return this._interactions=o.interactions,this._interactions}constructor(n){var o;if(n.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(n.project||n.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=n.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=n.apiKey;const r=W0(n.httpOptions,n.vertexai,void 0,void 0);r&&(n.httpOptions?n.httpOptions.baseUrl=r:n.httpOptions={baseUrl:r}),this.apiVersion=n.apiVersion,this.httpOptions=n.httpOptions;const c=new ob(this.apiKey);this.apiClient=new jC({auth:c,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:sb+"web",uploader:new tb,downloader:new YR}),this.models=new vA(this.apiClient),this.live=new dA(this.apiClient,c,new nb),this.batches=new bS(this.apiClient),this.chats=new l_(this.models,this.apiClient),this.caches=new o_(this.apiClient),this.files=new T_(this.apiClient),this.operations=new TA(this.apiClient),this.authTokens=new LA(this.apiClient),this.tunings=new JR(this.apiClient),this.fileSearchStores=new zA(this.apiClient)}}var lb=my(),ju={exports:{}};/*@license Copyright 2015-2022 Ably Real-time Ltd (ably.com)

Ably JavaScript Library v2.17.1
https://github.com/ably/ably-js

Released under the Apache Licence v2.0*/var ab=ju.exports,fy;function ub(){return fy||(fy=1,(function(i,n){(function(o,r){i.exports=r()})(ab,()=>{var o={},r={exports:o},c=Object.defineProperty,p=Object.defineProperties,m=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertyNames,S=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,w=(l,a,d)=>a in l?c(l,a,{enumerable:!0,configurable:!0,writable:!0,value:d}):l[a]=d,D=(l,a)=>{for(var d in a||(a={}))C.call(a,d)&&w(l,d,a[d]);if(S)for(var d of S(a))M.call(a,d)&&w(l,d,a[d]);return l},B=(l,a)=>p(l,T(a)),Q=(l,a)=>{var d={};for(var v in l)C.call(l,v)&&a.indexOf(v)<0&&(d[v]=l[v]);if(l!=null&&S)for(var v of S(l))a.indexOf(v)<0&&M.call(l,v)&&(d[v]=l[v]);return d},Y=(l,a)=>{for(var d in a)c(l,d,{get:a[d],enumerable:!0})},$=(l,a,d,v)=>{if(a&&typeof a=="object"||typeof a=="function")for(let _ of E(a))!C.call(l,_)&&_!==d&&c(l,_,{get:()=>a[_],enumerable:!(v=m(a,_))||v.enumerable});return l},ae=l=>$(c({},"__esModule",{value:!0}),l),oe=function(l,a){this[0]=l,this[1]=a},ue=(l,a,d)=>{var v=(I,N,H,P)=>{try{var X=d[I](N),Z=(N=X.value)instanceof oe,se=X.done;Promise.resolve(Z?N[0]:N).then(W=>Z?v(I==="return"?I:"next",N[1]?{done:W.done,value:W.value}:W,H,P):H({value:W,done:se})).catch(W=>v("throw",W,H,P))}catch(W){P(W)}},_=I=>A[I]=N=>new Promise((H,P)=>v(I,N,H,P)),A={};return d=d.apply(l,a),A[Symbol.asyncIterator]=()=>A,_("next"),_("throw"),_("return"),A},ie={};Y(ie,{ErrorInfo:()=>O,Realtime:()=>St,Rest:()=>hl,default:()=>ru,makeProtocolMessageFromDeserialized:()=>Ys,msgpack:()=>ar}),r.exports=ae(ie);var V=class{},ce=typeof ko<"u"?ko:typeof window<"u"?window:self;function xe(l,a){return`${l}`.padStart(a?3:2,"0")}function ye(l){return V.Config.logTimestamps?function(a){const d=new Date;l(xe(d.getHours())+":"+xe(d.getMinutes())+":"+xe(d.getSeconds())+"."+xe(d.getMilliseconds(),1)+" "+a)}:function(a){l(a)}}var Ie=()=>{var l;let a,d;return typeof((l=ce==null?void 0:ce.console)==null?void 0:l.log)=="function"?(a=function(...v){console.log.apply(console,v)},d=console.warn?function(...v){console.warn.apply(console,v)}:a):a=d=function(){},[a,d].map(ye)},Ne=class ua{constructor(){this.deprecated=(a,d)=>{this.deprecationWarning(`${a} is deprecated and will be removed in a future version. ${d}`)},this.shouldLog=a=>a<=this.logLevel,this.setLog=(a,d)=>{a!==void 0&&(this.logLevel=a),d!==void 0&&(this.logHandler=this.logErrorHandler=d)},this.logLevel=ua.defaultLogLevel,this.logHandler=ua.defaultLogHandler,this.logErrorHandler=ua.defaultLogErrorHandler}static initLogHandlers(){const[a,d]=Ie();this.defaultLogHandler=a,this.defaultLogErrorHandler=d,this.defaultLogger=new ua}static logActionNoStrip(a,d,v,_){a.logAction(d,v,_)}logAction(a,d,v){this.shouldLog(a)&&(a===1?this.logErrorHandler:this.logHandler)("Ably: "+d+": "+v,a)}renamedClientOption(a,d){this.deprecationWarning(`The \`${a}\` client option has been renamed to \`${d}\`. Please update your code to use \`${d}\` instead. \`${a}\` will be removed in a future version.`)}renamedMethod(a,d,v){this.deprecationWarning(`\`${a}\`s \`${d}\` method has been renamed to \`${v}\`. Please update your code to use \`${v}\` instead. \`${d}\` will be removed in a future version.`)}deprecationWarning(a){this.shouldLog(1)&&this.logErrorHandler(`Ably: Deprecation warning - ${a}`,1)}};Ne.defaultLogLevel=1,Ne.LOG_NONE=0,Ne.LOG_ERROR=1,Ne.LOG_MAJOR=2,Ne.LOG_MINOR=3,Ne.LOG_MICRO=4,Ne.logAction=(l,a,d,v)=>{Ne.logActionNoStrip(l,a,d,v)};var Xe=Ne,R=Xe,Ve={};Y(Ve,{Format:()=>Dr,allSame:()=>hc,allToLowerCase:()=>yi,allToUpperCase:()=>qt,arrChooseN:()=>ga,arrDeleteValue:()=>Ms,arrEquals:()=>Yo,arrIntersect:()=>Qi,arrIntersectOb:()=>qo,arrPopRandomElement:()=>Bo,arrWithoutValue:()=>ha,cheapRandStr:()=>zo,containsValue:()=>Ut,copy:()=>Be,createMissingPluginError:()=>An,dataSizeBytes:()=>Lr,decodeBody:()=>Et,encodeBody:()=>gn,ensureArray:()=>G,forInOwnNonNullProperties:()=>xs,getBackoffCoefficient:()=>Gn,getGlobalObject:()=>Pr,getJitterCoefficient:()=>Bt,getRetryTime:()=>kr,inherits:()=>ze,inspectBody:()=>pa,inspectError:()=>Oe,intersect:()=>lt,isEmpty:()=>de,isErrorInfoOrPartialErrorInfo:()=>Ur,isNil:()=>he,isObject:()=>te,keysArray:()=>pn,listenerToAsyncIterator:()=>pc,matchDerivedChannel:()=>Jo,mixin:()=>fe,parseQueryString:()=>Is,prototypicalClone:()=>Le,randomString:()=>Fo,shallowClone:()=>Me,shallowEquals:()=>ma,stringifyValues:()=>Vo,throwMissingPluginError:()=>mt,toBase64:()=>vi,toQueryString:()=>mi,valuesArray:()=>ws,whenPromiseSettles:()=>Ht,withTimeoutAsync:()=>Xi});function gt(l){let a="["+l.constructor.name;return l.message&&(a+=": "+l.message),l.statusCode&&(a+="; statusCode="+l.statusCode),l.code&&(a+="; code="+l.code),l.cause&&(a+="; cause="+Oe(l.cause)),l.href&&!(l.message&&l.message.indexOf("help.ably.io")>-1)&&(a+="; see "+l.href+" "),a+="]",a}var O=class Ad extends Error{constructor(a,d,v,_){super(a),typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(this,Ad.prototype),this.code=d,this.statusCode=v,this.cause=_}toString(){return gt(this)}static fromValues(a){const{message:d,code:v,statusCode:_}=a;if(typeof d!="string"||typeof v!="number"||typeof _!="number")throw new Error("ErrorInfo.fromValues(): invalid values: "+V.Config.inspect(a));const A=Object.assign(new Ad(d,v,_),a);return A.code&&!A.href&&(A.href="https://help.ably.io/error/"+A.code),A}},re=class Rd extends Error{constructor(a,d,v,_){super(a),typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(this,Rd.prototype),this.code=d,this.statusCode=v,this.cause=_}toString(){return gt(this)}static fromValues(a){const{message:d,code:v,statusCode:_}=a;if(typeof d!="string"||!he(v)&&typeof v!="number"||!he(_)&&typeof _!="number")throw new Error("PartialErrorInfo.fromValues(): invalid values: "+V.Config.inspect(a));const A=Object.assign(new Rd(d,v,_),a);return A.code&&!A.href&&(A.href="https://help.ably.io/error/"+A.code),A}};function Te(l){return Math.floor(Math.random()*l.length)}function fe(l,...a){for(let d=0;d<a.length;d++){const v=a[d];if(!v)break;for(const _ in v)Object.prototype.hasOwnProperty.call(v,_)&&(l[_]=v[_])}return l}function Be(l){return fe({},l)}function G(l){return he(l)?[]:Array.isArray(l)?l:[l]}function te(l){return Object.prototype.toString.call(l)=="[object Object]"}function de(l){for(const a in l)return!1;return!0}function he(l){return l==null}function Me(l){const a=new Object;for(const d in l)a[d]=l[d];return a}function Le(l,a){class d{}d.prototype=l;const v=new d;return a&&fe(v,a),v}var ze=function(l,a){if(V.Config.inherits){V.Config.inherits(l,a);return}l.super_=a,l.prototype=Le(a.prototype,{constructor:l})};function Ut(l,a){for(const d in l)if(l[d]==a)return!0;return!1}function lt(l,a){return Array.isArray(a)?Qi(l,a):qo(l,a)}function Qi(l,a){const d=[];for(let v=0;v<l.length;v++){const _=l[v];a.indexOf(_)!=-1&&d.push(_)}return d}function qo(l,a){const d=[];for(let v=0;v<l.length;v++){const _=l[v];_ in a&&d.push(_)}return d}function Ms(l,a){const d=l.indexOf(a),v=d!=-1;return v&&l.splice(d,1),v}function ha(l,a){const d=l.slice();return Ms(d,a),d}function pn(l,a){const d=[];for(const v in l)a&&!Object.prototype.hasOwnProperty.call(l,v)||d.push(v);return d}function ws(l,a){const d=[];for(const v in l)a&&!Object.prototype.hasOwnProperty.call(l,v)||d.push(l[v]);return d}function xs(l,a){for(const d in l)Object.prototype.hasOwnProperty.call(l,d)&&l[d]&&a(d)}function hc(l,a){if(l.length===0)return!0;const d=l[0][a];return l.every(function(v){return v[a]===d})}var Dr=(l=>(l.msgpack="msgpack",l.json="json",l))(Dr||{});function Bo(l){return l.splice(Te(l),1)[0]}function mi(l){const a=[];if(l)for(const d in l)a.push(encodeURIComponent(d)+"="+encodeURIComponent(l[d]));return a.length?"?"+a.join("&"):""}function Vo(l){return Object.fromEntries(Object.entries(l).map(([a,d])=>[a,String(d)]))}function Is(l){let a;const d=/([^?&=]+)=?([^&]*)/g,v={};for(;a=d.exec(l);)v[decodeURIComponent(a[1])]=decodeURIComponent(a[2]);return v}function Ur(l){return typeof l=="object"&&l!==null&&(l instanceof O||l instanceof re)}function Oe(l){var a,d;return l instanceof Error||((a=l==null?void 0:l.constructor)==null?void 0:a.name)==="ErrorInfo"||((d=l==null?void 0:l.constructor)==null?void 0:d.name)==="PartialErrorInfo"?l.toString():V.Config.inspect(l)}function pa(l){return V.BufferUtils.isBuffer(l)?l.toString():typeof l=="string"?l:V.Config.inspect(l)}function Lr(l){if(V.BufferUtils.isBuffer(l))return V.BufferUtils.byteLength(l);if(typeof l=="string")return V.Config.stringByteSize(l);if(typeof l=="number")return 8;if(typeof l=="boolean")return 1;throw new Error(`Expected input of Utils.dataSizeBytes to be a string, a number, a boolean or a buffer, but was: ${typeof l}`)}function zo(){return String(Math.random()).substr(2)}var Fo=async l=>{const a=await V.Config.getRandomArrayBuffer(l);return V.BufferUtils.base64Encode(a)};function ga(l,a){const d=Math.min(a,l.length),v=l.slice(),_=[];for(let A=0;A<d;A++)_.push(Bo(v));return _}function Ht(l,a){l.then(d=>{a==null||a(null,d)}).catch(d=>{a==null||a(d)})}function Et(l,a,d){return d=="msgpack"?(a||mt("MsgPack"),a.decode(l)):JSON.parse(String(l))}function gn(l,a,d){return d=="msgpack"?(a||mt("MsgPack"),a.encode(l,!0)):JSON.stringify(l)}function yi(l){return l.map(function(a){return a&&a.toLowerCase()})}function qt(l){return l.map(function(a){return a&&a.toUpperCase()})}function Gn(l){return Math.min((l+2)/3,2)}function Bt(){return 1-Math.random()*.2}function kr(l,a){return l*Gn(a)*Bt()}function Pr(){return typeof ko<"u"?ko:typeof window<"u"?window:self}function ma(l,a){return Object.keys(l).every(d=>l[d]===a[d])&&Object.keys(a).every(d=>a[d]===l[d])}function Jo(l){const a=/^(\[([^?]*)(?:(.*))\])?(.+)$/,d=l.match(a);if(!d||!d.length||d.length<5)throw new O("regex match failed",400,40010);if(d[2])throw new O(`cannot use a derived option with a ${d[2]} channel`,400,40010);return{qualifierParam:d[3]||"",channelName:d[4]}}function vi(l){const a=V.BufferUtils,d=a.utf8Encode(l);return a.base64Encode(d)}function Yo(l,a){return l.length===a.length&&l.every(function(d,v){return d===a[v]})}function An(l){return new O(`${l} plugin not provided`,40019,400)}function mt(l){throw An(l)}async function Xi(l,a=5e3,d="Timeout expired"){const v=new O(d,5e4,500);return Promise.race([l,new Promise((_,A)=>setTimeout(()=>A(v),a))])}function pc(l){return ue(this,null,function*(){const a=[];let d=null;const v=l(_=>{if(d){const A=d;d=null,A(_)}else a.push(_)});try{for(;;)if(a.length>0)yield a.shift();else{if(d)throw new O("Concurrent next() calls are not supported",4e4,400);yield yield new oe(new Promise(A=>{d=A}))}}finally{v()}})}var Gr="2.17.1",Hr="ably-js/"+Gr,Lt={ENDPOINT:"main",ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["main.a.fallback.ably-realtime.com","main.b.fallback.ably-realtime.com","main.c.fallback.ably-realtime.com","main.d.fallback.ably-realtime.com","main.e.fallback.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:1e4,httpMaxRetryDuration:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,webSocketConnectTimeout:1e4,webSocketSlowTimeout:4e3},httpMaxRetryCount:3,maxMessageSize:65536,version:Gr,protocolVersion:5,agent:Hr,getPort:gc,getHttpScheme:ya,getPrimaryDomainFromEndpoint:Br,getEndpointFallbackHosts:Ns,getFallbackHosts:Vr,getHosts:va,checkHost:Hn,objectifyOptions:Wi,normaliseOptions:mc,defaultGetHeaders:Jr,defaultPostHeaders:$i};function gc(l,a){return a||l.tls?l.tlsPort:l.port}function ya(l){return l.tls?"https://":"http://"}function qr(l){return l.includes(".")||l.includes("::")||l==="localhost"}function Br(l){return qr(l)?l:l.startsWith("nonprod:")?`${l.replace("nonprod:","")}.realtime.ably-nonprod.net`:`${l}.realtime.ably.net`}function Ns(l){if(qr(l))return[];if(l.startsWith("nonprod:")){const a=l.replace("nonprod:","");return Os(a,"ably-realtime-nonprod.com")}return Os(l,"ably-realtime.com")}function Os(l,a){return["a","b","c","d","e"].map(d=>`${l}.${d}.fallback.${a}`)}function Vr(l){const a=l.fallbackHosts,d=typeof l.httpMaxRetryCount<"u"?l.httpMaxRetryCount:Lt.httpMaxRetryCount;return a?ga(a,d):[]}function va(l){return[l.primaryDomain].concat(Vr(l))}function Hn(l){if(typeof l!="string")throw new O("host must be a string; was a "+typeof l,4e4,400);if(!l.length)throw new O("host must not be zero-length",4e4,400)}function bt(l){const a={};for(const d in Lt.TIMEOUTS)a[d]=l[d]||Lt.TIMEOUTS[d];return a}function It(l){let a=Lt.agent;if(l.agents)for(var d in l.agents)a+=" "+d+"/"+l.agents[d];return a}function Wi(l,a,d,v,_){if(l===void 0){const I=a?`${d} must be initialized with either a client options object, an Ably API key, or an Ably Token`:`${d} must be initialized with a client options object`;throw R.logAction(v,R.LOG_ERROR,`${d}()`,I),new Error(I)}let A;if(typeof l=="string")if(l.indexOf(":")==-1){if(!a){const I=`${d} cannot be initialized with just an Ably Token; you must provide a client options object with a \`plugins\` property. (Set this Ably Token as the objects \`token\` property.)`;throw R.logAction(v,R.LOG_ERROR,`${d}()`,I),new Error(I)}A={token:l}}else{if(!a){const I=`${d} cannot be initialized with just an Ably API key; you must provide a client options object with a \`plugins\` property. (Set this Ably API key as the objects \`key\` property.)`;throw R.logAction(v,R.LOG_ERROR,`${d}()`,I),new Error(I)}A={key:l}}else A=l;return _&&(A=B(D({},A),{plugins:D(D({},_),A.plugins)})),A}function zr(l){if(l.endpoint&&(l.environment||l.restHost||l.realtimeHost))throw new O("The `endpoint` option cannot be used in conjunction with the `environment`, `restHost`, or `realtimeHost` options.",40106,400);if(l.environment&&(l.restHost||l.realtimeHost))throw new O("The `environment` option cannot be used in conjunction with the `restHost`, or `realtimeHost` options.",40106,400)}function mc(l,a,d){const v=d??R.defaultLogger;l.environment&&v.deprecated("The `environment` client option","Use the `endpoint` client option instead."),l.restHost&&v.deprecated("The `restHost` client option","Use the `endpoint` client option instead."),l.realtimeHost&&v.deprecated("The `realtimeHost` client option","Use the `endpoint` client option instead."),zr(l),typeof l.recover=="function"&&l.closeOnUnload===!0&&(R.logAction(v,R.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),l.recover=void 0),"closeOnUnload"in l||(l.closeOnUnload=!l.recover),"queueMessages"in l||(l.queueMessages=!0);const _=l.endpoint||Lt.ENDPOINT;!l.fallbackHosts&&!l.restHost&&!l.realtimeHost&&!l.port&&!l.tlsPort&&(l.fallbackHosts=Ns(l.environment||_));const A=l.environment&&`${l.environment}.realtime.ably.net`,N=l.restHost||l.realtimeHost||A||Br(_);(l.fallbackHosts||[]).concat(N).forEach(Hn),l.port=l.port||Lt.PORT,l.tlsPort=l.tlsPort||Lt.TLS_PORT,"tls"in l||(l.tls=!0);const H=bt(l);a?"useBinaryProtocol"in l?l.useBinaryProtocol=V.Config.supportsBinary&&l.useBinaryProtocol:l.useBinaryProtocol=V.Config.preferBinary:l.useBinaryProtocol=!1;const P={};l.clientId&&(P["X-Ably-ClientId"]=V.BufferUtils.base64Encode(V.BufferUtils.utf8Encode(l.clientId))),"idempotentRestPublishing"in l||(l.idempotentRestPublishing=!0);let X=null,Z=l.connectivityCheckUrl;if(l.connectivityCheckUrl){let[W,le]=l.connectivityCheckUrl.split("?");X=le?Is(le):{},W.indexOf("://")===-1&&(W="https://"+W),Z=W}let se=l.wsConnectivityCheckUrl;return se&&se.indexOf("://")===-1&&(se="wss://"+se),B(D({},l),{primaryDomain:N,maxMessageSize:l.maxMessageSize||Lt.maxMessageSize,timeouts:H,connectivityCheckParams:X,connectivityCheckUrl:Z,wsConnectivityCheckUrl:se,headers:P})}function Ds(l,a,d){const v=d||{};if(v.cipher){l||mt("Crypto");const _=l.getCipher(v.cipher,a);v.cipher=_.cipherParams,v.channelCipher=_.cipher}else"cipher"in v&&(v.cipher=void 0,v.channelCipher=null);return v}var Fr={json:"application/json",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack",text:"text/plain"},Zi={protocolVersion:Lt.protocolVersion};function Jr(l,{format:a,protocolVersion:d=Zi.protocolVersion}={}){return{accept:Fr[a??(l.useBinaryProtocol?"msgpack":"json")],"X-Ably-Version":d.toString(),"Ably-Agent":It(l)}}function $i(l,{format:a,protocolVersion:d=Zi.protocolVersion}={}){const v=Fr[a??(l.useBinaryProtocol?"msgpack":"json")];return{accept:v,"content-type":v,"X-Ably-Version":d.toString(),"Ably-Agent":It(l)}}var Se=Lt;function Ko(l){return Object.assign(Lt,l)}var ji=class uv{constructor(a,d){this.logger=a,this.members=d||[]}call(a,d){for(const v of this.members)if(v)try{v(a,d)}catch(_){R.logAction(this.logger,R.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+_+"; stack = "+_.stack)}}push(...a){this.members.push(...a)}createPromise(){return new Promise((a,d)=>{this.push((v,_)=>{v?d(v):a(_)})})}resolveAll(a){this.call(null,a)}rejectAll(a){this.call(a)}static create(a,d){const v=new uv(a,d);return Object.assign((_,A)=>v.call(_,A),{push:_=>v.push(_),createPromise:()=>v.createPromise(),resolveAll:_=>v.resolveAll(_),rejectAll:_=>v.rejectAll(_)})}},yt=ji,Yr=(l=>(l.Get="get",l.Delete="delete",l.Post="post",l.Put="put",l.Patch="patch",l))(Yr||{}),at=Yr,$n=(l=>(l[l.Success=200]="Success",l[l.NoContent=204]="NoContent",l[l.BadRequest=400]="BadRequest",l[l.Unauthorized=401]="Unauthorized",l[l.Forbidden=403]="Forbidden",l[l.RequestTimeout=408]="RequestTimeout",l[l.InternalServerError=500]="InternalServerError",l))($n||{});function eo(l){return l>=200&&l<400}var Us=$n,Ls=Math.pow(2,17);function Ta(){return("000000"+Math.floor(Math.random()*1e16)).slice(-16)}function yc(l){return!!l.connection}function Qo(l){return Ur(l)?(l.code||(l.statusCode===403?l.code=40300:(l.code=40170,l.statusCode=401)),l):new O(Oe(l),l.code||40170,l.statusCode||401)}var ks=(l,a)=>{const d=V.BufferUtils,v=d.utf8Encode(l),_=d.utf8Encode(a),A=d.hmacSha256(v,_);return d.base64Encode(A)};function Rn(l){if(!l)return"";typeof l=="string"&&(l=JSON.parse(l));const a=Object.create(null),d=pn(l,!0);if(!d)return"";d.sort();for(let v=0;v<d.length;v++)a[d[v]]=l[d[v]].sort();return JSON.stringify(a)}function Qt(l,a){if(l.authCallback)R.logAction(a,R.LOG_MINOR,"Auth()","using token auth with authCallback");else if(l.authUrl)R.logAction(a,R.LOG_MINOR,"Auth()","using token auth with authUrl");else if(l.key)R.logAction(a,R.LOG_MINOR,"Auth()","using token auth with client-side signing");else if(l.tokenDetails)R.logAction(a,R.LOG_MINOR,"Auth()","using token auth with supplied token only");else{const d="authOptions must include valid authentication parameters";throw R.logAction(a,R.LOG_ERROR,"Auth()",d),new Error(d)}}function Sa(l){return"useTokenAuth"in l&&!l.useTokenAuth}function _a(l){return l.useTokenAuth||!Sa(l)&&(l.authCallback||l.authUrl||l.token||l.tokenDetails)}function Kr(l){return!l.key&&!l.authCallback&&!l.authUrl}var Ea=0;function Ps(){return Ea++}var vc=class{constructor(l,a){if(this.authOptions={},this.client=l,this.tokenParams=a.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,_a(a))Kr(a)&&R.logAction(this.logger,R.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(a.defaultTokenParams,a),Qt(this.authOptions,this.logger);else{if(!a.key){const d="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)";throw R.logAction(this.logger,R.LOG_ERROR,"Auth()",d),new O(d,40160,401)}R.logAction(this.logger,R.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(a)}}get logger(){return this.client.logger}async authorize(l,a){if(a&&a.key&&this.authOptions.key!==a.key)throw new O("Unable to update auth options with incompatible key",40102,401);try{let d=await this._forceNewToken(l??null,a??null);return yc(this.client)?new Promise((v,_)=>{this.client.connection.connectionManager.onAuthUpdated(d,(A,I)=>A?_(A):v(I))}):d}catch(d){throw this.client.connection&&d.statusCode===Us.Forbidden&&this.client.connection.connectionManager.actOnErrorFromAuthorize(d),d}}async _forceNewToken(l,a){this.tokenDetails=null,this._saveTokenOptions(l,a),Qt(this.authOptions,this.logger);try{return this._ensureValidAuthCredentials(!0)}finally{delete this.tokenParams.timestamp,delete this.authOptions.queryTime}}async requestToken(l,a){const d=a||this.authOptions,v=l||Be(this.tokenParams);let _,A=this.client;if(d.authCallback)R.logAction(this.logger,R.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),_=d.authCallback;else if(d.authUrl)R.logAction(this.logger,R.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),_=(N,H)=>{const P=fe({accept:"application/json, text/plain"},d.authHeaders),X=d.authMethod&&d.authMethod.toLowerCase()==="post";let Z;const se=d.authUrl.indexOf("?");se>-1&&(Z=Is(d.authUrl.slice(se)),d.authUrl=d.authUrl.slice(0,se),X||(d.authParams=fe(Z,d.authParams)));const W=fe({},d.authParams||{},N),le=ge=>{var Ce,qe;let Ke=(Ce=ge.body)!=null?Ce:null,et=null;if(ge.error)R.logAction(this.logger,R.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+Oe(ge.error));else{const Ct=(qe=ge.headers["content-type"])!=null?qe:null;Array.isArray(Ct)?et=Ct.join(", "):et=Ct,R.logAction(this.logger,R.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+et+"; body: "+pa(Ke))}if(ge.error){H(ge.error,null);return}if(ge.unpacked){H(null,Ke);return}if(V.BufferUtils.isBuffer(Ke)&&(Ke=Ke.toString()),!et){H(new O("authUrl response is missing a content-type header",40170,401),null);return}const Re=et.indexOf("application/json")>-1,kt=et.indexOf("text/plain")>-1||et.indexOf("application/jwt")>-1;if(!Re&&!kt){H(new O("authUrl responded with unacceptable content-type "+et+", should be either text/plain, application/jwt or application/json",40170,401),null);return}if(Re){if(Ke.length>Ls){H(new O("authUrl response exceeded max permitted length",40170,401),null);return}try{Ke=JSON.parse(Ke)}catch(Ct){H(new O("Unexpected error processing authURL response; err = "+Ct.message,40170,401),null);return}}H(null,Ke,et)};if(R.logAction(this.logger,R.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+d.authUrl+"; Params: "+JSON.stringify(W)+"; method: "+(X?"POST":"GET")),X){const ge=P||{};ge["content-type"]="application/x-www-form-urlencoded";const Ce=mi(W).slice(1);Ht(this.client.http.doUri(at.Post,d.authUrl,ge,Ce,Z),(qe,Ke)=>le(qe||Ke))}else Ht(this.client.http.doUri(at.Get,d.authUrl,P||{},null,W),(ge,Ce)=>le(ge||Ce))};else if(d.key)R.logAction(this.logger,R.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),_=(N,H)=>{Ht(this.createTokenRequest(N,d),(P,X)=>H(P,X??null))};else{const N="Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)";throw R.logAction(this.logger,R.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),new O(N,40171,403)}"capability"in v&&(v.capability=Rn(v.capability));const I=(N,H)=>{const P=N.keyName,X="/keys/"+P+"/requestToken",Z=function(W){return A.baseUri(W)+X},se=Se.defaultPostHeaders(this.client.options,{format:"json"});d.requestHeaders&&fe(se,d.requestHeaders),R.logAction(this.logger,R.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+X+"; Token params: "+JSON.stringify(N)),Ht(this.client.http.do(at.Post,Z,se,JSON.stringify(N),null),(W,le)=>W?H(W):H(le.error,le.body,le.unpacked))};return new Promise((N,H)=>{let P=!1,X=this.client.options.timeouts.realtimeRequestTimeout,Z=setTimeout(()=>{P=!0;const se="Token request callback timed out after "+X/1e3+" seconds";R.logAction(this.logger,R.LOG_ERROR,"Auth.requestToken()",se),H(new O(se,40170,401))},X);_(v,(se,W,le)=>{if(P)return;if(clearTimeout(Z),se){R.logAction(this.logger,R.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+Oe(se)),H(Qo(se));return}if(typeof W=="string"){W.length===0?H(new O("Token string is empty",40170,401)):W.length>Ls?H(new O("Token string exceeded max permitted length (was "+W.length+" bytes)",40170,401)):W==="undefined"||W==="null"?H(new O("Token string was literal null/undefined",40170,401)):W[0]==="{"&&!(le&&le.indexOf("application/jwt")>-1)?H(new O("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401)):N({token:W});return}if(typeof W!="object"||W===null){const Ce="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof W;R.logAction(this.logger,R.LOG_ERROR,"Auth.requestToken()",Ce),H(new O(Ce,40170,401));return}const ge=JSON.stringify(W).length;if(ge>Ls&&!d.suppressMaxLengthCheck){H(new O("Token request/details object exceeded max permitted stringified size (was "+ge+" bytes)",40170,401));return}if("issued"in W){N(W);return}if(!("keyName"in W)){const Ce="Expected token request callback to call back with a token string, token request object, or token details object";R.logAction(this.logger,R.LOG_ERROR,"Auth.requestToken()",Ce),H(new O(Ce,40170,401));return}I(W,(Ce,qe,Ke)=>{if(Ce){R.logAction(this.logger,R.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+Oe(Ce)),H(Qo(Ce));return}Ke||(qe=JSON.parse(qe)),R.logAction(this.logger,R.LOG_MINOR,"Auth.getToken()","token received"),N(qe)})})})}async createTokenRequest(l,a){a=a||this.authOptions,l=l||Be(this.tokenParams);const d=a.key;if(!d)throw new O("No key specified",40101,403);const v=d.split(":"),_=v[0],A=v[1];if(!A)throw new O("Invalid key specified",40101,403);if(l.clientId==="")throw new O("clientId cant be an empty string",40012,400);"capability"in l&&(l.capability=Rn(l.capability));const I=fe({keyName:_},l),N=l.clientId||"",H=l.ttl||"",P=l.capability||"";I.timestamp||(I.timestamp=await this._getTimestamp(a&&a.queryTime));const X=I.nonce||(I.nonce=Ta()),Z=I.timestamp,se=I.keyName+`
`+H+`
`+P+`
`+N+`
`+Z+`
`+X+`
`;return I.mac=I.mac||ks(se,A),R.logAction(this.logger,R.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),I}async getAuthParams(){if(this.method=="basic")return{key:this.key};{let l=await this._ensureValidAuthCredentials(!1);if(!l)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{access_token:l.token}}}async getAuthHeaders(){if(this.method=="basic")return{authorization:"Basic "+this.basicKey};{const l=await this._ensureValidAuthCredentials(!1);if(!l)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{authorization:"Bearer "+vi(l.token)}}}_saveBasicOptions(l){this.method="basic",this.key=l.key,this.basicKey=vi(l.key),this.authOptions=l||{},"clientId"in l&&this._userSetClientId(l.clientId)}_saveTokenOptions(l,a){this.method="token",l&&(this.tokenParams=l),a&&(a.token&&(a.tokenDetails=typeof a.token=="string"?{token:a.token}:a.token),a.tokenDetails&&(this.tokenDetails=a.tokenDetails),"clientId"in a&&this._userSetClientId(a.clientId),this.authOptions=a)}async _ensureValidAuthCredentials(l){const a=this.tokenDetails;if(a){if(this._tokenClientIdMismatch(a.clientId))throw new O("Mismatch between clientId in token ("+a.clientId+") and current clientId ("+this.clientId+")",40102,403);if(!this.client.isTimeOffsetSet()||!a.expires||a.expires>=this.client.getTimestampUsingOffset())return R.logAction(this.logger,R.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+a.expires),a;R.logAction(this.logger,R.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}const d=(this.waitingForTokenRequest||(this.waitingForTokenRequest=yt.create(this.logger))).createPromise();if(this.currentTokenRequestId!==null&&!l)return d;const v=this.currentTokenRequestId=Ps();let _,A=null;try{_=await this.requestToken(this.tokenParams,this.authOptions)}catch(N){A=N}if(this.currentTokenRequestId>v)return R.logAction(this.logger,R.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one"),d;this.currentTokenRequestId=null;const I=this.waitingForTokenRequest;return this.waitingForTokenRequest=null,A?(I==null||I.rejectAll(A),d):(I==null||I.resolveAll(this.tokenDetails=_),d)}_userSetClientId(l){if(typeof l=="string"||l===null){if(l==="*")throw new O('Cant use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);{const a=this._uncheckedSetClientId(l);if(a)throw a}}else throw new O("clientId must be either a string or null",40012,400)}_uncheckedSetClientId(l){if(this._tokenClientIdMismatch(l)){const a="Unexpected clientId mismatch: client has "+this.clientId+", requested "+l,d=new O(a,40102,401);return R.logAction(this.logger,R.LOG_ERROR,"Auth._uncheckedSetClientId()",a),d}else return this.clientId=this.tokenParams.clientId=l,null}_tokenClientIdMismatch(l){return!!(this.clientId&&this.clientId!=="*"&&l&&l!=="*"&&this.clientId!==l)}static isTokenErr(l){return l.code&&l.code>=40140&&l.code<40150}revokeTokens(l,a){return this.client.rest.revokeTokens(l,a)}async _getTimestamp(l){return this.client.getTimestamp(l||!!this.authOptions.queryTime)}},ht=vc;function Xo(l){const a=[];if(l)for(const d in l)a.push(d+"="+l[d]);return a.join("&")}function Ti(l,a){return l+(a?"?":"")+Xo(a)}function Qr(l,a,d,v,_){l.error?R.logActionNoStrip(_,R.LOG_MICRO,"Http."+a+"()","Received Error; "+Ti(d,v)+"; Error: "+Oe(l.error)):R.logActionNoStrip(_,R.LOG_MICRO,"Http."+a+"()","Received; "+Ti(d,v)+"; Headers: "+Xo(l.headers)+"; StatusCode: "+l.statusCode+"; Body"+(V.BufferUtils.isBuffer(l.body)?" (Base64): "+V.BufferUtils.base64Encode(l.body):": "+l.body))}function to(l,a,d,v,_){_.shouldLog(R.LOG_MICRO)&&R.logActionNoStrip(_,R.LOG_MICRO,"Http."+l+"()","Sending; "+Ti(a,v)+"; Body"+(V.BufferUtils.isBuffer(d)?" (Base64): "+V.BufferUtils.base64Encode(d):": "+d))}var Gs=class{constructor(l){this.client=l,this.platformHttp=new V.Http(l),this.checkConnectivity=this.platformHttp.checkConnectivity?()=>this.platformHttp.checkConnectivity():void 0}get logger(){var l,a;return(a=(l=this.client)==null?void 0:l.logger)!=null?a:R.defaultLogger}get supportsAuthHeaders(){return this.platformHttp.supportsAuthHeaders}get supportsLinkHeaders(){return this.platformHttp.supportsLinkHeaders}_getHosts(l){const a=l.connection,d=a&&a.connectionManager.host;return d?[d].concat(Se.getFallbackHosts(l.options)):Se.getHosts(l.options)}async do(l,a,d,v,_){try{const A=this.client;if(!A)return{error:new O("http.do called without client",5e4,500)};const I=typeof a=="function"?a:function(Z){return A.baseUri(Z)+a},N=A._currentFallback;if(N)if(N.validUntil>Date.now()){const Z=await this.doUri(l,I(N.host),d,v,_);return Z.error&&this.platformHttp.shouldFallback(Z.error)?(A._currentFallback=null,this.do(l,a,d,v,_)):Z}else A._currentFallback=null;const H=this._getHosts(A);if(H.length===1)return this.doUri(l,I(H[0]),d,v,_);let P=null;const X=async(Z,se)=>{const W=Z.shift();P=P??new Date;const le=await this.doUri(l,I(W),d,v,_);return le.error&&this.platformHttp.shouldFallback(le.error)&&Z.length?Date.now()-P.getTime()>A.options.timeouts.httpMaxRetryDuration?{error:new O(`Timeout for trying fallback hosts retries. Total elapsed time exceeded the ${A.options.timeouts.httpMaxRetryDuration}ms limit`,50003,500)}:X(Z,!0):(se&&(A._currentFallback={host:W,validUntil:Date.now()+A.options.timeouts.fallbackRetryTimeout}),le)};return X(H)}catch(A){return{error:new O(`Unexpected error in Http.do: ${Oe(A)}`,500,5e4)}}}async doUri(l,a,d,v,_){try{to(l,a,v,_,this.logger);const A=await this.platformHttp.doUri(l,a,d,v,_);return this.logger.shouldLog(R.LOG_MICRO)&&Qr(A,l,a,_,this.logger),A}catch(A){return{error:new O(`Unexpected error in Http.doUri: ${Oe(A)}`,500,5e4)}}}};function Ca(l,a,d,v){try{d.apply(a,v)}catch(_){R.logAction(l,R.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+_+"; stack = "+(_&&_.stack))}}function jn(l,a,d){let v,_,A;for(let I=0;I<l.length;I++)if(v=l[I],d&&(v=v[d]),Array.isArray(v)){for(;(_=v.indexOf(a))!==-1;)v.splice(_,1);d&&v.length===0&&delete l[I][d]}else if(te(v))for(A in v)Object.prototype.hasOwnProperty.call(v,A)&&Array.isArray(v[A])&&jn([v],a,A)}var Tc=class{constructor(l){this.logger=l,this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}on(...l){if(l.length===1){const a=l[0];if(typeof a=="function")this.any.push(a);else throw new Error("EventListener.on(): Invalid arguments: "+V.Config.inspect(l))}if(l.length===2){const[a,d]=l;if(typeof d!="function")throw new Error("EventListener.on(): Invalid arguments: "+V.Config.inspect(l));if(he(a))this.any.push(d);else if(Array.isArray(a))a.forEach(v=>{this.on(v,d)});else{if(typeof a!="string")throw new Error("EventListener.on(): Invalid arguments: "+V.Config.inspect(l));(this.events[a]||(this.events[a]=[])).push(d)}}}off(...l){if(l.length==0||he(l[0])&&he(l[1])){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null);return}const[a,d]=l;let v=null,_=null;if(l.length===1||!d)typeof a=="function"?v=a:_=a;else{if(typeof d!="function")throw new Error("EventEmitter.off(): invalid arguments:"+V.Config.inspect(l));[_,v]=[a,d]}if(v&&he(_)){jn([this.any,this.events,this.anyOnce,this.eventsOnce],v);return}if(Array.isArray(_)){_.forEach(A=>{this.off(A,v)});return}if(typeof _!="string")throw new Error("EventEmitter.off(): invalid arguments:"+V.Config.inspect(l));v?jn([this.events,this.eventsOnce],v,_):(delete this.events[_],delete this.eventsOnce[_])}listeners(l){if(l){const a=this.events[l]||[];return this.eventsOnce[l]&&Array.prototype.push.apply(a,this.eventsOnce[l]),a.length?a:null}return this.any.length?this.any:null}emit(l,...a){const d={event:l},v=[];this.anyOnce.length&&(Array.prototype.push.apply(v,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(v,this.any);const _=this.eventsOnce[l];_&&(Array.prototype.push.apply(v,_),delete this.eventsOnce[l]);const A=this.events[l];A&&Array.prototype.push.apply(v,A),v.forEach(I=>{Ca(this.logger,d,I,a)})}once(...l){const a=l.length;if(a===0||a===1&&typeof l[0]!="function"){const _=l[0];return new Promise(A=>{this.once(_,A)})}const[d,v]=l;if(l.length===1&&typeof d=="function")this.anyOnce.push(d);else if(he(d)){if(typeof v!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+V.Config.inspect(l));this.anyOnce.push(v)}else if(Array.isArray(d)){const _=this,A=function(){const I=Array.prototype.slice.call(arguments);if(d.forEach(function(N){_.off(N,A)}),typeof v!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+V.Config.inspect(l));v.apply(this,I)};d.forEach(function(I){_.on(I,A)})}else{if(typeof d!="string")throw new Error("EventEmitter.once(): Invalid arguments:"+V.Config.inspect(l));const _=this.eventsOnce[d]||(this.eventsOnce[d]=[]);if(v){if(typeof v!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+V.Config.inspect(l));_.push(v)}}}async whenState(l,a){if(typeof l!="string"||typeof a!="string")throw new Error("whenState requires a valid state String argument");return l===a?null:this.once(l)}},vt=Tc,Ee={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18,OBJECT:19,OBJECT_SYNC:20,ANNOTATION:21},Hs=[];Object.keys(Ee).forEach(function(l){Hs[Ee[l]]=l});var Vt={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,HAS_OBJECTS:128,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19,ANNOTATION_PUBLISH:1<<21,ANNOTATION_SUBSCRIBE:1<<22,OBJECT_SUBSCRIBE:1<<24,OBJECT_PUBLISH:1<<25},Sc=Object.keys(Vt);Vt.MODE_ALL=Vt.PRESENCE|Vt.PUBLISH|Vt.SUBSCRIBE|Vt.PRESENCE_SUBSCRIBE|Vt.ANNOTATION_PUBLISH|Vt.ANNOTATION_SUBSCRIBE|Vt.OBJECT_SUBSCRIBE|Vt.OBJECT_PUBLISH;var Wo=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE","ANNOTATION_PUBLISH","ANNOTATION_SUBSCRIBE","OBJECT_SUBSCRIBE","OBJECT_PUBLISH"];function qn(l){return!l||!l.channelOptions?{channelOptions:l,plugins:{},baseEncodedPreviousPayload:void 0}:l}function qs(l,a,d){if(d&&d.cipher){l||mt("Crypto");const v=l.getCipher(d.cipher,a);return{cipher:v.cipherParams,channelCipher:v.cipher}}return d??{}}async function Xr(l,a){const{data:d,encoding:v}=await Si(l.data,l.encoding,a);return l.data=d,l.encoding=v,l}async function Si(l,a,d){let v=d.channelCipher,_=l,A=a?a+"/":"";V.BufferUtils.isBuffer(_)||(_=V.BufferUtils.utf8Encode(String(_)),A=A+"utf-8/");const I=await v.encrypt(_);return A=A+"cipher+"+v.algorithm,{data:I,encoding:A}}async function ei(l,a){const{data:d,encoding:v}=Wr(l.data,l.encoding);return l.data=d,l.encoding=v,a!=null&&a.cipher?Xr(l,a):l}function Wr(l,a){if(typeof l=="string"||V.BufferUtils.isBuffer(l)||l===null||l===void 0)return{data:l,encoding:a};if(te(l)||Array.isArray(l))return{data:JSON.stringify(l),encoding:a?a+"/json":"json"};throw new O("Data type is unsupported",40013,400)}async function Zo(l,a){const{data:d,encoding:v,error:_}=await Zr(l.data,l.encoding,a);if(l.data=d,l.encoding=v,_)throw _}async function Zr(l,a,d){const v=qn(d);let _=l,A=l,I=a,N;if(a){const H=a.split("/");let P,X=H.length,Z="";try{for(;(P=X)>0;){const se=H[--X].match(/([-\w]+)(\+([\w-]+))?/);if(!se)break;switch(Z=se[1],Z){case"base64":A=V.BufferUtils.base64Decode(String(A)),P==H.length&&(_=A);continue;case"utf-8":A=V.BufferUtils.utf8Decode(A);continue;case"json":A=JSON.parse(A);continue;case"cipher":if(v.channelOptions!=null&&v.channelOptions.cipher&&v.channelOptions.channelCipher){const W=se[3],le=v.channelOptions.channelCipher;if(W!=le.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");A=await le.decrypt(A);continue}else throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!v.plugins||!v.plugins.vcdiff)throw new O("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if(typeof Uint8Array>"u")throw new O("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{let W=v.baseEncodedPreviousPayload;typeof W=="string"&&(W=V.BufferUtils.utf8Encode(W));const le=V.BufferUtils.toBuffer(W);A=V.BufferUtils.toBuffer(A),A=V.BufferUtils.arrayBufferViewToBuffer(v.plugins.vcdiff.decode(A,le)),_=A}catch(W){throw new O("Vcdiff delta decode failed with "+W,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(se){const W=se;N=new O(`Error processing the ${Z} encoding, decoder returned ${W.message}`,W.code||40013,400)}finally{I=P<=0?null:H.slice(0,P).join("/")}}return N?{error:N,data:A,encoding:I}:(v.baseEncodedPreviousPayload=_,{data:A,encoding:I})}function _i(...l){const a=l.length>0?"json":"msgpack",{data:d,encoding:v}=bn(this.data,this.encoding,a);return Object.assign({},this,{encoding:v,data:d})}function bn(l,a,d){return!l||!V.BufferUtils.isBuffer(l)?{data:l,encoding:a}:d==="msgpack"?{data:V.BufferUtils.toBuffer(l),encoding:a}:{data:V.BufferUtils.base64Encode(l),encoding:a?a+"/base64":"base64"}}var no={encryptData:Si,encodeData:Wr,encodeDataForWire:bn,decodeData:Zr};function ti(l){const{id:a,connectionId:d,timestamp:v}=l;let _;switch(l.action){case Ee.MESSAGE:{_=l.messages;break}case Ee.PRESENCE:case Ee.SYNC:_=l.presence;break;case Ee.ANNOTATION:_=l.annotations;break;case Ee.OBJECT:case Ee.OBJECT_SYNC:_=l.state;break;default:throw new O("Unexpected action "+l.action,4e4,400)}for(let A=0;A<_.length;A++){const I=_[A];I.connectionId||(I.connectionId=d),I.timestamp||(I.timestamp=v),a&&!I.id&&(I.id=a+":"+A)}}function Xt(l,a){let d="["+a;for(const v in l)v==="data"?typeof l.data=="string"?d+="; data="+l.data:V.BufferUtils.isBuffer(l.data)?d+="; data (buffer)="+V.BufferUtils.base64Encode(l.data):typeof l.data<"u"&&(d+="; data (json)="+JSON.stringify(l.data)):v&&(v==="extras"||v==="operation")?d+="; "+v+"="+JSON.stringify(l[v]):v==="version"?d+="; version="+JSON.stringify(l[v]):v==="annotations"?d+="; annotations="+JSON.stringify(l[v]):l[v]!==void 0&&(d+="; "+v+"="+l[v]);return d+="]",d}var ni=class{},$o=class{constructor(l){this.Platform=V,this.ErrorInfo=O,this.Logger=R,this.Defaults=Se,this.Utils=Ve,this.EventEmitter=vt,this.MessageEncoding=no;var a,d,v,_,A,I,N,H,P,X;this._additionalHTTPRequestImplementations=(a=l.plugins)!=null?a:null,this.logger=new R,this.logger.setLog(l.logLevel,l.logHandler),R.logAction(this.logger,R.LOG_MICRO,"BaseClient()","initialized with clientOptions "+V.Config.inspect(l)),this._MsgPack=(v=(d=l.plugins)==null?void 0:d.MsgPack)!=null?v:null;const Z=this.options=Se.normaliseOptions(l,this._MsgPack,this.logger);if(Z.key){const se=Z.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!se){const W="invalid key parameter";throw R.logAction(this.logger,R.LOG_ERROR,"BaseClient()",W),new O(W,40400,404)}Z.keyName=se[1],Z.keySecret=se[2]}if("clientId"in Z)if(typeof Z.clientId=="string"||Z.clientId===null){if(Z.clientId==="*")throw new O('Cant use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}else throw new O("clientId must be either a string or null",40012,400);R.logAction(this.logger,R.LOG_MINOR,"BaseClient()","started; version = "+Se.version),this._currentFallback=null,this.serverTimeOffset=null,this.http=new Gs(this),this.auth=new ht(this,Z),this._rest=(_=l.plugins)!=null&&_.Rest?new l.plugins.Rest(this):null,this._Crypto=(I=(A=l.plugins)==null?void 0:A.Crypto)!=null?I:null,this.__FilteredSubscriptions=(H=(N=l.plugins)==null?void 0:N.MessageInteractions)!=null?H:null,this._Annotations=(X=(P=l.plugins)==null?void 0:P.Annotations)!=null?X:null}get rest(){return this._rest||mt("Rest"),this._rest}get _FilteredSubscriptions(){return this.__FilteredSubscriptions||mt("MessageInteractions"),this.__FilteredSubscriptions}get channels(){return this.rest.channels}get push(){return this.rest.push}device(){var l;return(!((l=this.options.plugins)!=null&&l.Push)||!this.push.LocalDevice)&&mt("Push"),this._device||(this._device=this.push.LocalDevice.load(this)),this._device}baseUri(l){return Se.getHttpScheme(this.options)+l+":"+Se.getPort(this.options,!1)}async stats(l){return this.rest.stats(l)}async time(l){return this.rest.time(l)}async request(l,a,d,v,_,A){return this.rest.request(l,a,d,v,_,A)}batchPublish(l){return this.rest.batchPublish(l)}batchPresence(l){return this.rest.batchPresence(l)}setLog(l){this.logger.setLog(l.level,l.handler)}async getTimestamp(l){return!this.isTimeOffsetSet()&&l?this.time():this.getTimestampUsingOffset()}getTimestampUsingOffset(){return Date.now()+(this.serverTimeOffset||0)}isTimeOffsetSet(){return this.serverTimeOffset!==null}};$o.Platform=V;var $r=$o,Bs=class Ar{toJSON(){var a,d,v;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:(a=this.push)==null?void 0:a.recipient,state:(d=this.push)==null?void 0:d.state,error:(v=this.push)==null?void 0:v.error}}}toString(){var a,d,v,_;let A="[DeviceDetails";return this.id&&(A+="; id="+this.id),this.platform&&(A+="; platform="+this.platform),this.formFactor&&(A+="; formFactor="+this.formFactor),this.clientId&&(A+="; clientId="+this.clientId),this.metadata&&(A+="; metadata="+this.metadata),this.deviceIdentityToken&&(A+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),(a=this.push)!=null&&a.recipient&&(A+="; push.recipient="+JSON.stringify(this.push.recipient)),(d=this.push)!=null&&d.state&&(A+="; push.state="+this.push.state),(v=this.push)!=null&&v.error&&(A+="; push.error="+JSON.stringify(this.push.error)),(_=this.push)!=null&&_.metadata&&(A+="; push.metadata="+this.push.metadata),A+="]",A}static toRequestBody(a,d,v){return gn(a,d,v)}static fromResponseBody(a,d,v){return v&&(a=Et(a,d,v)),Array.isArray(a)?Ar.fromValuesArray(a):Ar.fromValues(a)}static fromValues(a){return a.error=a.error&&O.fromValues(a.error),Object.assign(new Ar,a)}static fromLocalDevice(a){return Object.assign(new Ar,a)}static fromValuesArray(a){const d=a.length,v=new Array(d);for(let _=0;_<d;_++)v[_]=Ar.fromValues(a[_]);return v}},Bn=Bs;async function jr(l,a,d,v){if(l.http.supportsAuthHeaders){const _=await l.auth.getAuthHeaders();return v(fe(_,a),d)}else{const _=await l.auth.getAuthParams();return v(a,fe(_,d))}}function zt(l,a,d){if(l.err&&!l.body)return{err:l.err};if(l.statusCode===Us.NoContent)return B(D({},l),{body:[],unpacked:!0});let v=l.body;if(!l.unpacked)try{v=Et(v,a,d)}catch(N){return Ur(N)?{err:N}:{err:new re(Oe(N),null)}}if(!v)return{err:new re("unenvelope(): Response body is missing",null)};const{statusCode:_,response:A,headers:I}=v;if(_===void 0)return B(D({},l),{body:v,unpacked:!0});if(_<200||_>=300){let N=A&&A.error||l.err;return N||(N=new Error("Error in unenveloping "+v),N.statusCode=_),{err:N,body:A,headers:I,unpacked:!0,statusCode:_}}return{err:l.err,body:A,headers:I,unpacked:!0,statusCode:_}}function Ei(l,a,d,v,_){l.err?R.logAction(_,R.LOG_MICRO,"Resource."+a+"()","Received Error; "+Ti(d,v)+"; Error: "+Oe(l.err)):R.logAction(_,R.LOG_MICRO,"Resource."+a+"()","Received; "+Ti(d,v)+"; Headers: "+Xo(l.headers)+"; StatusCode: "+l.statusCode+"; Body: "+(V.BufferUtils.isBuffer(l.body)?" (Base64): "+V.BufferUtils.base64Encode(l.body):": "+V.Config.inspect(l.body)))}var Vs=class Rr{static async get(a,d,v,_,A,I){return Rr.do(at.Get,a,d,null,v,_,A,I??!1)}static async delete(a,d,v,_,A,I){return Rr.do(at.Delete,a,d,null,v,_,A,I)}static async post(a,d,v,_,A,I,N){return Rr.do(at.Post,a,d,v,_,A,I,N)}static async patch(a,d,v,_,A,I,N){return Rr.do(at.Patch,a,d,v,_,A,I,N)}static async put(a,d,v,_,A,I,N){return Rr.do(at.Put,a,d,v,_,A,I,N)}static async do(a,d,v,_,A,I,N,H){N&&((I=I||{}).envelope=N);const P=d.logger;async function X(se,W){var le;if(P.shouldLog(R.LOG_MICRO)){let Ce=_;if(((le=se["content-type"])==null?void 0:le.indexOf("msgpack"))>0)try{d._MsgPack||mt("MsgPack"),Ce=d._MsgPack.decode(_)}catch(qe){R.logAction(P,R.LOG_MICRO,"Resource."+a+"()","Sending MsgPack Decoding Error: "+Oe(qe))}R.logAction(P,R.LOG_MICRO,"Resource."+a+"()","Sending; "+Ti(v,W)+"; Body: "+Ce)}const ge=await d.http.do(a,v,se,_,W);return ge.error&&ht.isTokenErr(ge.error)?(await d.auth.authorize(null,null),jr(d,se,W,X)):{err:ge.error,body:ge.body,headers:ge.headers,unpacked:ge.unpacked,statusCode:ge.statusCode}}let Z=await jr(d,A,I,X);if(N&&(Z=zt(Z,d._MsgPack,N)),P.shouldLog(R.LOG_MICRO)&&Ei(Z,a,v,I,P),H){if(Z.err)throw Z.err;{const se=D({},Z);return delete se.err,se}}return Z}},je=Vs;function _c(l){const a=l.match(/^\.\/(\w+)\?(.*)$/);return a&&a[2]&&Is(a[2])}function el(l){typeof l=="string"&&(l=l.split(","));const a={};for(let d=0;d<l.length;d++){const v=l[d].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(v){const _=_c(v[1]);_&&(a[v[2]]=_)}}return a}function tl(l,a,d){return!(d&&(a||typeof l.code=="number"))}var jo=class{constructor(l,a,d,v,_,A){this.client=l,this.path=a,this.headers=d,this.envelope=v??null,this.bodyHandler=_,this.useHttpPaginatedResponse=A||!1}get logger(){return this.client.logger}async get(l){const a=await je.get(this.client,this.path,this.headers,l,this.envelope,!1);return this.handlePage(a)}async delete(l){const a=await je.delete(this.client,this.path,this.headers,l,this.envelope,!1);return this.handlePage(a)}async post(l,a){const d=await je.post(this.client,this.path,a,this.headers,l,this.envelope,!1);return this.handlePage(d)}async put(l,a){const d=await je.put(this.client,this.path,a,this.headers,l,this.envelope,!1);return this.handlePage(d)}async patch(l,a){const d=await je.patch(this.client,this.path,a,this.headers,l,this.envelope,!1);return this.handlePage(d)}async handlePage(l){if(l.err&&tl(l.err,l.body,this.useHttpPaginatedResponse))throw R.logAction(this.logger,R.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+Oe(l.err)),l.err;let a,d,v;try{a=l.statusCode==Us.NoContent?[]:await this.bodyHandler(l.body,l.headers||{},l.unpacked)}catch(_){throw l.err||_}return l.headers&&(d=l.headers.Link||l.headers.link)&&(v=el(d)),this.useHttpPaginatedResponse?new Aa(this,a,l.headers||{},l.statusCode,v,l.err):new es(this,a,v)}},es=class{constructor(l,a,d){this.resource=l,this.items=a,this._relParams=d}async first(){if(this.hasFirst())return this.get(this._relParams.first);throw new O("No link to the first page of results",40400,404)}async current(){if(this.hasCurrent())return this.get(this._relParams.current);throw new O("No link to the current page of results",40400,404)}async next(){return this.hasNext()?this.get(this._relParams.next):null}hasFirst(){return this._relParams!=null&&"first"in this._relParams}hasCurrent(){return this._relParams!=null&&"current"in this._relParams}hasNext(){return this._relParams!=null&&"next"in this._relParams}isLast(){return!this.hasNext()}async get(l){const a=this.resource,d=await je.get(a.client,a.path,a.headers,l,a.envelope,!1);return a.handlePage(d)}},Aa=class extends es{constructor(l,a,d,v,_,A){super(l,a,_),this.statusCode=v,this.success=v<300&&v>=200,this.headers=d,this.errorCode=A&&A.code,this.errorMessage=A&&A.message}toJSON(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}}},mn=jo,Ra=class ca{toJSON(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}}toString(){let a="[PushChannelSubscription";return this.channel&&(a+="; channel="+this.channel),this.deviceId&&(a+="; deviceId="+this.deviceId),this.clientId&&(a+="; clientId="+this.clientId),a+="]",a}static fromResponseBody(a,d,v){return v&&(a=Et(a,d,v)),Array.isArray(a)?ca.fromValuesArray(a):ca.fromValues(a)}static fromValues(a){return Object.assign(new ca,a)}static fromValuesArray(a){const d=a.length,v=new Array(d);for(let _=0;_<d;_++)v[_]=ca.fromValues(a[_]);return v}};Ra.toRequestBody=gn;var Ec=Ra,io=Ec,Cc=class{constructor(l){var a;this.client=l,this.admin=new Ac(l),V.Config.push&&((a=l.options.plugins)!=null&&a.Push)&&(this.stateMachine=new l.options.plugins.Push.ActivationStateMachine(l),this.LocalDevice=l.options.plugins.Push.localDeviceFactory(Bn))}async activate(l,a){await new Promise((d,v)=>{var _;if(!((_=this.client.options.plugins)!=null&&_.Push)){v(An("Push"));return}if(!this.stateMachine){v(new O("This platform is not supported as a target of push notifications",4e4,400));return}if(this.stateMachine.activatedCallback){v(new O("Activation already in progress",4e4,400));return}this.stateMachine.activatedCallback=A=>{if(A){v(A);return}d()},this.stateMachine.updateFailedCallback=a,this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledActivate(this.stateMachine,l))})}async deactivate(l){await new Promise((a,d)=>{var v;if(!((v=this.client.options.plugins)!=null&&v.Push)){d(An("Push"));return}if(!this.stateMachine){d(new O("This platform is not supported as a target of push notifications",4e4,400));return}if(this.stateMachine.deactivatedCallback){d(new O("Deactivation already in progress",4e4,400));return}this.stateMachine.deactivatedCallback=_=>{if(_){d(_);return}a()},this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledDeactivate(this.stateMachine,l))})}},Ac=class{constructor(l){this.client=l,this.deviceRegistrations=new Rc(l),this.channelSubscriptions=new bc(l)}async publish(l,a){const d=this.client,v=d.options.useBinaryProtocol?"msgpack":"json",_=Se.defaultPostHeaders(d.options),A={},I=fe({recipient:l},a);fe(_,d.options.headers),d.options.pushFullWait&&fe(A,{fullWait:"true"});const N=gn(I,d._MsgPack,v);await je.post(d,"/push/publish",N,_,A,null,!0)}},Rc=class{constructor(l){this.client=l}async save(l){const a=this.client,d=Bn.fromValues(l),v=a.options.useBinaryProtocol?"msgpack":"json",_=Se.defaultPostHeaders(a.options),A={};fe(_,a.options.headers),a.options.pushFullWait&&fe(A,{fullWait:"true"});const I=gn(d,a._MsgPack,v),N=await je.put(a,"/push/deviceRegistrations/"+encodeURIComponent(l.id),I,_,A,null,!0);return Bn.fromResponseBody(N.body,a._MsgPack,N.unpacked?void 0:v)}async get(l){const a=this.client,d=a.options.useBinaryProtocol?"msgpack":"json",v=Se.defaultGetHeaders(a.options),_=l.id||l;if(typeof _!="string"||!_.length)throw new O("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400);fe(v,a.options.headers);const A=await je.get(a,"/push/deviceRegistrations/"+encodeURIComponent(_),v,{},null,!0);return Bn.fromResponseBody(A.body,a._MsgPack,A.unpacked?void 0:d)}async list(l){const a=this.client,d=a.options.useBinaryProtocol?"msgpack":"json",v=this.client.http.supportsLinkHeaders?void 0:d,_=Se.defaultGetHeaders(a.options);return fe(_,a.options.headers),new mn(a,"/push/deviceRegistrations",_,v,async function(A,I,N){return Bn.fromResponseBody(A,a._MsgPack,N?void 0:d)}).get(l)}async remove(l){const a=this.client,d=Se.defaultGetHeaders(a.options),v={},_=l.id||l;if(typeof _!="string"||!_.length)throw new O("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400);fe(d,a.options.headers),a.options.pushFullWait&&fe(v,{fullWait:"true"}),await je.delete(a,"/push/deviceRegistrations/"+encodeURIComponent(_),d,v,null,!0)}async removeWhere(l){const a=this.client,d=a.options.useBinaryProtocol?"msgpack":"json",v=Se.defaultGetHeaders(a.options,{format:d});fe(v,a.options.headers),a.options.pushFullWait&&fe(l,{fullWait:"true"}),await je.delete(a,"/push/deviceRegistrations",v,l,null,!0)}},bc=class cv{constructor(a){this.remove=cv.prototype.removeWhere,this.client=a}async save(a){const d=this.client,v=io.fromValues(a),_=d.options.useBinaryProtocol?"msgpack":"json",A=Se.defaultPostHeaders(d.options),I={};fe(A,d.options.headers),d.options.pushFullWait&&fe(I,{fullWait:"true"});const N=gn(v,d._MsgPack,_),H=await je.post(d,"/push/channelSubscriptions",N,A,I,null,!0);return io.fromResponseBody(H.body,d._MsgPack,H.unpacked?void 0:_)}async list(a){const d=this.client,v=d.options.useBinaryProtocol?"msgpack":"json",_=this.client.http.supportsLinkHeaders?void 0:v,A=Se.defaultGetHeaders(d.options);return fe(A,d.options.headers),new mn(d,"/push/channelSubscriptions",A,_,async function(I,N,H){return io.fromResponseBody(I,d._MsgPack,H?void 0:v)}).get(a)}async removeWhere(a){const d=this.client,v=d.options.useBinaryProtocol?"msgpack":"json",_=Se.defaultGetHeaders(d.options,{format:v});fe(_,d.options.headers),d.options.pushFullWait&&fe(a,{fullWait:"true"}),await je.delete(d,"/push/channelSubscriptions",_,a,null,!0)}async listChannels(a){const d=this.client,v=d.options.useBinaryProtocol?"msgpack":"json",_=this.client.http.supportsLinkHeaders?void 0:v,A=Se.defaultGetHeaders(d.options);return fe(A,d.options.headers),d.options.pushFullWait&&fe(a,{fullWait:"true"}),new mn(d,"/push/channels",A,_,async function(I,N,H){const P=!H&&v?Et(I,d._MsgPack,v):I;for(let X=0;X<P.length;X++)P[X]=String(P[X]);return P}).get(a)}},Mc=Cc,nl=["absent","present","enter","leave","update"];async function ba(l,a,d,v){const _=qs(a,l,v??null);return ts.fromValues(d).decode(_,l)}async function wc(l,a,d,v){return Promise.all(d.map(function(_){return ba(l,a,_,v)}))}async function xc(l,a){return ts.fromValues(l).decode(a.channelOptions,a.logger)}async function Ma(l,a){return Promise.all(l.map(function(d){return xc(d,a)}))}var zs=class fa extends ni{isSynthesized(){return!this.id||!this.connectionId?!0:this.id.substring(this.connectionId.length,0)!==this.connectionId}parseId(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");const a=this.id.split(":");return{connectionId:a[0],msgSerial:parseInt(a[1],10),index:parseInt(a[2],10)}}async encode(a){const d=Object.assign(new ts,this,{action:nl.indexOf(this.action||"present")});return ei(d,a)}static fromValues(a){return Object.assign(new fa,a)}static fromValuesArray(a){return a.map(d=>fa.fromValues(d))}static fromData(a){return a instanceof fa?a:fa.fromValues({data:a})}toString(){return Xt(this,"PresenceMessage")}},ts=class bd extends ni{toJSON(...a){return _i.call(this,...a)}static fromValues(a){return Object.assign(new bd,a)}static fromValuesArray(a){return a.map(d=>bd.fromValues(d))}async decode(a,d){const v=Object.assign(new zs,B(D({},this),{action:nl[this.action]}));try{await Zo(v,a)}catch(_){R.logAction(d,R.LOG_ERROR,"WirePresenceMessage.decode()",Oe(_))}return v}toString(){return Xt(this,"WirePresenceMessage")}},ii=zs,Ic=class{constructor(l){this.channel=l}get logger(){return this.channel.logger}async get(l){R.logAction(this.logger,R.LOG_MICRO,"RestPresence.get()","channel = "+this.channel.name);const a=this.channel.client,d=a.options.useBinaryProtocol?"msgpack":"json",v=this.channel.client.http.supportsLinkHeaders?void 0:d,_=Se.defaultGetHeaders(a.options);return fe(_,a.options.headers),new mn(a,this.channel.client.rest.presenceMixin.basePath(this),_,v,async(A,I,N)=>{const H=N?A:Et(A,a._MsgPack,d);return Ma(H,this.channel)}).get(l)}async history(l){return R.logAction(this.logger,R.LOG_MICRO,"RestPresence.history()","channel = "+this.channel.name),this.channel.client.rest.presenceMixin.history(this,l)}},wa=Ic,xa=["message.create","message.update","message.delete","meta","message.summary","message.append"];function Nc(l){return xa[l||0]||"unknown"}function Oc(l){let a=0;return l.name&&(a+=l.name.length),l.clientId&&(a+=l.clientId.length),l.extras&&(a+=JSON.stringify(l.extras).length),l.data&&(a+=Lr(l.data)),a}async function Ia(l,a,d,v){const _=qs(a,l,v??null);return ns.fromValues(d).decode(_,l)}async function Dc(l,a,d,v){return Promise.all(d.map(function(_){return Ia(l,a,_,v)}))}async function Na(l,a){return ns.fromValues(l).decode(a.channelOptions,a.logger)}async function Oa(l,a){return Promise.all(l.map(function(d){return Na(d,a)}))}async function Da(l,a){return Promise.all(l.map(d=>d.encode(a)))}var Ua=gn;function Fs(l){let a,d=0;for(let v=0;v<l.length;v++)a=l[v],d+=a.size||(a.size=Oc(a));return d}var oo=class Md extends ni{expandFields(){if(this.version||(this.version={}),!this.version.serial&&this.serial&&(this.version.serial=this.serial),!this.version.timestamp&&this.timestamp&&(this.version.timestamp=this.timestamp),this.annotations?this.annotations.summary||(this.annotations.summary={}):this.annotations={summary:{}},this.annotations&&this.annotations.summary)for(const[a,d]of Object.entries(this.annotations.summary))if(a.endsWith(":distinct.v1")||a.endsWith(":unique.v1")||a.endsWith(":multiple.v1"))for(const[,v]of Object.entries(d))v.clipped||(v.clipped=!1);else a.endsWith(":flag.v1")&&(d.clipped||(d.clipped=!1))}async encode(a){const d=Object.assign(new ns,this,{action:xa.indexOf(this.action||"message.create")});return ei(d,a)}static fromValues(a){return Object.assign(new Md,a)}static fromValuesArray(a){return a.map(d=>Md.fromValues(d))}toString(){return Xt(this,"Message")}},ns=class wd extends ni{toJSON(...a){return _i.call(this,...a)}static fromValues(a){return Object.assign(new wd,a)}static fromValuesArray(a){return a.map(d=>wd.fromValues(d))}async decodeWithErr(a,d){const v=Object.assign(new oo,B(D({},this),{action:Nc(this.action)}));let _;try{await Zo(v,a)}catch(A){R.logAction(d,R.LOG_ERROR,"WireMessage.decode()",Oe(A)),_=A}return v.expandFields(),{decoded:v,err:_}}async decode(a,d){const{decoded:v}=await this.decodeWithErr(a,d);return v}toString(){return Xt(this,"WireMessage")}},yn=oo,La=9;function ka(l){return l.every(function(a){return!a.id})}var Pa=class{constructor(l,a,d){this._annotations=null;var v,_;R.logAction(l.logger,R.LOG_MINOR,"RestChannel()","started; name = "+a),this.name=a,this.client=l,this.presence=new wa(this),this.channelOptions=Ds((v=l._Crypto)!=null?v:null,this.logger,d),(_=l.options.plugins)!=null&&_.Push&&(this._push=new l.options.plugins.Push.PushChannel(this)),l._Annotations&&(this._annotations=new l._Annotations.RestAnnotations(this))}get annotations(){return this._annotations||mt("Annotations"),this._annotations}get push(){return this._push||mt("Push"),this._push}get logger(){return this.client.logger}setOptions(l){var a;this.channelOptions=Ds((a=this.client._Crypto)!=null?a:null,this.logger,l)}async history(l){return R.logAction(this.logger,R.LOG_MICRO,"RestChannel.history()","channel = "+this.name),this.client.rest.channelMixin.history(this,l)}async publish(...l){const a=l[0],d=l[1];let v,_;if(typeof a=="string"||a===null)v=[yn.fromValues({name:a,data:d})],_=l[2];else if(te(a))v=[yn.fromValues(a)],_=l[1];else if(Array.isArray(a))v=yn.fromValuesArray(a),_=l[1];else throw new O("The single-argument form of publish() expects a message object or an array of message objects",40013,400);_||(_={});const A=this.client,I=A.options,N=I.useBinaryProtocol?"msgpack":"json",H=A.options.idempotentRestPublishing,P=Se.defaultPostHeaders(A.options);if(fe(P,I.headers),H&&ka(v)){const W=await Fo(La);v.forEach(function(le,ge){le.id=W+":"+ge.toString()})}const X=await Da(v,this.channelOptions),Z=Fs(X),se=I.maxMessageSize;if(Z>se)throw new O(`Maximum size of messages that can be published at once exceeded (was ${Z} bytes; limit is ${se} bytes)`,40009,400);return this._publish(Ua(X,A._MsgPack,N),P,_)}async _publish(l,a,d){const v=this.client,_=v.options.useBinaryProtocol?"msgpack":"json",{body:A,unpacked:I}=await je.post(v,v.rest.channelMixin.basePath(this)+"/messages",l,a,d,null,!0),N=(I?A:Et(A,v._MsgPack,_))||{};return delete N.channel,delete N.messageId,N}async status(){return this.client.rest.channelMixin.status(this)}async getMessage(l){return R.logAction(this.logger,R.LOG_MICRO,"RestChannel.getMessage()","channel = "+this.name),this.client.rest.channelMixin.getMessage(this,l)}async updateMessage(l,a,d){return R.logAction(this.logger,R.LOG_MICRO,"RestChannel.updateMessage()","channel = "+this.name),this.client.rest.channelMixin.updateDeleteMessage(this,"message.update",l,a,d)}async deleteMessage(l,a,d){return R.logAction(this.logger,R.LOG_MICRO,"RestChannel.deleteMessage()","channel = "+this.name),this.client.rest.channelMixin.updateDeleteMessage(this,"message.delete",l,a,d)}async appendMessage(l,a,d){return R.logAction(this.logger,R.LOG_MICRO,"RestChannel.appendMessage()","channel = "+this.name),this.client.rest.channelMixin.updateDeleteMessage(this,"message.append",l,a,d)}async getMessageVersions(l,a){return R.logAction(this.logger,R.LOG_MICRO,"RestChannel.getMessageVersions()","channel = "+this.name),this.client.rest.channelMixin.getMessageVersions(this,l,a)}},Ga=Pa,so=class fv{constructor(a){this.entries=a&&a.entries||void 0,this.schema=a&&a.schema||void 0,this.appId=a&&a.appId||void 0,this.inProgress=a&&a.inProgress||void 0,this.unit=a&&a.unit||void 0,this.intervalId=a&&a.intervalId||void 0}static fromValues(a){return new fv(a)}},Uc=so,Ha=class{static basePath(l){return"/channels/"+encodeURIComponent(l.name)}static history(l,a){const d=l.client,v=d.options.useBinaryProtocol?"msgpack":"json",_=l.client.http.supportsLinkHeaders?void 0:v,A=Se.defaultGetHeaders(d.options);return fe(A,d.options.headers),new mn(d,this.basePath(l)+"/messages",A,_,async function(I,N,H){const P=H?I:Et(I,d._MsgPack,v);return Oa(P,l)}).get(a)}static async status(l){const a=l.client.options.useBinaryProtocol?"msgpack":"json",d=Se.defaultPostHeaders(l.client.options);return(await je.get(l.client,this.basePath(l),d,{},a,!0)).body}static async getMessage(l,a){const d=typeof a=="string"?a:a.serial;if(!d)throw new O('This message lacks a serial. Make sure you have enabled "Message annotations, updates, and deletes" in channel settings on your dashboard.',40003,400);const v=l.client,_=v.options.useBinaryProtocol?"msgpack":"json",A=Se.defaultGetHeaders(v.options);fe(A,v.options.headers);const{body:I,unpacked:N}=await je.get(v,this.basePath(l)+"/messages/"+encodeURIComponent(d),A,{},null,!0),H=N?I:Et(I,v._MsgPack,_);return Na(H,l)}static async updateDeleteMessage(l,a,d,v,_){if(!d.serial)throw new O('This message lacks a serial and cannot be updated. Make sure you have enabled "Message annotations, updates, and deletes" in channel settings on your dashboard.',40003,400);const A=l.client,I=A.options.useBinaryProtocol?"msgpack":"json",N=Se.defaultPostHeaders(A.options);fe(N,A.options.headers);const H=yn.fromValues(d);H.action=a,H.version=v;const P=await H.encode(l.channelOptions),X=Ua(P,A._MsgPack,I);let Z=je.patch;const{body:se,unpacked:W}=await Z(A,this.basePath(l)+"/messages/"+encodeURIComponent(d.serial),X,N,_||{},null,!0);return(W?se:Et(se,A._MsgPack,I))||{versionSerial:null}}static getMessageVersions(l,a,d){const v=typeof a=="string"?a:a.serial;if(!v)throw new O('This message lacks a serial. Make sure you have enabled "Message annotations, updates, and deletes" in channel settings on your dashboard.',40003,400);const _=l.client,A=_.options.useBinaryProtocol?"msgpack":"json",I=l.client.http.supportsLinkHeaders?void 0:A,N=Se.defaultGetHeaders(_.options);return fe(N,_.options.headers),new mn(_,this.basePath(l)+"/messages/"+encodeURIComponent(v)+"/versions",N,I,async(H,P,X)=>{const Z=X?H:Et(H,_._MsgPack,A);return Oa(Z,l)}).get(d||{})}},Lc=class{static basePath(l){return Ha.basePath(l.channel)+"/presence"}static async history(l,a){const d=l.channel.client,v=d.options.useBinaryProtocol?"msgpack":"json",_=l.channel.client.http.supportsLinkHeaders?void 0:v,A=Se.defaultGetHeaders(d.options);return fe(A,d.options.headers),new mn(d,this.basePath(l)+"/history",A,_,async(I,N,H)=>{const P=H?I:Et(I,d._MsgPack,v);return Ma(P,l.channel)}).get(a)}},il=class{constructor(l){this.channelMixin=Ha,this.presenceMixin=Lc,this.Resource=je,this.PaginatedResource=mn,this.DeviceDetails=Bn,this.PushChannelSubscription=io,this.client=l,this.channels=new qa(this.client),this.push=new Mc(this.client)}async stats(l){const a=Se.defaultGetHeaders(this.client.options),d=this.client.options.useBinaryProtocol?"msgpack":"json",v=this.client.http.supportsLinkHeaders?void 0:d;return fe(a,this.client.options.headers),new mn(this.client,"/stats",a,v,async(_,A,I)=>{const N=I?_:Et(_,this.client._MsgPack,d);for(let H=0;H<N.length;H++)N[H]=Uc.fromValues(N[H]);return N}).get(l)}async time(l){const a=Se.defaultGetHeaders(this.client.options,{format:"json"});this.client.options.headers&&fe(a,this.client.options.headers);const d=N=>this.client.baseUri(N)+"/time";let{error:v,body:_,unpacked:A}=await this.client.http.do(at.Get,d,a,null,l);if(v)throw v;A||(_=JSON.parse(_));const I=_[0];if(!I)throw new O("Internal error (unexpected result type from GET /time)",5e4,500);return this.client.serverTimeOffset=I-Date.now(),I}async request(l,a,d,v,_,A){var I;const[N,H,P]=this.client.options.useBinaryProtocol?(this.client._MsgPack||mt("MsgPack"),[this.client._MsgPack.encode,this.client._MsgPack.decode,"msgpack"]):[JSON.stringify,JSON.parse,"json"],X=this.client.http.supportsLinkHeaders?void 0:P;v=v||{};const Z=l.toLowerCase(),se=Z=="get"?Se.defaultGetHeaders(this.client.options,{format:P,protocolVersion:d}):Se.defaultPostHeaders(this.client.options,{format:P,protocolVersion:d});typeof _!="string"&&(_=(I=N(_))!=null?I:null),fe(se,this.client.options.headers),A&&fe(se,A);const W=new mn(this.client,a,se,X,async function(le,ge,Ce){return G(Ce?le:H(le))},!0);if(!V.Http.methods.includes(Z))throw new O("Unsupported method "+Z,40500,405);return V.Http.methodsWithBody.includes(Z)?W[Z](v,_):W[Z](v)}async batchPublish(l){let a,d;Array.isArray(l)?(a=l,d=!1):(a=[l],d=!0);const v=this.client.options.useBinaryProtocol?"msgpack":"json",_=Se.defaultPostHeaders(this.client.options);this.client.options.headers&&fe(_,this.client.options.headers);const A=gn(a,this.client._MsgPack,v),I=await je.post(this.client,"/messages",A,_,{},null,!0),N=I.unpacked?I.body:Et(I.body,this.client._MsgPack,v);return d?N[0]:N}async batchPresence(l){const a=this.client.options.useBinaryProtocol?"msgpack":"json",d=Se.defaultGetHeaders(this.client.options);this.client.options.headers&&fe(d,this.client.options.headers);const v=l.join(","),_=await je.get(this.client,"/presence",d,{channels:v},null,!0);return _.unpacked?_.body:Et(_.body,this.client._MsgPack,a)}async revokeTokens(l,a){if(_a(this.client.options))throw new O("Cannot revoke tokens when using token auth",40162,401);const d=this.client.options.keyName;let v=a??{};const _=D({targets:l.map(P=>`${P.type}:${P.value}`)},v),A=this.client.options.useBinaryProtocol?"msgpack":"json",I=Se.defaultPostHeaders(this.client.options);this.client.options.headers&&fe(I,this.client.options.headers);const N=gn(_,this.client._MsgPack,A),H=await je.post(this.client,`/keys/${d}/revokeTokens`,N,I,{},null,!0);return H.unpacked?H.body:Et(H.body,this.client._MsgPack,A)}},qa=class{constructor(l){this.client=l,this.all=Object.create(null)}get(l,a){l=String(l);let d=this.all[l];return d?a&&d.setOptions(a):this.all[l]=d=new Ga(this.client,l,a),d}release(l){delete this.all[String(l)]}},is=class extends $r{constructor(l){super(Se.objectifyOptions(l,!1,"BaseRest",R.defaultLogger,{Rest:il}))}},ro={Rest:il},Ba=class extends yn{static async fromEncoded(l,a){return Ia(R.defaultLogger,V.Crypto,l,a)}static async fromEncodedArray(l,a){return Dc(R.defaultLogger,V.Crypto,l,a)}static fromValues(l){return yn.fromValues(l)}},os=class extends ii{static async fromEncoded(l,a){return ba(R.defaultLogger,V.Crypto,l,a)}static async fromEncodedArray(l,a){return wc(R.defaultLogger,V.Crypto,l,a)}static fromValues(l){return ii.fromValues(l)}},ol=["annotation.create","annotation.delete"];async function sl(l,a,d){return Ci.fromValues(a).decode(d||{},l)}async function rl(l,a,d){return Promise.all(a.map(function(v){return sl(l,v,d)}))}async function ll(l,a){return Ci.fromValues(l).decode(a.channelOptions,a.logger)}async function Va(l,a){return Promise.all(l.map(function(d){return ll(d,a)}))}var al=class xd extends ni{async encode(){const a=Object.assign(new Ci,this,{action:ol.indexOf(this.action||"annotation.create")});return ei(a,{})}static fromValues(a){return Object.assign(new xd,a)}static fromValuesArray(a){return a.map(d=>xd.fromValues(d))}toString(){return Xt(this,"Annotation")}},Ci=class Id extends ni{toJSON(...a){return _i.call(this,...a)}static fromValues(a){return Object.assign(new Id,a)}static fromValuesArray(a){return a.map(d=>Id.fromValues(d))}async decode(a,d){const v=Object.assign(new al,B(D({},this),{action:ol[this.action]}));try{await Zo(v,a)}catch(_){R.logAction(d,R.LOG_ERROR,"WireAnnotation.decode()",Oe(_))}return v}toString(){return Xt(this,"WireAnnotation")}},ss=al,za=class extends ss{static async fromEncoded(l,a){return sl(R.defaultLogger,l,a)}static async fromEncodedArray(l,a){return rl(R.defaultLogger,l,a)}static fromValues(l){return ss.fromValues(l)}};function Fa(l){let a;switch(typeof l){case"string":a=l;break;case"object":a=l.serial;break}if(!a||typeof a!="string")throw new O("First argument of annotations.publish() must be either a Message (or at least an object with a string `serial` property) or a message serial (string)",40003,400);return a}function Ja(l,a){const d=Fa(l);if(!a||typeof a!="object")throw new O("Second argument of annotations.publish() must be an object (the intended annotation to publish)",40003,400);const v=ss.fromValues(a);return v.messageSerial=d,v.action||(v.action="annotation.create"),v}function Ya(l,a){return l.client.rest.channelMixin.basePath(l)+"/messages/"+encodeURIComponent(a)+"/annotations"}var Wt=class{constructor(l){this.channel=l}async publish(l,a){const d=Ja(l,a),v=await d.encode(),_=this.channel.client,A=_.options,I=A.useBinaryProtocol?"msgpack":"json",N=Se.defaultPostHeaders(_.options),H={};fe(N,_.options.headers);const P=gn([v],_._MsgPack,I);await je.post(_,Ya(this.channel,d.messageSerial),P,N,H,null,!0)}async delete(l,a){return a.action="annotation.delete",this.publish(l,a)}async get(l,a){const d=this.channel.client,v=Fa(l),_=d.options.useBinaryProtocol?"msgpack":"json",A=d.http.supportsLinkHeaders?void 0:_,I=Se.defaultGetHeaders(d.options);return fe(I,d.options.headers),new mn(d,Ya(this.channel,v),I,A,async(N,H,P)=>{const X=P?N:Et(N,d._MsgPack,_);return Va(X,this.channel)}).get(a)}},Ai=Wt,Ka=gn;function rs(l){const a=[];if(l)for(let d=0;d<l.length;d++)a.push(l[d].toString());return"[ "+a.join(", ")+" ]"}function Qa(l,a,d,v,_,A){const I=Et(l,a,A);return Js(I,d,v,_)}function Js(l,a,d,v){let _;l.error&&(_=O.fromValues(l.error));let A;l.messages&&(A=ns.fromValuesArray(l.messages));let I;a&&l.presence&&(I=a.WirePresenceMessage.fromValuesArray(l.presence));let N;d&&l.annotations&&(N=d.WireAnnotation.fromValuesArray(l.annotations));let H;return v&&l.state&&(H=v.WireObjectMessage.fromValuesArray(l.state,Ve,no)),Object.assign(new ls,B(D({},l),{presence:I,messages:A,annotations:N,state:H,error:_}))}function Ys(l){return a=>{var d;return Js(a,{WirePresenceMessage:ts},{WireAnnotation:Ci},(d=l==null?void 0:l.LiveObjectsPlugin)!=null?d:null)}}function Ft(l){return Object.assign(new ls,l)}function oi(l,a,d,v){let _="[ProtocolMessage";l.action!==void 0&&(_+="; action="+Hs[l.action]||l.action);const A=["id","channel","channelSerial","connectionId","count","msgSerial","timestamp"];let I;for(let N=0;N<A.length;N++)I=A[N],l[I]!==void 0&&(_+="; "+I+"="+l[I]);if(l.messages&&(_+="; messages="+rs(ns.fromValuesArray(l.messages))),l.presence&&a&&(_+="; presence="+rs(a.WirePresenceMessage.fromValuesArray(l.presence))),l.annotations&&d&&(_+="; annotations="+rs(d.WireAnnotation.fromValuesArray(l.annotations))),l.state&&v&&(_+="; state="+rs(v.WireObjectMessage.fromValuesArray(l.state,Ve,no))),l.error&&(_+="; error="+O.fromValues(l.error).toString()),l.auth&&l.auth.accessToken&&(_+="; token="+l.auth.accessToken),l.flags&&(_+="; flags="+Sc.filter(l.hasFlag).join(",")),l.params){let N="";xs(l.params,function(H){N.length>0&&(N+="; "),N+=H+"="+l.params[H]}),N.length>0&&(_+="; params=["+N+"]")}return _+="]",_}var ls=class{constructor(){this.hasFlag=l=>(this.flags&Vt[l])>0}setFlag(l){return this.flags=this.flags|Vt[l]}getMode(){return(this.flags||0)&Vt.MODE_ALL}encodeModesToFlags(l){l.forEach(a=>this.setFlag(a))}decodeModesFromFlags(){const l=[];return Wo.forEach(a=>{this.hasFlag(a)&&l.push(a)}),l.length>0?l:void 0}},as=ls,ul=class{constructor(l,a,d,v,_){this.previous=l,this.current=a,a==="attached"&&(this.resumed=d,this.hasBacklog=v),_&&(this.reason=_)}},Ks=ul,si=function(){};function lo(l){if(l&&"params"in l&&!te(l.params))return new O("options.params must be an object",4e4,400);if(l&&"modes"in l){if(!Array.isArray(l.modes))return new O("options.modes must be an array",4e4,400);for(let a=0;a<l.modes.length;a++){const d=l.modes[a];if(!d||typeof d!="string"||!Wo.includes(String.prototype.toUpperCase.call(d)))return new O("Invalid channel mode: "+d,4e4,400)}}}var cl=class Nd extends vt{constructor(a,d,v){var _,A,I;super(a.logger),this._annotations=null,this._mode=0,this.retryCount=0,this.history=async function(N){R.logAction(this.logger,R.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name);const H=this.client.rest.channelMixin;if(N&&N.untilAttach){if(this.state!=="attached")throw new O("option untilAttach requires the channel to be attached",4e4,400);if(!this.properties.attachSerial)throw new O("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400);delete N.untilAttach,N.from_serial=this.properties.attachSerial}return H.history(this,N)},this.whenState=N=>vt.prototype.whenState.call(this,N,this.state),R.logAction(this.logger,R.LOG_MINOR,"RealtimeChannel()","started; name = "+d),this.name=d,this.channelOptions=Ds((_=a._Crypto)!=null?_:null,this.logger,v),this.client=a,this._presence=a._RealtimePresence?new a._RealtimePresence.RealtimePresence(this):null,a._Annotations&&(this._annotations=new a._Annotations.RealtimeAnnotations(this)),this.connectionManager=a.connection.connectionManager,this.state="initialized",this.subscriptions=new vt(this.logger),this.syncChannelSerial=void 0,this.properties={attachSerial:void 0,channelSerial:void 0},this.setOptions(v),this.errorReason=null,this._attachResume=!1,this._decodingContext={channelOptions:this.channelOptions,plugins:a.options.plugins||{},baseEncodedPreviousPayload:void 0},this._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},this._allChannelChanges=new vt(this.logger),(A=a.options.plugins)!=null&&A.Push&&(this._push=new a.options.plugins.Push.PushChannel(this)),(I=a.options.plugins)!=null&&I.LiveObjects&&(this._object=new a.options.plugins.LiveObjects.RealtimeObject(this))}get presence(){return this._presence||mt("RealtimePresence"),this._presence}get annotations(){return this._annotations||mt("Annotations"),this._annotations}get push(){return this._push||mt("Push"),this._push}get object(){return this._object||mt("LiveObjects"),this._object}invalidStateError(){return new O("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)}static processListenerArgs(a){return a=Array.prototype.slice.call(a),typeof a[0]=="function"&&a.unshift(null),a}async setOptions(a){var d;const v=this.channelOptions,_=lo(a);if(_)throw _;if(this.channelOptions=Ds((d=this.client._Crypto)!=null?d:null,this.logger,a),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(a,v))return this.attachImpl(),new Promise((A,I)=>{this._allChannelChanges.once(["attached","update","detached","failed"],function(N){switch(this.event){case"update":case"attached":A();break;default:I(N.reason)}})})}_shouldReattachToSetOptions(a,d){if(!(this.state==="attached"||this.state==="attaching"))return!1;if(a!=null&&a.params){const v=fl(a.params),_=fl(d.params);if(Object.keys(v).length!==Object.keys(_).length||!ma(_,v))return!0}return!!(a!=null&&a.modes&&(!d.modes||!Yo(a.modes,d.modes)))}async publish(...a){const d=a[0],v=a[1];let _,A;if(typeof d=="string"||d===null||d===void 0)_=[yn.fromValues({name:d,data:v})],A=a[2];else if(te(d))_=[yn.fromValues(d)],A=a[1];else if(Array.isArray(d))_=yn.fromValuesArray(d),A=a[1];else throw new O("The single-argument form of publish() expects a message object or an array of message objects",40013,400);const I=this.client.options.maxMessageSize,N=await Da(_,this.channelOptions),H=Fs(N);if(H>I)throw new O(`Maximum size of messages that can be published at once exceeded (was ${H} bytes; limit is ${I} bytes)`,40009,400);this.throwIfUnpublishableState(),R.logAction(this.logger,R.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+this.state+", message count = "+N.length);const P=Ft({action:Ee.MESSAGE,channel:this.name,messages:N,params:A?Vo(A):void 0});return await this.sendMessage(P)||{serials:[]}}throwIfUnpublishableState(){if(!this.connectionManager.activeState())throw this.connectionManager.getError();if(this.state==="failed"||this.state==="suspended")throw this.invalidStateError()}onEvent(a){R.logAction(this.logger,R.LOG_MICRO,"RealtimeChannel.onEvent()","received message");const d=this.subscriptions;for(let v=0;v<a.length;v++){const _=a[v];d.emit(_.name,_)}}async attach(){return this.state==="attached"?null:new Promise((a,d)=>{this._attach(!1,null,(v,_)=>v?d(v):a(_))})}_attach(a,d,v){v||(v=A=>{A&&R.logAction(this.logger,R.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+A.toString())});const _=this.connectionManager;if(!_.activeState()){v(_.getError());return}(this.state!=="attaching"||a)&&this.requestState("attaching",d),this.once(function(A){switch(this.event){case"attached":v==null||v(null,A);break;case"detached":case"suspended":case"failed":v==null||v(A.reason||_.getError()||new O("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":v==null||v(new O("Attach request superseded by a subsequent detach request",9e4,409));break}})}attachImpl(){R.logAction(this.logger,R.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");const a=Ft({action:Ee.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this.channelOptions.modes&&a.encodeModesToFlags(qt(this.channelOptions.modes)),this._attachResume&&a.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(a.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(a).catch(si)}async detach(){const a=this.connectionManager;switch(this.state){case"suspended":this.notifyState("detached");return;case"detached":return;case"failed":throw new O("Unable to detach; channel state = failed",90001,400);default:if(a.state.state!=="connected"){this.notifyState("detached");return}this.requestState("detaching");case"detaching":return new Promise((d,v)=>{this.once(function(_){switch(this.event){case"detached":d();break;case"attached":case"suspended":case"failed":v(_.reason||a.getError()||new O("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":v(new O("Detach request superseded by a subsequent attach request",9e4,409));break}})})}}detachImpl(){R.logAction(this.logger,R.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");const a=Ft({action:Ee.DETACH,channel:this.name});this.sendMessage(a).catch(si)}async subscribe(...a){const[d,v]=Nd.processListenerArgs(a);if(this.state==="failed")throw O.fromValues(this.invalidStateError());return d&&typeof d=="object"&&!Array.isArray(d)?this.client._FilteredSubscriptions.subscribeFilter(this,d,v):this.subscriptions.on(d,v),this.channelOptions.attachOnSubscribe!==!1?this.attach():null}unsubscribe(...a){var d;const[v,_]=Nd.processListenerArgs(a);if(typeof v=="object"&&!_||(d=this.filteredSubscriptions)!=null&&d.has(_)){this.client._FilteredSubscriptions.getAndDeleteFilteredSubscriptions(this,v,_).forEach(A=>this.subscriptions.off(A));return}this.subscriptions.off(v,_)}sync(){switch(this.state){case"initialized":case"detaching":case"detached":throw new re("Unable to sync to channel; not attached",4e4)}const a=this.connectionManager;if(!a.activeState())throw a.getError();const d=Ft({action:Ee.SYNC,channel:this.name});this.syncChannelSerial&&(d.channelSerial=this.syncChannelSerial),a.send(d)}async sendMessage(a){return new Promise((d,v)=>{this.connectionManager.send(a,this.client.options.queueMessages,(_,A)=>{_?v(_):d(A)})})}async sendPresence(a){const d=Ft({action:Ee.PRESENCE,channel:this.name,presence:a});await this.sendMessage(d)}async sendState(a){const d=Ft({action:Ee.OBJECT,channel:this.name,state:a});await this.sendMessage(d)}async processMessage(a){(a.action===Ee.ATTACHED||a.action===Ee.MESSAGE||a.action===Ee.PRESENCE||a.action===Ee.OBJECT||a.action===Ee.ANNOTATION)&&this.setChannelSerial(a.channelSerial);let d,v=!1;switch(a.action){case Ee.ATTACHED:{this.properties.attachSerial=a.channelSerial,this._mode=a.getMode(),this.params=a.params||{};const _=a.decodeModesFromFlags();this.modes=_&&yi(_)||void 0;const A=a.hasFlag("RESUMED"),I=a.hasFlag("HAS_PRESENCE"),N=a.hasFlag("HAS_BACKLOG"),H=a.hasFlag("HAS_OBJECTS");if(this.state==="attached"){A||(this._presence&&this._presence.onAttached(I),this._object&&this._object.onAttached(H));const P=new Ks(this.state,this.state,A,N,a.error);this._allChannelChanges.emit("update",P),(!A||this.channelOptions.updateOnAttached)&&this.emit("update",P)}else this.state==="detaching"?this.checkPendingState():this.notifyState("attached",a.error,A,I,N,H);break}case Ee.DETACHED:{const _=a.error?O.fromValues(a.error):new O("Channel detached",90001,404);this.state==="detaching"?this.notifyState("detached",_):this.state==="attaching"?this.notifyState("suspended",_):(this.state==="attached"||this.state==="suspended")&&this.requestState("attaching",_);break}case Ee.SYNC:if(v=!0,d=this.syncChannelSerial=a.channelSerial,!a.presence)break;case Ee.PRESENCE:{if(!a.presence)break;ti(a);const _=this.channelOptions;if(this._presence){const A=await Promise.all(a.presence.map(I=>I.decode(_,this.logger)));this._presence.setPresence(A,v,d)}break}case Ee.OBJECT:case Ee.OBJECT_SYNC:{if(!this._object||!a.state)return;ti(a);const _=this.client.connection.connectionManager.getActiveTransportFormat(),A=a.state.map(I=>I.decode(this.client,_));a.action===Ee.OBJECT?this._object.handleObjectMessages(A):this._object.handleObjectSyncMessages(A,a.channelSerial);break}case Ee.MESSAGE:{if(this.state!=="attached"){R.logAction(this.logger,R.LOG_MAJOR,"RealtimeChannel.processMessage()",'Message "'+a.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');return}ti(a);const _=a.messages,A=_[0],I=_[_.length-1];if(A.extras&&A.extras.delta&&A.extras.delta.from!==this._lastPayload.messageId){const H='Delta message decode failure - previous message not available for message "'+a.id+'" on this channel "'+this.name+'".';R.logAction(this.logger,R.LOG_ERROR,"RealtimeChannel.processMessage()",H),this._startDecodeFailureRecovery(new O(H,40018,400));break}let N=[];for(let H=0;H<_.length;H++){const{decoded:P,err:X}=await _[H].decodeWithErr(this._decodingContext,this.logger);if(N[H]=P,X)switch(X.code){case 40018:this._startDecodeFailureRecovery(X);return;case 40019:case 40021:this.notifyState("failed",X);return}}this._lastPayload.messageId=I.id,this._lastPayload.protocolMessageChannelSerial=a.channelSerial,this.onEvent(N);break}case Ee.ANNOTATION:{ti(a);const _=this.channelOptions;if(this._annotations){const A=await Promise.all((a.annotations||[]).map(I=>I.decode(_,this.logger)));this._annotations._processIncoming(A)}break}case Ee.ERROR:{const _=a.error;_&&_.code==80016?this.checkPendingState():this.notifyState("failed",O.fromValues(_));break}default:R.logAction(this.logger,R.LOG_MAJOR,"RealtimeChannel.processMessage()","Protocol error: unrecognised message action ("+a.action+")")}}_startDecodeFailureRecovery(a){this._lastPayload.decodeFailureRecoveryInProgress||(R.logAction(this.logger,R.LOG_MAJOR,"RealtimeChannel.processMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,a,()=>{this._lastPayload.decodeFailureRecoveryInProgress=!1}))}onAttached(){R.logAction(this.logger,R.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)}notifyState(a,d,v,_,A,I){if(R.logAction(this.logger,R.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+a),this.clearStateTimer(),["detached","suspended","failed"].includes(a)&&(this.properties.channelSerial=null),a===this.state)return;this._presence&&this._presence.actOnChannelState(a,_,d),this._object&&this._object.actOnChannelState(a,I),a==="suspended"&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),d&&(this.errorReason=d);const N=new Ks(this.state,a,v,A,d),H='Channel state for channel "'+this.name+'"',P=a+(d?"; reason: "+d:"");a==="failed"?R.logAction(this.logger,R.LOG_ERROR,H,P):R.logAction(this.logger,R.LOG_MAJOR,H,P),a!=="attaching"&&a!=="suspended"&&(this.retryCount=0),a==="attached"&&this.onAttached(),a==="attached"?this._attachResume=!0:(a==="detaching"||a==="failed")&&(this._attachResume=!1),this.state=a,this._allChannelChanges.emit(a,N),this.emit(a,N)}requestState(a,d){R.logAction(this.logger,R.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+a),this.notifyState(a,d),this.checkPendingState()}checkPendingState(){if(!this.connectionManager.state.sendEvents){R.logAction(this.logger,R.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state);return}switch(R.logAction(this.logger,R.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync();break}}timeoutPendingState(){switch(this.state){case"attaching":{const a=new O("Channel attach timed out",90007,408);this.notifyState("suspended",a);break}case"detaching":{const a=new O("Channel detach timed out",90007,408);this.notifyState("attached",a);break}default:this.checkPendingState();break}}startStateTimerIfNotRunning(){this.stateTimer||(this.stateTimer=setTimeout(()=>{R.logAction(this.logger,R.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),this.stateTimer=null,this.timeoutPendingState()},this.client.options.timeouts.realtimeRequestTimeout))}clearStateTimer(){const a=this.stateTimer;a&&(clearTimeout(a),this.stateTimer=null)}startRetryTimer(){if(this.retryTimer)return;this.retryCount++;const a=kr(this.client.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout(()=>{this.state==="suspended"&&this.connectionManager.state.sendEvents&&(this.retryTimer=null,R.logAction(this.logger,R.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),this.requestState("attaching"))},a)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}getReleaseErr(){const a=this.state;return a==="initialized"||a==="detached"||a==="failed"?null:new O("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+a,90001,400)}setChannelSerial(a){R.logAction(this.logger,R.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+a+"; previous = "+this.properties.channelSerial),a&&(this.properties.channelSerial=a)}async status(){return this.client.rest.channelMixin.status(this)}async getMessage(a){return R.logAction(this.logger,R.LOG_MICRO,"RealtimeChannel.getMessage()","channel = "+this.name),this.client.rest.channelMixin.getMessage(this,a)}async updateMessage(a,d,v){return R.logAction(this.logger,R.LOG_MICRO,"RealtimeChannel.updateMessage()","channel = "+this.name),this.sendUpdate(a,"message.update",d,v)}async deleteMessage(a,d,v){return R.logAction(this.logger,R.LOG_MICRO,"RealtimeChannel.deleteMessage()","channel = "+this.name),this.sendUpdate(a,"message.delete",d,v)}async appendMessage(a,d,v){return R.logAction(this.logger,R.LOG_MICRO,"RealtimeChannel.appendMessage()","channel = "+this.name),this.sendUpdate(a,"message.append",d,v)}async sendUpdate(a,d,v,_){var A,I;if(!a.serial)throw new O('This message lacks a serial and cannot be updated. Make sure you have enabled "Message annotations, updates, and deletes" in channel settings on your dashboard.',40003,400);this.throwIfUnpublishableState();const H=await yn.fromValues(B(D({},a),{action:d,version:v})).encode(this.channelOptions),P=Ft({action:Ee.MESSAGE,channel:this.name,messages:[H],params:_?Vo(_):void 0}),X=await this.sendMessage(P);return{versionSerial:(I=(A=X==null?void 0:X.serials)==null?void 0:A[0])!=null?I:null}}async getMessageVersions(a,d){return R.logAction(this.logger,R.LOG_MICRO,"RealtimeChannel.getMessageVersions()","channel = "+this.name),this.client.rest.channelMixin.getMessageVersions(this,a,d)}async ensureAttached(){switch(this.state){case"attached":case"suspended":break;case"initialized":case"detached":case"detaching":case"attaching":await this.attach();break;case"failed":default:throw O.fromValues(this.invalidStateError())}}};function fl(l){const a=l||{},{agent:d}=a;return Q(a,["agent"])}var vn=cl,Xa=class{constructor(l){this.channel=l,this.logger=l.logger,this.subscriptions=new vt(this.logger)}async publish(l,a){const d=this.channel.name,v=Ja(l,a),_=await v.encode();this.channel.throwIfUnpublishableState(),R.logAction(this.logger,R.LOG_MICRO,"RealtimeAnnotations.publish()","channelName = "+d+", sending annotation with messageSerial = "+v.messageSerial+", type = "+v.type);const A=Ft({action:Ee.ANNOTATION,channel:d,annotations:[_]});await this.channel.sendMessage(A)}async delete(l,a){a.action="annotation.delete",await this.publish(l,a)}async subscribe(...l){const a=vn.processListenerArgs(l),d=a[0],v=a[1],_=this.channel;if(_.state==="failed")throw O.fromValues(_.invalidStateError());if(this.subscriptions.on(d,v),this.channel.channelOptions.attachOnSubscribe!==!1&&await _.attach(),(this.channel.state==="attached"&&this.channel._mode&Vt.ANNOTATION_SUBSCRIBE)===0)throw new O("You are trying to add an annotation listener, but you haven't requested the annotation_subscribe channel mode in ChannelOptions, so this won't do anything (we only deliver annotations to clients who have explicitly requested them)",93001,400)}unsubscribe(...l){const a=vn.processListenerArgs(l),d=a[0],v=a[1];this.subscriptions.off(d,v)}_processIncoming(l){for(const a of l)this.subscriptions.emit(a.type||"",a)}async get(l,a){return Ai.prototype.get.call(this,l,a)}},dl=Xa,ri=class ec extends is{constructor(a){var d,v;if(!ec._MsgPack)throw new Error("Expected DefaultRest._MsgPack to have been set");super(Se.objectifyOptions(a,!0,"Rest",R.defaultLogger,B(D({},ro),{Crypto:(d=ec.Crypto)!=null?d:void 0,MsgPack:(v=ec._MsgPack)!=null?v:void 0,Annotations:{Annotation:ss,WireAnnotation:Ci,RealtimeAnnotations:dl,RestAnnotations:Ai}})))}static get Crypto(){if(this._Crypto===null)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(a){this._Crypto=a}};ri._Crypto=null,ri.Message=Ba,ri.PresenceMessage=os,ri.Annotation=za,ri._MsgPack=null,ri._Http=Gs;var hl=ri,kc=class extends vt{constructor(l){super(l),this.messages=[]}count(){return this.messages.length}push(l){this.messages.push(l)}shift(){return this.messages.shift()}last(){return this.messages[this.messages.length-1]}copyAll(){return this.messages.slice()}append(l){this.messages.push.apply(this.messages,l)}prepend(l){this.messages.unshift.apply(this.messages,l)}completeMessages(l,a,d){R.logAction(this.logger,R.LOG_MICRO,"MessageQueue.completeMessages()",l=="all"?"(all)":"serial = "+l.serial+"; count = "+l.count),a=a||null;const v=this.messages;if(v.length===0)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");let _=[];if(l==="all")_=v.splice(0);else{const A=v[0];if(A){const I=A.message.msgSerial,N=l.serial+l.count;N>I&&(_=v.splice(0,N-I))}}for(let A=0;A<_.length;A++){const I=_[A],N=d==null?void 0:d[A];I.callback(a,N)}v.length==0&&this.emit("idle")}completeAllMessages(l){this.completeMessages("all",l)}resetSendAttempted(){for(let l of this.messages)l.sendAttempted=!1}clear(){R.logAction(this.logger,R.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")}},Wa=kc,pl=class{constructor(l,a){this.message=l,this.callback=a,this.merged=!1;const d=l.action;this.sendAttempted=!1,this.ackRequired=typeof d=="number"&&[Ee.MESSAGE,Ee.PRESENCE,Ee.ANNOTATION,Ee.OBJECT].includes(d)}},Za=class extends vt{constructor(l){super(l.logger),this.transport=l,this.messageQueue=new Wa(this.logger),l.on("ack",(a,d,v)=>{this.onAck(a,d,v)}),l.on("nack",(a,d,v)=>{this.onNack(a,d,v)})}onAck(l,a,d){R.logAction(this.logger,R.LOG_MICRO,"Protocol.onAck()","serial = "+l+"; count = "+a),this.messageQueue.completeMessages({serial:l,count:a},null,d)}onNack(l,a,d){R.logAction(this.logger,R.LOG_ERROR,"Protocol.onNack()","serial = "+l+"; count = "+a+"; err = "+Oe(d)),d||(d=new O("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages({serial:l,count:a},d)}onceIdle(l){const a=this.messageQueue;if(a.count()===0){l();return}a.once("idle",l)}send(l){l.ackRequired&&this.messageQueue.push(l),this.logger.shouldLog(R.LOG_MICRO)&&R.logActionNoStrip(this.logger,R.LOG_MICRO,"Protocol.send()","sending msg; "+oi(l.message,this.transport.connectionManager.realtime._RealtimePresence,this.transport.connectionManager.realtime._Annotations,this.transport.connectionManager.realtime._liveObjectsPlugin)),l.sendAttempted=!0,this.transport.send(l.message)}getTransport(){return this.transport}getPendingMessages(){return this.messageQueue.copyAll()}clearPendingMessages(){return this.messageQueue.clear()}finish(){const l=this.transport;this.onceIdle(function(){l.disconnect()})}},gl=Za,Tn=class{constructor(l,a,d,v){this.previous=l,this.current=a,d&&(this.retryIn=d),v&&(this.reason=v)}},Ri=Tn,Tt={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},ao={disconnected:()=>O.fromValues({statusCode:400,code:Tt.DISCONNECTED,message:"Connection to server temporarily unavailable"}),suspended:()=>O.fromValues({statusCode:400,code:Tt.SUSPENDED,message:"Connection to server unavailable"}),failed:()=>O.fromValues({statusCode:400,code:Tt.FAILED,message:"Connection failed or disconnected by server"}),closing:()=>O.fromValues({statusCode:400,code:Tt.CLOSING,message:"Connection closing"}),closed:()=>O.fromValues({statusCode:400,code:Tt.CLOSED,message:"Connection closed"}),unknownConnectionErr:()=>O.fromValues({statusCode:500,code:Tt.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"}),unknownChannelErr:()=>O.fromValues({statusCode:500,code:Tt.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})};function ml(l){return!l.statusCode||!l.code||l.statusCode>=500?!0:Object.values(Tt).includes(l.code)}var Mn=ao,Qs=Ft({action:Ee.CLOSE}),yl=Ft({action:Ee.DISCONNECT}),bi=class extends vt{constructor(l,a,d,v){super(l.logger),v&&(d.format=void 0,d.heartbeats=!0),this.connectionManager=l,this.auth=a,this.params=d,this.timeouts=d.options.timeouts,this.format=d.format,this.isConnected=!1,this.isFinished=!1,this.isDisposed=!1,this.maxIdleInterval=null,this.idleTimer=null,this.lastActivity=null}connect(){}close(){this.isConnected&&this.requestClose(),this.finish("closed",Mn.closed())}disconnect(l){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",l||Mn.disconnected())}fail(l){this.isConnected&&this.requestDisconnect(),this.finish("failed",l||Mn.failed())}finish(l,a){var d;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout((d=this.idleTimer)!=null?d:void 0),this.idleTimer=null,this.emit(l,a),this.dispose())}onProtocolMessage(l){switch(this.logger.shouldLog(R.LOG_MICRO)&&R.logActionNoStrip(this.logger,R.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+oi(l,this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._liveObjectsPlugin)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),l.action){case Ee.HEARTBEAT:R.logActionNoStrip(this.logger,R.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",l.id);break;case Ee.CONNECTED:this.onConnect(l),this.emit("connected",l.error,l.connectionId,l.connectionDetails,l);break;case Ee.CLOSED:this.onClose(l);break;case Ee.DISCONNECTED:this.onDisconnect(l);break;case Ee.ACK:this.emit("ack",l.msgSerial,l.count,l.res);break;case Ee.NACK:this.emit("nack",l.msgSerial,l.count,l.error);break;case Ee.SYNC:this.connectionManager.onChannelMessage(l,this);break;case Ee.ACTIVATE:break;case Ee.AUTH:Ht(this.auth.authorize(),a=>{a&&R.logAction(this.logger,R.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+Oe(a))});break;case Ee.ERROR:if(R.logAction(this.logger,R.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+V.Config.inspect(l.error)+(l.channel?", channel: "+l.channel:"")),l.channel===void 0){this.onFatalError(l);break}this.connectionManager.onChannelMessage(l,this);break;default:this.connectionManager.onChannelMessage(l,this)}}onConnect(l){if(this.isConnected=!0,!l.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");const a=l.connectionDetails.maxIdleInterval;a&&(this.maxIdleInterval=a+this.timeouts.realtimeRequestTimeout,this.onActivity())}onDisconnect(l){const a=l&&l.error;R.logAction(this.logger,R.LOG_MINOR,"Transport.onDisconnect()","err = "+Oe(a)),this.finish("disconnected",a)}onFatalError(l){const a=l&&l.error;R.logAction(this.logger,R.LOG_MINOR,"Transport.onFatalError()","err = "+Oe(a)),this.finish("failed",a)}onClose(l){const a=l&&l.error;R.logAction(this.logger,R.LOG_MINOR,"Transport.onClose()","err = "+Oe(a)),this.finish("closed",a)}requestClose(){R.logAction(this.logger,R.LOG_MINOR,"Transport.requestClose()",""),this.send(Qs)}requestDisconnect(){R.logAction(this.logger,R.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(yl)}ping(l){const a={action:Ee.HEARTBEAT};l&&(a.id=l),this.send(Ft(a))}dispose(){R.logAction(this.logger,R.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()}onActivity(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=Date.now(),this.setIdleTimer(this.maxIdleInterval+100))}setIdleTimer(l){this.idleTimer||(this.idleTimer=setTimeout(()=>{this.onIdleTimerExpire()},l))}onIdleTimerExpire(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;const l=Date.now()-this.lastActivity,a=this.maxIdleInterval-l;if(a<=0){const d="No activity seen from realtime in "+l+"ms; assuming connection has dropped";R.logAction(this.logger,R.LOG_ERROR,"Transport.onIdleTimerExpire()",d),this.disconnect(new O(d,80003,408))}else this.setIdleTimer(a+100)}static tryConnect(l,a,d,v,_){const A=new l(a,d,v);let I;const N=function(P){clearTimeout(I),_({event:this.event,error:P})},H=a.options.timeouts.realtimeRequestTimeout;return I=setTimeout(()=>{A.off(["preconnect","disconnected","failed"]),A.dispose(),N.call({event:"disconnected"},new O("Timeout waiting for transport to indicate itself viable",5e4,500))},H),A.on(["failed","disconnected"],N),A.on("preconnect",function(){R.logAction(a.logger,R.LOG_MINOR,"Transport.tryConnect()","viable transport "+A),clearTimeout(I),A.off(["failed","disconnected"],N),_(null,A)}),A.connect(),A}static isAvailable(){throw new O("isAvailable not implemented for transport",5e4,500)}},Mi=bi,Mt;(l=>{l.WebSocket="web_socket",l.Comet="comet",l.XhrPolling="xhr_polling"})(Mt||(Mt={}));var uo=typeof ko<"u"?ko:typeof window<"u"?window:self,vl=()=>{var l;return typeof V.WebStorage<"u"&&((l=V.WebStorage)==null?void 0:l.localSupported)},wt=()=>{var l;return typeof V.WebStorage<"u"&&((l=V.WebStorage)==null?void 0:l.sessionSupported)},Xs=function(){},Sn="ably-transport-preference";function Ws(l){try{return JSON.parse(l)}catch{return null}}var Zs=class{constructor(l,a,d,v){this.options=l,this.host=a,this.mode=d,this.connectionKey=v,this.format=l.useBinaryProtocol?"msgpack":"json"}getConnectParams(l){const a=l?Be(l):{},d=this.options;switch(this.mode){case"resume":a.resume=this.connectionKey;break;case"recover":{const v=Ws(d.recover);v&&(a.recover=v.connectionKey);break}}return d.clientId!==void 0&&(a.clientId=d.clientId),d.echoMessages===!1&&(a.echo="false"),this.format!==void 0&&(a.format=this.format),this.stream!==void 0&&(a.stream=this.stream),this.heartbeats!==void 0&&(a.heartbeats=this.heartbeats),a.v=Se.protocolVersion,a.agent=It(this.options),d.transportParams!==void 0&&fe(a,d.transportParams),a}toString(){let l="[mode="+this.mode;return this.host&&(l+=",host="+this.host),this.connectionKey&&(l+=",connectionKey="+this.connectionKey),this.format&&(l+=",format="+this.format),l+="]",l}},wi=class dv extends vt{constructor(a,d){super(a.logger),this.supportedTransports={},this.disconnectedRetryCount=0,this.pendingChannelMessagesState={isProcessing:!1,queue:[]},this.realtime=a,this.initTransports(),this.options=d;const v=d.timeouts,_=v.webSocketConnectTimeout+v.realtimeRequestTimeout;if(this.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:_,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:v.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:v.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:v.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},this.state=this.states.initialized,this.errorReason=null,this.queuedMessages=new Wa(this.logger),this.msgSerial=0,this.connectionDetails=void 0,this.connectionId=void 0,this.connectionKey=void 0,this.connectionStateTtl=v.connectionStateTtl,this.maxIdleInterval=null,this.transports=lt(d.transports||Se.defaultTransports,this.supportedTransports),this.transportPreference=null,this.transports.includes(Mt.WebSocket)&&(this.webSocketTransportAvailable=!0),this.transports.includes(Mt.XhrPolling)?this.baseTransport=Mt.XhrPolling:this.transports.includes(Mt.Comet)&&(this.baseTransport=Mt.Comet),this.domains=Se.getHosts(d),this.activeProtocol=null,this.host=null,this.lastAutoReconnectAttempt=null,this.lastActivity=null,this.forceFallbackHost=!1,this.connectCounter=0,this.wsCheckResult=null,this.webSocketSlowTimer=null,this.webSocketGiveUpTimer=null,this.abandonedWebSocket=!1,R.logAction(this.logger,R.LOG_MINOR,"Realtime.ConnectionManager()","started"),R.logAction(this.logger,R.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(d.transports||Se.defaultTransports)+"]"),R.logAction(this.logger,R.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+this.transports+"]"),R.logAction(this.logger,R.LOG_MICRO,"Realtime.ConnectionManager()","http domains = ["+this.domains+"]"),!this.transports.length){const I="no requested transports available";throw R.logAction(this.logger,R.LOG_ERROR,"realtime.ConnectionManager()",I),new Error(I)}const A=V.Config.addEventListener;A&&(wt()&&typeof d.recover=="function"&&A("beforeunload",this.persistConnection.bind(this)),d.closeOnUnload===!0&&A("beforeunload",()=>{R.logAction(this.logger,R.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),this.requestState({state:"closing"})}),A("online",()=>{var I;this.state==this.states.disconnected||this.state==this.states.suspended?(R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager caught browser online event","reattempting connection"),this.requestState({state:"connecting"})):this.state==this.states.connecting&&((I=this.pendingTransport)==null||I.off(),this.disconnectAllTransports(),this.startConnect())}),A("offline",()=>{this.state==this.states.connected&&(R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager caught browser offline event","disconnecting active transport"),this.disconnectAllTransports())}))}static supportedTransports(a){const d={supportedTransports:{}};return this.initTransports(a,d),d.supportedTransports}static initTransports(a,d){const v=D(D({},V.Transports.bundledImplementations),a);[Mt.WebSocket,...V.Transports.order].forEach(_=>{const A=v[_];A&&A.isAvailable()&&(d.supportedTransports[_]=A)})}initTransports(){dv.initTransports(this.realtime._additionalTransportImplementations,this)}createTransportParams(a,d){return new Zs(this.options,a,d,this.connectionKey)}getTransportParams(a){(v=>{if(this.connectionKey){v("resume");return}if(typeof this.options.recover=="string"){v("recover");return}const _=this.options.recover,A=this.getSessionRecoverData(),I=this.sessionRecoveryName();if(A&&typeof _=="function"){R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data (recovery scope: "+I+")"),_(A,N=>{N?(this.options.recover=A.recoveryKey,v("recover")):v("clean")});return}v("clean")})(v=>{const _=this.createTransportParams(null,v);if(v==="recover"){R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+this.options.recover);const A=Ws(this.options.recover);A&&(this.msgSerial=A.msgSerial)}else R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+_.toString());a(_)})}tryATransport(a,d,v){R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+d),this.proposedTransport=Mi.tryConnect(this.supportedTransports[d],this,this.realtime.auth,a,(_,A)=>{const I=this.state;if(I==this.states.closing||I==this.states.closed||I==this.states.failed){A&&(R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+I.state+" while we were attempting the transport; closing "+A),A.close()),v(!0);return}if(_){R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+d+" "+_.event+", err: "+_.error.toString()),ht.isTokenErr(_.error)&&!(this.errorReason&&ht.isTokenErr(this.errorReason))?(this.errorReason=_.error,Ht(this.realtime.auth._forceNewToken(null,null),N=>{if(N){this.actOnErrorFromAuthorize(N);return}this.tryATransport(a,d,v)})):_.event==="failed"?(this.notifyState({state:"failed",error:_.error}),v(!0)):_.event==="disconnected"&&(ml(_.error)?v(!1):(this.notifyState({state:this.states.connecting.failState,error:_.error}),v(!0)));return}R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+d+"; setting pending"),this.setTransportPending(A,a),v(null,A)})}setTransportPending(a,d){const v=d.mode;R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+a+"; mode = "+v),this.pendingTransport=a,this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),a.once("connected",(A,I,N)=>{this.activateTransport(A,a,I,N),v==="recover"&&this.options.recover&&(delete this.options.recover,this.unpersistConnection())});const _=this;a.on(["disconnected","closed","failed"],function(A){_.deactivateTransport(a,this.event,A)}),this.emit("transport.pending",a)}activateTransport(a,d,v,_){R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+d),a&&R.logAction(this.logger,R.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+a),v&&R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+v),_&&R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(_)),this.persistTransportPreference(d);const A=this.state,I=this.states.connected.state;if(R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+A.state),A.state==this.states.closing.state||A.state==this.states.closed.state||A.state==this.states.failed.state)return R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),d.disconnect(),!1;if(delete this.pendingTransport,!d.isConnected)return R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+d+" since it appears to no longer be connected"),!1;const N=this.activeProtocol;this.activeProtocol=new gl(d),this.host=d.params.host;const H=_.connectionKey;if(H&&this.connectionKey!=H&&this.setConnection(v,_,!!a),this.onConnectionDetailsUpdate(_,d),V.Config.nextTick(()=>{d.on("connected",(P,X,Z)=>{this.onConnectionDetailsUpdate(Z,d),this.emit("update",new Ri(I,I,null,P))})}),A.state===this.states.connected.state?a&&(this.errorReason=this.realtime.connection.errorReason=a,this.emit("update",new Ri(I,I,null,a))):(this.notifyState({state:"connected",error:a}),this.errorReason=this.realtime.connection.errorReason=a||null),this.emit("transport.active",d),N)if(N.messageQueue.count()>0&&R.logAction(this.logger,R.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+N.transport.shortName+", new one is "+d.shortName+") finishing with "+N.messageQueue.count()+" messages still pending"),N.transport===d){const P="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+d.shortName+"; stack = "+new Error().stack;R.logAction(this.logger,R.LOG_ERROR,"ConnectionManager.activateTransport()",P)}else N.finish();return!0}deactivateTransport(a,d,v){const _=this.activeProtocol,A=_&&_.getTransport()===a,I=a===this.pendingTransport,N=this.noTransportsScheduledForActivation();if(R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+a),R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+d+(A?"; was active":I?"; was pending":"")+(N?"":"; another transport is scheduled for activation")),v&&v.message&&R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+v.message),A&&(R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(_.getPendingMessages()),_.clearPendingMessages(),this.activeProtocol=this.host=null),this.emit("transport.inactive",a),A&&N||A&&d==="failed"||d==="closed"||_===null&&I){if(d==="disconnected"&&v&&v.statusCode>500&&this.domains.length>1){this.unpersistTransportPreference(),this.forceFallbackHost=!0,this.notifyState({state:d,error:v,retryImmediately:!0});return}const H=d==="failed"&&ht.isTokenErr(v)?"disconnected":d;this.notifyState({state:H,error:v});return}}noTransportsScheduledForActivation(){return!this.pendingTransport||!this.pendingTransport.isConnected}setConnection(a,d,v){const _=this.connectionId;(_&&_!==a||!_&&v)&&(R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==a&&R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=a,this.realtime.connection.key=this.connectionKey=d.connectionKey}clearConnection(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.queuedMessages.resetSendAttempted(),this.unpersistConnection()}createRecoveryKey(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null}checkConnectionStateFreshness(){if(!this.lastActivity||!this.connectionId)return;const a=Date.now()-this.lastActivity;a>this.connectionStateTtl+this.maxIdleInterval&&(R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+a+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}persistConnection(){if(wt()){const a=this.createRecoveryKey();a&&this.setSessionRecoverData({recoveryKey:a,disconnectedAt:Date.now(),location:uo.location,clientId:this.realtime.auth.clientId})}}unpersistConnection(){this.clearSessionRecoverData()}getActiveTransportFormat(){var a;return(a=this.activeProtocol)==null?void 0:a.getTransport().format}getError(){if(this.errorReason){const a=re.fromValues(this.errorReason);return a.cause=this.errorReason,a}return this.getStateError()}getStateError(){var a,d;return(d=(a=Mn)[this.state.state])==null?void 0:d.call(a)}activeState(){return this.state.queueEvents||this.state.sendEvents}enactStateChange(a){const d="Connection state",v=a.current+(a.reason?"; reason: "+a.reason:"");a.current==="failed"?R.logAction(this.logger,R.LOG_ERROR,d,v):R.logAction(this.logger,R.LOG_MAJOR,d,v),R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+a.current+"; reason = "+(a.reason&&a.reason.message));const _=this.state=this.states[a.current];a.reason&&(this.errorReason=a.reason,this.realtime.connection.errorReason=a.reason),(_.terminal||_.state==="suspended")&&this.clearConnection(),this.emit("connectionstate",a)}startTransitionTimer(a){R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+a.state),this.transitionTimer&&(R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout(()=>{this.transitionTimer&&(this.transitionTimer=null,R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager "+a.state+" timer expired","requesting new state: "+a.failState),this.notifyState({state:a.failState}))},a.retryDelay)}cancelTransitionTimer(){R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)}startSuspendTimer(){this.suspendTimer||(this.suspendTimer=setTimeout(()=>{this.suspendTimer&&(this.suspendTimer=null,R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),this.states.connecting.failState="suspended",this.notifyState({state:"suspended"}))},this.connectionStateTtl))}checkSuspendTimer(a){a!=="disconnected"&&a!=="suspended"&&a!=="connecting"&&this.cancelSuspendTimer()}cancelSuspendTimer(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)}startRetryTimer(a){this.retryTimer=setTimeout(()=>{R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),this.retryTimer=null,this.requestState({state:"connecting"})},a)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}startWebSocketSlowTimer(){this.webSocketSlowTimer=setTimeout(()=>{R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager WebSocket slow timer","checking connectivity"),this.checkWsConnectivity().then(()=>{R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager WebSocket slow timer","ws connectivity check succeeded"),this.wsCheckResult=!0}).catch(()=>{R.logAction(this.logger,R.LOG_MAJOR,"ConnectionManager WebSocket slow timer","ws connectivity check failed"),this.wsCheckResult=!1}),this.realtime.http.checkConnectivity&&Ht(this.realtime.http.checkConnectivity(),(a,d)=>{a||!d?(R.logAction(this.logger,R.LOG_MAJOR,"ConnectionManager WebSocket slow timer","http connectivity check failed"),this.cancelWebSocketGiveUpTimer(),this.notifyState({state:"disconnected",error:new O("Unable to connect (network unreachable)",80003,404)})):R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager WebSocket slow timer","http connectivity check succeeded")})},this.options.timeouts.webSocketSlowTimeout)}cancelWebSocketSlowTimer(){this.webSocketSlowTimer&&(clearTimeout(this.webSocketSlowTimer),this.webSocketSlowTimer=null)}startWebSocketGiveUpTimer(a){this.webSocketGiveUpTimer=setTimeout(()=>{var d,v;this.wsCheckResult||(R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager WebSocket give up timer","websocket connection took more than 10s; "+(this.baseTransport?"trying base transport":"")),this.baseTransport?(this.abandonedWebSocket=!0,(d=this.proposedTransport)==null||d.dispose(),(v=this.pendingTransport)==null||v.dispose(),this.connectBase(a,++this.connectCounter)):R.logAction(this.logger,R.LOG_MAJOR,"ConnectionManager WebSocket give up timer","websocket connectivity appears to be unavailable but no other transports to try"))},this.options.timeouts.webSocketConnectTimeout)}cancelWebSocketGiveUpTimer(){this.webSocketGiveUpTimer&&(clearTimeout(this.webSocketGiveUpTimer),this.webSocketGiveUpTimer=null)}notifyState(a){var d,v;const _=a.state,A=_==="disconnected"&&(this.state===this.states.connected||a.retryImmediately||this.state===this.states.connecting&&a.error&&ht.isTokenErr(a.error)&&!(this.errorReason&&ht.isTokenErr(this.errorReason)));if(R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+_+(A?"; will retry connection immediately":"")),_==this.state.state||(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.checkSuspendTimer(a.state),(_==="suspended"||_==="connected")&&(this.disconnectedRetryCount=0),this.state.terminal))return;const I=this.states[a.state];let N=I.retryDelay;I.state==="disconnected"&&(this.disconnectedRetryCount++,N=kr(I.retryDelay,this.disconnectedRetryCount));const H=new Ri(this.state.state,I.state,N,a.error||((v=(d=Mn)[I.state])==null?void 0:v.call(d)));if(A){const P=()=>{this.state===this.states.disconnected&&(this.lastAutoReconnectAttempt=Date.now(),this.requestState({state:"connecting"}))},X=this.lastAutoReconnectAttempt&&Date.now()-this.lastAutoReconnectAttempt+1;X&&X<1e3?(R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+X+"ms ago, waiting another "+(1e3-X)+"ms before trying again"),setTimeout(P,1e3-X)):V.Config.nextTick(P)}else(_==="disconnected"||_==="suspended")&&this.startRetryTimer(N);(_==="disconnected"&&!A||_==="suspended"||I.terminal)&&V.Config.nextTick(()=>{this.disconnectAllTransports()}),_=="connected"&&!this.activeProtocol&&R.logAction(this.logger,R.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(H),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(_,H.reason),this.failQueuedMessages(H.reason))}requestState(a){var d,v;const _=a.state;if(R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+_+"; current state: "+this.state.state),_==this.state.state||(this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(_),_=="connecting"&&this.state.state=="connected")||_=="closing"&&this.state.state=="closed")return;const A=this.states[_],I=new Ri(this.state.state,A.state,null,a.error||((v=(d=Mn)[A.state])==null?void 0:v.call(d)));this.enactStateChange(I),_=="connecting"&&V.Config.nextTick(()=>{this.startConnect()}),_=="closing"&&this.closeImpl()}startConnect(){if(this.state!==this.states.connecting){R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state);return}const a=this.realtime.auth,d=++this.connectCounter,v=()=>{this.checkConnectionStateFreshness(),this.getTransportParams(_=>{if(_.mode==="recover"&&_.options.recover){const A=Ws(_.options.recover);A&&this.realtime.channels.recoverChannels(A.channelSerials)}d===this.connectCounter&&this.connectImpl(_,d)})};if(R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),a.method==="basic")v();else{const _=A=>{d===this.connectCounter&&(A?this.actOnErrorFromAuthorize(A):v())};this.errorReason&&ht.isTokenErr(this.errorReason)?Ht(a._forceNewToken(null,null),_):Ht(a._ensureValidAuthCredentials(!1),_)}}connectImpl(a,d){const v=this.state.state;if(v!==this.states.connecting.state){R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect, but was "+v);return}const _=this.getTransportPreference();_&&_===this.baseTransport&&this.webSocketTransportAvailable&&this.checkWsConnectivity().then(()=>{this.unpersistTransportPreference(),this.state===this.states.connecting&&(R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.connectImpl():","web socket connectivity available, cancelling connection attempt with "+this.baseTransport),this.disconnectAllTransports(),this.connectWs(a,++this.connectCounter))}).catch(Xs),_&&_===this.baseTransport||this.baseTransport&&!this.webSocketTransportAvailable?this.connectBase(a,d):this.connectWs(a,d)}connectWs(a,d){R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.connectWs()"),this.wsCheckResult=null,this.abandonedWebSocket=!1,this.startWebSocketSlowTimer(),this.startWebSocketGiveUpTimer(a),this.tryTransportWithFallbacks("web_socket",a,!0,d,()=>this.wsCheckResult!==!1&&!this.abandonedWebSocket)}connectBase(a,d){R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.connectBase()"),this.baseTransport?this.tryTransportWithFallbacks(this.baseTransport,a,!1,d,()=>!0):this.notifyState({state:"disconnected",error:new O("No transports left to try",8e4,404)})}tryTransportWithFallbacks(a,d,v,_,A){R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.tryTransportWithFallbacks()",a);const I=Z=>{this.notifyState({state:this.states.connecting.failState,error:Z})},N=this.domains.slice(),H=(Z,se)=>{if(_===this.connectCounter){if(!A()){se&&se.dispose();return}!se&&!Z&&X()}},P=N.shift();if(!P){I(new O("Unable to connect (no available host)",80003,404));return}d.host=P;const X=()=>{if(!N.length){I(new O("Unable to connect (and no more fallback hosts to try)",80003,404));return}if(!this.realtime.http.checkConnectivity){I(new re("Internal error: Http.checkConnectivity not set",null,500));return}Ht(this.realtime.http.checkConnectivity(),(Z,se)=>{if(_===this.connectCounter&&A()){if(Z){I(Z);return}if(!se){I(new O("Unable to connect (network unreachable)",80003,404));return}d.host=Bo(N),this.tryATransport(d,a,H)}})};if(this.forceFallbackHost&&N.length){this.forceFallbackHost=!1,X();return}this.tryATransport(d,a,H)}closeImpl(){R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),this.pendingTransport&&(R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+this.pendingTransport),this.pendingTransport.close()),this.activeProtocol&&(R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})}onAuthUpdated(a,d){var v;switch(this.state.state){case"connected":{R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport");const _=(v=this.activeProtocol)==null?void 0:v.getTransport();_&&_.onAuthUpdated&&_.onAuthUpdated(a);const A=Ft({action:Ee.AUTH,auth:{accessToken:a.token}});this.send(A);const I=()=>{this.off(N),d(null,a)},N=H=>{H.current==="failed"&&(this.off(I),this.off(N),d(H.reason||this.getStateError()))};this.once("connectiondetails",I),this.on("connectionstate",N);break}case"connecting":R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:{R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");const _=A=>{switch(A.current){case"connected":this.off(_),d(null,a);break;case"failed":case"closed":case"suspended":this.off(_),d(A.reason||this.getStateError());break}};this.on("connectionstate",_),this.state.state==="connecting"?this.startConnect():this.requestState({state:"connecting"})}}}disconnectAllTransports(){R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"),this.connectCounter++,this.pendingTransport&&(R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+this.pendingTransport),this.pendingTransport.disconnect()),delete this.pendingTransport,this.proposedTransport&&(R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting proposed transport: "+this.pendingTransport),this.proposedTransport.disconnect()),delete this.pendingTransport,this.activeProtocol&&(R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())}send(a,d,v){v=v||Xs;const _=this.state;if(_.sendEvents){R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.send()","sending event"),this.sendImpl(new pl(a,v));return}if(!(d&&_.queueEvents)){const I="rejecting event, queueEvent was "+d+", state was "+_.state;R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.send()",I),v(this.errorReason||new O(I,9e4,400));return}this.logger.shouldLog(R.LOG_MICRO)&&R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+oi(a,this.realtime._RealtimePresence,this.realtime._Annotations,this.realtime._liveObjectsPlugin)),this.queue(a,v)}sendImpl(a){const d=a.message;a.ackRequired&&!a.sendAttempted&&(d.msgSerial=this.msgSerial++);try{this.activeProtocol.send(a)}catch(v){R.logAction(this.logger,R.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+v.stack)}}queue(a,d){R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.queue()","queueing event"),this.queuedMessages.push(new pl(a,d))}sendQueuedMessages(){R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");let a;for(;a=this.queuedMessages.shift();)this.sendImpl(a)}queuePendingMessages(a){a&&a.length&&(R.logAction(this.logger,R.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+a.length+" pending messages"),this.queuedMessages.prepend(a))}failQueuedMessages(a){const d=this.queuedMessages.count();d>0&&(R.logAction(this.logger,R.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+d+" queued messages, err = "+Oe(a)),this.queuedMessages.completeAllMessages(a))}onChannelMessage(a,d){this.pendingChannelMessagesState.queue.push({message:a,transport:d}),this.pendingChannelMessagesState.isProcessing||this.processNextPendingChannelMessage()}processNextPendingChannelMessage(){if(this.pendingChannelMessagesState.queue.length>0){this.pendingChannelMessagesState.isProcessing=!0;const a=this.pendingChannelMessagesState.queue.shift();this.processChannelMessage(a.message).catch(d=>{R.logAction(this.logger,R.LOG_ERROR,"ConnectionManager.processNextPendingChannelMessage() received error ",d)}).finally(()=>{this.pendingChannelMessagesState.isProcessing=!1,this.processNextPendingChannelMessage()})}}async processChannelMessage(a){await this.realtime.channels.processChannelMessage(a)}async ping(){var a;if(this.state.state!=="connected")throw new O("Unable to ping service; not connected",4e4,400);const d=(a=this.activeProtocol)==null?void 0:a.getTransport();if(!d)throw this.getStateError();R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.ping()","transport = "+d);const v=Date.now(),_=zo();return Xi(new Promise(A=>{const I=N=>{N===_&&(d.off("heartbeat",I),A(Date.now()-v))};d.on("heartbeat",I),d.ping(_)}),this.options.timeouts.realtimeRequestTimeout,"Timeout waiting for heartbeat response")}abort(a){this.activeProtocol.getTransport().fail(a)}getTransportPreference(){var a,d;return this.transportPreference||vl()&&((d=(a=V.WebStorage)==null?void 0:a.get)==null?void 0:d.call(a,Sn))}persistTransportPreference(a){var d,v;this.transportPreference=a.shortName,vl()&&((v=(d=V.WebStorage)==null?void 0:d.set)==null||v.call(d,Sn,a.shortName))}unpersistTransportPreference(){var a,d;this.transportPreference=null,vl()&&((d=(a=V.WebStorage)==null?void 0:a.remove)==null||d.call(a,Sn))}actOnErrorFromAuthorize(a){if(a.code===40171)this.notifyState({state:"failed",error:a});else if(a.code===40102)this.notifyState({state:"failed",error:a});else if(a.statusCode===Us.Forbidden){const d="Client configured authentication provider returned 403; failing the connection";R.logAction(this.logger,R.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",d),this.notifyState({state:"failed",error:new O(d,80019,403,a)})}else{const d="Client configured authentication provider request failed";R.logAction(this.logger,R.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",d),this.notifyState({state:this.state.failState,error:new O(d,80019,401,a)})}}onConnectionDetailsUpdate(a,d){if(!a)return;this.connectionDetails=a,a.maxMessageSize&&(this.options.maxMessageSize=a.maxMessageSize);const v=a.clientId;if(v){const A=this.realtime.auth._uncheckedSetClientId(v);if(A){R.logAction(this.logger,R.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",A.message),d.fail(A);return}}const _=a.connectionStateTtl;_&&(this.connectionStateTtl=_),this.maxIdleInterval=a.maxIdleInterval,this.emit("connectiondetails",a)}checkWsConnectivity(){const a=this.options.wsConnectivityCheckUrl||Se.wsConnectivityCheckUrl,d=new V.Config.WebSocket(a);return new Promise((v,_)=>{let A=!1;d.onopen=()=>{A||(A=!0,v(),d.close())},d.onclose=d.onerror=()=>{A||(A=!0,_())}})}sessionRecoveryName(){return this.options.recoveryKeyStorageName||"ably-connection-recovery"}getSessionRecoverData(){var a,d;return wt()&&((d=(a=V.WebStorage)==null?void 0:a.getSession)==null?void 0:d.call(a,this.sessionRecoveryName()))}setSessionRecoverData(a){var d,v;return wt()&&((v=(d=V.WebStorage)==null?void 0:d.setSession)==null?void 0:v.call(d,this.sessionRecoveryName(),a))}clearSessionRecoverData(){var a,d;return wt()&&((d=(a=V.WebStorage)==null?void 0:a.removeSession)==null?void 0:d.call(a,this.sessionRecoveryName()))}},$s=wi,$a=class extends vt{constructor(l,a){super(l.logger),this.whenState=d=>vt.prototype.whenState.call(this,d,this.state),this.ably=l,this.connectionManager=new $s(l,a),this.state=this.connectionManager.state.state,this.key=void 0,this.id=void 0,this.errorReason=null,this.connectionManager.on("connectionstate",d=>{const v=this.state=d.current;V.Config.nextTick(()=>{this.emit(v,d)})}),this.connectionManager.on("update",d=>{V.Config.nextTick(()=>{this.emit("update",d)})})}connect(){R.logAction(this.logger,R.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})}async ping(){return R.logAction(this.logger,R.LOG_MINOR,"Connection.ping()",""),this.connectionManager.ping()}close(){R.logAction(this.logger,R.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})}get recoveryKey(){return this.logger.deprecationWarning("The `Connection.recoveryKey` attribute has been replaced by the `Connection.createRecoveryKey()` method. Replace your usage of `recoveryKey` with the return value of `createRecoveryKey()`. `recoveryKey` will be removed in a future version."),this.createRecoveryKey()}createRecoveryKey(){return this.connectionManager.createRecoveryKey()}},Tl=$a,Sl=class hv extends $r{constructor(a){var d,v,_,A;if(super(Se.objectifyOptions(a,!1,"BaseRealtime",R.defaultLogger)),R.logAction(this.logger,R.LOG_MINOR,"Realtime()",""),typeof EdgeRuntime=="string")throw new O(`Ably.Realtime instance cannot be used in Vercel Edge runtime. If you are running Vercel Edge functions, please replace your "new Ably.Realtime()" with "new Ably.Rest()" and use Ably Rest API instead of the Realtime API. If you are server-rendering your application in the Vercel Edge runtime, please use the condition "if (typeof EdgeRuntime === 'string')" to prevent instantiating Ably.Realtime instance during SSR in the Vercel Edge runtime.`,4e4,400);this._additionalTransportImplementations=hv.transportImplementationsFromPlugins(this.options.plugins),this._RealtimePresence=(v=(d=this.options.plugins)==null?void 0:d.RealtimePresence)!=null?v:null,this._liveObjectsPlugin=(A=(_=this.options.plugins)==null?void 0:_.LiveObjects)!=null?A:null,this.connection=new Tl(this,this.options),this._channels=new co(this),this.options.autoConnect!==!1&&this.connect()}static transportImplementationsFromPlugins(a){const d={};return a!=null&&a.WebSocketTransport&&(d[Mt.WebSocket]=a.WebSocketTransport),a!=null&&a.XHRPolling&&(d[Mt.XhrPolling]=a.XHRPolling),d}get channels(){return this._channels}get clientId(){return this.auth.clientId}connect(){R.logAction(this.logger,R.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()}close(){R.logAction(this.logger,R.LOG_MINOR,"Realtime.close()",""),this.connection.close()}};Sl.EventEmitter=vt;var nn=Sl,co=class extends vt{constructor(l){super(l.logger),this.realtime=l,this.all=Object.create(null),l.connection.connectionManager.on("transport.active",()=>{this.onTransportActive()})}channelSerials(){let l={};for(const a of pn(this.all,!0)){const d=this.all[a];d.properties.channelSerial&&(l[a]=d.properties.channelSerial)}return l}recoverChannels(l){for(const a of pn(l,!0)){const d=this.get(a);d.properties.channelSerial=l[a]}}async processChannelMessage(l){const a=l.channel;if(a===void 0){R.logAction(this.logger,R.LOG_ERROR,"Channels.processChannelMessage()","received event unspecified channel, action = "+l.action);return}const d=this.all[a];if(!d){R.logAction(this.logger,R.LOG_ERROR,"Channels.processChannelMessage()","received event for non-existent channel: "+a);return}await d.processMessage(l)}onTransportActive(){for(const l in this.all){const a=this.all[l];a.state==="attaching"||a.state==="detaching"?a.checkPendingState():a.state==="suspended"?a._attach(!1,null):a.state==="attached"&&a.requestState("attaching")}}propogateConnectionInterruption(l,a){const d={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"},v=["attaching","attached","detaching","suspended"],_=d[l];for(const A in this.all){const I=this.all[A];v.includes(I.state)&&I.notifyState(_,a)}}get(l,a){l=String(l);let d=this.all[l];if(!d)d=this.all[l]=new vn(this.realtime,l,a);else if(a){if(d._shouldReattachToSetOptions(a,d.channelOptions))throw new O("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);d.setOptions(a)}return d}getDerived(l,a,d){if(a.filter){const v=vi(a.filter),_=Jo(l);l=`[filter=${v}${_.qualifierParam}]${_.channelName}`}return this.get(l,d)}release(l){l=String(l);const a=this.all[l];if(!a)return;const d=a.getReleaseErr();if(d)throw d;delete this.all[l]}},fo=nn;function js(l,a){if(l.isSynthesized()||a.isSynthesized())return l.timestamp>=a.timestamp;const d=l.parseId(),v=a.parseId();return d.msgSerial===v.msgSerial?d.index>v.index:d.msgSerial>v.msgSerial}var xi=class extends vt{constructor(l,a,d=js){super(l.logger),this.presence=l,this.map=Object.create(null),this.syncInProgress=!1,this.residualMembers=null,this.memberKey=a,this.newerThan=d}get(l){return this.map[l]}getClient(l){const a=this.map,d=[];for(const v in a){const _=a[v];_.clientId==l&&_.action!="absent"&&d.push(_)}return d}list(l){const a=this.map,d=l&&l.clientId,v=l&&l.connectionId,_=[];for(const A in a){const I=a[A];I.action!=="absent"&&(d&&d!=I.clientId||v&&v!=I.connectionId||_.push(I))}return _}put(l){(l.action==="enter"||l.action==="update")&&(l=ii.fromValues(l),l.action="present");const a=this.map,d=this.memberKey(l);this.residualMembers&&delete this.residualMembers[d];const v=a[d];return v&&!this.newerThan(l,v)?!1:(a[d]=l,!0)}values(){const l=this.map,a=[];for(const d in l){const v=l[d];v.action!="absent"&&a.push(v)}return a}remove(l){const a=this.map,d=this.memberKey(l),v=a[d];return v&&!this.newerThan(l,v)?!1:(this.syncInProgress?(l=ii.fromValues(l),l.action="absent",a[d]=l):delete a[d],!!v)}startSync(){const l=this.map,a=this.syncInProgress;R.logAction(this.logger,R.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+a),this.syncInProgress||(this.residualMembers=Be(l),this.setInProgress(!0))}endSync(){const l=this.map,a=this.syncInProgress;if(R.logAction(this.logger,R.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+a),a){for(const d in l)l[d].action==="absent"&&delete l[d];this.presence._synthesizeLeaves(ws(this.residualMembers));for(const d in this.residualMembers)delete l[d];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")}async waitSync(){const l=this.syncInProgress;R.logAction(this.logger,R.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+l),l&&await this.once("sync")}clear(){this.map={},this.setInProgress(!1),this.residualMembers=null}setInProgress(l){R.logAction(this.logger,R.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+l),this.syncInProgress=l,this.presence.syncComplete=!l}};function on(l){return l.channel.client.auth.clientId}function Jt(l){const a=l.channel.client,d=a.auth.clientId;return(!d||d==="*")&&a.connection.state==="connected"}var li=class extends vt{constructor(l){super(l.logger),this.channel=l,this.syncComplete=!1,this.members=new xi(this,a=>a.clientId+":"+a.connectionId),this._myMembers=new xi(this,a=>a.clientId),this.subscriptions=new vt(this.logger),this.pendingPresence=[]}async enter(l){if(Jt(this))throw new O("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,l,"enter")}async update(l){if(Jt(this))throw new O("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,l,"update")}async enterClient(l,a){return this._enterOrUpdateClient(void 0,l,a,"enter")}async updateClient(l,a){return this._enterOrUpdateClient(void 0,l,a,"update")}async _enterOrUpdateClient(l,a,d,v){const _=this.channel;if(!_.connectionManager.activeState())throw _.connectionManager.getError();R.logAction(this.logger,R.LOG_MICRO,"RealtimePresence."+v+"Client()","channel = "+_.name+", id = "+l+", client = "+(a||"(implicit) "+on(this)));const A=ii.fromData(d);A.action=v,l&&(A.id=l),a&&(A.clientId=a);const I=await A.encode(_.channelOptions);switch(_.state){case"attached":return _.sendPresence([I]);case"initialized":case"detached":_.attach();case"attaching":return new Promise((N,H)=>{this.pendingPresence.push({presence:I,callback:P=>P?H(P):N()})});default:{const N=new re("Unable to "+v+" presence channel while in "+_.state+" state",90001);throw N.code=90001,N}}}async leave(l){if(Jt(this))throw new O("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,l)}async leaveClient(l,a){const d=this.channel;if(!d.connectionManager.activeState())throw d.connectionManager.getError();R.logAction(this.logger,R.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+l);const v=ii.fromData(a);v.action="leave",l&&(v.clientId=l);const _=await v.encode(d.channelOptions);switch(d.state){case"attached":return d.sendPresence([_]);case"attaching":return new Promise((A,I)=>{this.pendingPresence.push({presence:_,callback:N=>N?I(N):A()})});case"initialized":case"failed":throw new re("Unable to leave presence channel (incompatible state)",90001);default:throw d.invalidStateError()}}async get(l){const a=!l||("waitForSync"in l?l.waitForSync:!0);function d(_){return l?_.list(l):_.values()}if(this.channel.state==="suspended"){if(a)throw O.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"});return d(this.members)}await this.channel.ensureAttached();const v=this.members;return a&&await v.waitSync(),d(this.members)}async history(l){R.logAction(this.logger,R.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name);const a=this.channel.client.rest.presenceMixin;if(l&&l.untilAttach)if(this.channel.state==="attached")delete l.untilAttach,l.from_serial=this.channel.properties.attachSerial;else throw new O("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400);return a.history(this,l)}setPresence(l,a,d){R.logAction(this.logger,R.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+l.length+" participants; syncChannelSerial = "+d);let v,_;const A=this.members,I=this._myMembers,N=[],H=this.channel.connectionManager.connectionId;a&&(this.members.startSync(),d&&(_=d.match(/^[\w-]+:(.*)$/))&&(v=_[1]));for(let P of l)switch(P.action){case"leave":A.remove(P)&&N.push(P),P.connectionId===H&&!P.isSynthesized()&&I.remove(P);break;case"enter":case"present":case"update":A.put(P)&&N.push(P),P.connectionId===H&&I.put(P);break}a&&!v&&(A.endSync(),this.channel.syncChannelSerial=null);for(let P=0;P<N.length;P++){const X=N[P];this.subscriptions.emit(X.action,X)}}onAttached(l){R.logAction(this.logger,R.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+l),l?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();const a=this.pendingPresence,d=a.length;if(d){this.pendingPresence=[];const v=[],_=yt.create(this.logger);R.logAction(this.logger,R.LOG_MICRO,"RealtimePresence.onAttached","sending "+d+" queued presence messages");for(let A=0;A<d;A++){const I=a[A];v.push(I.presence),_.push(I.callback)}this.channel.sendPresence(v).then(()=>_()).catch(A=>_(A))}}actOnChannelState(l,a,d){switch(l){case"attached":this.onAttached(a);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(d);break}}failPendingPresence(l){if(this.pendingPresence.length){R.logAction(this.logger,R.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+Oe(l));for(let a=0;a<this.pendingPresence.length;a++)try{this.pendingPresence[a].callback(l)}catch{}this.pendingPresence=[]}}_clearMyMembers(){this._myMembers.clear()}_ensureMyMembersPresent(){const l=this._myMembers,a=this.channel.connectionManager.connectionId;for(const d in l.map){const v=l.map[d];R.logAction(this.logger,R.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+v.clientId+'" into the presence set');const _=v.connectionId===a?v.id:void 0;this._enterOrUpdateClient(_,v.clientId,v.data,"enter").catch(A=>{const I=new O("Presence auto re-enter failed",91004,400,A);R.logAction(this.logger,R.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()","Presence auto re-enter failed; reason = "+Oe(A));const N=new Ks(this.channel.state,this.channel.state,!0,!1,I);this.channel.emit("update",N)})}}_synthesizeLeaves(l){const a=this.subscriptions;l.forEach(function(d){const v=ii.fromValues({action:"leave",connectionId:d.connectionId,clientId:d.clientId,data:d.data,encoding:d.encoding,timestamp:Date.now()});a.emit("leave",v)})}async subscribe(...l){const a=vn.processListenerArgs(l),d=a[0],v=a[1],_=this.channel;if(_.state==="failed")throw O.fromValues(_.invalidStateError());this.subscriptions.on(d,v),_.channelOptions.attachOnSubscribe!==!1&&await _.attach()}unsubscribe(...l){const a=vn.processListenerArgs(l),d=a[0],v=a[1];this.subscriptions.off(d,v)}},wn=li,xn=Mt.WebSocket;function Vn(l){return!!l.on}var ja=class extends Mi{constructor(l,a,d){super(l,a,d),this.shortName=xn,d.heartbeats=V.Config.useProtocolHeartbeats,this.wsHost=d.host}static isAvailable(){return!!V.Config.WebSocket}createWebSocket(l,a){return this.uri=l+mi(a),new V.Config.WebSocket(this.uri)}toString(){return"WebSocketTransport; uri="+this.uri}connect(){R.logAction(this.logger,R.LOG_MINOR,"WebSocketTransport.connect()","starting"),Mi.prototype.connect.call(this);const l=this,a=this.params,d=a.options,_=(d.tls?"wss://":"ws://")+this.wsHost+":"+Se.getPort(d)+"/";R.logAction(this.logger,R.LOG_MINOR,"WebSocketTransport.connect()","uri: "+_),Ht(this.auth.getAuthParams(),function(A,I){if(l.isDisposed)return;let N="";for(const P in I)N+=" "+P+": "+I[P]+";";if(R.logAction(l.logger,R.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+N+" err: "+A),A){l.disconnect(A);return}const H=a.getConnectParams(I);try{const P=l.wsConnection=l.createWebSocket(_,H);P.binaryType=V.Config.binaryType,P.onopen=function(){l.onWsOpen()},P.onclose=function(X){l.onWsClose(X)},P.onmessage=function(X){l.onWsData(X.data)},P.onerror=function(X){l.onWsError(X)},Vn(P)&&P.on("ping",function(){l.onActivity()})}catch(P){R.logAction(l.logger,R.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(P.stack||P.message)),l.disconnect(P)}})}send(l){const a=this.wsConnection;if(!a){R.logAction(this.logger,R.LOG_ERROR,"WebSocketTransport.send()","No socket connection");return}try{a.send(Ka(l,this.connectionManager.realtime._MsgPack,this.params.format))}catch(d){const v="Exception from ws connection when trying to send: "+Oe(d);R.logAction(this.logger,R.LOG_ERROR,"WebSocketTransport.send()",v),this.finish("disconnected",new O(v,5e4,500))}}onWsData(l){R.logAction(this.logger,R.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+l.length+"; type = "+typeof l);try{this.onProtocolMessage(Qa(l,this.connectionManager.realtime._MsgPack,this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._liveObjectsPlugin,this.format))}catch(a){R.logAction(this.logger,R.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+a.stack)}}onWsOpen(){R.logAction(this.logger,R.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")}onWsClose(l){let a,d;if(typeof l=="object"?(d=l.code,a=l.wasClean||d===1e3):(d=l,a=d==1e3),delete this.wsConnection,a){R.logAction(this.logger,R.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");const v=new O("Websocket closed",80003,400);this.finish("disconnected",v)}else{const v="Unclean disconnection of WebSocket ; code = "+d,_=new O(v,80003,400);R.logAction(this.logger,R.LOG_MINOR,"WebSocketTransport.onWsClose()",v),this.finish("disconnected",_)}this.emit("disposed")}onWsError(l){R.logAction(this.logger,R.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+l.message),V.Config.nextTick(()=>{this.disconnect(Error(l.message))})}dispose(){R.logAction(this.logger,R.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;const l=this.wsConnection;l&&(l.onmessage=function(){},delete this.wsConnection,V.Config.nextTick(()=>{if(R.logAction(this.logger,R.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!l)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");l.close()}))}},er=ja,_l=class{static subscribeFilter(l,a,d){const v=_=>{var A,I,N,H,P,X;const Z={name:_.name,refTimeserial:(I=(A=_.extras)==null?void 0:A.ref)==null?void 0:I.timeserial,refType:(H=(N=_.extras)==null?void 0:N.ref)==null?void 0:H.type,isRef:!!((X=(P=_.extras)==null?void 0:P.ref)!=null&&X.timeserial),clientId:_.clientId};Object.entries(a).find(([se,W])=>W!==void 0?Z[se]!==W:!1)||d(_)};this.addFilteredSubscription(l,a,d,v),l.subscriptions.on(v)}static addFilteredSubscription(l,a,d,v){var _;if(l.filteredSubscriptions||(l.filteredSubscriptions=new Map),l.filteredSubscriptions.has(d)){const A=l.filteredSubscriptions.get(d);A.set(a,((_=A==null?void 0:A.get(a))==null?void 0:_.concat(v))||[v])}else l.filteredSubscriptions.set(d,new Map([[a,[v]]]))}static getAndDeleteFilteredSubscriptions(l,a,d){if(!l.filteredSubscriptions)return[];if(!d&&a)return Array.from(l.filteredSubscriptions.entries()).map(([A,I])=>{var N;let H=I.get(a);return I.delete(a),I.size===0&&((N=l.filteredSubscriptions)==null||N.delete(A)),H}).reduce((A,I)=>I?A.concat(...I):A,[]);if(!d||!l.filteredSubscriptions.has(d))return[];const v=l.filteredSubscriptions.get(d);if(!a){const A=Array.from(v.values()).reduce((I,N)=>I.concat(...N),[]);return l.filteredSubscriptions.delete(d),A}let _=v.get(a);return v.delete(a),_||[]}},Zt=class Od extends fo{constructor(a){var d;const v=Od._MsgPack;if(!v)throw new Error("Expected DefaultRealtime._MsgPack to have been set");super(Se.objectifyOptions(a,!0,"Realtime",R.defaultLogger,B(D({},ro),{Crypto:(d=Od.Crypto)!=null?d:void 0,MsgPack:v,RealtimePresence:{RealtimePresence:wn,PresenceMessage:ii,WirePresenceMessage:ts},Annotations:{Annotation:ss,WireAnnotation:Ci,RealtimeAnnotations:dl,RestAnnotations:Ai},WebSocketTransport:er,MessageInteractions:_l})))}static get Crypto(){if(this._Crypto===null)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(a){this._Crypto=a}};Zt.Utils=Ve,Zt.ConnectionManager=$s,Zt.ProtocolMessage=as,Zt._Crypto=null,Zt.Message=Ba,Zt.PresenceMessage=os,Zt.Annotation=za,Zt._MsgPack=null,Zt._Http=Gs,Zt._PresenceMap=xi,Zt._MessageEncoding=no;var St=Zt,We=Uint8Array,De=Uint32Array,In=Math.pow,$t=new De(8),tr=[],sn=new De(64);function El(l){return(l-(l|0))*In(2,32)|0}for(var ho=2,Nn=0;Nn<64;){for(zn=!0,po=2;po<=ho/2;po++)ho%po===0&&(zn=!1);zn&&(Nn<8&&($t[Nn]=El(In(ho,1/2))),tr[Nn]=El(In(ho,1/3)),Nn++),ho++}var zn,po,us=!!new We(new De([1]).buffer)[0];function cs(l){return us?l>>>24|(l>>>16&255)<<8|(l&65280)<<8|l<<24:l}function Nt(l,a){return l>>>a|l<<32-a}function rn(l){var a=$t.slice(),d=l.length,v=d*8,_=512-(v+64)%512-1+v+65,A=new We(_/8),I=new De(A.buffer);A.set(l,0),A[d]=128,I[I.length-1]=cs(v);for(var N,H=0;H<_/32;H+=16){var P=a.slice();for(N=0;N<64;N++){var X;if(N<16)X=cs(I[H+N]);else{var Z=sn[N-15],se=sn[N-2];X=sn[N-7]+sn[N-16]+(Nt(Z,7)^Nt(Z,18)^Z>>>3)+(Nt(se,17)^Nt(se,19)^se>>>10)}sn[N]=X|=0;for(var W=(Nt(P[4],6)^Nt(P[4],11)^Nt(P[4],25))+(P[4]&P[5]^~P[4]&P[6])+P[7]+X+tr[N],le=(Nt(P[0],2)^Nt(P[0],13)^Nt(P[0],22))+(P[0]&P[1]^P[2]&(P[0]^P[1])),ge=7;ge>0;ge--)P[ge]=P[ge-1];P[0]=W+le|0,P[4]=P[4]+W|0}for(N=0;N<8;N++)a[N]=a[N]+P[N]|0}return new We(new De(a.map(function(Ce){return cs(Ce)})).buffer)}function ai(l,a){if(l.length>64&&(l=rn(l)),l.length<64){const N=new Uint8Array(64);N.set(l,0),l=N}for(var d=new Uint8Array(64),v=new Uint8Array(64),_=0;_<64;_++)d[_]=54^l[_],v[_]=92^l[_];var A=new Uint8Array(a.length+64);A.set(d,0),A.set(a,64);var I=new Uint8Array(96);return I.set(v,0),I.set(rn(A),64),rn(I)}var Fn=class{constructor(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}uint8ViewToBase64(l){let a="";const d=this.base64CharSet,v=l.byteLength,_=v%3,A=v-_;let I,N,H,P,X;for(let Z=0;Z<A;Z=Z+3)X=l[Z]<<16|l[Z+1]<<8|l[Z+2],I=(X&16515072)>>18,N=(X&258048)>>12,H=(X&4032)>>6,P=X&63,a+=d[I]+d[N]+d[H]+d[P];return _==1?(X=l[A],I=(X&252)>>2,N=(X&3)<<4,a+=d[I]+d[N]+"=="):_==2&&(X=l[A]<<8|l[A+1],I=(X&64512)>>10,N=(X&1008)>>4,H=(X&15)<<2,a+=d[I]+d[N]+d[H]+"="),a}base64ToArrayBuffer(l){const a=atob==null?void 0:atob(l),d=a.length,v=new Uint8Array(d);for(let _=0;_<d;_++){const A=a.charCodeAt(_);v[_]=A}return this.toArrayBuffer(v)}isBuffer(l){return l instanceof ArrayBuffer||ArrayBuffer.isView(l)}toBuffer(l){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(l instanceof ArrayBuffer)return new Uint8Array(l);if(ArrayBuffer.isView(l))return new Uint8Array(this.toArrayBuffer(l));throw new Error("BufferUtils.toBuffer expected an ArrayBuffer or a view onto one")}toArrayBuffer(l){if(!ArrayBuffer)throw new Error("Can't convert to ArrayBuffer: browser does not support the necessary types");if(l instanceof ArrayBuffer)return l;if(ArrayBuffer.isView(l))return l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength);throw new Error("BufferUtils.toArrayBuffer expected an ArrayBuffer or a view onto one")}base64Encode(l){return this.uint8ViewToBase64(this.toBuffer(l))}base64UrlEncode(l){return this.base64Encode(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}base64Decode(l){if(ArrayBuffer&&V.Config.atob)return this.base64ToArrayBuffer(l);throw new Error("Expected ArrayBuffer to exist and Platform.Config.atob to be configured")}hexEncode(l){return this.toBuffer(l).reduce((d,v)=>d+v.toString(16).padStart(2,"0"),"")}hexDecode(l){if(l.length%2!==0)throw new Error("Can't create a byte array from a hex string of odd length");const a=new Uint8Array(l.length/2);for(let d=0;d<a.length;d++)a[d]=parseInt(l.slice(2*d,2*(d+1)),16);return this.toArrayBuffer(a)}utf8Encode(l){if(V.Config.TextEncoder){const a=new V.Config.TextEncoder().encode(l);return this.toArrayBuffer(a)}else throw new Error("Expected TextEncoder to be configured")}utf8Decode(l){if(!this.isBuffer(l))throw new Error("Expected input of utf8decode to be an arraybuffer or typed array");if(TextDecoder)return new TextDecoder().decode(l);throw new Error("Expected TextDecoder to be configured")}areBuffersEqual(l,a){if(!l||!a)return!1;const d=this.toArrayBuffer(l),v=this.toArrayBuffer(a);if(d.byteLength!=v.byteLength)return!1;const _=new Uint8Array(d),A=new Uint8Array(v);for(var I=0;I<_.length;I++)if(_[I]!=A[I])return!1;return!0}byteLength(l){return l instanceof ArrayBuffer||ArrayBuffer.isView(l)?l.byteLength:-1}arrayBufferViewToBuffer(l){return this.toArrayBuffer(l)}concat(l){const a=l.reduce((_,A)=>_+A.byteLength,0),d=new Uint8Array(a);let v=0;for(const _ of l){const A=this.toBuffer(_);d.set(A,v),v+=A.byteLength}return d.buffer}sha256(l){const a=rn(this.toBuffer(l));return this.toArrayBuffer(a)}hmacSha256(l,a){const d=ai(this.toBuffer(a),this.toBuffer(l));return this.toArrayBuffer(d)}},nr=new Fn,Cl=function(l,a){var d="aes",v=256,_="cbc",A=16;function I(se){if(se.algorithm==="aes"&&se.mode==="cbc"){if(se.keyLength===128||se.keyLength===256)return;throw new Error("Unsupported key length "+se.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}function N(se){return se.replace("_","/").replace("-","+")}function H(se){return se instanceof P}class P{constructor(W,le,ge,Ce){this.algorithm=W,this.keyLength=le,this.mode=ge,this.key=Ce}}class X{static getDefaultParams(W){var le;if(!W.key)throw new Error("Crypto.getDefaultParams: a key is required");typeof W.key=="string"?le=a.toArrayBuffer(a.base64Decode(N(W.key))):W.key instanceof ArrayBuffer?le=W.key:le=a.toArrayBuffer(W.key);var ge=W.algorithm||d,Ce=le.byteLength*8,qe=W.mode||_,Ke=new P(ge,Ce,qe,le);if(W.keyLength&&W.keyLength!==Ke.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+W.keyLength+" was specified, but the key actually has length "+Ke.keyLength);return I(Ke),Ke}static async generateRandomKey(W){try{return l.getRandomArrayBuffer((W||v)/8)}catch(le){throw new O("Failed to generate random key: "+le.message,400,5e4,le)}}static getCipher(W,le){var ge,Ce=H(W)?W:this.getDefaultParams(W);return{cipherParams:Ce,cipher:new Z(Ce,(ge=W.iv)!=null?ge:null,le)}}}X.CipherParams=P;class Z{constructor(W,le,ge){if(this.logger=ge,!crypto.subtle)throw isSecureContext?new Error("Crypto operations are not possible since the browsers SubtleCrypto class is unavailable (reason unknown)."):new Error("Crypto operations are is not possible since the current environment is a non-secure context and hence the browsers SubtleCrypto class is not available.");this.algorithm=W.algorithm+"-"+String(W.keyLength)+"-"+W.mode,this.webCryptoAlgorithm=W.algorithm+"-"+W.mode,this.key=a.toArrayBuffer(W.key),this.iv=le?a.toArrayBuffer(le):null}concat(W,le){const ge=new ArrayBuffer(W.byteLength+le.byteLength),Ce=new DataView(ge),qe=new DataView(a.toArrayBuffer(W));for(let et=0;et<qe.byteLength;et++)Ce.setInt8(et,qe.getInt8(et));const Ke=new DataView(a.toArrayBuffer(le));for(let et=0;et<Ke.byteLength;et++)Ce.setInt8(qe.byteLength+et,Ke.getInt8(et));return ge}async encrypt(W){R.logAction(this.logger,R.LOG_MICRO,"CBCCipher.encrypt()","");const le=await this.getIv(),ge=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["encrypt"]),Ce=await crypto.subtle.encrypt({name:this.webCryptoAlgorithm,iv:le},ge,W);return this.concat(le,Ce)}async decrypt(W){R.logAction(this.logger,R.LOG_MICRO,"CBCCipher.decrypt()","");const le=a.toArrayBuffer(W),ge=le.slice(0,A),Ce=le.slice(A),qe=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["decrypt"]);return crypto.subtle.decrypt({name:this.webCryptoAlgorithm,iv:ge},qe,Ce)}async getIv(){if(this.iv){var W=this.iv;return this.iv=null,W}const le=await l.getRandomArrayBuffer(A);return a.toArrayBuffer(le)}}return X},Ii=(l=>(l[l.REQ_SEND=0]="REQ_SEND",l[l.REQ_RECV=1]="REQ_RECV",l[l.REQ_RECV_POLL=2]="REQ_RECV_POLL",l[l.REQ_RECV_STREAM=3]="REQ_RECV_STREAM",l))(Ii||{}),ln=Ii;function ui(){return new O("No HTTP request plugin provided. Provide at least one of the FetchRequest or XHRRequest plugins.",400,4e4)}var ft,fs=(ft=class{constructor(l){this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1;var a;this.client=l??null;const d=(l==null?void 0:l.options.connectivityCheckUrl)||Se.connectivityCheckUrl,v=(a=l==null?void 0:l.options.connectivityCheckParams)!=null?a:null,_=!(l!=null&&l.options.connectivityCheckUrl),A=D(D({},fs.bundledRequestImplementations),l==null?void 0:l._additionalHTTPRequestImplementations),I=A.XHRRequest,N=A.FetchRequest,H=!!(I||N);if(!H)throw ui();V.Config.xhrSupported&&I?(this.supportsAuthHeaders=!0,this.Request=async function(P,X,Z,se,W){return new Promise(le=>{var ge;const Ce=I.createRequest(X,Z,se,W,ln.REQ_SEND,(ge=l&&l.options.timeouts)!=null?ge:null,this.logger,P);Ce.once("complete",(qe,Ke,et,Re,kt)=>le({error:qe,body:Ke,headers:et,unpacked:Re,statusCode:kt})),Ce.exec()})},l!=null&&l.options.disableConnectivityCheck?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var P;R.logAction(this.logger,R.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+d);const X=await this.doUri(at.Get,d,null,null,v);let Z=!1;return _?Z=!X.error&&((P=X.body)==null?void 0:P.replace(/\n/,""))=="yes":Z=!X.error&&eo(X.statusCode),R.logAction(this.logger,R.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+Z),Z}):V.Config.fetchSupported&&N?(this.supportsAuthHeaders=!0,this.Request=async(P,X,Z,se,W)=>N(P,l??null,X,Z,se,W),l!=null&&l.options.disableConnectivityCheck?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var P;R.logAction(this.logger,R.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+d);const X=await this.doUri(at.Get,d,null,null,null),Z=!X.error&&((P=X.body)==null?void 0:P.replace(/\n/,""))=="yes";return R.logAction(this.logger,R.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+Z),Z}):this.Request=async()=>({error:H?new re("no supported HTTP transports available",null,400):ui()})}get logger(){var l,a;return(a=(l=this.client)==null?void 0:l.logger)!=null?a:R.defaultLogger}async doUri(l,a,d,v,_){return this.Request?this.Request(l,a,d,_,v):{error:new re("Request invoked before assigned to",null,500)}}shouldFallback(l){const a=l.statusCode;return a===408&&!l.code||a===400&&!l.code||a>=500&&a<=504}},ft.methods=[at.Get,at.Delete,at.Post,at.Put,at.Patch],ft.methodsWithoutBody=[at.Get,at.Delete],ft.methodsWithBody=[at.Post,at.Put,at.Patch],ft),Al=fs,go="ablyjs-storage-test",mo=typeof ko<"u"?ko:typeof window<"u"?window:self,Pc=class{constructor(){try{mo.sessionStorage.setItem(go,go),mo.sessionStorage.removeItem(go),this.sessionSupported=!0}catch{this.sessionSupported=!1}try{mo.localStorage.setItem(go,go),mo.localStorage.removeItem(go),this.localSupported=!0}catch{this.localSupported=!1}}get(l){return this._get(l,!1)}getSession(l){return this._get(l,!0)}remove(l){return this._remove(l,!1)}removeSession(l){return this._remove(l,!0)}set(l,a,d){return this._set(l,a,d,!1)}setSession(l,a,d){return this._set(l,a,d,!0)}_set(l,a,d,v){const _={value:a};return d&&(_.expires=Date.now()+d),this.storageInterface(v).setItem(l,JSON.stringify(_))}_get(l,a){if(a&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!a&&!this.localSupported)throw new Error("Local Storage not supported");const d=this.storageInterface(a).getItem(l);if(!d)return null;const v=JSON.parse(d);return v.expires&&v.expires<Date.now()?(this.storageInterface(a).removeItem(l),null):v.value}_remove(l,a){return this.storageInterface(a).removeItem(l)}storageInterface(l){return l?mo.sessionStorage:mo.localStorage}},dt=new Pc,ut=Pr(),ds=typeof EdgeRuntime=="string";typeof Window>"u"&&typeof WorkerGlobalScope>"u"&&!ds&&console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");function hs(){const l=ut.location;return!ut.WebSocket||!l||!l.origin||l.origin.indexOf("http")>-1}function Rl(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}var yo=ut.navigator&&ut.navigator.userAgent.toString(),vo=ut.location&&ut.location.href,Gc={agent:"browser",logTimestamps:!0,userAgent:yo,currentUrl:vo,binaryType:"arraybuffer",WebSocket:ut.WebSocket,fetchSupported:!!ut.fetch,xhrSupported:ut.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,allowComet:hs(),useProtocolHeartbeats:!0,supportsBinary:!!ut.TextDecoder,preferBinary:!1,ArrayBuffer:ut.ArrayBuffer,atob:ut.atob,nextTick:typeof ut.queueMicrotask=="function"?l=>ut.queueMicrotask(l):l=>Promise.resolve().then(l),addEventListener:ut.addEventListener,inspect:JSON.stringify,stringByteSize:function(l){return ut.TextDecoder&&new ut.TextEncoder().encode(l).length||l.length},TextEncoder:ut.TextEncoder,TextDecoder:ut.TextDecoder,getRandomArrayBuffer:async function(l){const a=new Uint8Array(l);return ut.crypto.getRandomValues(a),a.buffer},isWebworker:Rl(),push:{platform:"browser",formFactor:"desktop",storage:dt}},bl=Gc;function Hc(l){const a=[80015,80017,80030];return l.code?ht.isTokenErr(l)?!1:a.includes(l.code)?!0:l.code>=4e4&&l.code<5e4:!1}function ir(l){return Hc(l)?[Ft({action:Ee.ERROR,error:l})]:[Ft({action:Ee.DISCONNECTED,error:l})]}var Ni=class extends Mi{constructor(l,a,d){super(l,a,d,!0),this.onAuthUpdated=v=>{this.authParams={access_token:v.token}},this.stream="stream"in d?d.stream:!0,this.sendRequest=null,this.recvRequest=null,this.pendingCallback=null,this.pendingItems=null}connect(){R.logAction(this.logger,R.LOG_MINOR,"CometTransport.connect()","starting"),Mi.prototype.connect.call(this);const l=this.params,a=l.options,d=l.host||a.primaryDomain,v=Se.getPort(a),_=a.tls?"https://":"http://";this.baseUri=_+d+":"+v+"/comet/";const A=this.baseUri+"connect";R.logAction(this.logger,R.LOG_MINOR,"CometTransport.connect()","uri: "+A),Ht(this.auth.getAuthParams(),(I,N)=>{if(I){this.disconnect(I);return}if(this.isDisposed)return;this.authParams=N;const H=this.params.getConnectParams(N);"stream"in H&&(this.stream=H.stream),R.logAction(this.logger,R.LOG_MINOR,"CometTransport.connect()","connectParams:"+mi(H));let P=!1;const X=this.recvRequest=this.createRequest(A,null,H,null,this.stream?ln.REQ_RECV_STREAM:ln.REQ_RECV);X.on("data",Z=>{this.recvRequest&&(P||(P=!0,this.emit("preconnect")),this.onData(Z))}),X.on("complete",Z=>{if(this.recvRequest||(Z=Z||new O("Request cancelled",80003,400)),this.recvRequest=null,!P&&!Z&&(P=!0,this.emit("preconnect")),this.onActivity(),Z){Z.code?this.onData(ir(Z)):this.disconnect(Z);return}V.Config.nextTick(()=>{this.recv()})}),X.exec()})}requestClose(){R.logAction(this.logger,R.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)}requestDisconnect(){R.logAction(this.logger,R.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)}_requestCloseOrDisconnect(l){const a=l?this.closeUri:this.disconnectUri;if(a){const d=this.createRequest(a,null,this.authParams,null,ln.REQ_SEND);d.on("complete",v=>{v&&(R.logAction(this.logger,R.LOG_ERROR,"CometTransport.request"+(l?"Close()":"Disconnect()"),"request returned err = "+Oe(v)),this.finish("disconnected",v))}),d.exec()}}dispose(){R.logAction(this.logger,R.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(R.logAction(this.logger,R.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",Mn.disconnected()),V.Config.nextTick(()=>{this.emit("disposed")}))}onConnect(l){var a;if(this.isDisposed)return;const d=(a=l.connectionDetails)==null?void 0:a.connectionKey;Mi.prototype.onConnect.call(this,l);const v=this.baseUri+d;R.logAction(this.logger,R.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+v),this.sendUri=v+"/send",this.recvUri=v+"/recv",this.closeUri=v+"/close",this.disconnectUri=v+"/disconnect"}send(l){if(this.sendRequest){this.pendingItems=this.pendingItems||[],this.pendingItems.push(l);return}const a=this.pendingItems||[];a.push(l),this.pendingItems=null,this.sendItems(a)}sendAnyPending(){const l=this.pendingItems;l&&(this.pendingItems=null,this.sendItems(l))}sendItems(l){const a=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(l),ln.REQ_SEND);a.on("complete",(d,v)=>{if(d&&R.logAction(this.logger,R.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+Oe(d)),this.sendRequest=null,d){d.code?this.onData(ir(d)):this.disconnect(d);return}v&&this.onData(v),this.pendingItems&&V.Config.nextTick(()=>{this.sendRequest||this.sendAnyPending()})}),a.exec()}recv(){if(this.recvRequest||!this.isConnected)return;const l=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?ln.REQ_RECV_STREAM:ln.REQ_RECV_POLL);l.on("data",a=>{this.onData(a)}),l.on("complete",a=>{if(this.recvRequest=null,this.onActivity(),a){a.code?this.onData(ir(a)):this.disconnect(a);return}V.Config.nextTick(()=>{this.recv()})}),l.exec()}onData(l){try{const a=this.decodeResponse(l);if(a&&a.length)for(let d=0;d<a.length;d++)this.onProtocolMessage(Js(a[d],this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._liveObjectsPlugin))}catch(a){R.logAction(this.logger,R.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+a.stack)}}encodeRequest(l){return JSON.stringify(l)}decodeResponse(l){return typeof l=="string"?JSON.parse(l):l}},Ml=Ni;function or(l,a){return yi(pn(a)).includes("x-ably-errorcode")}function eu(l,a){if(or(l,a))return l.error&&O.fromValues(l.error)}var To=function(){},wl=0,ps={};function sr(l,a){return l.getResponseHeader&&l.getResponseHeader(a)}function tu(l){return l.getResponseHeader&&(l.getResponseHeader("transfer-encoding")||!l.getResponseHeader("content-length"))}function nu(l){const a=l.getAllResponseHeaders().trim().split(`\r
`),d={};for(let v=0;v<a.length;v++){const _=a[v].split(":").map(A=>A.trim());d[_[0].toLowerCase()]=_[1]}return d}var Oi=class pv extends vt{constructor(a,d,v,_,A,I,N,H){super(N),v=v||{},v.rnd=zo(),this.uri=a+mi(v),this.headers=d||{},this.body=_,this.method=H?H.toUpperCase():he(_)?"GET":"POST",this.requestMode=A,this.timeouts=I,this.timedOut=!1,this.requestComplete=!1,this.id=String(++wl),ps[this.id]=this}static createRequest(a,d,v,_,A,I,N,H){const P=I||Se.TIMEOUTS;return new pv(a,d,Be(v),_,A,P,N,H)}complete(a,d,v,_,A){this.requestComplete||(this.requestComplete=!0,!a&&d&&this.emit("data",d),this.emit("complete",a,d,v,_,A),this.dispose())}abort(){this.dispose()}exec(){let a=this.headers;const d=this.requestMode==ln.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,v=this.timer=setTimeout(()=>{this.timedOut=!0,A.abort()},d),_=this.method,A=this.xhr=new XMLHttpRequest,I=a.accept;let N=this.body,H="text";I?I.indexOf("application/x-msgpack")===0&&(H="arraybuffer"):a.accept="application/json",N&&(a["content-type"]||(a["content-type"]="application/json")).indexOf("application/json")>-1&&typeof N!="string"&&(N=JSON.stringify(N)),A.open(_,this.uri,!0),A.responseType=H,"authorization"in a&&(A.withCredentials=!0);for(const Re in a)A.setRequestHeader(Re,a[Re]);const P=(Re,kt,Ct,_t)=>{var tt;let Eo=kt+" (event type: "+Re.type+")";(tt=this==null?void 0:this.xhr)!=null&&tt.statusText&&(Eo+=", current statusText is "+this.xhr.statusText),R.logAction(this.logger,R.LOG_ERROR,"Request.on"+Re.type+"()",Eo),this.complete(new re(Eo,Ct,_t))};A.onerror=Re=>{P(Re,"XHR error occurred",null,400)},A.onabort=Re=>{this.timedOut?P(Re,"Request aborted due to request timeout expiring",null,408):P(Re,"Request cancelled",null,400)},A.ontimeout=Re=>{P(Re,"Request timed out",null,408)};let X,Z,se,W=0,le=!1;const ge=()=>{if(clearTimeout(v),se=Z<400,Z==204){this.complete(null,null,null,null,Z);return}X=this.requestMode==ln.REQ_RECV_STREAM&&se&&tu(A)},Ce=()=>{let Re;try{const Ct=sr(A,"content-type");if(Ct?Ct.indexOf("application/json")>=0:A.responseType=="text"){const tt=A.responseType==="arraybuffer"?V.BufferUtils.utf8Decode(A.response):String(A.responseText);tt.length?Re=JSON.parse(tt):Re=tt,le=!0}else Re=A.response;Re.response!==void 0?(Z=Re.statusCode,se=Z<400,a=Re.headers,Re=Re.response):a=nu(A)}catch(Ct){this.complete(new re("Malformed response body from server: "+Ct.message,null,400));return}if(se||Array.isArray(Re)){this.complete(null,Re,a,le,Z);return}let kt=eu(Re,a);kt||(kt=new re("Error response received from server: "+Z+" body was: "+V.Config.inspect(Re),null,Z)),this.complete(kt,Re,a,le,Z)};function qe(){const Re=A.responseText,kt=Re.length-1;let Ct,_t;for(;W<kt&&(Ct=Re.indexOf(`
`,W))>-1;)_t=Re.slice(W,Ct),W=Ct+1,Ke(_t)}const Ke=Re=>{try{Re=JSON.parse(Re)}catch(kt){this.complete(new re("Malformed response body from server: "+kt.message,null,400));return}this.emit("data",Re)},et=()=>{qe(),this.streamComplete=!0,V.Config.nextTick(()=>{this.complete()})};A.onreadystatechange=()=>{const Re=A.readyState;Re<3||A.status!==0&&(Z===void 0&&(Z=A.status,ge()),Re==3&&X?qe():Re==4&&(X?et():Ce()))},A.send(N)}dispose(){const a=this.xhr;if(a){a.onreadystatechange=a.onerror=a.onabort=a.ontimeout=To,this.xhr=null;const d=this.timer;d&&(clearTimeout(d),this.timer=null),this.requestComplete||a.abort()}delete ps[this.id]}},ci=Oi,xl=Mt.XhrPolling,iu=class extends Ml{constructor(l,a,d){super(l,a,d),this.shortName=xl,d.stream=!1,this.shortName=xl}static isAvailable(){return!!(V.Config.xhrSupported&&V.Config.allowComet)}toString(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected}createRequest(l,a,d,v,_){return ci.createRequest(l,a,d,v,_,this.timeouts,this.logger)}},So=iu,gs=["xhr_polling"],rr={order:gs,bundledImplementations:{web_socket:er,xhr_polling:So}},ms=rr,lr={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",wsConnectivityCheckUrl:"wss://ws-up.ably-realtime.com",defaultTransports:[Mt.XhrPolling,Mt.WebSocket]},ou=lr;function Di(l){if(l===void 0)return"undefined";let a,d;if(l instanceof ArrayBuffer?(d="ArrayBuffer",a=new DataView(l)):l instanceof DataView&&(d="DataView",a=l),!a)return JSON.stringify(l);const v=[];for(let _=0;_<l.byteLength;_++){if(_>20){v.push("...");break}let A=a.getUint8(_).toString(16);A.length===1&&(A="0"+A),v.push(A)}return"<"+d+" "+v.join(" ")+">"}function _o(l,a,d){const _=new TextEncoder().encode(d);for(let A=0;A<_.length;A++)l.setUint8(a+A,_[A])}function Jn(l,a,d){return new TextDecoder().decode(l.buffer.slice(a,a+d))}function ys(l){return new TextEncoder().encode(l).length}function Il(l,a){const d=fi(l,a);if(d===0)return;const v=new ArrayBuffer(d),_=new DataView(v);return Dn(l,_,0,a),v}var On=65536*65536,Yn=1/On;function vs(l,a){return a=a||0,l.getInt32(a)*On+l.getUint32(a+4)}function Nl(l,a){return a=a||0,l.getUint32(a)*On+l.getUint32(a+4)}function Ol(l,a,d){d<9223372036854776e3?(l.setInt32(a,Math.floor(d*Yn)),l.setInt32(a+4,d&-1)):(l.setUint32(a,2147483647),l.setUint32(a+4,2147483647))}function Ts(l,a,d){d<18446744073709552e3?(l.setUint32(a,Math.floor(d*Yn)),l.setInt32(a+4,d&-1)):(l.setUint32(a,4294967295),l.setUint32(a+4,4294967295))}var Ss=class{constructor(l,a){this.map=d=>{const v={};for(let _=0;_<d;_++){const A=this.parse();v[A]=this.parse()}return v},this.bin=d=>{const v=new ArrayBuffer(d);return new Uint8Array(v).set(new Uint8Array(this.view.buffer,this.offset,d),0),this.offset+=d,v},this.buf=this.bin,this.str=d=>{const v=Jn(this.view,this.offset,d);return this.offset+=d,v},this.array=d=>{const v=new Array(d);for(let _=0;_<d;_++)v[_]=this.parse();return v},this.ext=d=>(this.offset+=d,{type:this.view.getInt8(this.offset),data:this.buf(d)}),this.parse=()=>{const d=this.view.getUint8(this.offset);let v,_;if((d&128)===0)return this.offset++,d;if((d&240)===128)return _=d&15,this.offset++,this.map(_);if((d&240)===144)return _=d&15,this.offset++,this.array(_);if((d&224)===160)return _=d&31,this.offset++,this.str(_);if((d&224)===224)return v=this.view.getInt8(this.offset),this.offset++,v;switch(d){case 192:return this.offset++,null;case 193:this.offset++;return;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 196:return _=this.view.getUint8(this.offset+1),this.offset+=2,this.bin(_);case 197:return _=this.view.getUint16(this.offset+1),this.offset+=3,this.bin(_);case 198:return _=this.view.getUint32(this.offset+1),this.offset+=5,this.bin(_);case 199:return _=this.view.getUint8(this.offset+1),this.offset+=2,this.ext(_);case 200:return _=this.view.getUint16(this.offset+1),this.offset+=3,this.ext(_);case 201:return _=this.view.getUint32(this.offset+1),this.offset+=5,this.ext(_);case 202:return v=this.view.getFloat32(this.offset+1),this.offset+=5,v;case 203:return v=this.view.getFloat64(this.offset+1),this.offset+=9,v;case 204:return v=this.view.getUint8(this.offset+1),this.offset+=2,v;case 205:return v=this.view.getUint16(this.offset+1),this.offset+=3,v;case 206:return v=this.view.getUint32(this.offset+1),this.offset+=5,v;case 207:return v=Nl(this.view,this.offset+1),this.offset+=9,v;case 208:return v=this.view.getInt8(this.offset+1),this.offset+=2,v;case 209:return v=this.view.getInt16(this.offset+1),this.offset+=3,v;case 210:return v=this.view.getInt32(this.offset+1),this.offset+=5,v;case 211:return v=vs(this.view,this.offset+1),this.offset+=9,v;case 212:return _=1,this.offset++,this.ext(_);case 213:return _=2,this.offset++,this.ext(_);case 214:return _=4,this.offset++,this.ext(_);case 215:return _=8,this.offset++,this.ext(_);case 216:return _=16,this.offset++,this.ext(_);case 217:return _=this.view.getUint8(this.offset+1),this.offset+=2,this.str(_);case 218:return _=this.view.getUint16(this.offset+1),this.offset+=3,this.str(_);case 219:return _=this.view.getUint32(this.offset+1),this.offset+=5,this.str(_);case 220:return _=this.view.getUint16(this.offset+1),this.offset+=3,this.array(_);case 221:return _=this.view.getUint32(this.offset+1),this.offset+=5,this.array(_);case 222:return _=this.view.getUint16(this.offset+1),this.offset+=3,this.map(_);case 223:return _=this.view.getUint32(this.offset+1),this.offset+=5,this.map(_)}throw new Error("Unknown type 0x"+d.toString(16))},this.offset=a||0,this.view=l}};function su(l){const a=new DataView(l),d=new Ss(a),v=d.parse();if(d.offset!==l.byteLength)throw new Error(l.byteLength-d.offset+" trailing bytes");return v}function Dl(l,a){return Object.keys(l).filter(function(d){const v=l[d],_=typeof v;return(!a||v!=null)&&(_!=="function"||!!v.toJSON)})}function Dn(l,a,d,v){const _=typeof l;if(typeof l=="string"){const A=ys(l);if(A<32)return a.setUint8(d,A|160),_o(a,d+1,l),1+A;if(A<256)return a.setUint8(d,217),a.setUint8(d+1,A),_o(a,d+2,l),2+A;if(A<65536)return a.setUint8(d,218),a.setUint16(d+1,A),_o(a,d+3,l),3+A;if(A<4294967296)return a.setUint8(d,219),a.setUint32(d+1,A),_o(a,d+5,l),5+A}if(ArrayBuffer.isView&&ArrayBuffer.isView(l)&&(l=l.buffer),l instanceof ArrayBuffer){const A=l.byteLength;if(A<256)return a.setUint8(d,196),a.setUint8(d+1,A),new Uint8Array(a.buffer).set(new Uint8Array(l),d+2),2+A;if(A<65536)return a.setUint8(d,197),a.setUint16(d+1,A),new Uint8Array(a.buffer).set(new Uint8Array(l),d+3),3+A;if(A<4294967296)return a.setUint8(d,198),a.setUint32(d+1,A),new Uint8Array(a.buffer).set(new Uint8Array(l),d+5),5+A}if(typeof l=="number"){if(Math.floor(l)!==l)return a.setUint8(d,203),a.setFloat64(d+1,l),9;if(l>=0){if(l<128)return a.setUint8(d,l),1;if(l<256)return a.setUint8(d,204),a.setUint8(d+1,l),2;if(l<65536)return a.setUint8(d,205),a.setUint16(d+1,l),3;if(l<4294967296)return a.setUint8(d,206),a.setUint32(d+1,l),5;if(l<18446744073709552e3)return a.setUint8(d,207),Ts(a,d+1,l),9;throw new Error("Number too big 0x"+l.toString(16))}if(l>=-32)return a.setInt8(d,l),1;if(l>=-128)return a.setUint8(d,208),a.setInt8(d+1,l),2;if(l>=-32768)return a.setUint8(d,209),a.setInt16(d+1,l),3;if(l>=-2147483648)return a.setUint8(d,210),a.setInt32(d+1,l),5;if(l>=-9223372036854776e3)return a.setUint8(d,211),Ol(a,d+1,l),9;throw new Error("Number too small -0x"+(-l).toString(16).substr(1))}if(_==="undefined")return v?0:(a.setUint8(d,212),a.setUint8(d+1,0),a.setUint8(d+2,0),3);if(l===null)return v?0:(a.setUint8(d,192),1);if(_==="boolean")return a.setUint8(d,l?195:194),1;if(typeof l.toJSON=="function")return Dn(l.toJSON(),a,d,v);if(_==="object"){let A,I=0,N;const H=Array.isArray(l);if(H?A=l.length:(N=Dl(l,v),A=N.length),A<16?(a.setUint8(d,A|(H?144:128)),I=1):A<65536?(a.setUint8(d,H?220:222),a.setUint16(d+1,A),I=3):A<4294967296&&(a.setUint8(d,H?221:223),a.setUint32(d+1,A),I=5),H)for(let P=0;P<A;P++)I+=Dn(l[P],a,d+I,v);else if(N)for(let P=0;P<A;P++){const X=N[P];I+=Dn(X,a,d+I),I+=Dn(l[X],a,d+I,v)}return I}if(_==="function")return 0;throw new Error("Unknown type "+_)}function fi(l,a){const d=typeof l;if(d==="string"){const v=ys(l);if(v<32)return 1+v;if(v<256)return 2+v;if(v<65536)return 3+v;if(v<4294967296)return 5+v}if(ArrayBuffer.isView&&ArrayBuffer.isView(l)&&(l=l.buffer),l instanceof ArrayBuffer){const v=l.byteLength;if(v<256)return 2+v;if(v<65536)return 3+v;if(v<4294967296)return 5+v}if(typeof l=="number"){if(Math.floor(l)!==l)return 9;if(l>=0){if(l<128)return 1;if(l<256)return 2;if(l<65536)return 3;if(l<4294967296)return 5;if(l<18446744073709552e3)return 9;throw new Error("Number too big 0x"+l.toString(16))}if(l>=-32)return 1;if(l>=-128)return 2;if(l>=-32768)return 3;if(l>=-2147483648)return 5;if(l>=-9223372036854776e3)return 9;throw new Error("Number too small -0x"+l.toString(16).substr(1))}if(d==="boolean")return 1;if(l===null)return a?0:1;if(l===void 0)return a?0:3;if(typeof l.toJSON=="function")return fi(l.toJSON(),a);if(d==="object"){let v,_=0;if(Array.isArray(l)){v=l.length;for(let A=0;A<v;A++)_+=fi(l[A],a)}else{const A=Dl(l,a);v=A.length;for(let I=0;I<v;I++){const N=A[I];_+=fi(N)+fi(l[N],a)}}if(v<16)return 1+_;if(v<65536)return 3+_;if(v<4294967296)return 5+_;throw new Error("Array or object too long 0x"+v.toString(16))}if(d==="function")return 0;throw new Error("Unknown type "+d)}var ar={encode:Il,decode:su,inspect:Di,utf8Write:_o,utf8Read:Jn,utf8ByteCount:ys};function Ul(l,a){return!!a.get("x-ably-errorcode")}function Ll(l,a){if(Ul(l,a))return l.error&&O.fromValues(l.error)}function jt(l){const a={};return l.forEach((d,v)=>{a[v]=d}),a}async function an(l,a,d,v,_,A){const I=new Headers(v||{}),N=l?l.toUpperCase():he(A)?"GET":"POST",H=new AbortController;let P;const X=new Promise(W=>{P=setTimeout(()=>{H.abort(),W({error:new re("Request timed out",null,408)})},a?a.options.timeouts.httpRequestTimeout:Se.TIMEOUTS.httpRequestTimeout)}),Z={method:N,headers:I,body:A,signal:H.signal};V.Config.isWebworker||(Z.credentials=I.has("authorization")?"include":"same-origin");const se=(async()=>{try{const W=new URLSearchParams(_||{});W.set("rnd",zo());const le=d+"?"+W,ge=await Pr().fetch(le,Z);if(clearTimeout(P),ge.status==204)return{error:null,statusCode:ge.status};const Ce=ge.headers.get("Content-Type");let qe;Ce&&Ce.indexOf("application/x-msgpack")>-1?qe=await ge.arrayBuffer():Ce&&Ce.indexOf("application/json")>-1?qe=await ge.json():qe=await ge.text();const Ke=!!Ce&&Ce.indexOf("application/x-msgpack")===-1,et=jt(ge.headers);return ge.ok?{error:null,body:qe,headers:et,unpacked:Ke,statusCode:ge.status}:{error:Ll(qe,ge.headers)||new re("Error response received from server: "+ge.status+" body was: "+V.Config.inspect(qe),null,ge.status),body:qe,headers:et,unpacked:Ke,statusCode:ge.status}}catch(W){return clearTimeout(P),{error:W}}})();return Promise.race([X,se])}var di={XHRRequest:ci,FetchRequest:an},ur=Cl(bl,nr);V.Crypto=ur,V.BufferUtils=nr,V.Http=Al,V.Config=bl,V.Transports=ms,V.WebStorage=dt;for(const l of[hl,St])l.Crypto=ur,l._MsgPack=ar;Al.bundledRequestImplementations=di,R.initLogHandlers(),V.Defaults=Ko(ou),V.Config.agent&&(V.Defaults.agent+=" "+V.Config.agent);var ru={ErrorInfo:O,Rest:hl,Realtime:St,msgpack:ar,makeProtocolMessageFromDeserialized:Ys};if(typeof r.exports=="object"&&typeof o=="object"){var hi=(l,a,d,v)=>{if(a&&typeof a=="object"||typeof a=="function")for(let _ of Object.getOwnPropertyNames(a))!Object.prototype.hasOwnProperty.call(l,_)&&_!==d&&Object.defineProperty(l,_,{get:()=>a[_],enumerable:!(v=Object.getOwnPropertyDescriptor(a,_))||v.enumerable});return l};r.exports=hi(r.exports,o)}return r.exports})})(ju)),ju.exports}var dy=ub();function cb(){const[i,n]=st.useState([]),[o,r]=st.useState("");st.useEffect(()=>{const p=new dy.Realtime({token:"eyJ0eXAiOiJKV1QiLCJ2ZXJzaW9uIjoxLCJhbGciOiJIUzI1NiJ9.eyJqdGkiOiJlOWFlZTQ3Yy1jOTc2LTQyZDAtODViMS0yMjQ0ZmM1MDVkZjAiLCJpc3MiOiJhYmx5LmNvbSIsImlhdCI6MTc2OTk5NDEwNywic3ViIjo5MDI3M30.zJdvJXyRrKmKn0yK1iRQOJ6ie6ex1MU9V2lvBUkTo1E"});return p.channels.get("hidden-chat").subscribe(T=>{n(E=>[...E,T.data])}),()=>{p.close()}},[]);const c=async()=>{new dy.Realtime({token:"eyJ0eXAiOiJKV1QiLCJ2ZXJzaW9uIjoxLCJhbGciOiJIUzI1NiJ9.eyJqdGkiOiJlOWFlZTQ3Yy1jOTc2LTQyZDAtODViMS0yMjQ0ZmM1MDVkZjAiLCJpc3MiOiJhYmx5LmNvbSIsImlhdCI6MTc2OTk5NDEwNywic3ViIjo5MDI3M30.zJdvJXyRrKmKn0yK1iRQOJ6ie6ex1MU9V2lvBUkTo1E"}).channels.get("hidden-chat").publish("msg",o),r("")};return U.jsxs("div",{children:[i.map((p,m)=>U.jsx("div",{children:p},m)),U.jsx("input",{value:o,onChange:p=>r(p.target.value),onKeyDown:p=>p.key==="Enter"&&c()})]})}var fb={};const Fi="https://raw.githubusercontent.com/Reennaan/unknown/aa343befc725f6feef2a013e7cdfbf4b8f4d69e1/",hy=({text:i,delay:n})=>{const[o,r]=st.useState(""),[c,p]=st.useState(0);return st.useEffect(()=>{if(c<i.length){const m=setTimeout(()=>{r(T=>T+i[c]),p(T=>T+1)},n);return()=>clearTimeout(m)}},[c,n,i]),U.jsx(U.Fragment,{children:o})},db=()=>{const[i,n]=st.useState({main:!0,doom:!1,ai:!1}),[o,r]=st.useState(!1),[c,p]=st.useState("Greetings, traveler... I am the spirit of the woods. Ask me anything."),[m,T]=st.useState(!1),E=$=>{n(ae=>({...ae,[$]:!ae[$]}))},S=()=>{r(!0),new Audio("/HORemake/sounds/save.mp3").play().catch(()=>{}),setTimeout(()=>r(!1),3e3);var ae=document.getElementsByClassName("unsaved");ae[0].textContent="SAVED",ae[0].classList.remove("text-red-600"),ae[0].classList.add("text-green-600");var oe=document.querySelectorAll(".ssquare");oe.forEach(ue=>{ue.classList.remove("bg-red-600","bg-gray-300"),ue.classList.add("bg-green-600")})},{pending:C}=lb.useFormStatus(),[M,w]=st.useState(()=>{const $=localStorage.getItem("glucoseHistory");return $?JSON.parse($):[]}),[D,B]=st.useState(""),Q=$=>{if($.preventDefault(),!D)return;const ae={val:D,time:new Date().toLocaleTimeString()};w(oe=>[ae,...oe].slice(0,5)),B("")};st.useEffect(()=>{localStorage.setItem("glucoseHistory",JSON.stringify(M))},[M]);const Y=async $=>{T(!0);const ae=fb.REACT_APP_WEATHER_API_KEY;try{const ue=await new rb({apiKey:ae}).models.generateContent({model:"gemini-3-flash-preview",contents:$,config:{systemInstruction:"You are a cryptic but helpful 90s-style digital forest spirit living in a .zip file. Your speech is glitchy, poetic, and retro. Use short sentences."}});p(ue.text||"The signal is lost in the thicket...")}catch(oe){console.log(oe),p("ERROR: SPIRIT_LINK_BROKEN. The signal is weak.")}finally{T(!1)}};return U.jsxs("div",{className:"relative w-screen h-screen bg-black overflow-hidden select-none flex flex-col",children:[U.jsx("img",{src:`${Fi}img/background.gif`,className:"absolute inset-0 w-full h-full object-cover z-0 no-select select-none",alt:"Background"}),U.jsx(L0,{}),U.jsxs("div",{className:"absolute top-4 left-4 flex flex-col md:flex-row md:top-auto md:bottom-16 md:left-4 gap-4 md:gap-6 z-10",children:[U.jsx(Ju,{name:"Doom.exe",iconUrl:`${Fi}img/doomicon.png`,onDoubleClick:()=>E("doom")}),U.jsx(Ju,{name:"ForestSpirit.lnk",iconUrl:"https://img.icons8.com/color/48/ghost.png",onDoubleClick:()=>E("ai")}),U.jsx(Ju,{name:"MyComputer",iconUrl:"https://img.icons8.com/color/48/monitor--v1.png",onDoubleClick:()=>E("main")}),U.jsx(Ju,{name:"Thoughs",iconUrl:"/HORemake/img/hipnose.ico",onDoubleClick:()=>window.location.assign("https://hiddenwoods.neocities.org/blog")})]}),i.main&&U.jsx(sd,{title:"hiddenwoods.zip",onClose:()=>E("main"),className:"top-[48%] left-1/2 -translate-x-1/2 -translate-y-1/2 w-[95vw] sm:w-[85vw] md:w-[700px] z-20 h-[90vh] md:h-[90vh] max-h-[1200px]",children:U.jsxs("div",{className:"p-2 md:p-4 bg-[#f5eee4] h-full overflow-y-auto custom-scrollbar flex flex-col gap-4",children:[U.jsxs("div",{className:"relative flex-shrink-0 flex items-center justify-center h-20 md:h-28",children:[U.jsx("img",{src:`${Fi}img/titlebackgroud.gif`,className:"absolute inset-0 w-full h-full object-cover opacity-80"}),U.jsxs("div",{className:"relative flex items-center gap-2 md:gap-4 z-10 text-center",children:[U.jsx("img",{src:`${Fi}img/smileds1.gif`,className:"w-6 h-6 md:w-8 md:h-8"}),U.jsx("h1",{className:"text-3xl md:text-5xl font-bold glitch-text text-green-400",style:{textShadow:"2px 2px #000"},children:"hiddenwoods.zip"}),U.jsx("img",{src:`${Fi}img/smileds1.gif`,className:"w-6 h-6 md:w-8 md:h-8"})]})]}),U.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 flex-shrink-0",children:[U.jsx(q0,{assetBase:Fi}),U.jsxs("div",{className:"flex flex-col gap-4",children:[U.jsxs("div",{className:"win95-border p-4 bg-[#fffef0] relative overflow-hidden flex-shrink-0 min-h-[220px] flex flex-col",children:[U.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-blue-600 opacity-30"}),U.jsxs("div",{className:"flex justify-between items-start mb-3 border-b border-gray-300 pb-1",children:[U.jsxs("div",{className:"flex flex-col",children:[U.jsx("p",{className:"text-[10px] font-black uppercase text-gray-400 leading-none mb-1",children:"Incoming Transmission"}),U.jsx("p",{className:"text-[11px] font-bold text-gray-800",children:"From: Shalashaska-"})]}),U.jsx("img",{src:"https://img.icons8.com/color/16/verified-badge.png",className:"w-4 h-4 opacity-70",alt:"Verified"})]}),U.jsxs("div",{className:"text-[11px] leading-relaxed z-10 relative font-mono text-gray-800 flex-grow",children:[U.jsx("span",{className:"text-blue-600 font-bold mr-1 animate-pulse",children:"_"}),U.jsx(hy,{text:"im a very skilled java developer, i swear. try checking out some of my projects, especially ",delay:30}),U.jsx("span",{className:"rpg-glow font-bold bg-black px-1 mx-1 text-white inline-block transform -rotate-1 skew-x-2",children:"MANGO"}),U.jsx(hy,{text:" and contact me via fax if you have any suggestions.",delay:30})]}),U.jsxs("div",{className:"mt-4 pt-3 border-t border-dotted border-gray-400 flex justify-between items-center text-[9px] font-mono text-gray-500",children:[U.jsx("span",{children:"SENT: 1999/12/31 23:59:59"}),U.jsxs("div",{className:"flex gap-2",children:[U.jsx("span",{className:"bg-blue-100 px-1 border border-blue-200",children:"PRIORITY: HIGH"}),U.jsx("span",{className:"bg-gray-100 px-1 border border-gray-200",children:"ENCRYPTED"})]})]})]}),U.jsx("div",{className:"flex-shrink-0 h-[180px]",children:U.jsx(z0,{assetBase:Fi})})]})]}),U.jsx("div",{className:"flex-shrink-0 pb-4",children:U.jsx(V0,{})})]})}),U.jsx("div",{className:"fixed right-2 md:top-[calc(7.5vh+510px)] md:left-[calc(50%+22.6975rem)] md:bottom-auto z-[900] win95-border bg-[#c0c0c0] w-[10rem] md:w-[17.3125rem] p-[.125rem] shadow-lg hidden sm:block max-h-700",children:U.jsx(G0,{title:"GlucoseMonitor",className:"bg-white border border-[#808080] m-[2px] overflow-hidden relative h-full flex flex-col",children:U.jsxs("div",{className:"internal-state-box",children:[U.jsx("div",{style:{fontSize:"11px",fontWeight:"bold",marginBottom:"4px",background:"#c0c0c0",padding:"4",borderBottom:"1px solid #808080"},children:"INTERNAL STATE"}),U.jsxs("form",{onSubmit:Q,children:[U.jsx("div",{style:{fontSize:"13px",color:"#444"},children:"What is your blood sugar level? answer us..."}),U.jsx("input",{style:{background:"black",color:"#00ff00",width:"95%",fontSize:".9375rem",outline:"none",left:"3%"},className:"retro-input m-[5px]",type:"number",placeholder:"000",value:D,onChange:$=>B($.target.value)}),U.jsxs("button",{disabled:C,className:"win95-button m-[5px]",type:"submit",style:{padding:"5px",fontFamily:'"MS Sans Serif", "Tahoma", sans-serif',fontSize:"8"},children:[" ",C?"Submitting...":"Log Entry"]})]}),U.jsxs("div",{className:"m-[5px]",style:{marginTop:"10px",fontSize:"10px",fontFamily:"monospace"},children:[U.jsx("div",{style:{fontWeight:"bold"},children:"RECENT LOGS:"}),M.length===0?U.jsx("div",{style:{opacity:.5},children:"... NO DATA ..."}):M.map(($,ae)=>U.jsxs("div",{className:"crnt-line",children:[$.time,"  ",$.val," mg/dL"]},ae))]})]})})}),U.jsx("div",{className:"fixed top-[-5%] left-1/2 translate-x-[500px] z-[1000] pointer-events-auto",children:U.jsx(F0,{assetBase:Fi})}),U.jsxs("div",{className:"fixed bottom-14 right-2 md:top-[calc(7.5vh+305px)] md:left-[calc(50%+22.6975rem)] md:bottom-auto z-[20] win95-border bg-[#c0c0c0] w-[10rem] md:w-[17.3125rem] p-[.125rem] shadow-lg hidden sm:block",children:[U.jsxs("div",{className:"bg-[#000080] text-white flex items-center justify-between px-1 py-[2px] select-none text-[10px] font-bold",children:[U.jsx("span",{children:"advertisements.txt"}),U.jsx("button",{className:"win95-button w-3 h-3 flex items-center justify-center text-[8px] text-black",children:""})]}),U.jsx("div",{className:"bg-white m-[1px] p-1 flex justify-center items-center h-[145px] md:h-[175px]",children:U.jsx("iframe",{width:"100%",height:"100%",style:{border:"none",overflow:"hidden"},src:"https://dimden.neocities.org/navlink/",name:"neolink"})})]}),i.doom&&U.jsx(sd,{title:"Doom.exe",onClose:()=>E("doom"),className:"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[95vw] md:w-[645px] h-[60vh] md:h-[480px] z-[1001]",children:U.jsx(J0,{})}),U.jsx(cb,{}),i.ai&&U.jsx(sd,{title:"ForestSpirit.exe",onClose:()=>E("ai"),className:"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 md:top-1/4 md:right-480 md:left-auto md:translate-x-0 md:translate-y-0 w-[90vw] md:w-[400px] z-40",children:U.jsxs("div",{className:"p-4 bg-black text-green-500 font-mono text-xs h-[250px] md:h-[300px] flex flex-col justify-between",children:[U.jsxs("div",{className:"overflow-y-auto mb-4 custom-scrollbar",children:[U.jsx("p",{className:"mb-2 uppercase text-white border-b border-green-900 pb-1",children:"[Link Established]"}),U.jsx("p",{className:"italic",children:m?">>> Recalibrating signal...":c})]}),U.jsxs("div",{className:"flex gap-2 border-t border-green-900 pt-2",children:[U.jsx("span",{className:"text-white",children:">"}),U.jsx("input",{type:"text",placeholder:"Talk to the spirit...",className:"bg-transparent text-green-400 flex-grow focus:outline-none",onKeyDown:$=>{$.key==="Enter"&&$.currentTarget.value.trim()&&(Y($.currentTarget.value),$.currentTarget.value="")}})]})]})}),U.jsxs("div",{className:"fixed bottom-0 w-full h-10 bg-[#c0c0c0] win95-border border-t-2 flex items-center px-2 z-50",children:[U.jsxs("button",{className:"win95-button flex items-center gap-1 px-2 md:px-3 py-1 font-bold text-xs md:text-sm mr-2",children:[U.jsx("img",{src:"https://img.icons8.com/color/24/windows-logo.png",className:"w-3 h-3 md:w-4 md:h-4",alt:"Start"}),U.jsx("span",{className:"hidden xs:inline",children:"Start"})]}),U.jsxs("div",{className:"flex-grow flex gap-1 md:gap-2 h-full py-1 overflow-hidden",children:[i.main&&U.jsx("div",{className:"win95-button px-2 md:px-4 flex items-center text-[10px] md:text-xs truncate max-w-[80px] md:max-w-[120px] font-bold",children:"hiddenwoods"}),i.doom&&U.jsx("div",{className:"win95-button px-2 md:px-4 flex items-center text-[10px] md:text-xs truncate max-w-[80px] md:max-w-[120px] font-bold bg-[#dfdfdf]",children:"Doom.exe"}),i.ai&&U.jsx("div",{className:"win95-button px-2 md:px-4 flex items-center text-[10px] md:text-xs truncate max-w-[80px] md:max-w-[120px] font-bold",children:"ForestSpirit"})]}),U.jsx("img",{src:`${Fi}img/worldwideweb_badge.gif`,className:"h-6 md:h-8 mx-2 md:mx-4 hidden xs:block",alt:"Badge"}),U.jsx("div",{className:"win95-border px-2 md:px-4 py-1 text-[10px] md:text-xs font-bold flex items-center bg-[#c0c0c0] inset-shadow ml-auto",children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),U.jsx("div",{id:"red-paper",onClick:S,className:"fixed bottom-14 right-4 w-10 h-10 bg-red-600/60 hover:bg-red-600 cursor-pointer flex items-center justify-center transition-transform hover:scale-110 z-50",children:U.jsx("span",{className:"text-[9px] text-white font-bold text-center leading-tight"})}),o&&U.jsx("div",{className:"fixed bottom-24 left-1/2 -translate-x-1/2 flex items-center gap-0 z-[10001] animate-pulse",children:U.jsx("img",{src:"./img/piramidhead3.png"})})]})},gv=document.getElementById("root");if(!gv)throw new Error("Could not find root element");const hb=U0.createRoot(gv);hb.render(U.jsx(gy.StrictMode,{children:U.jsx(db,{})}));
